"use strict";(self.webpackChunksheryl_mythology=self.webpackChunksheryl_mythology||[]).push([[179],{18:(Xc,dw,x0)=>{function mt(i){return"function"==typeof i}function fw(i){const r=i(l=>{Error.call(l),l.stack=(new Error).stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}const pw=fw(i=>function(r){i(this),this.message=r?`${r.length} errors occurred during unsubscription:\n${r.map((l,h)=>`${h+1}) ${l.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=r});function D0(i,o){if(i){const r=i.indexOf(o);0<=r&&i.splice(r,1)}}class Cs{constructor(o){this.initialTeardown=o,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let o;if(!this.closed){this.closed=!0;const{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(const d of r)d.remove(this);else r.remove(this);const{initialTeardown:l}=this;if(mt(l))try{l()}catch(d){o=d instanceof pw?d.errors:[d]}const{_teardowns:h}=this;if(h){this._teardowns=null;for(const d of h)try{yw(d)}catch(m){o=null!=o?o:[],m instanceof pw?o=[...o,...m.errors]:o.push(m)}}if(o)throw new pw(o)}}add(o){var r;if(o&&o!==this)if(this.closed)yw(o);else{if(o instanceof Cs){if(o.closed||o._hasParent(this))return;o._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(o)}}_hasParent(o){const{_parentage:r}=this;return r===o||Array.isArray(r)&&r.includes(o)}_addParent(o){const{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(o),r):r?[r,o]:o}_removeParent(o){const{_parentage:r}=this;r===o?this._parentage=null:Array.isArray(r)&&D0(r,o)}remove(o){const{_teardowns:r}=this;r&&D0(r,o),o instanceof Cs&&o._removeParent(this)}}Cs.EMPTY=(()=>{const i=new Cs;return i.closed=!0,i})();const gw=Cs.EMPTY;function mw(i){return i instanceof Cs||i&&"closed"in i&&mt(i.remove)&&mt(i.add)&&mt(i.unsubscribe)}function yw(i){mt(i)?i():i.unsubscribe()}const Zc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Gg={setTimeout(...i){const{delegate:o}=Gg;return((null==o?void 0:o.setTimeout)||setTimeout)(...i)},clearTimeout(i){const{delegate:o}=Gg;return((null==o?void 0:o.clearTimeout)||clearTimeout)(i)},delegate:void 0};function vw(i){Gg.setTimeout(()=>{const{onUnhandledError:o}=Zc;if(!o)throw i;o(i)})}function Sf(){}const GT=ww("C",void 0,void 0);function ww(i,o,r){return{kind:i,value:o,error:r}}let Jc=null;function b0(i){if(Zc.useDeprecatedSynchronousErrorHandling){const o=!Jc;if(o&&(Jc={errorThrown:!1,error:null}),i(),o){const{errorThrown:r,error:l}=Jc;if(Jc=null,r)throw l}}else i()}class M0 extends Cs{constructor(o){super(),this.isStopped=!1,o?(this.destination=o,mw(o)&&o.add(this)):this.destination=WT}static create(o,r,l){return new C0(o,r,l)}next(o){this.isStopped?xw(function zT(i){return ww("N",i,void 0)}(o),this):this._next(o)}error(o){this.isStopped?xw(function UT(i){return ww("E",void 0,i)}(o),this):(this.isStopped=!0,this._error(o))}complete(){this.isStopped?xw(GT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(o){this.destination.next(o)}_error(o){try{this.destination.error(o)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const sb=Function.prototype.bind;function _w(i,o){return sb.call(i,o)}class $T{constructor(o){this.partialObserver=o}next(o){const{partialObserver:r}=this;if(r.next)try{r.next(o)}catch(l){T0(l)}}error(o){const{partialObserver:r}=this;if(r.error)try{r.error(o)}catch(l){T0(l)}else T0(o)}complete(){const{partialObserver:o}=this;if(o.complete)try{o.complete()}catch(r){T0(r)}}}class C0 extends M0{constructor(o,r,l){let h;if(super(),mt(o)||!o)h={next:null!=o?o:void 0,error:null!=r?r:void 0,complete:null!=l?l:void 0};else{let d;this&&Zc.useDeprecatedNextContext?(d=Object.create(o),d.unsubscribe=()=>this.unsubscribe(),h={next:o.next&&_w(o.next,d),error:o.error&&_w(o.error,d),complete:o.complete&&_w(o.complete,d)}):h=o}this.destination=new $T(h)}}function T0(i){Zc.useDeprecatedSynchronousErrorHandling?function ob(i){Zc.useDeprecatedSynchronousErrorHandling&&Jc&&(Jc.errorThrown=!0,Jc.error=i)}(i):vw(i)}function xw(i,o){const{onStoppedNotification:r}=Zc;r&&Gg.setTimeout(()=>r(i,o))}const WT={closed:!0,next:Sf,error:function YT(i){throw i},complete:Sf},Dw="function"==typeof Symbol&&Symbol.observable||"@@observable";function su(i){return i}let xn=(()=>{class i{constructor(r){r&&(this._subscribe=r)}lift(r){const l=new i;return l.source=this,l.operator=r,l}subscribe(r,l,h){const d=function ub(i){return i&&i instanceof M0||function KT(i){return i&&mt(i.next)&&mt(i.error)&&mt(i.complete)}(i)&&mw(i)}(r)?r:new C0(r,l,h);return b0(()=>{const{operator:m,source:w}=this;d.add(m?m.call(d,w):w?this._subscribe(d):this._trySubscribe(d))}),d}_trySubscribe(r){try{return this._subscribe(r)}catch(l){r.error(l)}}forEach(r,l){return new(l=lb(l))((h,d)=>{const m=new C0({next:w=>{try{r(w)}catch(x){d(x),m.unsubscribe()}},error:d,complete:h});this.subscribe(m)})}_subscribe(r){var l;return null===(l=this.source)||void 0===l?void 0:l.subscribe(r)}[Dw](){return this}pipe(...r){return function ab(i){return 0===i.length?su:1===i.length?i[0]:function(r){return i.reduce((l,h)=>h(l),r)}}(r)(this)}toPromise(r){return new(r=lb(r))((l,h)=>{let d;this.subscribe(m=>d=m,m=>h(m),()=>l(d))})}}return i.create=o=>new i(o),i})();function lb(i){var o;return null!==(o=null!=i?i:Zc.Promise)&&void 0!==o?o:Promise}const XT=fw(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Mi=(()=>{class i extends xn{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){const l=new hb(this,this);return l.operator=r,l}_throwIfClosed(){if(this.closed)throw new XT}next(r){b0(()=>{if(this._throwIfClosed(),!this.isStopped){const l=this.observers.slice();for(const h of l)h.next(r)}})}error(r){b0(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;const{observers:l}=this;for(;l.length;)l.shift().error(r)}})}complete(){b0(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var r;return(null===(r=this.observers)||void 0===r?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){const{hasError:l,isStopped:h,observers:d}=this;return l||h?gw:(d.push(r),new Cs(()=>D0(d,r)))}_checkFinalizedStatuses(r){const{hasError:l,thrownError:h,isStopped:d}=this;l?r.error(h):d&&r.complete()}asObservable(){const r=new xn;return r.source=this,r}}return i.create=(o,r)=>new hb(o,r),i})();class hb extends Mi{constructor(o,r){super(),this.destination=o,this.source=r}next(o){var r,l;null===(l=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===l||l.call(r,o)}error(o){var r,l;null===(l=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===l||l.call(r,o)}complete(){var o,r;null===(r=null===(o=this.destination)||void 0===o?void 0:o.complete)||void 0===r||r.call(o)}_subscribe(o){var r,l;return null!==(l=null===(r=this.source)||void 0===r?void 0:r.subscribe(o))&&void 0!==l?l:gw}}function cb(i){return mt(null==i?void 0:i.lift)}function Hi(i){return o=>{if(cb(o))return o.lift(function(r){try{return i(r,this)}catch(l){this.error(l)}});throw new TypeError("Unable to lift unknown Observable type")}}function $n(i,o,r,l,h){return new ZT(i,o,r,l,h)}class ZT extends M0{constructor(o,r,l,h,d,m){super(o),this.onFinalize=d,this.shouldUnsubscribe=m,this._next=r?function(w){try{r(w)}catch(x){o.error(x)}}:super._next,this._error=h?function(w){try{h(w)}catch(x){o.error(x)}finally{this.unsubscribe()}}:super._error,this._complete=l?function(){try{l()}catch(w){o.error(w)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var o;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:r}=this;super.unsubscribe(),!r&&(null===(o=this.onFinalize)||void 0===o||o.call(this))}}}function Je(i,o){return Hi((r,l)=>{let h=0;r.subscribe($n(l,d=>{l.next(i.call(o,d,h++))}))})}function rh(i){return this instanceof rh?(this.v=i,this):new rh(i)}function rS(i,o,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var h,l=r.apply(i,o||[]),d=[];return h={},m("next"),m("throw"),m("return"),h[Symbol.asyncIterator]=function(){return this},h;function m(H){l[H]&&(h[H]=function(B){return new Promise(function($,X){d.push([H,B,$,X])>1||w(H,B)})})}function w(H,B){try{!function x(H){H.value instanceof rh?Promise.resolve(H.value.v).then(M,N):I(d[0][2],H)}(l[H](B))}catch($){I(d[0][3],$)}}function M(H){w("next",H)}function N(H){w("throw",H)}function I(H,B){H(B),d.shift(),d.length&&w(d[0][0],d[0][1])}}function oS(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=i[Symbol.asyncIterator];return o?o.call(i):(i=function fb(i){var o="function"==typeof Symbol&&Symbol.iterator,r=o&&i[o],l=0;if(r)return r.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&l>=i.length&&(i=void 0),{value:i&&i[l++],done:!i}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),r={},l("next"),l("throw"),l("return"),r[Symbol.asyncIterator]=function(){return this},r);function l(d){r[d]=i[d]&&function(m){return new Promise(function(w,x){!function h(d,m,w,x){Promise.resolve(x).then(function(M){d({value:M,done:w})},m)}(w,x,(m=i[d](m)).done,m.value)})}}}const Tw=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function gb(i){return mt(null==i?void 0:i.then)}function mb(i){return mt(i[Dw])}function yb(i){return Symbol.asyncIterator&&mt(null==i?void 0:i[Symbol.asyncIterator])}function vb(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const wb=function aS(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function _b(i){return mt(null==i?void 0:i[wb])}function xb(i){return rS(this,arguments,function*(){const r=i.getReader();try{for(;;){const{value:l,done:h}=yield rh(r.read());if(h)return yield rh(void 0);yield yield rh(l)}}finally{r.releaseLock()}})}function Db(i){return mt(null==i?void 0:i.getReader)}function Vr(i){if(i instanceof xn)return i;if(null!=i){if(mb(i))return function lS(i){return new xn(o=>{const r=i[Dw]();if(mt(r.subscribe))return r.subscribe(o);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(Tw(i))return function uS(i){return new xn(o=>{for(let r=0;r<i.length&&!o.closed;r++)o.next(i[r]);o.complete()})}(i);if(gb(i))return function hS(i){return new xn(o=>{i.then(r=>{o.closed||(o.next(r),o.complete())},r=>o.error(r)).then(null,vw)})}(i);if(yb(i))return S(i);if(_b(i))return function cS(i){return new xn(o=>{for(const r of i)if(o.next(r),o.closed)return;o.complete()})}(i);if(Db(i))return function bb(i){return S(xb(i))}(i)}throw vb(i)}function S(i){return new xn(o=>{(function Sw(i,o){var r,l,h,d;return function db(i,o,r,l){return new(r||(r=Promise))(function(d,m){function w(N){try{M(l.next(N))}catch(I){m(I)}}function x(N){try{M(l.throw(N))}catch(I){m(I)}}function M(N){N.done?d(N.value):function h(d){return d instanceof r?d:new r(function(m){m(d)})}(N.value).then(w,x)}M((l=l.apply(i,o||[])).next())})}(this,void 0,void 0,function*(){try{for(r=oS(i);!(l=yield r.next()).done;)if(o.next(l.value),o.closed)return}catch(m){h={error:m}}finally{try{l&&!l.done&&(d=r.return)&&(yield d.call(r))}finally{if(h)throw h.error}}o.complete()})})(i,o).catch(r=>o.error(r))})}function Ra(i,o,r,l=0,h=!1){const d=o.schedule(function(){r(),h?i.add(this.schedule(null,l)):this.unsubscribe()},l);if(i.add(d),!h)return d}function fi(i,o,r=1/0){return mt(o)?fi((l,h)=>Je((d,m)=>o(l,d,h,m))(Vr(i(l,h))),r):("number"==typeof o&&(r=o),Hi((l,h)=>function Mb(i,o,r,l,h,d,m,w){const x=[];let M=0,N=0,I=!1;const H=()=>{I&&!x.length&&!M&&o.complete()},B=X=>M<l?$(X):x.push(X),$=X=>{d&&o.next(X),M++;let lt=!1;Vr(r(X,N++)).subscribe($n(o,ht=>{null==h||h(ht),d?B(ht):o.next(ht)},()=>{lt=!0},void 0,()=>{if(lt)try{for(M--;x.length&&M<l;){const ht=x.shift();m?Ra(o,m,()=>$(ht)):$(ht)}H()}catch(ht){o.error(ht)}}))};return i.subscribe($n(o,B,()=>{I=!0,H()})),()=>{null==w||w()}}(l,h,i,r)))}function oh(i=1/0){return fi(su,i)}const oa=new xn(i=>i.complete());function Wt(i){return i&&mt(i.schedule)}function kt(i){return i[i.length-1]}function Ug(i){return mt(kt(i))?i.pop():void 0}function Nf(i){return Wt(kt(i))?i.pop():void 0}function gt(i,o=0){return Hi((r,l)=>{r.subscribe($n(l,h=>Ra(l,i,()=>l.next(h),o),()=>Ra(l,i,()=>l.complete(),o),h=>Ra(l,i,()=>l.error(h),o)))})}function au(i,o=0){return Hi((r,l)=>{l.add(i.schedule(()=>r.subscribe(l),o))})}function It(i,o){if(!i)throw new Error("Iterable cannot be null");return new xn(r=>{Ra(r,o,()=>{const l=i[Symbol.asyncIterator]();Ra(r,o,()=>{l.next().then(h=>{h.done?r.complete():r.next(h.value)})},0,!0)})})}function Kt(i,o){return o?function Ci(i,o){if(null!=i){if(mb(i))return function S0(i,o){return Vr(i).pipe(au(o),gt(o))}(i,o);if(Tw(i))return function Wo(i,o){return new xn(r=>{let l=0;return o.schedule(function(){l===i.length?r.complete():(r.next(i[l++]),r.closed||this.schedule())})})}(i,o);if(gb(i))return function lu(i,o){return Vr(i).pipe(au(o),gt(o))}(i,o);if(yb(i))return It(i,o);if(_b(i))return function q(i,o){return new xn(r=>{let l;return Ra(r,o,()=>{l=i[wb](),Ra(r,o,()=>{let h,d;try{({value:h,done:d}=l.next())}catch(m){return void r.error(m)}d?r.complete():r.next(h)},0,!0)}),()=>mt(null==l?void 0:l.return)&&l.return()})}(i,o);if(Db(i))return function ae(i,o){return It(xb(i),o)}(i,o)}throw vb(i)}(i,o):Vr(i)}function Ti(i){return i<=0?()=>oa:Hi((o,r)=>{let l=0;o.subscribe($n(r,h=>{++l<=i&&(r.next(h),i<=l&&r.complete())}))})}function gl(i,o,...r){return!0===o?(i(),null):!1===o?null:o(...r).pipe(Ti(1)).subscribe(()=>i())}function Lt(i){for(let o in i)if(i[o]===Lt)return o;throw Error("Could not find renamed property on target object.")}function Be(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Be).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const r=o.indexOf("\n");return-1===r?o:o.substring(0,r)}function xr(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const Ew=Lt({__forward_ref__:Lt});function pe(i){return i.__forward_ref__=pe,i.toString=function(){return Be(this())},i}function Tt(i){return function N0(i){return"function"==typeof i&&i.hasOwnProperty(Ew)&&i.__forward_ref__===pe}(i)?i():i}class Se extends Error{constructor(o,r){super(function kf(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,r)),this.code=o}}function ce(i){return"string"==typeof i?i:null==i?"":String(i)}function Q(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ce(i)}function sh(i,o){const r=o?` in ${o}`:"";throw new Se(-201,`No provider for ${Q(i)} found${r}`)}function ne(i,o){null==i&&function de(i,o,r,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${r} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function A(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Qe(i){return{providers:i.providers||[],imports:i.imports||[]}}function $g(i){return ei(i,Ko)||ei(i,E0)}function ei(i,o){return i.hasOwnProperty(o)?i[o]:null}function Yg(i){return i&&(i.hasOwnProperty(Wg)||i.hasOwnProperty(Pw))?i[Wg]:null}const Ko=Lt({\u0275prov:Lt}),Wg=Lt({\u0275inj:Lt}),E0=Lt({ngInjectableDef:Lt}),Pw=Lt({ngInjectorDef:Lt});var fe=(()=>((fe=fe||{})[fe.Default=0]="Default",fe[fe.Host=1]="Host",fe[fe.Self=2]="Self",fe[fe.SkipSelf=4]="SkipSelf",fe[fe.Optional=8]="Optional",fe))();let Ef;function Xo(i){const o=Ef;return Ef=i,o}function Pf(i,o,r){const l=$g(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:r&fe.Optional?null:void 0!==o?o:void sh(Be(i),"Injector")}function So(i){return{toString:i}.toString()}var Ts=(()=>((Ts=Ts||{})[Ts.OnPush=0]="OnPush",Ts[Ts.Default=1]="Default",Ts))(),la=(()=>{return(i=la||(la={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",la;var i})();const Iw="undefined"!=typeof globalThis&&globalThis,Fw="undefined"!=typeof window&&window,z="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,gn=Iw||"undefined"!=typeof global&&global||Fw||z,yl={},Mn=[],Af=Lt({\u0275cmp:Lt}),mn=Lt({\u0275dir:Lt}),Br=Lt({\u0275pipe:Lt}),P0=Lt({\u0275mod:Lt}),Ss=Lt({\u0275fac:Lt}),Qc=Lt({__NG_ELEMENT_ID__:Lt});let A0=0;function Ct(i){return So(()=>{const r={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Ts.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||Mn,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||la.Emulated,id:"c",styles:i.styles||Mn,_:null,setInput:null,schemas:i.schemas||null,tView:null},h=i.directives,d=i.features,m=i.pipes;return l.id+=A0++,l.inputs=Vn(i.inputs,r),l.outputs=Vn(i.outputs),d&&d.forEach(w=>w(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(O0):null,l.pipeDefs=m?()=>("function"==typeof m?m():m).map(lh):null,l})}function O0(i){return ki(i)||function Ns(i){return i[mn]||null}(i)}function lh(i){return function Ut(i){return i[Br]||null}(i)}const I0={};function rn(i){return So(()=>{const o={type:i.type,bootstrap:i.bootstrap||Mn,declarations:i.declarations||Mn,imports:i.imports||Mn,exports:i.exports||Mn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(I0[i.id]=i.type),o})}function Vn(i,o){if(null==i)return yl;const r={};for(const l in i)if(i.hasOwnProperty(l)){let h=i[l],d=h;Array.isArray(h)&&(d=h[1],h=h[0]),r[h]=l,o&&(o[h]=d)}return r}const St=Ct;function ki(i){return i[Af]||null}function Gr(i,o){const r=i[P0]||null;if(!r&&!0===o)throw new Error(`Type ${Be(i)} does not have '\u0275mod' property.`);return r}function Es(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ps(i){return Array.isArray(i)&&!0===i[1]}function Kg(i){return 0!=(8&i.flags)}function Et(i){return 2==(2&i.flags)}function Ff(i){return 1==(1&i.flags)}function V(i){return null!==i.template}function rt(i){return 0!=(512&i[2])}function Ve(i,o){return i.hasOwnProperty(Ss)?i[Ss]:null}class dn{constructor(o,r,l){this.previousValue=o,this.currentValue=r,this.firstChange=l}isFirstChange(){return this.firstChange}}function _e(){return Re}function Re(i){return i.type.prototype.ngOnChanges&&(i.setInput=zt),Vw}function Vw(){const i=be(this),o=null==i?void 0:i.current;if(o){const r=i.previous;if(r===yl)i.previous=o;else for(let l in o)r[l]=o[l];i.current=null,this.ngOnChanges(o)}}function zt(i,o,r,l){const h=be(i)||function Gw(i,o){return i[Bw]=o}(i,{previous:yl,current:null}),d=h.current||(h.current={}),m=h.previous,w=this.declaredInputs[r],x=m[w];d[w]=new dn(x&&x.currentValue,o,m===yl),i[l]=o}_e.ngInherit=!0;const Bw="__ngSimpleChanges__";function be(i){return i[Bw]||null}let jf;function ri(i){return!!i.listen}const du={createRenderer:(i,o)=>function Hf(){return void 0!==jf?jf:"undefined"!=typeof document?document:void 0}()};function mi(i){for(;Array.isArray(i);)i=i[0];return i}function qo(i,o){return mi(o[i.index])}function V0(i,o){return i.data[o]}function Qo(i,o){const r=o[i];return Es(r)?r:r[0]}function B0(i){return 4==(4&i[2])}function Ml(i){return 128==(128&i[2])}function ho(i,o){return null==o?null:i[o]}function Bn(i){i[18]=0}function Bf(i,o){i[5]+=o;let r=i,l=i[3];for(;null!==l&&(1===o&&1===r[5]||-1===o&&0===r[5]);)l[5]+=o,r=l,l=l[3]}const re={lFrame:$f(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function G0(){return re.bindingsEnabled}function wt(){return re.lFrame.lView}function Gt(){return re.lFrame.tView}function Pi(){let i=fh();for(;null!==i&&64===i.type;)i=i.parent;return i}function fh(){return re.lFrame.currentTNode}function Is(i,o){const r=re.lFrame;r.currentTNode=i,r.isParent=o}function oi(){return re.lFrame.isParent}function Xi(){re.lFrame.isParent=!1}function ua(){return re.isInCheckNoChangesMode}function co(i){re.isInCheckNoChangesMode=i}function si(){return re.lFrame.bindingIndex++}function Cl(i){const o=re.lFrame,r=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,r}function Kw(i,o){const r=re.lFrame;r.bindingIndex=r.bindingRootIndex=i,fu(o)}function fu(i){re.lFrame.currentDirectiveIndex=i}function nd(){return re.lFrame.currentQueryIndex}function ph(i){re.lFrame.currentQueryIndex=i}function le(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Xw(i,o,r){if(r&fe.SkipSelf){let h=o,d=i;for(;!(h=h.parent,null!==h||r&fe.Host||(h=le(d),null===h||(d=d[15],10&h.type))););if(null===h)return!1;o=h,i=d}const l=re.lFrame=$0();return l.currentTNode=o,l.lView=i,!0}function zf(i){const o=$0(),r=i[1];re.lFrame=o,o.currentTNode=r.firstChild,o.lView=i,o.tView=r,o.contextLView=i,o.bindingIndex=r.bindingStartIndex,o.inI18n=!1}function $0(){const i=re.lFrame,o=null===i?null:i.child;return null===o?$f(i):o}function $f(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function qg(){const i=re.lFrame;return re.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Yf=qg;function Qg(){const i=qg();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Zi(){return re.lFrame.selectedIndex}function Fs(i){re.lFrame.selectedIndex=i}function Gn(){const i=re.lFrame;return V0(i.tView,i.selectedIndex)}function id(i,o){for(let r=o.directiveStart,l=o.directiveEnd;r<l;r++){const d=i.data[r].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:w,ngAfterViewInit:x,ngAfterViewChecked:M,ngOnDestroy:N}=d;m&&(i.contentHooks||(i.contentHooks=[])).push(-r,m),w&&((i.contentHooks||(i.contentHooks=[])).push(r,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(r,w)),x&&(i.viewHooks||(i.viewHooks=[])).push(-r,x),M&&((i.viewHooks||(i.viewHooks=[])).push(r,M),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(r,M)),null!=N&&(i.destroyHooks||(i.destroyHooks=[])).push(r,N)}}function Kf(i,o,r){mh(i,o,3,r)}function tm(i,o,r,l){(3&i[2])===r&&mh(i,o,r,l)}function X0(i,o){let r=i[2];(3&r)===o&&(r&=2047,r+=1,i[2]=r)}function mh(i,o,r,l){const d=null!=l?l:-1,m=o.length-1;let w=0;for(let x=void 0!==l?65535&i[18]:0;x<m;x++)if("number"==typeof o[x+1]){if(w=o[x],null!=l&&w>=l)break}else o[x]<0&&(i[18]+=65536),(w<d||-1==d)&&(rd(i,r,o,x),i[18]=(4294901760&i[18])+x+2),x++}function rd(i,o,r,l){const h=r[l]<0,d=r[l+1],w=i[h?-r[l]:r[l]];if(h){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{d.call(w)}finally{}}}else try{d.call(w)}finally{}}class od{constructor(o,r,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=l}}function yh(i,o,r){const l=ri(i);let h=0;for(;h<r.length;){const d=r[h];if("number"==typeof d){if(0!==d)break;h++;const m=r[h++],w=r[h++],x=r[h++];l?i.setAttribute(o,w,x,m):o.setAttributeNS(m,w,x)}else{const m=d,w=r[++h];gu(m)?l&&i.setProperty(o,m,w):l?i.setAttribute(o,m,w):o.setAttribute(m,w),h++}}return h}function im(i){return 3===i||4===i||6===i}function gu(i){return 64===i.charCodeAt(0)}function Xf(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let r=-1;for(let l=0;l<o.length;l++){const h=o[l];"number"==typeof h?r=h:0===r||Z0(i,r,h,null,-1===r||2===r?o[++l]:null)}}return i}function Z0(i,o,r,l,h){let d=0,m=i.length;if(-1===o)m=-1;else for(;d<i.length;){const w=i[d++];if("number"==typeof w){if(w===o){m=-1;break}if(w>o){m=d-1;break}}}for(;d<i.length;){const w=i[d];if("number"==typeof w)break;if(w===r){if(null===l)return void(null!==h&&(i[d+1]=h));if(l===i[d+1])return void(i[d+2]=h)}d++,null!==l&&d++,null!==h&&d++}-1!==m&&(i.splice(m,0,o),d=m+1),i.splice(d++,0,r),null!==l&&i.splice(d++,0,l),null!==h&&i.splice(d++,0,h)}function J0(i){return-1!==i}function vh(i){return 32767&i}function Cr(i,o){let r=function Qw(i){return i>>16}(i),l=o;for(;r>0;)l=l[15],r--;return l}let q0=!0;function Zf(i){const o=q0;return q0=i,o}let ad=0;function Jf(i,o){const r=om(i,o);if(-1!==r)return r;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,U(l.data,i),U(o,null),U(l.blueprint,null));const h=qf(i,o),d=i.injectorIndex;if(J0(h)){const m=vh(h),w=Cr(h,o),x=w[1].data;for(let M=0;M<8;M++)o[d+M]=w[m+M]|x[m+M]}return o[d+8]=h,d}function U(i,o){i.push(0,0,0,0,0,0,0,0,o)}function om(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function qf(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let r=0,l=null,h=o;for(;null!==h;){const d=h[1],m=d.type;if(l=2===m?d.declTNode:1===m?h[6]:null,null===l)return-1;if(r++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|r<<16}return-1}function Qf(i,o,r){!function rm(i,o,r){let l;"string"==typeof r?l=r.charCodeAt(0)||0:r.hasOwnProperty(Qc)&&(l=r[Qc]),null==l&&(l=r[Qc]=ad++);const h=255&l;o.data[i+(h>>5)]|=1<<h}(i,o,r)}function ld(i,o,r){if(r&fe.Optional)return i;sh(o,"NodeInjector")}function tp(i,o,r,l){if(r&fe.Optional&&void 0===l&&(l=null),0==(r&(fe.Self|fe.Host))){const h=i[9],d=Xo(void 0);try{return h?h.get(o,l,r&fe.Optional):Pf(o,l,r&fe.Optional)}finally{Xo(d)}}return ld(l,o,r)}function sm(i,o,r,l=fe.Default,h){if(null!==i){const d=function Po(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Qc)?i[Qc]:void 0;return"number"==typeof o?o>=0?255&o:e_:o}(r);if("function"==typeof d){if(!Xw(o,i,l))return l&fe.Host?ld(h,r,l):tp(o,r,l,h);try{const m=d(l);if(null!=m||l&fe.Optional)return m;sh(r)}finally{Yf()}}else if("number"==typeof d){let m=null,w=om(i,o),x=-1,M=l&fe.Host?o[16][6]:null;for((-1===w||l&fe.SkipSelf)&&(x=-1===w?qf(i,o):o[w+8],-1!==x&&lm(l,!1)?(m=o[1],w=vh(x),o=Cr(x,o)):w=-1);-1!==w;){const N=o[1];if(wh(d,w,N.data)){const I=Lb(w,o,r,m,l,M);if(I!==tv)return I}x=o[w+8],-1!==x&&lm(l,o[1].data[w+8]===M)&&wh(d,w,o)?(m=N,w=vh(x),o=Cr(x,o)):w=-1}}}return tp(o,r,l,h)}const tv={};function e_(){return new mu(Pi(),wt())}function Lb(i,o,r,l,h,d){const m=o[1],w=m.data[i+8],N=am(w,m,r,null==l?Et(w)&&q0:l!=m&&0!=(3&w.type),h&fe.Host&&d===w);return null!==N?ud(o,m,N,w):tv}function am(i,o,r,l,h){const d=i.providerIndexes,m=o.data,w=1048575&d,x=i.directiveStart,N=d>>20,H=h?w+N:i.directiveEnd;for(let B=l?w:w+N;B<H;B++){const $=m[B];if(B<x&&r===$||B>=x&&$.type===r)return B}if(h){const B=m[x];if(B&&V(B)&&B.type===r)return x}return null}function ud(i,o,r,l){let h=i[r];const d=o.data;if(function em(i){return i instanceof od}(h)){const m=h;m.resolving&&function sa(i,o){const r=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Se(-200,`Circular dependency in DI detected for ${i}${r}`)}(Q(d[r]));const w=Zf(m.canSeeViewProviders);m.resolving=!0;const x=m.injectImpl?Xo(m.injectImpl):null;Xw(i,l,fe.Default);try{h=i[r]=m.factory(void 0,d,i,l),o.firstCreatePass&&r>=l.directiveStart&&function Ba(i,o,r){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:d}=o.type.prototype;if(l){const m=Re(o);(r.preOrderHooks||(r.preOrderHooks=[])).push(i,m),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(i,m)}h&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-i,h),d&&((r.preOrderHooks||(r.preOrderHooks=[])).push(i,d),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(i,d))}(r,d[r],o)}finally{null!==x&&Xo(x),Zf(w),m.resolving=!1,Yf()}}return h}function wh(i,o,r){return!!(r[o+(i>>5)]&1<<i)}function lm(i,o){return!(i&fe.Self||i&fe.Host&&o)}class mu{constructor(o,r){this._tNode=o,this._lView=r}get(o,r,l){return sm(this._tNode,this._lView,o,l,r)}}function _h(i){return function Rb(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const r=i.attrs;if(r){const l=r.length;let h=0;for(;h<l;){const d=r[h];if(im(d))break;if(0===d)h+=2;else if("number"==typeof d)for(h++;h<l&&"string"==typeof r[h];)h++;else{if(d===o)return r[h+1];h+=2}}}return null}(Pi(),i)}const yu="__parameters__";function Dh(i,o,r){return So(()=>{const l=function xh(i){return function(...r){if(i){const l=i(...r);for(const h in l)this[h]=l[h]}}}(o);function h(...d){if(this instanceof h)return l.apply(this,d),this;const m=new h(...d);return w.annotation=m,w;function w(x,M,N){const I=x.hasOwnProperty(yu)?x[yu]:Object.defineProperty(x,yu,{value:[]})[yu];for(;I.length<=N;)I.push(null);return(I[N]=I[N]||[]).push(m),x}}return r&&(h.prototype=Object.create(r.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class ue{constructor(o,r){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=A({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}toString(){return`InjectionToken ${this._desc}`}}const jb=new ue("AnalyzeForEntryComponents");function Ao(i,o){void 0===o&&(o=i);for(let r=0;r<i.length;r++){let l=i[r];Array.isArray(l)?(o===i&&(o=i.slice(0,r)),Ao(l,o)):o!==i&&o.push(l)}return o}function js(i,o){i.forEach(r=>Array.isArray(r)?js(r,o):o(r))}function np(i,o,r){o>=i.length?i.push(r):i.splice(o,0,r)}function _u(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function cd(i,o){const r=[];for(let l=0;l<i;l++)r.push(o);return r}function po(i,o,r){let l=go(i,o);return l>=0?i[1|l]=r:(l=~l,function Ga(i,o,r,l){let h=i.length;if(h==o)i.push(r,l);else if(1===h)i.push(l,i[0]),i[0]=r;else{for(h--,i.push(i[h-1],i[h]);h>o;)i[h]=i[h-2],h--;i[o]=r,i[o+1]=l}}(i,l,o,r)),l}function ip(i,o){const r=go(i,o);if(r>=0)return i[1|r]}function go(i,o){return function rp(i,o,r){let l=0,h=i.length>>r;for(;h!==l;){const d=l+(h-l>>1),m=i[d<<r];if(o===m)return d<<r;m>o?h=d:l=d+1}return~(h<<r)}(i,o,1)}const Mh={},op="__NG_DI_FLAG__",sp="ngTempTokenPath",h_=/\n/gm,ap="__source",c_=Lt({provide:String,useValue:Lt});let pd;function Wr(i){const o=pd;return pd=i,o}function gd(i,o=fe.Default){if(void 0===pd)throw new Se(203,"");return null===pd?Pf(i,void 0,o):pd.get(i,o&fe.Optional?null:void 0,o)}function Bt(i,o=fe.Default){return(function Dt(){return Ef}()||gd)(Tt(i),o)}function md(i){const o=[];for(let r=0;r<i.length;r++){const l=Tt(i[r]);if(Array.isArray(l)){if(0===l.length)throw new Se(900,"");let h,d=fe.Default;for(let m=0;m<l.length;m++){const w=l[m],x=d_(w);"number"==typeof x?-1===x?h=w.token:d|=x:h=w}o.push(Bt(h,d))}else o.push(Bt(l))}return o}function Ch(i,o){return i[op]=o,i.prototype[op]=o,i}function d_(i){return i[op]}const yd=Ch(Dh("Inject",i=>({token:i})),-1),ha=Ch(Dh("Optional"),8),xu=Ch(Dh("SkipSelf"),4);class Oo{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Hs(i){return i instanceof Oo?i.changingThisBreaksApplicationSecurity:i}const ca=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ph=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var En=(()=>((En=En||{})[En.NONE=0]="NONE",En[En.HTML=1]="HTML",En[En.STYLE=2]="STYLE",En[En.SCRIPT=3]="SCRIPT",En[En.URL=4]="URL",En[En.RESOURCE_URL=5]="RESOURCE_URL",En))();function jt(i){const o=function Fh(){const i=wt();return i&&i[12]}();return o?o.sanitize(En.URL,i)||"":function Pl(i,o){const r=function lr(i){return i instanceof Oo&&i.getTypeName()||null}(i);if(null!=r&&r!==o){if("ResourceURL"===r&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${r} (see https://g.co/ng/security#xss)`)}return r===o}(i,"URL")?Hs(i):function Dd(i){return(i=String(i)).match(ca)||i.match(Ph)?i:"unsafe:"+i}(ce(i))}const _m="__ngContext__";function cr(i,o){i[_m]=o}function Cu(i){const o=function Mu(i){return i[_m]||null}(i);return o?Array.isArray(o)?o:o.lView:null}function Ke(i){return i.ngOriginalError}function Dm(i,...o){i.error(...o)}class Ol{constructor(){this._console=console}handleError(o){const r=this._findOriginalError(o),l=function xm(i){return i&&i.ngErrorLogger||Dm}(o);l(this._console,"ERROR",o),r&&l(this._console,"ORIGINAL ERROR",r)}_findOriginalError(o){let r=o&&Ke(o);for(;r&&Ke(r);)r=Ke(r);return r||null}}const fv=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(gn))();function rs(i){return i instanceof Function?i():i}var os=(()=>((os=os||{})[os.Important=1]="Important",os[os.DashCase=2]="DashCase",os))();function Em(i,o){return undefined(i,o)}function Lh(i){const o=i[3];return Ps(o)?o[3]:o}function Im(i){return pv(i[13])}function Fm(i){return pv(i[4])}function pv(i){for(;null!==i&&!Ps(i);)i=i[4];return i}function kd(i,o,r,l,h){if(null!=l){let d,m=!1;Ps(l)?d=l:Es(l)&&(m=!0,l=l[0]);const w=mi(l);0===i&&null!==r?null==h?Ep(o,r,w):Fl(o,r,w,h||null,!0):1===i&&null!==r?Fl(o,r,w,h||null,!0):2===i?function vv(i,o,r){const l=Ap(i,o);l&&function Su(i,o,r,l){ri(i)?i.removeChild(o,r,l):o.removeChild(r)}(i,l,o,r)}(o,w,m):3===i&&o.destroyNode(w),null!=d&&function E_(i,o,r,l,h){const d=r[7];d!==mi(r)&&kd(o,i,l,d,h);for(let w=10;w<r.length;w++){const x=r[w];Nu(x[1],x,i,o,l,d)}}(o,i,d,r,h)}}function Cp(i,o,r){if(ri(i))return i.createElement(o,r);{const l=null!==r?function j0(i){const o=i.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(r):null;return null===l?i.createElement(o):i.createElementNS(l,o)}}function Zr(i,o){const r=i[9],l=r.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Bf(h,-1)),r.splice(l,1)}function en(i,o){if(i.length<=10)return;const r=10+o,l=i[r];if(l){const h=l[17];null!==h&&h!==i&&Zr(h,l),o>0&&(i[r-1][4]=l[4]);const d=_u(i,10+o);!function mv(i,o){Nu(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const m=d[19];null!==m&&m.detachView(d[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Tp(i,o){if(!(256&o[2])){const r=o[11];ri(r)&&r.destroyNode&&Nu(i,o,r,3,null,null),function ss(i){let o=i[13];if(!o)return Sp(i[1],i);for(;o;){let r=null;if(Es(o))r=o[13];else{const l=o[10];l&&(r=l)}if(!r){for(;o&&!o[4]&&o!==i;)Es(o)&&Sp(o[1],o),o=o[3];null===o&&(o=i),Es(o)&&Sp(o[1],o),r=o&&o[4]}o=r}}(o)}}function Sp(i,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function kp(i,o){let r;if(null!=i&&null!=(r=i.destroyHooks))for(let l=0;l<r.length;l+=2){const h=o[r[l]];if(!(h instanceof od)){const d=r[l+1];if(Array.isArray(d))for(let m=0;m<d.length;m+=2){const w=h[d[m]],x=d[m+1];try{x.call(w)}finally{}}else try{d.call(h)}finally{}}}}(i,o),function Np(i,o){const r=i.cleanup,l=o[7];let h=-1;if(null!==r)for(let d=0;d<r.length-1;d+=2)if("string"==typeof r[d]){const m=r[d+1],w="function"==typeof m?m(o):mi(o[m]),x=l[h=r[d+2]],M=r[d+3];"boolean"==typeof M?w.removeEventListener(r[d],x,M):M>=0?l[h=M]():l[h=-M].unsubscribe(),d+=2}else{const m=l[h=r[d+1]];r[d].call(m)}if(null!==l){for(let d=h+1;d<l.length;d++)l[d]();o[7]=null}}(i,o),1===o[1].type&&ri(o[11])&&o[11].destroy();const r=o[17];if(null!==r&&Ps(o[3])){r!==o[3]&&Zr(r,o);const l=o[19];null!==l&&l.detachView(i)}}}function bt(i,o,r){return function Hh(i,o,r){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return r[0];if(2&l.flags){const h=i.data[l.directiveStart].encapsulation;if(h===la.None||h===la.Emulated)return null}return qo(l,r)}(i,o.parent,r)}function Fl(i,o,r,l,h){ri(i)?i.insertBefore(o,r,l,h):o.insertBefore(r,l,h)}function Ep(i,o,r){ri(i)?i.appendChild(o,r):o.appendChild(r)}function Pp(i,o,r,l,h){null!==l?Fl(i,o,r,l,h):Ep(i,o,r)}function Ap(i,o){return ri(i)?i.parentNode(o):o.parentNode}function as(i,o,r){return Jt(i,o,r)}let Jt=function jm(i,o,r){return 40&i.type?qo(i,r):null};function Pd(i,o,r,l){const h=bt(i,l,o),d=o[11],w=as(l.parent||o[6],l,o);if(null!=h)if(Array.isArray(r))for(let x=0;x<r.length;x++)Pp(d,h,r[x],w,!1);else Pp(d,h,r,w,!1)}function Rl(i,o){if(null!==o){const r=o.type;if(3&r)return qo(o,i);if(4&r)return Vh(-1,i[o.index]);if(8&r){const l=o.child;if(null!==l)return Rl(i,l);{const h=i[o.index];return Ps(h)?Vh(-1,h):mi(h)}}if(32&r)return Em(o,i)()||mi(i[o.index]);{const l=Jr(i,o);return null!==l?Array.isArray(l)?l[0]:Rl(Lh(i[16]),l):Rl(i,o.next)}}return null}function Jr(i,o){return null!==o?i[16][6].projection[o.projection]:null}function Vh(i,o){const r=10+i+1;if(r<o.length){const l=o[r],h=l[1].firstChild;if(null!==h)return Rl(l,h)}return o[7]}function Vm(i,o,r,l,h,d,m){for(;null!=r;){const w=l[r.index],x=r.type;if(m&&0===o&&(w&&cr(mi(w),l),r.flags|=4),64!=(64&r.flags))if(8&x)Vm(i,o,r.child,l,h,d,!1),kd(o,i,h,w,d);else if(32&x){const M=Em(r,l);let N;for(;N=M();)kd(o,i,h,N,d);kd(o,i,h,w,d)}else 16&x?Gm(i,o,l,r,h,d):kd(o,i,h,w,d);r=m?r.projectionNext:r.next}}function Nu(i,o,r,l,h,d){Vm(r,l,i.firstChild,o,h,d,!1)}function Gm(i,o,r,l,h,d){const m=r[16],x=m[6].projection[l.projection];if(Array.isArray(x))for(let M=0;M<x.length;M++)kd(o,i,h,x[M],d);else Vm(i,o,x,m[3],h,d,!0)}function wv(i,o,r){ri(i)?i.setAttribute(o,"style",r):o.style.cssText=r}function Um(i,o,r){ri(i)?""===r?i.removeAttribute(o,"class"):i.setAttribute(o,"class",r):o.className=r}function Op(i,o,r){let l=i.length;for(;;){const h=i.indexOf(o,r);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const d=o.length;if(h+d===l||i.charCodeAt(h+d)<=32)return h}r=h+1}}const O_="ng-template";function Kb(i,o,r){let l=0;for(;l<i.length;){let h=i[l++];if(r&&"class"===h){if(h=i[l],-1!==Op(h.toLowerCase(),o,0))return!0}else if(1===h){for(;l<i.length&&"string"==typeof(h=i[l++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function zm(i){return 4===i.type&&i.value!==O_}function I_(i,o,r){return o===(4!==i.type||r?i.value:O_)}function $m(i,o,r){let l=4;const h=i.attrs||[],d=function Ym(i){for(let o=0;o<i.length;o++)if(im(i[o]))return o;return i.length}(h);let m=!1;for(let w=0;w<o.length;w++){const x=o[w];if("number"!=typeof x){if(!m)if(4&l){if(l=2|1&l,""!==x&&!I_(i,x,r)||""===x&&1===o.length){if(ls(l))return!1;m=!0}}else{const M=8&l?x:o[++w];if(8&l&&null!==i.attrs){if(!Kb(i.attrs,M,r)){if(ls(l))return!1;m=!0}continue}const I=Ip(8&l?"class":x,h,zm(i),r);if(-1===I){if(ls(l))return!1;m=!0;continue}if(""!==M){let H;H=I>d?"":h[I+1].toLowerCase();const B=8&l?H:null;if(B&&-1!==Op(B,M,0)||2&l&&M!==H){if(ls(l))return!1;m=!0}}}}else{if(!m&&!ls(l)&&!ls(x))return!1;if(m&&ls(x))continue;m=!1,l=x|1&l}}return ls(l)||m}function ls(i){return 0==(1&i)}function Ip(i,o,r,l){if(null===o)return-1;let h=0;if(l||!r){let d=!1;for(;h<o.length;){const m=o[h];if(m===i)return h;if(3===m||6===m)d=!0;else{if(1===m||2===m){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===m)break;if(0===m){h+=4;continue}}h+=d?1:2}return-1}return function zi(i,o){let r=i.indexOf(4);if(r>-1)for(r++;r<i.length;){const l=i[r];if("number"==typeof l)return-1;if(l===o)return r;r++}return-1}(o,i)}function _v(i,o,r=!1){for(let l=0;l<o.length;l++)if($m(i,o[l],r))return!0;return!1}function Ad(i,o){t:for(let r=0;r<o.length;r++){const l=o[r];if(i.length===l.length){for(let h=0;h<i.length;h++)if(i[h]!==l[h])continue t;return!0}}return!1}function xv(i,o){return i?":not("+o.trim()+")":o}function F_(i){let o=i[0],r=1,l=2,h="",d=!1;for(;r<i.length;){let m=i[r];if("string"==typeof m)if(2&l){const w=i[++r];h+="["+m+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?h+="."+m:4&l&&(h+=" "+m);else""!==h&&!ls(m)&&(o+=xv(d,h),h=""),l=m,d=d||!ls(l);r++}return""!==h&&(o+=xv(d,h)),o}const xe={};function Dv(i,o,r,l){if(!l)if(3==(3&o[2])){const d=i.preOrderCheckHooks;null!==d&&Kf(o,d,r)}else{const d=i.preOrderHooks;null!==d&&tm(o,d,0,r)}Fs(r)}function $a(i,o){return i<<17|o<<2}function qr(i){return i>>17&32767}function Id(i){return 2|i}function Ll(i){return(131068&i)>>2}function Km(i,o){return-131069&i|o<<2}function wi(i){return 1|i}function ty(i,o){const r=i.contentQueries;if(null!==r)for(let l=0;l<r.length;l+=2){const h=r[l],d=r[l+1];if(-1!==d){const m=i.data[d];ph(h),m.contentQueries(2,o[d],d)}}}function Gh(i,o,r,l,h,d,m,w,x,M){const N=o.blueprint.slice();return N[0]=h,N[2]=140|l,Bn(N),N[3]=N[15]=i,N[8]=r,N[10]=m||i&&i[10],N[11]=w||i&&i[11],N[12]=x||i&&i[12]||null,N[9]=M||i&&i[9]||null,N[6]=d,N[16]=2==o.type?i[16]:N,N}function Uh(i,o,r,l,h){let d=i.data[o];if(null===d)d=function ey(i,o,r,l,h){const d=fh(),m=oi(),x=i.data[o]=function Yh(i,o,r,l,h,d){return{type:r,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?d:d&&d.parent,r,o,l,h);return null===i.firstChild&&(i.firstChild=x),null!==d&&(m?null==d.child&&null!==x.parent&&(d.child=x):null===d.next&&(d.next=x)),x}(i,o,r,l,h),function U0(){return re.lFrame.inI18n}()&&(d.flags|=64);else if(64&d.type){d.type=r,d.value=l,d.attrs=h;const m=function Ha(){const i=re.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();d.injectorIndex=null===m?-1:m.injectorIndex}return Is(d,!0),d}function Pn(i,o,r,l){if(0===r)return-1;const h=o.length;for(let d=0;d<r;d++)o.push(l),i.blueprint.push(l),i.data.push(null);return h}function K(i,o,r){zf(o);try{const l=i.viewQuery;null!==l&&Xp(1,l,r);const h=i.template;null!==h&&wa(i,o,h,1,r),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&ty(i,o),i.staticViewQueries&&Xp(2,i.viewQuery,r);const d=i.components;null!==d&&function Ev(i,o){for(let r=0;r<o.length;r++)Us(i,o[r])}(o,d)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,Qg()}}function va(i,o,r,l){const h=o[2];if(256==(256&h))return;zf(o);const d=ua();try{Bn(o),function fo(i){return re.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==r&&wa(i,o,r,2,l);const m=3==(3&h);if(!d)if(m){const M=i.preOrderCheckHooks;null!==M&&Kf(o,M,null)}else{const M=i.preOrderHooks;null!==M&&tm(o,M,0,null),X0(o,0)}if(function ay(i){for(let o=Im(i);null!==o;o=Fm(o)){if(!o[2])continue;const r=o[9];for(let l=0;l<r.length;l++){const h=r[l],d=h[3];0==(1024&h[2])&&Bf(d,1),h[2]|=1024}}}(o),function Wp(i){for(let o=Im(i);null!==o;o=Fm(o))for(let r=10;r<o.length;r++){const l=o[r],h=l[1];Ml(l)&&va(h,l,h.template,l[8])}}(o),null!==i.contentQueries&&ty(i,o),!d)if(m){const M=i.contentCheckHooks;null!==M&&Kf(o,M)}else{const M=i.contentHooks;null!==M&&tm(o,M,1),X0(o,1)}!function kv(i,o){const r=i.hostBindingOpCodes;if(null!==r)try{for(let l=0;l<r.length;l++){const h=r[l];if(h<0)Fs(~h);else{const d=h,m=r[++l],w=r[++l];Kw(m,d),w(2,o[d])}}}finally{Fs(-1)}}(i,o);const w=i.components;null!==w&&function _t(i,o){for(let r=0;r<o.length;r++)Kp(i,o[r])}(o,w);const x=i.viewQuery;if(null!==x&&Xp(2,x,l),!d)if(m){const M=i.viewCheckHooks;null!==M&&Kf(o,M)}else{const M=i.viewHooks;null!==M&&tm(o,M,2),X0(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),d||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Bf(o[3],-1))}finally{Qg()}}function z_(i,o,r,l){const h=o[10],d=!ua(),m=B0(o);try{d&&!m&&h.begin&&h.begin(),m&&K(i,o,l),va(i,o,r,l)}finally{d&&!m&&h.end&&h.end()}}function wa(i,o,r,l,h){const d=Zi(),m=2&l;try{Fs(-1),m&&o.length>20&&Dv(i,o,20,ua()),r(l,h)}finally{Fs(d)}}function Bp(i,o,r){!G0()||(function pr(i,o,r,l){const h=r.directiveStart,d=r.directiveEnd;i.firstCreatePass||Jf(r,o),cr(l,o);const m=r.initialInputs;for(let w=h;w<d;w++){const x=i.data[w],M=V(x);M&&Fv(o,r,x);const N=ud(o,i,w,r);cr(N,o),null!==m&&Yp(0,w-h,N,x,0,m),M&&(Qo(r.index,o)[8]=N)}}(i,o,r,qo(r,o)),128==(128&r.flags)&&function Wa(i,o,r){const l=r.directiveStart,h=r.directiveEnd,m=r.index,w=function Ib(){return re.lFrame.currentDirectiveIndex}();try{Fs(m);for(let x=l;x<h;x++){const M=i.data[x],N=o[x];fu(x),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&Wh(M,N)}}finally{Fs(-1),fu(w)}}(i,o,r))}function Ld(i,o,r=qo){const l=o.localNames;if(null!==l){let h=o.index+1;for(let d=0;d<l.length;d+=2){const m=l[d+1],w=-1===m?r(o,i):i[m];i[h++]=w}}}function zh(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=$h(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function $h(i,o,r,l,h,d,m,w,x,M){const N=20+l,I=N+h,H=function Pv(i,o){const r=[];for(let l=0;l<o;l++)r.push(l<i?null:xe);return r}(N,I),B="function"==typeof M?M():M;return H[1]={type:i,blueprint:H,template:r,queries:null,viewQuery:w,declTNode:o,data:H.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:x,consts:B,incompleteFirstPass:!1}}function iy(i,o,r,l){const h=Z_(o);null===r?h.push(l):(h.push(r),i.firstCreatePass&&Lv(i).push(l,h.length-1))}function $_(i,o,r){for(let l in i)if(i.hasOwnProperty(l)){const h=i[l];(r=null===r?{}:r).hasOwnProperty(l)?r[l].push(o,h):r[l]=[o,h]}return r}function Ov(i,o,r,l){let h=!1;if(G0()){const d=function Up(i,o,r){const l=i.directiveRegistry;let h=null;if(l)for(let d=0;d<l.length;d++){const m=l[d];_v(r,m.selectors,!1)&&(h||(h=[]),Qf(Jf(r,o),i,m.type),V(m)?(zp(i,r),h.unshift(m)):h.push(m))}return h}(i,o,r),m=null===l?null:{"":-1};if(null!==d){h=!0,Hd(r,i.data.length,d.length);for(let N=0;N<d.length;N++){const I=d[N];I.providersResolver&&I.providersResolver(I)}let w=!1,x=!1,M=Pn(i,o,d.length,null);for(let N=0;N<d.length;N++){const I=d[N];r.mergedAttrs=Xf(r.mergedAttrs,I.hostAttrs),Vd(i,r,o,M,I),$p(M,I,m),null!==I.contentQueries&&(r.flags|=8),(null!==I.hostBindings||null!==I.hostAttrs||0!==I.hostVars)&&(r.flags|=128);const H=I.type.prototype;!w&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(r.index),w=!0),!x&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(r.index),x=!0),M++}!function eM(i,o){const l=o.directiveEnd,h=i.data,d=o.attrs,m=[];let w=null,x=null;for(let M=o.directiveStart;M<l;M++){const N=h[M],I=N.inputs,H=null===d||zm(o)?null:sy(I,d);m.push(H),w=$_(I,M,w),x=$_(N.outputs,M,x)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=m,o.inputs=w,o.outputs=x}(i,r)}m&&function oy(i,o,r){if(o){const l=i.localNames=[];for(let h=0;h<o.length;h+=2){const d=r[o[h+1]];if(null==d)throw new Se(-301,!1);l.push(o[h],d)}}}(r,l,m)}return r.mergedAttrs=Xf(r.mergedAttrs,r.attrs),h}function Iv(i,o,r,l,h,d){const m=d.hostBindings;if(m){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const x=~o.index;(function Ii(i){let o=i.length;for(;o>0;){const r=i[--o];if("number"==typeof r&&r<0)return r}return 0})(w)!=x&&w.push(x),w.push(l,h,m)}}function Wh(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function zp(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function $p(i,o,r){if(r){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)r[o.exportAs[l]]=i;V(o)&&(r[""]=i)}}function Hd(i,o,r){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+r,i.providerIndexes=o}function Vd(i,o,r,l,h){i.data[l]=h;const d=h.factory||(h.factory=Ve(h.type)),m=new od(d,V(h),null);i.blueprint[l]=m,r[l]=m,Iv(i,o,0,l,Pn(i,r,h.hostVars,xe),h)}function Fv(i,o,r){const l=qo(o,i),h=zh(r),d=i[10],m=wo(i,Gh(i,h,null,r.onPush?64:16,l,o,d,d.createRenderer(l,r),null,null));i[o.index]=m}function us(i,o,r,l,h,d){const m=qo(i,o);!function Kh(i,o,r,l,h,d,m){if(null==d)ri(i)?i.removeAttribute(o,h,r):o.removeAttribute(h);else{const w=null==m?ce(d):m(d,l||"",h);ri(i)?i.setAttribute(o,h,w,r):r?o.setAttributeNS(r,h,w):o.setAttribute(h,w)}}(o[11],m,d,i.value,r,l,h)}function Yp(i,o,r,l,h,d){const m=d[o];if(null!==m){const w=l.setInput;for(let x=0;x<m.length;){const M=m[x++],N=m[x++],I=m[x++];null!==w?l.setInput(r,I,M,N):r[N]=I}}}function sy(i,o){let r=null,l=0;for(;l<o.length;){const h=o[l];if(0!==h)if(5!==h){if("number"==typeof h)break;i.hasOwnProperty(h)&&(null===r&&(r=[]),r.push(h,i[h],o[l+1])),l+=2}else l+=2;else l+=4}return r}function Rv(i,o,r,l){return new Array(i,!0,!1,o,null,0,l,r,null,null)}function Kp(i,o){const r=Qo(o,i);if(Ml(r)){const l=r[1];80&r[2]?va(l,r,l.template,r[8]):r[5]>0&&Iu(r)}}function Iu(i){for(let l=Im(i);null!==l;l=Fm(l))for(let h=10;h<l.length;h++){const d=l[h];if(1024&d[2]){const m=d[1];va(m,d,m.template,d[8])}else d[5]>0&&Iu(d)}const r=i[1].components;if(null!==r)for(let l=0;l<r.length;l++){const h=Qo(r[l],i);Ml(h)&&h[5]>0&&Iu(h)}}function Us(i,o){const r=Qo(o,i),l=r[1];(function K_(i,o){for(let r=o.length;r<i.blueprint.length;r++)o.push(i.blueprint[r])})(l,r),K(l,r,r[8])}function wo(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Bd(i){for(;i;){i[2]|=64;const o=Lh(i);if(rt(i)&&!o)return i;i=o}return null}function hy(i,o,r){const l=o[10];l.begin&&l.begin();try{va(i,o,i.template,r)}catch(h){throw Ud(o,h),h}finally{l.end&&l.end()}}function _a(i){!function uy(i){for(let o=0;o<i.components.length;o++){const r=i.components[o],l=Cu(r),h=l[1];z_(h,l,h.template,r)}}(i[8])}function Xp(i,o,r){ph(0),o(i,r)}const Xh=(()=>Promise.resolve(null))();function Z_(i){return i[7]||(i[7]=[])}function Lv(i){return i.cleanup||(i.cleanup=[])}function Ud(i,o){const r=i[9],l=r?r.get(Ol,null):null;l&&l.handleError(o)}function Ht(i,o,r,l,h){for(let d=0;d<r.length;){const m=r[d++],w=r[d++],x=o[m],M=i.data[m];null!==M.setInput?M.setInput(x,h,l,w):x[w]=h}}function Ru(i,o,r){let l=r?i.styles:null,h=r?i.classes:null,d=0;if(null!==o)for(let m=0;m<o.length;m++){const w=o[m];"number"==typeof w?d=w:1==d?h=xr(h,w):2==d&&(l=xr(l,w+": "+o[++m]+";"))}r?i.styles=l:i.stylesWithoutHost=l,r?i.classes=h:i.classesWithoutHost=h}const Zh=new ue("INJECTOR",-1);class Hv{get(o,r=Mh){if(r===Mh){const l=new Error(`NullInjectorError: No provider for ${Be(o)}!`);throw l.name="NullInjectorError",l}return r}}const fy=new ue("Set Injector scope."),zd={},$d={};let py;function Vv(){return void 0===py&&(py=new Hv),py}function q_(i,o=null,r=null,l){const h=qt(i,o,r,l);return h._resolveInjectorDefTypes(),h}function qt(i,o=null,r=null,l){return new Q_(i,r,o||Vv(),l)}class Q_{constructor(o,r,l,h=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];r&&js(r,w=>this.processProvider(w,o,r)),js([o],w=>this.processInjectorType(w,[],d)),this.records.set(Zh,Pe(void 0,this));const m=this.records.get(fy);this.scope=null!=m?m.value:null,this.source=h||("object"==typeof o?null:Be(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,r=Mh,l=fe.Default){this.assertNotDestroyed();const h=Wr(this),d=Xo(void 0);try{if(!(l&fe.SkipSelf)){let w=this.records.get(o);if(void 0===w){const x=function Fo(i){return"function"==typeof i||"object"==typeof i&&i instanceof ue}(o)&&$g(o);w=x&&this.injectableDefInScope(x)?Pe(Zp(o),zd):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&fe.Self?Vv():this.parent).get(o,r=l&fe.Optional&&r===Mh?null:r)}catch(m){if("NullInjectorError"===m.name){if((m[sp]=m[sp]||[]).unshift(Be(o)),h)throw m;return function f_(i,o,r,l){const h=i[sp];throw o[ap]&&h.unshift(o[ap]),i.message=function p_(i,o,r,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let h=Be(o);if(Array.isArray(o))h=o.map(Be).join(" -> ");else if("object"==typeof o){let d=[];for(let m in o)if(o.hasOwnProperty(m)){let w=o[m];d.push(m+":"+("string"==typeof w?JSON.stringify(w):Be(w)))}h=`{${d.join(", ")}}`}return`${r}${l?"("+l+")":""}[${h}]: ${i.replace(h_,"\n  ")}`}("\n"+i.message,h,r,l),i.ngTokenPath=h,i[sp]=null,i}(m,o,"R3InjectorError",this.source)}throw m}finally{Xo(d),Wr(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,h)=>o.push(Be(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processInjectorType(o,r,l){if(!(o=Tt(o)))return!1;let h=Yg(o);const d=null==h&&o.ngModule||void 0,m=void 0===d?o:d,w=-1!==l.indexOf(m);if(void 0!==d&&(h=Yg(d)),null==h)return!1;if(null!=h.imports&&!w){let N;l.push(m);try{js(h.imports,I=>{this.processInjectorType(I,r,l)&&(void 0===N&&(N=[]),N.push(I))})}finally{}if(void 0!==N)for(let I=0;I<N.length;I++){const{ngModule:H,providers:B}=N[I];js(B,$=>this.processProvider($,H,B||Mn))}}this.injectorDefTypes.add(m);const x=Ve(m)||(()=>new m);this.records.set(m,Pe(x,zd));const M=h.providers;if(null!=M&&!w){const N=o;js(M,I=>this.processProvider(I,N,M))}return void 0!==d&&void 0!==o.providers}processProvider(o,r,l){let h=Jh(o=Tt(o))?o:Tt(o&&o.provide);const d=function rM(i,o,r){return my(i)?Pe(void 0,i.useValue):Pe(function gy(i,o,r){let l;if(Jh(i)){const h=Tt(i);return Ve(h)||Zp(h)}if(my(i))l=()=>Tt(i.useValue);else if(function Tn(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...md(i.deps||[]));else if(function zn(i){return!(!i||!i.useExisting)}(i))l=()=>Bt(Tt(i.useExisting));else{const h=Tt(i&&(i.useClass||i.provide));if(!function Jp(i){return!!i.deps}(i))return Ve(h)||Zp(h);l=()=>new h(...md(i.deps))}return l}(i),zd)}(o);if(Jh(o)||!0!==o.multi)this.records.get(h);else{let m=this.records.get(h);m||(m=Pe(void 0,zd,!0),m.factory=()=>md(m.multi),this.records.set(h,m)),h=o,m.multi.push(o)}this.records.set(h,d)}hydrate(o,r){return r.value===zd&&(r.value=$d,r.value=r.factory()),"object"==typeof r.value&&r.value&&function vy(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(r.value)&&this.onDestroy.add(r.value),r.value}injectableDefInScope(o){if(!o.providedIn)return!1;const r=Tt(o.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}function Zp(i){const o=$g(i),r=null!==o?o.factory:Ve(i);if(null!==r)return r;if(i instanceof ue)throw new Se(204,!1);if(i instanceof Function)return function Bv(i){const o=i.length;if(o>0)throw cd(o,"?"),new Se(204,!1);const r=function gi(i){const o=i&&(i[Ko]||i[E0]);if(o){const r=function aa(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),o}return null}(i);return null!==r?()=>r.factory(i):()=>new i}(i);throw new Se(204,!1)}function Pe(i,o,r=!1){return{factory:i,value:o,multi:r?[]:void 0}}function my(i){return null!==i&&"object"==typeof i&&c_ in i}function Jh(i){return"function"==typeof i}let Fi=(()=>{class i{static create(r,l){var h;if(Array.isArray(r))return q_({name:""},l,r,"");{const d=null!==(h=r.name)&&void 0!==h?h:"";return q_({name:d},r.parent,r.providers,d)}}}return i.THROW_IF_NOT_FOUND=Mh,i.NULL=new Hv,i.\u0275prov=A({token:i,providedIn:"any",factory:()=>Bt(Zh)}),i.__NG_ELEMENT_ID__=-1,i})();function ox(i,o){id(Cu(i)[1],Pi())}let qh=null;function Lu(){if(!qh){const i=gn.Symbol;if(i&&i.iterator)qh=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let r=0;r<o.length;++r){const l=o[r];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(qh=l)}}}return qh}function Qh(i){return!!Dy(i)&&(Array.isArray(i)||!(i instanceof Map)&&Lu()in i)}function Dy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Er(i,o,r){return!Object.is(i[o],r)&&(i[o]=r,!0)}function vt(i,o,r,l){const h=wt();return Er(h,si(),o)&&(Gt(),us(Gn(),h,i,o,r,l)),vt}function at(i,o=fe.Default){const r=wt();return null===r?Bt(i,o):sm(Pi(),r,Tt(i),o)}function hg(){throw new Error("invalid")}function je(i,o,r){const l=wt();return Er(l,si(),o)&&function vo(i,o,r,l,h,d,m,w){const x=qo(o,r);let N,M=o.inputs;!w&&null!=M&&(N=M[l])?(Ht(i,r,N,l,h),Et(o)&&function Y_(i,o){const r=Qo(o,i);16&r[2]||(r[2]|=64)}(r,o.index)):3&o.type&&(l=function Au(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),h=null!=m?m(h,o.value||"",l):h,ri(d)?d.setProperty(x,l,h):gu(l)||(x.setProperty?x.setProperty(l,h):x[l]=h))}(Gt(),Gn(),l,i,o,l[11],r,!1),je}function lc(i,o,r,l,h){const m=h?"class":"style";Ht(i,r,o.inputs[m],m,l)}function T(i,o,r,l){const h=wt(),d=Gt(),m=20+i,w=h[11],x=h[m]=Cp(w,o,function Mr(){return re.lFrame.currentNamespace}()),M=d.firstCreatePass?function t1(i,o,r,l,h,d,m){const w=o.consts,M=Uh(o,i,2,h,ho(w,d));return Ov(o,r,M,ho(w,m)),null!==M.attrs&&Ru(M,M.attrs,!1),null!==M.mergedAttrs&&Ru(M,M.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,M),M}(m,d,h,0,o,r,l):d.data[m];Is(M,!0);const N=M.mergedAttrs;null!==N&&yh(w,x,N);const I=M.classes;null!==I&&Um(w,x,I);const H=M.styles;null!==H&&wv(w,x,H),64!=(64&M.flags)&&Pd(d,h,x,M),0===function Yw(){return re.lFrame.elementDepthCount}()&&cr(x,h),function Gi(){re.lFrame.elementDepthCount++}(),Ff(M)&&(Bp(d,h,M),function Vp(i,o,r){if(Kg(o)){const h=o.directiveEnd;for(let d=o.directiveStart;d<h;d++){const m=i.data[d];m.contentQueries&&m.contentQueries(1,r[d],d)}}}(d,M,h)),null!==l&&Ld(h,M)}function C(){let i=Pi();oi()?Xi():(i=i.parent,Is(i,!1));const o=i;!function Jg(){re.lFrame.elementDepthCount--}();const r=Gt();r.firstCreatePass&&(id(r,i),Kg(i)&&r.queries.elementEnd(i)),null!=o.classesWithoutHost&&function nm(i){return 0!=(16&i.flags)}(o)&&lc(r,o,wt(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function qw(i){return 0!=(32&i.flags)}(o)&&lc(r,o,wt(),o.stylesWithoutHost,!1)}function J(i,o,r,l){T(i,o,r,l),C()}function ef(i){return!!i&&"function"==typeof i.then}const nf=function i1(i){return!!i&&"function"==typeof i.subscribe};function me(i,o,r,l){const h=wt(),d=Gt(),m=Pi();return function Ty(i,o,r,l,h,d,m,w){const x=Ff(l),N=i.firstCreatePass&&Lv(i),I=o[8],H=Z_(o);let B=!0;if(3&l.type||w){const lt=qo(l,o),ht=w?w(lt):lt,tt=H.length,yt=w?Nt=>w(mi(Nt[l.index])):l.index;if(ri(r)){let Nt=null;if(!w&&x&&(Nt=function fM(i,o,r,l){const h=i.cleanup;if(null!=h)for(let d=0;d<h.length-1;d+=2){const m=h[d];if(m===r&&h[d+1]===l){const w=o[7],x=h[d+2];return w.length>x?w[x]:null}"string"==typeof m&&(d+=2)}return null}(i,o,h,l.index)),null!==Nt)(Nt.__ngLastListenerFn__||Nt).__ngNextListenerFn__=d,Nt.__ngLastListenerFn__=d,B=!1;else{d=r1(l,o,I,d,!1);const Vt=r.listen(ht,h,d);H.push(d,Vt),N&&N.push(h,yt,tt,tt+1)}}else d=r1(l,o,I,d,!0),ht.addEventListener(h,d,m),H.push(d),N&&N.push(h,yt,tt,m)}else d=r1(l,o,I,d,!1);const $=l.outputs;let X;if(B&&null!==$&&(X=$[h])){const lt=X.length;if(lt)for(let ht=0;ht<lt;ht+=2){const Te=o[X[ht]][X[ht+1]].subscribe(d),Ze=H.length;H.push(d,Te),N&&N.push(h,l.index,Ze,-(Ze+1))}}}(d,h,h[11],m,i,o,!!r,l),me}function _x(i,o,r,l){try{return!1!==r(l)}catch(h){return Ud(i,h),!1}}function r1(i,o,r,l,h){return function d(m){if(m===Function)return l;const w=2&i.flags?Qo(i.index,o):o;0==(32&o[2])&&Bd(w);let x=_x(o,0,l,m),M=d.__ngNextListenerFn__;for(;M;)x=_x(o,0,M,m)&&x,M=M.__ngNextListenerFn__;return h&&!1===x&&(m.preventDefault(),m.returnValue=!1),x}}function xx(i,o){let r=null;const l=function Oi(i){const o=i.attrs;if(null!=o){const r=o.indexOf(5);if(0==(1&r))return o[r+1]}return null}(i);for(let h=0;h<o.length;h++){const d=o[h];if("*"!==d){if(null===l?_v(i,d,!0):Ad(l,d))return h}else r=h}return r}function bx(i,o,r,l,h){const d=i[r+1],m=null===o;let w=l?qr(d):Ll(d),x=!1;for(;0!==w&&(!1===x||m);){const N=i[w+1];zl(i[w],o)&&(x=!0,i[w+1]=l?wi(N):Id(N)),w=l?qr(N):Ll(N)}x&&(i[r+1]=l?Id(d):wi(d))}function zl(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&go(i,o)>=0}const Jn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Bu(i){return i.substring(Jn.key,Jn.keyEnd)}function Mx(i,o){const r=Jn.textEnd;return r===o?-1:(o=Jn.keyEnd=function pM(i,o,r){for(;o<r&&i.charCodeAt(o)>32;)o++;return o}(i,Jn.key=o,r),dc(i,o,r))}function dc(i,o,r){for(;o<r&&i.charCodeAt(o)<=32;)o++;return o}function qn(i,o){return function hs(i,o,r,l){const h=wt(),d=Gt(),m=Cl(2);d.firstUpdatePass&&Gu(d,i,m,l),o!==xe&&Er(h,m,o)&&Ca(d,d.data[Zi()],h,h[11],i,h[m+1]=function pc(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=Be(Hs(i)))),i}(o,r),l,m)}(i,o,null,!0),qn}function Qa(i){!function cs(i,o,r,l){const h=Gt(),d=Cl(2);h.firstUpdatePass&&Gu(h,null,d,l);const m=wt();if(r!==xe&&Er(m,d,r)){const w=h.data[Zi()];if(gc(w,l)&&!Wl(h,d)){let x=l?w.classesWithoutHost:w.stylesWithoutHost;null!==x&&(r=xr(x,r||"")),lc(h,w,m,r,l)}else!function af(i,o,r,l,h,d,m,w){h===xe&&(h=Mn);let x=0,M=0,N=0<h.length?h[0]:null,I=0<d.length?d[0]:null;for(;null!==N||null!==I;){const H=x<h.length?h[x+1]:void 0,B=M<d.length?d[M+1]:void 0;let X,$=null;N===I?(x+=2,M+=2,H!==B&&($=I,X=B)):null===I||null!==N&&N<I?(x+=2,$=N):(M+=2,$=I,X=B),null!==$&&Ca(i,o,r,l,$,X,m,w),N=x<h.length?h[x]:null,I=M<d.length?d[M]:null}}(h,w,m,m[11],m[d+1],m[d+1]=function kx(i,o,r){if(null==r||""===r)return Mn;const l=[],h=Hs(r);if(Array.isArray(h))for(let d=0;d<h.length;d++)i(l,h[d],!0);else if("object"==typeof h)for(const d in h)h.hasOwnProperty(d)&&i(l,d,h[d]);else"string"==typeof h&&o(l,h);return l}(i,o,r),l,d)}}(po,$s,i,!0)}function $s(i,o){for(let r=function Ot(i){return function s1(i){Jn.key=0,Jn.keyEnd=0,Jn.value=0,Jn.valueEnd=0,Jn.textEnd=i.length}(i),Mx(i,dc(i,0,Jn.textEnd))}(o);r>=0;r=Mx(o,r))po(i,Bu(o),!0)}function Wl(i,o){return o>=i.expandoStartIndex}function Gu(i,o,r,l){const h=i.data;if(null===h[r+1]){const d=h[Zi()],m=Wl(i,r);gc(d,l)&&null===o&&!m&&(o=!1),o=function Fy(i,o,r,l){const h=function Uf(i){const o=re.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let d=l?o.residualClasses:o.residualStyles;if(null===h)0===(l?o.classBindings:o.styleBindings)&&(r=fc(r=no(null,i,o,r,l),o.attrs,l),d=null);else{const m=o.directiveStylingLast;if(-1===m||i[m]!==h)if(r=no(h,i,o,r,l),null===d){let x=function Ry(i,o,r){const l=r?o.classBindings:o.styleBindings;if(0!==Ll(l))return i[qr(l)]}(i,o,l);void 0!==x&&Array.isArray(x)&&(x=no(null,i,o,x[1],l),x=fc(x,o.attrs,l),function Nx(i,o,r,l){i[qr(r?o.classBindings:o.styleBindings)]=l}(i,o,l,x))}else d=function $i(i,o,r){let l;const h=o.directiveEnd;for(let d=1+o.directiveStylingLast;d<h;d++)l=fc(l,i[d].hostAttrs,r);return fc(l,o.attrs,r)}(i,o,l)}return void 0!==d&&(l?o.residualClasses=d:o.residualStyles=d),r}(h,d,o,l),function Ay(i,o,r,l,h,d){let m=d?o.classBindings:o.styleBindings,w=qr(m),x=Ll(m);i[l]=r;let N,M=!1;if(Array.isArray(r)){const I=r;N=I[1],(null===N||go(I,N)>0)&&(M=!0)}else N=r;if(h)if(0!==x){const H=qr(i[w+1]);i[l+1]=$a(H,w),0!==H&&(i[H+1]=Km(i[H+1],l)),i[w+1]=function Ya(i,o){return 131071&i|o<<17}(i[w+1],l)}else i[l+1]=$a(w,0),0!==w&&(i[w+1]=Km(i[w+1],l)),w=l;else i[l+1]=$a(x,0),0===w?w=l:i[x+1]=Km(i[x+1],l),x=l;M&&(i[l+1]=Id(i[l+1])),bx(i,N,l,!0),bx(i,N,l,!1),function o1(i,o,r,l,h){const d=h?i.residualClasses:i.residualStyles;null!=d&&"string"==typeof o&&go(d,o)>=0&&(r[l+1]=wi(r[l+1]))}(o,N,i,l,d),m=$a(w,x),d?o.classBindings=m:o.styleBindings=m}(h,d,o,r,m,l)}}function no(i,o,r,l,h){let d=null;const m=r.directiveEnd;let w=r.directiveStylingLast;for(-1===w?w=r.directiveStart:w++;w<m&&(d=o[w],l=fc(l,d.hostAttrs,h),d!==i);)w++;return null!==i&&(r.directiveStylingLast=w),l}function fc(i,o,r){const l=r?1:2;let h=-1;if(null!==o)for(let d=0;d<o.length;d++){const m=o[d];"number"==typeof m?h=m:h===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),po(i,m,!!r||o[++d]))}return void 0===i?null:i}function Ca(i,o,r,l,h,d,m,w){if(!(3&o.type))return;const x=i.data,M=x[w+1];xo(function Fp(i){return 1==(1&i)}(M)?pg(x,o,r,h,Ll(M),m):void 0)||(xo(d)||function R_(i){return 2==(2&i)}(M)&&(d=pg(x,null,r,h,w,m)),function P_(i,o,r,l,h){const d=ri(i);if(o)h?d?i.addClass(r,l):r.classList.add(l):d?i.removeClass(r,l):r.classList.remove(l);else{let m=-1===l.indexOf("-")?void 0:os.DashCase;if(null==h)d?i.removeStyle(r,l,m):r.style.removeProperty(l);else{const w="string"==typeof h&&h.endsWith("!important");w&&(h=h.slice(0,-10),m|=os.Important),d?i.setStyle(r,l,h,m):r.style.setProperty(l,h,w?"important":"")}}}(l,m,function Vf(i,o){return mi(o[i])}(Zi(),r),h,d))}function pg(i,o,r,l,h,d){const m=null===o;let w;for(;h>0;){const x=i[h],M=Array.isArray(x),N=M?x[1]:x,I=null===N;let H=r[h+1];H===xe&&(H=I?Mn:void 0);let B=I?ip(H,l):N===l?H:void 0;if(M&&!xo(B)&&(B=ip(x,l)),xo(B)&&(w=B,m))return w;const $=i[h+1];h=m?qr($):Ll($)}if(null!==o){let x=d?o.residualClasses:o.residualStyles;null!=x&&(w=ip(x,l))}return w}function xo(i){return void 0!==i}function gc(i,o){return 0!=(i.flags&(o?16:32))}function P(i,o=""){const r=wt(),l=Gt(),h=i+20,d=l.firstCreatePass?Uh(l,h,1,o,null):l.data[h],m=r[h]=function jh(i,o){return ri(i)?i.createText(o):i.createTextNode(o)}(r[11],o);Pd(l,r,m,d),Is(d,!1)}const _=void 0;var D=["en",[["a","p"],["AM","PM"],_],[["AM","PM"],_,_],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_,"{1} 'at' {0}",_],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function b(i){const r=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===l?1:5}];let k={};function j(i){return i in k||(k[i]=gn.ng&&gn.ng.common&&gn.ng.common.locales&&gn.ng.common.locales[i]),k[i]}var G=(()=>((G=G||{})[G.LocaleId=0]="LocaleId",G[G.DayPeriodsFormat=1]="DayPeriodsFormat",G[G.DayPeriodsStandalone=2]="DayPeriodsStandalone",G[G.DaysFormat=3]="DaysFormat",G[G.DaysStandalone=4]="DaysStandalone",G[G.MonthsFormat=5]="MonthsFormat",G[G.MonthsStandalone=6]="MonthsStandalone",G[G.Eras=7]="Eras",G[G.FirstDayOfWeek=8]="FirstDayOfWeek",G[G.WeekendRange=9]="WeekendRange",G[G.DateFormat=10]="DateFormat",G[G.TimeFormat=11]="TimeFormat",G[G.DateTimeFormat=12]="DateTimeFormat",G[G.NumberSymbols=13]="NumberSymbols",G[G.NumberFormats=14]="NumberFormats",G[G.CurrencyCode=15]="CurrencyCode",G[G.CurrencySymbol=16]="CurrencySymbol",G[G.CurrencyName=17]="CurrencyName",G[G.Currencies=18]="Currencies",G[G.Directionality=19]="Directionality",G[G.PluralCase=20]="PluralCase",G[G.ExtraData=21]="ExtraData",G))();const et="en-US";let un=et;class Ex{}class mM{resolveComponentFactory(o){throw function gM(i){const o=Error(`No component factory found for ${Be(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let ll=(()=>{class i{}return i.NULL=new mM,i})();function Pc(){return ea(Pi(),wt())}function ea(i,o){return new _n(qo(i,o))}let _n=(()=>{class i{constructor(r){this.nativeElement=r}}return i.__NG_ELEMENT_ID__=Pc,i})();function Ax(i){return i instanceof _n?i.nativeElement:i}class Ac{}let zo=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Xy(){const i=wt(),r=Qo(Pi().index,i);return function yM(i){return i[11]}(Es(r)?r:i)}(),i})(),Zy=(()=>{class i{}return i.\u0275prov=A({token:i,providedIn:"root",factory:()=>null}),i})();class Dg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Jy=new Dg("13.2.2"),bg={};function Ir(i,o,r,l,h=!1){for(;null!==r;){const d=o[r.index];if(null!==d&&l.push(mi(d)),Ps(d))for(let w=10;w<d.length;w++){const x=d[w],M=x[1].firstChild;null!==M&&Ir(x[1],x,M,l)}const m=r.type;if(8&m)Ir(i,o,r.child,l);else if(32&m){const w=Em(r,o);let x;for(;x=w();)l.push(x)}else if(16&m){const w=Jr(o,r);if(Array.isArray(w))l.push(...w);else{const x=Lh(o[16]);Ir(x[1],x,w,l,!0)}}r=h?r.projectionNext:r.next}return l}class Oc{constructor(o,r){this._lView=o,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,r=o[1];return Ir(r,o,r.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ps(o)){const r=o[8],l=r?r.indexOf(this):-1;l>-1&&(en(o,l),_u(r,l))}this._attachedToViewContainer=!1}Tp(this._lView[1],this._lView)}onDestroy(o){iy(this._lView[1],this._lView,null,o)}markForCheck(){Bd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){hy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Fu(i,o,r){co(!0);try{hy(i,o,r)}finally{co(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Se(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lm(i,o){Nu(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Se(902,"");this._appRef=o}}class m1 extends Oc{constructor(o){super(o),this._view=o}detectChanges(){_a(this._view)}checkNoChanges(){!function Gd(i){co(!0);try{_a(i)}finally{co(!1)}}(this._view)}get context(){return null}}class yS extends ll{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const r=ki(o);return new vM(r,this.ngModule)}}function vS(i){const o=[];for(let r in i)i.hasOwnProperty(r)&&o.push({propName:i[r],templateName:r});return o}const cA=new ue("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>fv});class vM extends Ex{constructor(o,r){super(),this.componentDef=o,this.ngModule=r,this.componentType=o.type,this.selector=function Od(i){return i.map(F_).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!r}get inputs(){return vS(this.componentDef.inputs)}get outputs(){return vS(this.componentDef.outputs)}create(o,r,l,h){const d=(h=h||this.ngModule)?function dA(i,o){return{get:(r,l,h)=>{const d=i.get(r,bg,h);return d!==bg||l===bg?d:o.get(r,l,h)}}}(o,h.injector):o,m=d.get(Ac,du),w=d.get(Zy,null),x=m.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",N=l?function Pu(i,o,r){if(ri(i))return i.selectRootElement(o,r===la.ShadowDom);let l="string"==typeof o?i.querySelector(o):o;return l.textContent="",l}(x,l,this.componentDef.encapsulation):Cp(m.createRenderer(null,this.componentDef),M,function hA(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),I=this.componentDef.onPush?576:528,H=function Ka(i,o){return{components:[],scheduler:i||fv,clean:Xh,playerHandler:o||null,flags:0}}(),B=$h(0,null,null,1,0,null,null,null,null,null),$=Gh(null,B,H,I,null,null,m,x,w,d);let X,lt;zf($);try{const ht=function Wv(i,o,r,l,h,d){const m=r[1];r[20]=i;const x=Uh(m,20,2,"#host",null),M=x.mergedAttrs=o.hostAttrs;null!==M&&(Ru(x,M,!0),null!==i&&(yh(h,i,M),null!==x.classes&&Um(h,i,x.classes),null!==x.styles&&wv(h,i,x.styles)));const N=l.createRenderer(i,o),I=Gh(r,zh(o),null,o.onPush?64:16,r[20],x,l,N,d||null,null);return m.firstCreatePass&&(Qf(Jf(x,r),m,o.type),zp(m,x),Hd(x,r.length,1)),wo(r,I),r[20]=I}(N,this.componentDef,$,m,x);if(N)if(l)yh(x,N,["ng-version",Jy.full]);else{const{attrs:tt,classes:yt}=function Wm(i){const o=[],r=[];let l=1,h=2;for(;l<i.length;){let d=i[l];if("string"==typeof d)2===h?""!==d&&o.push(d,i[++l]):8===h&&r.push(d);else{if(!ls(h))break;h=d}l++}return{attrs:o,classes:r}}(this.componentDef.selectors[0]);tt&&yh(x,N,tt),yt&&yt.length>0&&Um(x,N,yt.join(" "))}if(lt=V0(B,20),void 0!==r){const tt=lt.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const Nt=r[yt];tt.push(null!=Nt?Array.from(Nt):null)}}X=function tg(i,o,r,l,h){const d=r[1],m=function nM(i,o,r){const l=Pi();i.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),Vd(i,l,o,Pn(i,o,1,null),r));const h=ud(o,i,l.directiveStart,l);cr(h,o);const d=qo(l,o);return d&&cr(d,o),h}(d,r,o);if(l.components.push(m),i[8]=m,h&&h.forEach(x=>x(m,o)),o.contentQueries){const x=Pi();o.contentQueries(1,m,x.directiveStart)}const w=Pi();return!d.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Fs(w.index),Iv(r[1],w,0,w.directiveStart,w.directiveEnd,o),Wh(o,m)),m}(ht,this.componentDef,$,H,[ox]),K(B,$,null)}finally{Qg()}return new pA(this.componentType,X,ea(lt,$),$,lt)}}class pA extends class Ec{}{constructor(o,r,l,h,d){super(),this.location=l,this._rootLView=h,this._tNode=d,this.instance=r,this.hostView=this.changeDetectorRef=new m1(h),this.componentType=o}get injector(){return new mu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ic{}class wS{}const qy=new Map;class DS extends Ic{constructor(o,r){super(),this._parent=r,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new yS(this);const l=Gr(o);this._bootstrapComponents=rs(l.bootstrap),this._r3Injector=qt(o,r,[{provide:Ic,useValue:this},{provide:ll,useValue:this.componentFactoryResolver}],Be(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,r=Fi.THROW_IF_NOT_FOUND,l=fe.Default){return o===Fi||o===Ic||o===Zh?this:this._r3Injector.get(o,r,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class wM extends wS{constructor(o){super(),this.moduleType=o,null!==Gr(o)&&function mA(i){const o=new Set;!function r(l){const h=Gr(l,!0),d=h.id;null!==d&&(function _S(i,o,r){if(o&&o!==r)throw new Error(`Duplicate module registered for ${i} - ${Be(o)} vs ${Be(o.name)}`)}(d,qy.get(d),l),qy.set(d,l));const m=rs(h.imports);for(const w of m)o.has(w)||(o.add(w),r(w))}(i)}(o)}create(o){return new DS(this.moduleType,o)}}function xM(i){return o=>{setTimeout(i,void 0,o)}}const Ie=class PA extends Mi{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,r,l){var h,d,m;let w=o,x=r||(()=>null),M=l;if(o&&"object"==typeof o){const I=o;w=null===(h=I.next)||void 0===h?void 0:h.bind(I),x=null===(d=I.error)||void 0===d?void 0:d.bind(I),M=null===(m=I.complete)||void 0===m?void 0:m.bind(I)}this.__isAsync&&(x=xM(x),w&&(w=xM(w)),M&&(M=xM(M)));const N=super.subscribe({next:w,error:x,complete:M});return o instanceof Cs&&o.add(N),N}};function AA(){return this._results[Lu()]()}class DM{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const r=Lu(),l=DM.prototype;l[r]||(l[r]=AA)}get changes(){return this._changes||(this._changes=new Ie)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,r){return this._results.reduce(o,r)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,r){const l=this;l.dirty=!1;const h=Ao(o);(this._changesDetected=!function iv(i,o,r){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let h=i[l],d=o[l];if(r&&(h=r(h),d=r(d)),d!==h)return!1}return!0}(l._results,h,r))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Ki=(()=>{class i{}return i.__NG_ELEMENT_ID__=FA,i})();const OA=Ki,IA=class extends OA{constructor(o,r,l){super(),this._declarationLView=o,this._declarationTContainer=r,this.elementRef=l}createEmbeddedView(o){const r=this._declarationTContainer.tViews,l=Gh(this._declarationLView,r,o,16,null,r.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(l[19]=d.createEmbeddedView(r)),K(r,l,o),new Oc(l)}};function FA(){return Ix(Pi(),wt())}function Ix(i,o){return 4&i.type?new IA(o,i,ea(i,o)):null}let Zl=(()=>{class i{}return i.__NG_ELEMENT_ID__=RA,i})();function RA(){return ES(Pi(),wt())}const LA=Zl,NS=class extends LA{constructor(o,r,l){super(),this._lContainer=o,this._hostTNode=r,this._hostLView=l}get element(){return ea(this._hostTNode,this._hostLView)}get injector(){return new mu(this._hostTNode,this._hostLView)}get parentInjector(){const o=qf(this._hostTNode,this._hostLView);if(J0(o)){const r=Cr(o,this._hostLView),l=vh(o);return new mu(r[1].data[l+8],r)}return new mu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const r=kS(this._lContainer);return null!==r&&r[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,r,l){const h=o.createEmbeddedView(r||{});return this.insert(h,l),h}createComponent(o,r,l,h,d){const m=o&&!function bh(i){return"function"==typeof i}(o);let w;if(m)w=r;else{const I=r||{};w=I.index,l=I.injector,h=I.projectableNodes,d=I.ngModuleRef}const x=m?o:new vM(ki(o)),M=l||this.parentInjector;if(!d&&null==x.ngModule&&M){const I=M.get(Ic,null);I&&(d=I)}const N=x.create(M,h,void 0,d);return this.insert(N.hostView,w),N}insert(o,r){const l=o._lView,h=l[1];if(function Fn(i){return Ps(i[3])}(l)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const I=l[3],H=new NS(I,I[6],I[3]);H.detach(H.indexOf(o))}}const d=this._adjustIndex(r),m=this._lContainer;!function S_(i,o,r,l){const h=10+l,d=r.length;l>0&&(r[h-1][4]=o),l<d-10?(o[4]=r[h],np(r,10+l,o)):(r.push(o),o[4]=null),o[3]=r;const m=o[17];null!==m&&r!==m&&function N_(i,o){const r=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===r?i[9]=[o]:r.push(o)}(m,o);const w=o[19];null!==w&&w.insertView(i),o[2]|=128}(h,l,m,d);const w=Vh(d,m),x=l[11],M=Ap(x,m[7]);return null!==M&&function yv(i,o,r,l,h,d){l[0]=h,l[6]=o,Nu(i,l,r,1,h,d)}(h,m[6],x,l,M,w),o.attachToViewContainerRef(),np(bM(m),d,o),o}move(o,r){return this.insert(o,r)}indexOf(o){const r=kS(this._lContainer);return null!==r?r.indexOf(o):-1}remove(o){const r=this._adjustIndex(o,-1),l=en(this._lContainer,r);l&&(_u(bM(this._lContainer),r),Tp(l[1],l))}detach(o){const r=this._adjustIndex(o,-1),l=en(this._lContainer,r);return l&&null!=_u(bM(this._lContainer),r)?new Oc(l):null}_adjustIndex(o,r=0){return null==o?this.length+r:o}};function kS(i){return i[8]}function bM(i){return i[8]||(i[8]=[])}function ES(i,o){let r;const l=o[i.index];if(Ps(l))r=l;else{let h;if(8&i.type)h=mi(l);else{const d=o[11];h=d.createComment("");const m=qo(i,o);Fl(d,Ap(d,m),h,function k_(i,o){return ri(i)?i.nextSibling(o):o.nextSibling}(d,m),!1)}o[i.index]=r=Rv(l,o,h,i),wo(o,r)}return new NS(r,i,o)}class MM{constructor(o){this.queryList=o,this.matches=null}clone(){return new MM(this.queryList)}setDirty(){this.queryList.setDirty()}}class CM{constructor(o=[]){this.queries=o}createEmbeddedView(o){const r=o.queries;if(null!==r){const l=null!==o.contentQueries?o.contentQueries[0]:r.length,h=[];for(let d=0;d<l;d++){const m=r.getByIndex(d);h.push(this.queries[m.indexInDeclarationView].clone())}return new CM(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let r=0;r<this.queries.length;r++)null!==FS(o,r).matches&&this.queries[r].setDirty()}}class PS{constructor(o,r,l=null){this.predicate=o,this.flags=r,this.read=l}}class TM{constructor(o=[]){this.queries=o}elementStart(o,r){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,r)}elementEnd(o){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(o)}embeddedTView(o){let r=null;for(let l=0;l<this.length;l++){const h=null!==r?r.length:0,d=this.getByIndex(l).embeddedTView(o,h);d&&(d.indexInDeclarationView=l,null!==r?r.push(d):r=[d])}return null!==r?new TM(r):null}template(o,r){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,r)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class SM{constructor(o,r=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(o,r){this.isApplyingToNode(r)&&this.matchTNode(o,r)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,r){this.elementStart(o,r)}embeddedTView(o,r){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,r),new SM(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const r=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==r;)l=l.parent;return r===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,r){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const d=l[h];this.matchTNodeWithReadOption(o,r,VA(r,d)),this.matchTNodeWithReadOption(o,r,am(r,o,d,!1,!1))}else l===Ki?4&r.type&&this.matchTNodeWithReadOption(o,r,-1):this.matchTNodeWithReadOption(o,r,am(r,o,l,!1,!1))}matchTNodeWithReadOption(o,r,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===_n||h===Zl||h===Ki&&4&r.type)this.addMatch(r.index,-2);else{const d=am(r,o,h,!1,!1);null!==d&&this.addMatch(r.index,d)}else this.addMatch(r.index,l)}}addMatch(o,r){null===this.matches?this.matches=[o,r]:this.matches.push(o,r)}}function VA(i,o){const r=i.localNames;if(null!==r)for(let l=0;l<r.length;l+=2)if(r[l]===o)return r[l+1];return null}function GA(i,o,r,l){return-1===r?function BA(i,o){return 11&i.type?ea(i,o):4&i.type?Ix(i,o):null}(o,i):-2===r?function UA(i,o,r){return r===_n?ea(o,i):r===Ki?Ix(o,i):r===Zl?ES(o,i):void 0}(i,o,l):ud(i,i[1],r,o)}function AS(i,o,r,l){const h=o[19].queries[l];if(null===h.matches){const d=i.data,m=r.matches,w=[];for(let x=0;x<m.length;x+=2){const M=m[x];w.push(M<0?null:GA(o,d[M],m[x+1],r.metadata.read))}h.matches=w}return h.matches}function NM(i,o,r,l){const h=i.queries.getByIndex(r),d=h.matches;if(null!==d){const m=AS(i,o,h,r);for(let w=0;w<d.length;w+=2){const x=d[w];if(x>0)l.push(m[w/2]);else{const M=d[w+1],N=o[-x];for(let I=10;I<N.length;I++){const H=N[I];H[17]===H[3]&&NM(H[1],H,M,l)}if(null!==N[9]){const I=N[9];for(let H=0;H<I.length;H++){const B=I[H];NM(B[1],B,M,l)}}}}}return l}function Ln(i){const o=wt(),r=Gt(),l=nd();ph(l+1);const h=FS(r,l);if(i.dirty&&B0(o)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const d=h.crossesNgTemplate?NM(r,o,l,[]):AS(r,o,h,l);i.reset(d,Ax),i.notifyOnChanges()}return!0}return!1}function pf(i,o,r){const l=Gt();l.firstCreatePass&&(function IS(i,o,r){null===i.queries&&(i.queries=new TM),i.queries.track(new SM(o,r))}(l,new PS(i,o,r),-1),2==(2&o)&&(l.staticViewQueries=!0)),function OS(i,o,r){const l=new DM(4==(4&r));iy(i,o,l,l.destroy),null===o[19]&&(o[19]=new CM),o[19].queries.push(new MM(l))}(l,wt(),o)}function jn(){return function zA(i,o){return i[19].queries[o].queryList}(wt(),nd())}function FS(i,o){return i.queries.getByIndex(o)}function Lx(...i){}const jx=new ue("Application Initializer");let t0=(()=>{class i{constructor(r){this.appInits=r,this.resolve=Lx,this.reject=Lx,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const r=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const d=this.appInits[h]();if(ef(d))r.push(d);else if(nf(d)){const m=new Promise((w,x)=>{d.subscribe({complete:w,error:x})});r.push(m)}}Promise.all(r).then(()=>{l()}).catch(h=>{this.reject(h)}),0===r.length&&l(),this.initialized=!0}}return i.\u0275fac=function(r){return new(r||i)(Bt(jx,8))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();const x1=new ue("AppId"),uO={provide:x1,useFactory:function lO(){return`${IM()}${IM()}${IM()}`},deps:[]};function IM(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qS=new ue("Platform Initializer"),Hx=new ue("Platform ID"),QS=new ue("appBootstrapListener");let tN=(()=>{class i{log(r){console.log(r)}warn(r){console.warn(r)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();const gf=new ue("LocaleId"),eN=new ue("DefaultCurrencyCode");class hO{constructor(o,r){this.ngModuleFactory=o,this.componentFactories=r}}let Vx=(()=>{class i{compileModuleSync(r){return new wM(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const l=this.compileModuleSync(r),d=rs(Gr(r).declarations).reduce((m,w)=>{const x=ki(w);return x&&m.push(new vM(x)),m},[]);return new hO(l,d)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();const dO=(()=>Promise.resolve(0))();function FM(i){"undefined"==typeof Zone?dO.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class An{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ie(!1),this.onMicrotaskEmpty=new Ie(!1),this.onStable=new Ie(!1),this.onError=new Ie(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&r,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function fO(){let i=gn.requestAnimationFrame,o=gn.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&o){const r=i[Zone.__symbol__("OriginalDelegate")];r&&(i=r);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function mO(i){const o=()=>{!function gO(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(gn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,LM(i),i.isCheckStableRunning=!0,RM(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),LM(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,l,h,d,m,w)=>{try{return nN(i),r.invokeTask(h,d,m,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||i.shouldCoalesceRunChangeDetection)&&o(),iN(i)}},onInvoke:(r,l,h,d,m,w,x)=>{try{return nN(i),r.invoke(h,d,m,w,x)}finally{i.shouldCoalesceRunChangeDetection&&o(),iN(i)}},onHasTask:(r,l,h,d)=>{r.hasTask(h,d),l===h&&("microTask"==d.change?(i._hasPendingMicrotasks=d.microTask,LM(i),RM(i)):"macroTask"==d.change&&(i.hasPendingMacrotasks=d.macroTask))},onHandleError:(r,l,h,d)=>(r.handleError(h,d),i.runOutsideAngular(()=>i.onError.emit(d)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!An.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(An.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,r,l){return this._inner.run(o,r,l)}runTask(o,r,l,h){const d=this._inner,m=d.scheduleEventTask("NgZoneEvent: "+h,o,pO,Lx,Lx);try{return d.runTask(m,r,l)}finally{d.cancelTask(m)}}runGuarded(o,r,l){return this._inner.runGuarded(o,r,l)}runOutsideAngular(o){return this._outer.run(o)}}const pO={};function RM(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function LM(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function nN(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function iN(i){i._nesting--,RM(i)}class yO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ie,this.onMicrotaskEmpty=new Ie,this.onStable=new Ie,this.onError=new Ie}run(o,r,l){return o.apply(r,l)}runGuarded(o,r,l){return o.apply(r,l)}runOutsideAngular(o){return o()}runTask(o,r,l,h){return o.apply(r,l)}}let jM=(()=>{class i{constructor(r){this._ngZone=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{An.assertNotInAngularZone(),FM(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())FM(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(r)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,l,h){let d=-1;l&&l>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==d),r(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:r,timeoutId:d,updateCb:h})}whenStable(r,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(r,l,h){return[]}}return i.\u0275fac=function(r){return new(r||i)(Bt(An))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})(),rN=(()=>{class i{constructor(){this._applications=new Map,HM.addToWindow(this)}registerApplication(r,l){this._applications.set(r,l)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,l=!0){return HM.findTestabilityInTree(this,r,l)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();class vO{addToWindow(o){}findTestabilityInTree(o,r,l){return null}}let Jl,HM=new vO;const oN=new ue("AllowMultipleToken");class sN{constructor(o,r){this.name=o,this.token=r}}function aN(i,o,r=[]){const l=`Platform: ${o}`,h=new ue(l);return(d=[])=>{let m=lN();if(!m||m.injector.get(oN,!1))if(i)i(r.concat(d).concat({provide:h,useValue:!0}));else{const w=r.concat(d).concat({provide:h,useValue:!0},{provide:fy,useValue:"platform"});!function DO(i){if(Jl&&!Jl.destroyed&&!Jl.injector.get(oN,!1))throw new Se(400,"");Jl=i.get(uN);const o=i.get(qS,null);o&&o.forEach(r=>r())}(Fi.create({providers:w,name:l}))}return function bO(i){const o=lN();if(!o)throw new Se(401,"");return o}()}}function lN(){return Jl&&!Jl.destroyed?Jl:null}let uN=(()=>{class i{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,l){const w=function MO(i,o){let r;return r="noop"===i?new yO:("zone.js"===i?void 0:i)||new An({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),r}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),x=[{provide:An,useValue:w}];return w.run(()=>{const M=Fi.create({providers:x,parent:this.injector,name:r.moduleType.name}),N=r.create(M),I=N.injector.get(Ol,null);if(!I)throw new Se(402,"");return w.runOutsideAngular(()=>{const H=w.onError.subscribe({next:B=>{I.handleError(B)}});N.onDestroy(()=>{VM(this._modules,N),H.unsubscribe()})}),function CO(i,o,r){try{const l=r();return ef(l)?l.catch(h=>{throw o.runOutsideAngular(()=>i.handleError(h)),h}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(I,w,()=>{const H=N.injector.get(t0);return H.runInitializers(),H.donePromise.then(()=>(function ye(i){ne(i,"Expected localeId to be defined"),"string"==typeof i&&(un=i.toLowerCase().replace(/_/g,"-"))}(N.injector.get(gf,et)||et),this._moduleDoBootstrap(N),N))})})}bootstrapModule(r,l=[]){const h=hN({},l);return function _O(i,o,r){const l=new wM(r);return Promise.resolve(l)}(0,0,r).then(d=>this.bootstrapModuleFactory(d,h))}_moduleDoBootstrap(r){const l=r.injector.get(e0);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!r.instance.ngDoBootstrap)throw new Se(403,"");r.instance.ngDoBootstrap(l)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(r){return new(r||i)(Bt(Fi))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();function hN(i,o){return Array.isArray(o)?o.reduce(hN,i):Object.assign(Object.assign({},i),o)}let e0=(()=>{class i{constructor(r,l,h,d,m){this._zone=r,this._injector=l,this._exceptionHandler=h,this._componentFactoryResolver=d,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new xn(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),x=new xn(M=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{An.assertNotInAngularZone(),FM(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const I=this._zone.onUnstable.subscribe(()=>{An.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{N.unsubscribe(),I.unsubscribe()}});this.isStable=function Dn(...i){const o=Nf(i),r=function kw(i,o){return"number"==typeof kt(i)?i.pop():o}(i,1/0),l=i;return l.length?1===l.length?Vr(l[0]):oh(r)(Kt(l,o)):oa}(w,x.pipe(function qc(i={}){const{connector:o=(()=>new Mi),resetOnError:r=!0,resetOnComplete:l=!0,resetOnRefCountZero:h=!0}=i;return d=>{let m=null,w=null,x=null,M=0,N=!1,I=!1;const H=()=>{null==w||w.unsubscribe(),w=null},B=()=>{H(),m=x=null,N=I=!1},$=()=>{const X=m;B(),null==X||X.unsubscribe()};return Hi((X,lt)=>{M++,!I&&!N&&H();const ht=x=null!=x?x:o();lt.add(()=>{M--,0===M&&!I&&!N&&(w=gl($,h))}),ht.subscribe(lt),m||(m=new C0({next:tt=>ht.next(tt),error:tt=>{I=!0,H(),w=gl(B,r,tt),ht.error(tt)},complete:()=>{N=!0,H(),w=gl(B,l),ht.complete()}}),Kt(X).subscribe(m))})(d)}}()))}bootstrap(r,l){if(!this._initStatus.done)throw new Se(405,"");let h;h=r instanceof Ex?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(h.componentType);const d=function xO(i){return i.isBoundToModule}(h)?void 0:this._injector.get(Ic),w=h.create(Fi.NULL,[],l||h.selector,d),x=w.location.nativeElement,M=w.injector.get(jM,null),N=M&&w.injector.get(rN);return M&&N&&N.registerApplication(x,M),w.onDestroy(()=>{this.detachView(w.hostView),VM(this.components,w),N&&N.unregisterApplication(x)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Se(101,"");try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(r))}finally{this._runningTick=!1}}attachView(r){const l=r;this._views.push(l),l.attachToAppRef(this)}detachView(r){const l=r;VM(this._views,l),l.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(QS,[]).concat(this._bootstrapListeners).forEach(h=>h(r))}ngOnDestroy(){this._views.slice().forEach(r=>r.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(r){return new(r||i)(Bt(An),Bt(Fi),Bt(Ol),Bt(ll),Bt(t0))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();function VM(i,o){const r=i.indexOf(o);r>-1&&i.splice(r,1)}let dN=!0,ql=(()=>{class i{}return i.__NG_ELEMENT_ID__=NO,i})();function NO(i){return function kO(i,o,r){if(Et(i)&&!r){const l=Qo(i.index,o);return new Oc(l,l)}return 47&i.type?new Oc(o[16],o):null}(Pi(),wt(),16==(16&i))}class yN{constructor(){}supports(o){return Qh(o)}create(o){return new FO(o)}}const IO=(i,o)=>o;class FO{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||IO}forEachItem(o){let r;for(r=this._itHead;null!==r;r=r._next)o(r)}forEachOperation(o){let r=this._itHead,l=this._removalsHead,h=0,d=null;for(;r||l;){const m=!l||r&&r.currentIndex<wN(l,h,d)?r:l,w=wN(m,h,d),x=m.currentIndex;if(m===l)h--,l=l._nextRemoved;else if(r=r._next,null==m.previousIndex)h++;else{d||(d=[]);const M=w-h,N=x-h;if(M!=N){for(let H=0;H<M;H++){const B=H<d.length?d[H]:d[H]=0,$=B+H;N<=$&&$<M&&(d[H]=B+1)}d[m.previousIndex]=N-M}}w!==x&&o(m,w,x)}}forEachPreviousItem(o){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)o(r)}forEachAddedItem(o){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)o(r)}forEachMovedItem(o){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)o(r)}forEachRemovedItem(o){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)o(r)}forEachIdentityChange(o){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)o(r)}diff(o){if(null==o&&(o=[]),!Qh(o))throw new Se(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,d,m,r=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)d=o[w],m=this._trackByFn(w,d),null!==r&&Object.is(r.trackById,m)?(l&&(r=this._verifyReinsertion(r,d,m,w)),Object.is(r.item,d)||this._addIdentityChange(r,d)):(r=this._mismatch(r,d,m,w),l=!0),r=r._next}else h=0,function oe(i,o){if(Array.isArray(i))for(let r=0;r<i.length;r++)o(i[r]);else{const r=i[Lu()]();let l;for(;!(l=r.next()).done;)o(l.value)}}(o,w=>{m=this._trackByFn(h,w),null!==r&&Object.is(r.trackById,m)?(l&&(r=this._verifyReinsertion(r,w,m,h)),Object.is(r.item,w)||this._addIdentityChange(r,w)):(r=this._mismatch(r,w,m,h),l=!0),r=r._next,h++}),this.length=h;return this._truncate(r),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,r,l,h){let d;return null===o?d=this._itTail:(d=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,r)||this._addIdentityChange(o,r),this._reinsertAfter(o,d,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(o.item,r)||this._addIdentityChange(o,r),this._moveAfter(o,d,h)):o=this._addAfter(new RO(r,l),d,h),o}_verifyReinsertion(o,r,l,h){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==d?o=this._reinsertAfter(d,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const r=o._next;this._addToRemovals(this._unlink(o)),o=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,r,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,d=o._nextRemoved;return null===h?this._removalsHead=d:h._nextRemoved=d,null===d?this._removalsTail=h:d._prevRemoved=h,this._insertAfter(o,r,l),this._addToMoves(o,l),o}_moveAfter(o,r,l){return this._unlink(o),this._insertAfter(o,r,l),this._addToMoves(o,l),o}_addAfter(o,r,l){return this._insertAfter(o,r,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,r,l){const h=null===r?this._itHead:r._next;return o._next=h,o._prev=r,null===h?this._itTail=o:h._prev=o,null===r?this._itHead=o:r._next=o,null===this._linkedRecords&&(this._linkedRecords=new vN),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const r=o._prev,l=o._next;return null===r?this._itHead=l:r._next=l,null===l?this._itTail=r:l._prev=r,o}_addToMoves(o,r){return o.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vN),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,r){return o.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class RO{constructor(o,r){this.item=o,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LO{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,r){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===r||r<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const r=o._prevDup,l=o._nextDup;return null===r?this._head=l:r._nextDup=l,null===l?this._tail=r:l._prevDup=r,null===this._head}}class vN{constructor(){this.map=new Map}put(o){const r=o.trackById;let l=this.map.get(r);l||(l=new LO,this.map.set(r,l)),l.add(o)}get(o,r){const h=this.map.get(o);return h?h.get(o,r):null}remove(o){const r=o.trackById;return this.map.get(r).remove(o)&&this.map.delete(r),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wN(i,o,r){const l=i.previousIndex;if(null===l)return l;let h=0;return r&&l<r.length&&(h=r[l]),l+o+h}class _N{constructor(){}supports(o){return o instanceof Map||Dy(o)}create(){return new jO}}class jO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let r;for(r=this._mapHead;null!==r;r=r._next)o(r)}forEachPreviousItem(o){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)o(r)}forEachChangedItem(o){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)o(r)}forEachAddedItem(o){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)o(r)}forEachRemovedItem(o){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)o(r)}diff(o){if(o){if(!(o instanceof Map||Dy(o)))throw new Se(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,h)=>{if(r&&r.key===h)this._maybeAddToChanges(r,l),this._appendAfter=r,r=r._next;else{const d=this._getOrCreateRecordForKey(h,l);r=this._insertBeforeOrAppend(r,d)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let l=r;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,r){if(o){const l=o._prev;return r._next=o,r._prev=l,o._prev=r,l&&(l._next=r),o===this._mapHead&&(this._mapHead=r),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(o,r){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,r);const d=h._prev,m=h._next;return d&&(d._next=m),m&&(m._prev=d),h._next=null,h._prev=null,h}const l=new HO(o);return this._records.set(o,l),l.currentValue=r,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,r){Object.is(r,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=r,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,r){o instanceof Map?o.forEach(r):Object.keys(o).forEach(l=>r(o[l],l))}}class HO{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xN(){return new D1([new yN])}let D1=(()=>{class i{constructor(r){this.factories=r}static create(r,l){if(null!=l){const h=l.factories.slice();r=r.concat(h)}return new i(r)}static extend(r){return{provide:i,useFactory:l=>i.create(r,l||xN()),deps:[[i,new xu,new ha]]}}find(r){const l=this.factories.find(h=>h.supports(r));if(null!=l)return l;throw new Se(901,"")}}return i.\u0275prov=A({token:i,providedIn:"root",factory:xN}),i})();function DN(){return new n0([new _N])}let n0=(()=>{class i{constructor(r){this.factories=r}static create(r,l){if(l){const h=l.factories.slice();r=r.concat(h)}return new i(r)}static extend(r){return{provide:i,useFactory:l=>i.create(r,l||DN()),deps:[[i,new xu,new ha]]}}find(r){const l=this.factories.find(d=>d.supports(r));if(l)return l;throw new Se(901,"")}}return i.\u0275prov=A({token:i,providedIn:"root",factory:DN}),i})();const VO=[new _N],GO=new D1([new yN]),UO=new n0(VO),zO=aN(null,"core",[{provide:Hx,useValue:"unknown"},{provide:uN,deps:[Fi]},{provide:rN,deps:[]},{provide:tN,deps:[]}]),XO=[{provide:e0,useClass:e0,deps:[An,Fi,Ol,ll,t0]},{provide:cA,deps:[An],useFactory:function ZO(i){let o=[];return i.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(r){o.push(r)}}},{provide:t0,useClass:t0,deps:[[new ha,jx]]},{provide:Vx,useClass:Vx,deps:[]},uO,{provide:D1,useFactory:function $O(){return GO},deps:[]},{provide:n0,useFactory:function YO(){return UO},deps:[]},{provide:gf,useFactory:function WO(i){return i||function KO(){return"undefined"!=typeof $localize&&$localize.locale||et}()},deps:[[new yd(gf),new ha,new xu]]},{provide:eN,useValue:"USD"}];let JO=(()=>{class i{constructor(r){}}return i.\u0275fac=function(r){return new(r||i)(Bt(e0))},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({providers:XO}),i})(),Ux=null;function Zu(){return Ux}const Do=new ue("DocumentToken");let Cg=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=A({token:i,factory:function(){return function eI(){return Bt(bN)}()},providedIn:"platform"}),i})();const nI=new ue("Location Initialized");let bN=(()=>{class i extends Cg{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zu().getBaseHref(this._doc)}onPopState(r){const l=Zu().getGlobalEventTarget(this._doc,"window");return l.addEventListener("popstate",r,!1),()=>l.removeEventListener("popstate",r)}onHashChange(r){const l=Zu().getGlobalEventTarget(this._doc,"window");return l.addEventListener("hashchange",r,!1),()=>l.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,l,h){MN()?this._history.pushState(r,l,h):this.location.hash=h}replaceState(r,l,h){MN()?this._history.replaceState(r,l,h):this.location.hash=h}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return i.\u0275fac=function(r){return new(r||i)(Bt(Do))},i.\u0275prov=A({token:i,factory:function(){return function iI(){return new bN(Bt(Do))}()},providedIn:"platform"}),i})();function MN(){return!!window.history.pushState}function $M(i,o){if(0==i.length)return o;if(0==o.length)return i;let r=0;return i.endsWith("/")&&r++,o.startsWith("/")&&r++,2==r?i+o.substring(1):1==r?i+o:i+"/"+o}function CN(i){const o=i.match(/#|\?|$/),r=o&&o.index||i.length;return i.slice(0,r-("/"===i[r-1]?1:0))+i.slice(r)}function Rc(i){return i&&"?"!==i[0]?"?"+i:i}let r0=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=A({token:i,factory:function(){return function rI(i){const o=Bt(Do).location;return new TN(Bt(Cg),o&&o.origin||"")}()},providedIn:"root"}),i})();const YM=new ue("appBaseHref");let TN=(()=>{class i extends r0{constructor(r,l){if(super(),this._platformLocation=r,this._removeListenerFns=[],null==l&&(l=this._platformLocation.getBaseHrefFromDOM()),null==l)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=l}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return $M(this._baseHref,r)}path(r=!1){const l=this._platformLocation.pathname+Rc(this._platformLocation.search),h=this._platformLocation.hash;return h&&r?`${l}${h}`:l}pushState(r,l,h,d){const m=this.prepareExternalUrl(h+Rc(d));this._platformLocation.pushState(r,l,m)}replaceState(r,l,h,d){const m=this.prepareExternalUrl(h+Rc(d));this._platformLocation.replaceState(r,l,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var l,h;null===(h=(l=this._platformLocation).historyGo)||void 0===h||h.call(l,r)}}return i.\u0275fac=function(r){return new(r||i)(Bt(Cg),Bt(YM,8))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})(),oI=(()=>{class i extends r0{constructor(r,l){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=l&&(this._baseHref=l)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let l=this._platformLocation.hash;return null==l&&(l="#"),l.length>0?l.substring(1):l}prepareExternalUrl(r){const l=$M(this._baseHref,r);return l.length>0?"#"+l:l}pushState(r,l,h,d){let m=this.prepareExternalUrl(h+Rc(d));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(r,l,m)}replaceState(r,l,h,d){let m=this.prepareExternalUrl(h+Rc(d));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(r,l,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var l,h;null===(h=(l=this._platformLocation).historyGo)||void 0===h||h.call(l,r)}}return i.\u0275fac=function(r){return new(r||i)(Bt(Cg),Bt(YM,8))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})(),WM=(()=>{class i{constructor(r,l){this._subject=new Ie,this._urlChangeListeners=[],this._platformStrategy=r;const h=this._platformStrategy.getBaseHref();this._platformLocation=l,this._baseHref=CN(SN(h)),this._platformStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}path(r=!1){return this.normalize(this._platformStrategy.path(r))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(r,l=""){return this.path()==this.normalize(r+Rc(l))}normalize(r){return i.stripTrailingSlash(function aI(i,o){return i&&o.startsWith(i)?o.substring(i.length):o}(this._baseHref,SN(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}go(r,l="",h=null){this._platformStrategy.pushState(h,"",r,l),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Rc(l)),h)}replaceState(r,l="",h=null){this._platformStrategy.replaceState(h,"",r,l),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Rc(l)),h)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(r=0){var l,h;null===(h=(l=this._platformStrategy).historyGo)||void 0===h||h.call(l,r)}onUrlChange(r){this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(l=>{this._notifyUrlChangeListeners(l.url,l.state)}))}_notifyUrlChangeListeners(r="",l){this._urlChangeListeners.forEach(h=>h(r,l))}subscribe(r,l,h){return this._subject.subscribe({next:r,error:l,complete:h})}}return i.normalizeQueryParams=Rc,i.joinWithSlash=$M,i.stripTrailingSlash=CN,i.\u0275fac=function(r){return new(r||i)(Bt(r0),Bt(Cg))},i.\u0275prov=A({token:i,factory:function(){return function sI(){return new WM(Bt(r0),Bt(Cg))}()},providedIn:"root"}),i})();function SN(i){return i.replace(/\/index.html$/,"")}var wr=(()=>((wr=wr||{})[wr.Zero=0]="Zero",wr[wr.One=1]="One",wr[wr.Two=2]="Two",wr[wr.Few=3]="Few",wr[wr.Many=4]="Many",wr[wr.Other=5]="Other",wr))();const pI=function F(i){return function E(i){const o=function ot(i){return i.toLowerCase().replace(/_/g,"-")}(i);let r=j(o);if(r)return r;const l=o.split("-")[0];if(r=j(l),r)return r;if("en"===l)return D;throw new Error(`Missing locale data for the locale "${i}".`)}(i)[G.PluralCase]};class Qx{}let UI=(()=>{class i extends Qx{constructor(r){super(),this.locale=r}getPluralCategory(r,l){switch(pI(l||this.locale)(r)){case wr.Zero:return"zero";case wr.One:return"one";case wr.Two:return"two";case wr.Few:return"few";case wr.Many:return"many";default:return"other"}}}return i.\u0275fac=function(r){return new(r||i)(Bt(gf))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})(),o0=(()=>{class i{constructor(r,l){this._viewContainer=r,this._context=new KI,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=l}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){LN("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){LN("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,l){return!0}}return i.\u0275fac=function(r){return new(r||i)(at(Zl),at(Ki))},i.\u0275dir=St({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class KI{constructor(){this.$implicit=null,this.ngIf=null}}function LN(i,o){if(o&&!o.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${Be(o)}'.`)}let $o=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({providers:[{provide:Qx,useClass:UI}]}),i})();let MF=(()=>{class i{}return i.\u0275prov=A({token:i,providedIn:"root",factory:()=>new CF(Bt(Do),window)}),i})();class CF{constructor(o,r){this.document=o,this.window=r,this.offset=()=>[0,0]}setOffset(o){this.offset=Array.isArray(o)?()=>o:o}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(o){this.supportsScrolling()&&this.window.scrollTo(o[0],o[1])}scrollToAnchor(o){if(!this.supportsScrolling())return;const r=function TF(i,o){const r=i.getElementById(o)||i.getElementsByName(o)[0];if(r)return r;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const l=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let h=l.currentNode;for(;h;){const d=h.shadowRoot;if(d){const m=d.getElementById(o)||d.querySelector(`[name="${o}"]`);if(m)return m}h=l.nextNode()}}return null}(this.document,o);r&&(this.scrollToElement(r),r.focus())}setHistoryScrollRestoration(o){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=o)}}scrollToElement(o){const r=o.getBoundingClientRect(),l=r.left+this.window.pageXOffset,h=r.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(l-d[0],h-d[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const o=BN(this.window.history)||BN(Object.getPrototypeOf(this.window.history));return!(!o||!o.writable&&!o.set)}catch(o){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(o){return!1}}}function BN(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class sC extends class NF extends class tI{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function QO(i){Ux||(Ux=i)}(new sC)}onAndCancel(o,r,l){return o.addEventListener(r,l,!1),()=>{o.removeEventListener(r,l,!1)}}dispatchEvent(o,r){o.dispatchEvent(r)}remove(o){o.parentNode&&o.parentNode.removeChild(o)}createElement(o,r){return(r=r||this.getDefaultDocument()).createElement(o)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(o){return o.nodeType===Node.ELEMENT_NODE}isShadowRoot(o){return o instanceof DocumentFragment}getGlobalEventTarget(o,r){return"window"===r?window:"document"===r?o:"body"===r?o.body:null}getBaseHref(o){const r=function kF(){return S1=S1||document.querySelector("base"),S1?S1.getAttribute("href"):null}();return null==r?null:function EF(i){tD=tD||document.createElement("a"),tD.setAttribute("href",i);const o=tD.pathname;return"/"===o.charAt(0)?o:`/${o}`}(r)}resetBaseElement(){S1=null}getUserAgent(){return window.navigator.userAgent}getCookie(o){return function zI(i,o){o=encodeURIComponent(o);for(const r of i.split(";")){const l=r.indexOf("="),[h,d]=-1==l?[r,""]:[r.slice(0,l),r.slice(l+1)];if(h.trim()===o)return decodeURIComponent(d)}return null}(document.cookie,o)}}let tD,S1=null;const GN=new ue("TRANSITION_ID"),AF=[{provide:jx,useFactory:function PF(i,o,r){return()=>{r.get(t0).donePromise.then(()=>{const l=Zu(),h=o.querySelectorAll(`style[ng-transition="${i}"]`);for(let d=0;d<h.length;d++)l.remove(h[d])})}},deps:[GN,Do,Fi],multi:!0}];class aC{static init(){!function wO(i){HM=i}(new aC)}addToWindow(o){gn.getAngularTestability=(l,h=!0)=>{const d=o.findTestabilityInTree(l,h);if(null==d)throw new Error("Could not find testability for element.");return d},gn.getAllAngularTestabilities=()=>o.getAllTestabilities(),gn.getAllAngularRootElements=()=>o.getAllRootElements(),gn.frameworkStabilizers||(gn.frameworkStabilizers=[]),gn.frameworkStabilizers.push(l=>{const h=gn.getAllAngularTestabilities();let d=h.length,m=!1;const w=function(x){m=m||x,d--,0==d&&l(m)};h.forEach(function(x){x.whenStable(w)})})}findTestabilityInTree(o,r,l){if(null==r)return null;const h=o.getTestability(r);return null!=h?h:l?Zu().isShadowRoot(r)?this.findTestabilityInTree(o,r.host,!0):this.findTestabilityInTree(o,r.parentElement,!0):null}}let OF=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();const eD=new ue("EventManagerPlugins");let nD=(()=>{class i{constructor(r,l){this._zone=l,this._eventNameToPlugin=new Map,r.forEach(h=>h.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,l,h){return this._findPluginFor(l).addEventListener(r,l,h)}addGlobalEventListener(r,l,h){return this._findPluginFor(l).addGlobalEventListener(r,l,h)}getZone(){return this._zone}_findPluginFor(r){const l=this._eventNameToPlugin.get(r);if(l)return l;const h=this._plugins;for(let d=0;d<h.length;d++){const m=h[d];if(m.supports(r))return this._eventNameToPlugin.set(r,m),m}throw new Error(`No event manager plugin found for event ${r}`)}}return i.\u0275fac=function(r){return new(r||i)(Bt(eD),Bt(An))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();class UN{constructor(o){this._doc=o}addGlobalEventListener(o,r,l){const h=Zu().getGlobalEventTarget(this._doc,o);if(!h)throw new Error(`Unsupported event target ${h} for event ${r}`);return this.addEventListener(h,r,l)}}let zN=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(r){const l=new Set;r.forEach(h=>{this._stylesSet.has(h)||(this._stylesSet.add(h),l.add(h))}),this.onStylesAdded(l)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})(),N1=(()=>{class i extends zN{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,l,h){r.forEach(d=>{const m=this._doc.createElement("style");m.textContent=d,h.push(l.appendChild(m))})}addHost(r){const l=[];this._addStylesToHost(this._stylesSet,r,l),this._hostNodes.set(r,l)}removeHost(r){const l=this._hostNodes.get(r);l&&l.forEach($N),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((l,h)=>{this._addStylesToHost(r,h,l)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach($N))}}return i.\u0275fac=function(r){return new(r||i)(Bt(Do))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();function $N(i){Zu().remove(i)}const lC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},uC=/%COMP%/g;function iD(i,o,r){for(let l=0;l<o.length;l++){let h=o[l];Array.isArray(h)?iD(i,h,r):(h=h.replace(uC,i),r.push(h))}return r}function KN(i){return o=>{if("__ngUnwrap__"===o)return i;!1===i(o)&&(o.preventDefault(),o.returnValue=!1)}}let hC=(()=>{class i{constructor(r,l,h){this.eventManager=r,this.sharedStylesHost=l,this.appId=h,this.rendererByCompId=new Map,this.defaultRenderer=new cC(r)}createRenderer(r,l){if(!r||!l)return this.defaultRenderer;switch(l.encapsulation){case la.Emulated:{let h=this.rendererByCompId.get(l.id);return h||(h=new HF(this.eventManager,this.sharedStylesHost,l,this.appId),this.rendererByCompId.set(l.id,h)),h.applyToHost(r),h}case 1:case la.ShadowDom:return new VF(this.eventManager,this.sharedStylesHost,r,l);default:if(!this.rendererByCompId.has(l.id)){const h=iD(l.id,l.styles,[]);this.sharedStylesHost.addStyles(h),this.rendererByCompId.set(l.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(r){return new(r||i)(Bt(nD),Bt(N1),Bt(x1))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();class cC{constructor(o){this.eventManager=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(o,r){return r?document.createElementNS(lC[r]||r,o):document.createElement(o)}createComment(o){return document.createComment(o)}createText(o){return document.createTextNode(o)}appendChild(o,r){o.appendChild(r)}insertBefore(o,r,l){o&&o.insertBefore(r,l)}removeChild(o,r){o&&o.removeChild(r)}selectRootElement(o,r){let l="string"==typeof o?document.querySelector(o):o;if(!l)throw new Error(`The selector "${o}" did not match any elements`);return r||(l.textContent=""),l}parentNode(o){return o.parentNode}nextSibling(o){return o.nextSibling}setAttribute(o,r,l,h){if(h){r=h+":"+r;const d=lC[h];d?o.setAttributeNS(d,r,l):o.setAttribute(r,l)}else o.setAttribute(r,l)}removeAttribute(o,r,l){if(l){const h=lC[l];h?o.removeAttributeNS(h,r):o.removeAttribute(`${l}:${r}`)}else o.removeAttribute(r)}addClass(o,r){o.classList.add(r)}removeClass(o,r){o.classList.remove(r)}setStyle(o,r,l,h){h&(os.DashCase|os.Important)?o.style.setProperty(r,l,h&os.Important?"important":""):o.style[r]=l}removeStyle(o,r,l){l&os.DashCase?o.style.removeProperty(r):o.style[r]=""}setProperty(o,r,l){o[r]=l}setValue(o,r){o.nodeValue=r}listen(o,r,l){return"string"==typeof o?this.eventManager.addGlobalEventListener(o,r,KN(l)):this.eventManager.addEventListener(o,r,KN(l))}}class HF extends cC{constructor(o,r,l,h){super(o),this.component=l;const d=iD(h+"-"+l.id,l.styles,[]);r.addStyles(d),this.contentAttr=function RF(i){return"_ngcontent-%COMP%".replace(uC,i)}(h+"-"+l.id),this.hostAttr=function LF(i){return"_nghost-%COMP%".replace(uC,i)}(h+"-"+l.id)}applyToHost(o){super.setAttribute(o,this.hostAttr,"")}createElement(o,r){const l=super.createElement(o,r);return super.setAttribute(l,this.contentAttr,""),l}}class VF extends cC{constructor(o,r,l,h){super(o),this.sharedStylesHost=r,this.hostEl=l,this.shadowRoot=l.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=iD(h.id,h.styles,[]);for(let m=0;m<d.length;m++){const w=document.createElement("style");w.textContent=d[m],this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(o){return o===this.hostEl?this.shadowRoot:o}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(o,r){return super.appendChild(this.nodeOrShadowRoot(o),r)}insertBefore(o,r,l){return super.insertBefore(this.nodeOrShadowRoot(o),r,l)}removeChild(o,r){return super.removeChild(this.nodeOrShadowRoot(o),r)}parentNode(o){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(o)))}}let BF=(()=>{class i extends UN{constructor(r){super(r)}supports(r){return!0}addEventListener(r,l,h){return r.addEventListener(l,h,!1),()=>this.removeEventListener(r,l,h)}removeEventListener(r,l,h){return r.removeEventListener(l,h)}}return i.\u0275fac=function(r){return new(r||i)(Bt(Do))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();const ZN=["alt","control","meta","shift"],UF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},JN={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},zF={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let $F=(()=>{class i extends UN{constructor(r){super(r)}supports(r){return null!=i.parseEventName(r)}addEventListener(r,l,h){const d=i.parseEventName(l),m=i.eventCallback(d.fullKey,h,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zu().onAndCancel(r,d.domEventName,m))}static parseEventName(r){const l=r.toLowerCase().split("."),h=l.shift();if(0===l.length||"keydown"!==h&&"keyup"!==h)return null;const d=i._normalizeKey(l.pop());let m="";if(ZN.forEach(x=>{const M=l.indexOf(x);M>-1&&(l.splice(M,1),m+=x+".")}),m+=d,0!=l.length||0===d.length)return null;const w={};return w.domEventName=h,w.fullKey=m,w}static getEventFullKey(r){let l="",h=function YF(i){let o=i.key;if(null==o){if(o=i.keyIdentifier,null==o)return"Unidentified";o.startsWith("U+")&&(o=String.fromCharCode(parseInt(o.substring(2),16)),3===i.location&&JN.hasOwnProperty(o)&&(o=JN[o]))}return UF[o]||o}(r);return h=h.toLowerCase()," "===h?h="space":"."===h&&(h="dot"),ZN.forEach(d=>{d!=h&&zF[d](r)&&(l+=d+".")}),l+=h,l}static eventCallback(r,l,h){return d=>{i.getEventFullKey(d)===r&&h.runGuarded(()=>l(d))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return i.\u0275fac=function(r){return new(r||i)(Bt(Do))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();const ZF=aN(zO,"browser",[{provide:Hx,useValue:"browser"},{provide:qS,useValue:function WF(){sC.makeCurrent(),aC.init()},multi:!0},{provide:Do,useFactory:function XF(){return function Uw(i){jf=i}(document),document},deps:[]}]),JF=[{provide:fy,useValue:"root"},{provide:Ol,useFactory:function KF(){return new Ol},deps:[]},{provide:eD,useClass:BF,multi:!0,deps:[Do,An,Hx]},{provide:eD,useClass:$F,multi:!0,deps:[Do]},{provide:hC,useClass:hC,deps:[nD,N1,x1]},{provide:Ac,useExisting:hC},{provide:zN,useExisting:N1},{provide:N1,useClass:N1,deps:[Do]},{provide:jM,useClass:jM,deps:[An]},{provide:nD,useClass:nD,deps:[eD,An]},{provide:class SF{},useClass:OF,deps:[]}];let qF=(()=>{class i{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:i,providers:[{provide:x1,useValue:r.appId},{provide:GN,useExisting:x1},AF]}}}return i.\u0275fac=function(r){return new(r||i)(Bt(i,12))},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({providers:JF,imports:[$o,JO]}),i})();function Ce(...i){return Kt(i,Nf(i))}"undefined"!=typeof window&&window;class lo extends Mi{constructor(o){super(),this._value=o}get value(){return this.getValue()}_subscribe(o){const r=super._subscribe(o);return!r.closed&&o.next(this._value),r}getValue(){const{hasError:o,thrownError:r,_value:l}=this;if(o)throw r;return this._throwIfClosed(),l}next(o){super.next(this._value=o)}}const{isArray:uR}=Array,{getPrototypeOf:hR,prototype:cR,keys:dR}=Object;const{isArray:pR}=Array;function fC(i){return Je(o=>function gR(i,o){return pR(o)?i(...o):i(o)}(i,o))}function pC(...i){const o=Nf(i),r=Ug(i),{args:l,keys:h}=function tk(i){if(1===i.length){const o=i[0];if(uR(o))return{args:o,keys:null};if(function fR(i){return i&&"object"==typeof i&&hR(i)===cR}(o)){const r=dR(o);return{args:r.map(l=>o[l]),keys:r}}}return{args:i,keys:null}}(i);if(0===l.length)return Kt([],o);const d=new xn(function mR(i,o,r=su){return l=>{nk(o,()=>{const{length:h}=i,d=new Array(h);let m=h,w=h;for(let x=0;x<h;x++)nk(o,()=>{const M=Kt(i[x],o);let N=!1;M.subscribe($n(l,I=>{d[x]=I,N||(N=!0,w--),w||l.next(r(d.slice()))},()=>{--m||l.complete()}))},l)},l)}}(l,o,h?m=>function ek(i,o){return i.reduce((r,l,h)=>(r[l]=o[h],r),{})}(h,m):su));return r?d.pipe(fC(r)):d}function nk(i,o,r){i?Ra(r,i,o):o()}const rD=fw(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function k1(...i){return function yR(){return oh(1)}()(Kt(i,Nf(i)))}function ik(i){return new xn(o=>{Vr(i()).subscribe(o)})}function rk(){return Hi((i,o)=>{let r=null;i._refCount++;const l=$n(o,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(r=null);const h=i._connection,d=r;r=null,h&&(!d||h===d)&&h.unsubscribe(),o.unsubscribe()});i.subscribe(l),l.closed||(r=i.connect())})}class vR extends xn{constructor(o,r){super(),this.source=o,this.subjectFactory=r,this._subject=null,this._refCount=0,this._connection=null,cb(o)&&(this.lift=o.lift)}_subscribe(o){return this.getSubject().subscribe(o)}getSubject(){const o=this._subject;return(!o||o.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:o}=this;this._subject=this._connection=null,null==o||o.unsubscribe()}connect(){let o=this._connection;if(!o){o=this._connection=new Cs;const r=this.getSubject();o.add(this.source.subscribe($n(r,void 0,()=>{this._teardown(),r.complete()},l=>{this._teardown(),r.error(l)},()=>this._teardown()))),o.closed&&(this._connection=null,o=Cs.EMPTY)}return o}refCount(){return rk()(this)}}function jc(i,o){return Hi((r,l)=>{let h=null,d=0,m=!1;const w=()=>m&&!h&&l.complete();r.subscribe($n(l,x=>{null==h||h.unsubscribe();let M=0;const N=d++;Vr(i(x,N)).subscribe(h=$n(l,I=>l.next(o?o(x,I,N,M++):I),()=>{h=null,w()}))},()=>{m=!0,w()}))})}function wR(i,o,r,l,h){return(d,m)=>{let w=r,x=o,M=0;d.subscribe($n(m,N=>{const I=M++;x=w?i(x,N,I):(w=!0,N),l&&m.next(x)},h&&(()=>{w&&m.next(x),m.complete()})))}}function ok(i,o){return Hi(wR(i,o,arguments.length>=2,!0))}function Ia(i,o){return Hi((r,l)=>{let h=0;r.subscribe($n(l,d=>i.call(o,d,h++)&&l.next(d)))})}function yf(i){return Hi((o,r)=>{let d,l=null,h=!1;l=o.subscribe($n(r,void 0,void 0,m=>{d=Vr(i(m,yf(i)(o))),l?(l.unsubscribe(),l=null,d.subscribe(r)):h=!0})),h&&(l.unsubscribe(),l=null,d.subscribe(r))})}function E1(i,o){return mt(o)?fi(i,o,1):fi(i,1)}function gC(i){return i<=0?()=>oa:Hi((o,r)=>{let l=[];o.subscribe($n(r,h=>{l.push(h),i<l.length&&l.shift()},()=>{for(const h of l)r.next(h);r.complete()},void 0,()=>{l=null}))})}function sk(i=_R){return Hi((o,r)=>{let l=!1;o.subscribe($n(r,h=>{l=!0,r.next(h)},()=>l?r.complete():r.error(i())))})}function _R(){return new rD}function ak(i){return Hi((o,r)=>{let l=!1;o.subscribe($n(r,h=>{l=!0,r.next(h)},()=>{l||r.next(i),r.complete()}))})}function s0(i,o){const r=arguments.length>=2;return l=>l.pipe(i?Ia((h,d)=>i(h,d,l)):su,Ti(1),r?ak(o):sk(()=>new rD))}function _s(i,o,r){const l=mt(i)||o||r?{next:i,error:o,complete:r}:i;return l?Hi((h,d)=>{var m;null===(m=l.subscribe)||void 0===m||m.call(l);let w=!0;h.subscribe($n(d,x=>{var M;null===(M=l.next)||void 0===M||M.call(l,x),d.next(x)},()=>{var x;w=!1,null===(x=l.complete)||void 0===x||x.call(l),d.complete()},x=>{var M;w=!1,null===(M=l.error)||void 0===M||M.call(l,x),d.error(x)},()=>{var x,M;w&&(null===(x=l.unsubscribe)||void 0===x||x.call(l)),null===(M=l.finalize)||void 0===M||M.call(l)}))}):su}class Hc{constructor(o,r){this.id=o,this.url=r}}class mC extends Hc{constructor(o,r,l="imperative",h=null){super(o,r),this.navigationTrigger=l,this.restoredState=h}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class P1 extends Hc{constructor(o,r,l){super(o,r),this.urlAfterRedirects=l}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class lk extends Hc{constructor(o,r,l){super(o,r),this.reason=l}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bR extends Hc{constructor(o,r,l){super(o,r),this.error=l}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class MR extends Hc{constructor(o,r,l,h){super(o,r),this.urlAfterRedirects=l,this.state=h}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CR extends Hc{constructor(o,r,l,h){super(o,r),this.urlAfterRedirects=l,this.state=h}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TR extends Hc{constructor(o,r,l,h,d){super(o,r),this.urlAfterRedirects=l,this.state=h,this.shouldActivate=d}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class SR extends Hc{constructor(o,r,l,h){super(o,r),this.urlAfterRedirects=l,this.state=h}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NR extends Hc{constructor(o,r,l,h){super(o,r),this.urlAfterRedirects=l,this.state=h}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uk{constructor(o){this.route=o}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hk{constructor(o){this.route=o}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class kR{constructor(o){this.snapshot=o}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ER{constructor(o){this.snapshot=o}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PR{constructor(o){this.snapshot=o}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AR{constructor(o){this.snapshot=o}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ck{constructor(o,r,l){this.routerEvent=o,this.position=r,this.anchor=l}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const We="primary";class OR{constructor(o){this.params=o||{}}has(o){return Object.prototype.hasOwnProperty.call(this.params,o)}get(o){if(this.has(o)){const r=this.params[o];return Array.isArray(r)?r[0]:r}return null}getAll(o){if(this.has(o)){const r=this.params[o];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function a0(i){return new OR(i)}const dk="ngNavigationCancelingError";function yC(i){const o=Error("NavigationCancelingError: "+i);return o[dk]=!0,o}function FR(i,o,r){const l=r.path.split("/");if(l.length>i.length||"full"===r.pathMatch&&(o.hasChildren()||l.length<i.length))return null;const h={};for(let d=0;d<l.length;d++){const m=l[d],w=i[d];if(m.startsWith(":"))h[m.substring(1)]=w;else if(m!==w.path)return null}return{consumed:i.slice(0,l.length),posParams:h}}function Ju(i,o){const r=i?Object.keys(i):void 0,l=o?Object.keys(o):void 0;if(!r||!l||r.length!=l.length)return!1;let h;for(let d=0;d<r.length;d++)if(h=r[d],!fk(i[h],o[h]))return!1;return!0}function fk(i,o){if(Array.isArray(i)&&Array.isArray(o)){if(i.length!==o.length)return!1;const r=[...i].sort(),l=[...o].sort();return r.every((h,d)=>l[d]===h)}return i===o}function pk(i){return Array.prototype.concat.apply([],i)}function gk(i){return i.length>0?i[i.length-1]:null}function bo(i,o){for(const r in i)i.hasOwnProperty(r)&&o(i[r],r)}function qu(i){return nf(i)?i:ef(i)?Kt(Promise.resolve(i)):Ce(i)}const jR={exact:function vk(i,o,r){if(!Sg(i.segments,o.segments)||!sD(i.segments,o.segments,r)||i.numberOfChildren!==o.numberOfChildren)return!1;for(const l in o.children)if(!i.children[l]||!vk(i.children[l],o.children[l],r))return!1;return!0},subset:wk},mk={exact:function HR(i,o){return Ju(i,o)},subset:function VR(i,o){return Object.keys(o).length<=Object.keys(i).length&&Object.keys(o).every(r=>fk(i[r],o[r]))},ignored:()=>!0};function yk(i,o,r){return jR[r.paths](i.root,o.root,r.matrixParams)&&mk[r.queryParams](i.queryParams,o.queryParams)&&!("exact"===r.fragment&&i.fragment!==o.fragment)}function wk(i,o,r){return _k(i,o,o.segments,r)}function _k(i,o,r,l){if(i.segments.length>r.length){const h=i.segments.slice(0,r.length);return!(!Sg(h,r)||o.hasChildren()||!sD(h,r,l))}if(i.segments.length===r.length){if(!Sg(i.segments,r)||!sD(i.segments,r,l))return!1;for(const h in o.children)if(!i.children[h]||!wk(i.children[h],o.children[h],l))return!1;return!0}{const h=r.slice(0,i.segments.length),d=r.slice(i.segments.length);return!!(Sg(i.segments,h)&&sD(i.segments,h,l)&&i.children[We])&&_k(i.children[We],o,d,l)}}function sD(i,o,r){return o.every((l,h)=>mk[r](i[h].parameters,l.parameters))}class Tg{constructor(o,r,l){this.root=o,this.queryParams=r,this.fragment=l}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=a0(this.queryParams)),this._queryParamMap}toString(){return UR.serialize(this)}}class nn{constructor(o,r){this.segments=o,this.children=r,this.parent=null,bo(r,(l,h)=>l.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return aD(this)}}class A1{constructor(o,r){this.path=o,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=a0(this.parameters)),this._parameterMap}toString(){return Ck(this)}}function Sg(i,o){return i.length===o.length&&i.every((r,l)=>r.path===o[l].path)}class xk{}class Dk{parse(o){const r=new qR(o);return new Tg(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(o){const r=`/${O1(o.root,!0)}`,l=function YR(i){const o=Object.keys(i).map(r=>{const l=i[r];return Array.isArray(l)?l.map(h=>`${lD(r)}=${lD(h)}`).join("&"):`${lD(r)}=${lD(l)}`}).filter(r=>!!r);return o.length?`?${o.join("&")}`:""}(o.queryParams);return`${r}${l}${"string"==typeof o.fragment?`#${function zR(i){return encodeURI(i)}(o.fragment)}`:""}`}}const UR=new Dk;function aD(i){return i.segments.map(o=>Ck(o)).join("/")}function O1(i,o){if(!i.hasChildren())return aD(i);if(o){const r=i.children[We]?O1(i.children[We],!1):"",l=[];return bo(i.children,(h,d)=>{d!==We&&l.push(`${d}:${O1(h,!1)}`)}),l.length>0?`${r}(${l.join("//")})`:r}{const r=function GR(i,o){let r=[];return bo(i.children,(l,h)=>{h===We&&(r=r.concat(o(l,h)))}),bo(i.children,(l,h)=>{h!==We&&(r=r.concat(o(l,h)))}),r}(i,(l,h)=>h===We?[O1(i.children[We],!1)]:[`${h}:${O1(l,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[We]?`${aD(i)}/${r[0]}`:`${aD(i)}/(${r.join("//")})`}}function bk(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lD(i){return bk(i).replace(/%3B/gi,";")}function vC(i){return bk(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function uD(i){return decodeURIComponent(i)}function Mk(i){return uD(i.replace(/\+/g,"%20"))}function Ck(i){return`${vC(i.path)}${function $R(i){return Object.keys(i).map(o=>`;${vC(o)}=${vC(i[o])}`).join("")}(i.parameters)}`}const WR=/^[^\/()?;=#]+/;function hD(i){const o=i.match(WR);return o?o[0]:""}const KR=/^[^=?&#]+/,ZR=/^[^&#]+/;class qR{constructor(o){this.url=o,this.remaining=o}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const o={};if(this.consumeOptional("?"))do{this.parseQueryParam(o)}while(this.consumeOptional("&"));return o}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const o=[];for(this.peekStartsWith("(")||o.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),o.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let l={};return this.peekStartsWith("(")&&(l=this.parseParens(!1)),(o.length>0||Object.keys(r).length>0)&&(l[We]=new nn(o,r)),l}parseSegment(){const o=hD(this.remaining);if(""===o&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(o),new A1(uD(o),this.parseMatrixParams())}parseMatrixParams(){const o={};for(;this.consumeOptional(";");)this.parseParam(o);return o}parseParam(o){const r=hD(this.remaining);if(!r)return;this.capture(r);let l="";if(this.consumeOptional("=")){const h=hD(this.remaining);h&&(l=h,this.capture(l))}o[uD(r)]=uD(l)}parseQueryParam(o){const r=function XR(i){const o=i.match(KR);return o?o[0]:""}(this.remaining);if(!r)return;this.capture(r);let l="";if(this.consumeOptional("=")){const m=function JR(i){const o=i.match(ZR);return o?o[0]:""}(this.remaining);m&&(l=m,this.capture(l))}const h=Mk(r),d=Mk(l);if(o.hasOwnProperty(h)){let m=o[h];Array.isArray(m)||(m=[m],o[h]=m),m.push(d)}else o[h]=d}parseParens(o){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const l=hD(this.remaining),h=this.remaining[l.length];if("/"!==h&&")"!==h&&";"!==h)throw new Error(`Cannot parse url '${this.url}'`);let d;l.indexOf(":")>-1?(d=l.substr(0,l.indexOf(":")),this.capture(d),this.capture(":")):o&&(d=We);const m=this.parseChildren();r[d]=1===Object.keys(m).length?m[We]:new nn([],m),this.consumeOptional("//")}return r}peekStartsWith(o){return this.remaining.startsWith(o)}consumeOptional(o){return!!this.peekStartsWith(o)&&(this.remaining=this.remaining.substring(o.length),!0)}capture(o){if(!this.consumeOptional(o))throw new Error(`Expected "${o}".`)}}class Tk{constructor(o){this._root=o}get root(){return this._root.value}parent(o){const r=this.pathFromRoot(o);return r.length>1?r[r.length-2]:null}children(o){const r=wC(o,this._root);return r?r.children.map(l=>l.value):[]}firstChild(o){const r=wC(o,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(o){const r=_C(o,this._root);return r.length<2?[]:r[r.length-2].children.map(h=>h.value).filter(h=>h!==o)}pathFromRoot(o){return _C(o,this._root).map(r=>r.value)}}function wC(i,o){if(i===o.value)return o;for(const r of o.children){const l=wC(i,r);if(l)return l}return null}function _C(i,o){if(i===o.value)return[o];for(const r of o.children){const l=_C(i,r);if(l.length)return l.unshift(o),l}return[]}class Vc{constructor(o,r){this.value=o,this.children=r}toString(){return`TreeNode(${this.value})`}}function l0(i){const o={};return i&&i.children.forEach(r=>o[r.value.outlet]=r),o}class Sk extends Tk{constructor(o,r){super(o),this.snapshot=r,xC(this,o)}toString(){return this.snapshot.toString()}}function Nk(i,o){const r=function QR(i,o){const m=new cD([],{},{},"",{},We,o,null,i.root,-1,{});return new Ek("",new Vc(m,[]))}(i,o),l=new lo([new A1("",{})]),h=new lo({}),d=new lo({}),m=new lo({}),w=new lo(""),x=new u0(l,h,m,w,d,We,o,r.root);return x.snapshot=r.root,new Sk(new Vc(x,[]),r)}class u0{constructor(o,r,l,h,d,m,w,x){this.url=o,this.params=r,this.queryParams=l,this.fragment=h,this.data=d,this.outlet=m,this.component=w,this._futureSnapshot=x}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Je(o=>a0(o)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Je(o=>a0(o)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kk(i,o="emptyOnly"){const r=i.pathFromRoot;let l=0;if("always"!==o)for(l=r.length-1;l>=1;){const h=r[l],d=r[l-1];if(h.routeConfig&&""===h.routeConfig.path)l--;else{if(d.component)break;l--}}return function tL(i){return i.reduce((o,r)=>({params:Object.assign(Object.assign({},o.params),r.params),data:Object.assign(Object.assign({},o.data),r.data),resolve:Object.assign(Object.assign({},o.resolve),r._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(l))}class cD{constructor(o,r,l,h,d,m,w,x,M,N,I){this.url=o,this.params=r,this.queryParams=l,this.fragment=h,this.data=d,this.outlet=m,this.component=w,this.routeConfig=x,this._urlSegment=M,this._lastPathIndex=N,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=a0(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=a0(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(l=>l.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ek extends Tk{constructor(o,r){super(r),this.url=o,xC(this,r)}toString(){return Pk(this._root)}}function xC(i,o){o.value._routerState=i,o.children.forEach(r=>xC(i,r))}function Pk(i){const o=i.children.length>0?` { ${i.children.map(Pk).join(", ")} } `:"";return`${i.value}${o}`}function DC(i){if(i.snapshot){const o=i.snapshot,r=i._futureSnapshot;i.snapshot=r,Ju(o.queryParams,r.queryParams)||i.queryParams.next(r.queryParams),o.fragment!==r.fragment&&i.fragment.next(r.fragment),Ju(o.params,r.params)||i.params.next(r.params),function RR(i,o){if(i.length!==o.length)return!1;for(let r=0;r<i.length;++r)if(!Ju(i[r],o[r]))return!1;return!0}(o.url,r.url)||i.url.next(r.url),Ju(o.data,r.data)||i.data.next(r.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function bC(i,o){const r=Ju(i.params,o.params)&&function BR(i,o){return Sg(i,o)&&i.every((r,l)=>Ju(r.parameters,o[l].parameters))}(i.url,o.url);return r&&!(!i.parent!=!o.parent)&&(!i.parent||bC(i.parent,o.parent))}function I1(i,o,r){if(r&&i.shouldReuseRoute(o.value,r.value.snapshot)){const l=r.value;l._futureSnapshot=o.value;const h=function nL(i,o,r){return o.children.map(l=>{for(const h of r.children)if(i.shouldReuseRoute(l.value,h.value.snapshot))return I1(i,l,h);return I1(i,l)})}(i,o,r);return new Vc(l,h)}{if(i.shouldAttach(o.value)){const d=i.retrieve(o.value);if(null!==d){const m=d.route;return m.value._futureSnapshot=o.value,m.children=o.children.map(w=>I1(i,w)),m}}const l=function iL(i){return new u0(new lo(i.url),new lo(i.params),new lo(i.queryParams),new lo(i.fragment),new lo(i.data),i.outlet,i.component,i)}(o.value),h=o.children.map(d=>I1(i,d));return new Vc(l,h)}}function dD(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function F1(i){return"object"==typeof i&&null!=i&&i.outlets}function MC(i,o,r,l,h){let d={};return l&&bo(l,(m,w)=>{d[w]=Array.isArray(m)?m.map(x=>`${x}`):`${m}`}),new Tg(r.root===i?o:Ak(r.root,i,o),d,h)}function Ak(i,o,r){const l={};return bo(i.children,(h,d)=>{l[d]=h===o?r:Ak(h,o,r)}),new nn(i.segments,l)}class Ok{constructor(o,r,l){if(this.isAbsolute=o,this.numberOfDoubleDots=r,this.commands=l,o&&l.length>0&&dD(l[0]))throw new Error("Root segment cannot have matrix parameters");const h=l.find(F1);if(h&&h!==gk(l))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class CC{constructor(o,r,l){this.segmentGroup=o,this.processChildren=r,this.index=l}}function Ik(i,o,r){if(i||(i=new nn([],{})),0===i.segments.length&&i.hasChildren())return fD(i,o,r);const l=function uL(i,o,r){let l=0,h=o;const d={match:!1,pathIndex:0,commandIndex:0};for(;h<i.segments.length;){if(l>=r.length)return d;const m=i.segments[h],w=r[l];if(F1(w))break;const x=`${w}`,M=l<r.length-1?r[l+1]:null;if(h>0&&void 0===x)break;if(x&&M&&"object"==typeof M&&void 0===M.outlets){if(!Rk(x,M,m))return d;l+=2}else{if(!Rk(x,{},m))return d;l++}h++}return{match:!0,pathIndex:h,commandIndex:l}}(i,o,r),h=r.slice(l.commandIndex);if(l.match&&l.pathIndex<i.segments.length){const d=new nn(i.segments.slice(0,l.pathIndex),{});return d.children[We]=new nn(i.segments.slice(l.pathIndex),i.children),fD(d,0,h)}return l.match&&0===h.length?new nn(i.segments,{}):l.match&&!i.hasChildren()?TC(i,o,r):l.match?fD(i,0,h):TC(i,o,r)}function fD(i,o,r){if(0===r.length)return new nn(i.segments,{});{const l=function lL(i){return F1(i[0])?i[0].outlets:{[We]:i}}(r),h={};return bo(l,(d,m)=>{"string"==typeof d&&(d=[d]),null!==d&&(h[m]=Ik(i.children[m],o,d))}),bo(i.children,(d,m)=>{void 0===l[m]&&(h[m]=d)}),new nn(i.segments,h)}}function TC(i,o,r){const l=i.segments.slice(0,o);let h=0;for(;h<r.length;){const d=r[h];if(F1(d)){const x=hL(d.outlets);return new nn(l,x)}if(0===h&&dD(r[0])){l.push(new A1(i.segments[o].path,Fk(r[0]))),h++;continue}const m=F1(d)?d.outlets[We]:`${d}`,w=h<r.length-1?r[h+1]:null;m&&w&&dD(w)?(l.push(new A1(m,Fk(w))),h+=2):(l.push(new A1(m,{})),h++)}return new nn(l,{})}function hL(i){const o={};return bo(i,(r,l)=>{"string"==typeof r&&(r=[r]),null!==r&&(o[l]=TC(new nn([],{}),0,r))}),o}function Fk(i){const o={};return bo(i,(r,l)=>o[l]=`${r}`),o}function Rk(i,o,r){return i==r.path&&Ju(o,r.parameters)}class dL{constructor(o,r,l,h){this.routeReuseStrategy=o,this.futureState=r,this.currState=l,this.forwardEvent=h}activate(o){const r=this.futureState._root,l=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,l,o),DC(this.futureState.root),this.activateChildRoutes(r,l,o)}deactivateChildRoutes(o,r,l){const h=l0(r);o.children.forEach(d=>{const m=d.value.outlet;this.deactivateRoutes(d,h[m],l),delete h[m]}),bo(h,(d,m)=>{this.deactivateRouteAndItsChildren(d,l)})}deactivateRoutes(o,r,l){const h=o.value,d=r?r.value:null;if(h===d)if(h.component){const m=l.getContext(h.outlet);m&&this.deactivateChildRoutes(o,r,m.children)}else this.deactivateChildRoutes(o,r,l);else d&&this.deactivateRouteAndItsChildren(r,l)}deactivateRouteAndItsChildren(o,r){o.value.component&&this.routeReuseStrategy.shouldDetach(o.value.snapshot)?this.detachAndStoreRouteSubtree(o,r):this.deactivateRouteAndOutlet(o,r)}detachAndStoreRouteSubtree(o,r){const l=r.getContext(o.value.outlet),h=l&&o.value.component?l.children:r,d=l0(o);for(const m of Object.keys(d))this.deactivateRouteAndItsChildren(d[m],h);if(l&&l.outlet){const m=l.outlet.detach(),w=l.children.onOutletDeactivated();this.routeReuseStrategy.store(o.value.snapshot,{componentRef:m,route:o,contexts:w})}}deactivateRouteAndOutlet(o,r){const l=r.getContext(o.value.outlet),h=l&&o.value.component?l.children:r,d=l0(o);for(const m of Object.keys(d))this.deactivateRouteAndItsChildren(d[m],h);l&&l.outlet&&(l.outlet.deactivate(),l.children.onOutletDeactivated(),l.attachRef=null,l.resolver=null,l.route=null)}activateChildRoutes(o,r,l){const h=l0(r);o.children.forEach(d=>{this.activateRoutes(d,h[d.value.outlet],l),this.forwardEvent(new AR(d.value.snapshot))}),o.children.length&&this.forwardEvent(new ER(o.value.snapshot))}activateRoutes(o,r,l){const h=o.value,d=r?r.value:null;if(DC(h),h===d)if(h.component){const m=l.getOrCreateContext(h.outlet);this.activateChildRoutes(o,r,m.children)}else this.activateChildRoutes(o,r,l);else if(h.component){const m=l.getOrCreateContext(h.outlet);if(this.routeReuseStrategy.shouldAttach(h.snapshot)){const w=this.routeReuseStrategy.retrieve(h.snapshot);this.routeReuseStrategy.store(h.snapshot,null),m.children.onOutletReAttached(w.contexts),m.attachRef=w.componentRef,m.route=w.route.value,m.outlet&&m.outlet.attach(w.componentRef,w.route.value),DC(w.route.value),this.activateChildRoutes(o,null,m.children)}else{const w=function fL(i){for(let o=i.parent;o;o=o.parent){const r=o.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(h.snapshot),x=w?w.module.componentFactoryResolver:null;m.attachRef=null,m.route=h,m.resolver=x,m.outlet&&m.outlet.activateWith(h,x),this.activateChildRoutes(o,null,m.children)}}else this.activateChildRoutes(o,null,l)}}class SC{constructor(o,r){this.routes=o,this.module=r}}function vf(i){return"function"==typeof i}function Ng(i){return i instanceof Tg}const R1=Symbol("INITIAL_VALUE");function L1(){return jc(i=>pC(i.map(o=>o.pipe(Ti(1),function oD(...i){const o=Nf(i);return Hi((r,l)=>{(o?k1(i,r,o):k1(i,r)).subscribe(l)})}(R1)))).pipe(ok((o,r)=>{let l=!1;return r.reduce((h,d,m)=>h!==R1?h:(d===R1&&(l=!0),l||!1!==d&&m!==r.length-1&&!Ng(d)?h:d),o)},R1),Ia(o=>o!==R1),Je(o=>Ng(o)?o:!0===o),Ti(1)))}class wL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new j1,this.attachRef=null}}class j1{constructor(){this.contexts=new Map}onChildOutletCreated(o,r){const l=this.getOrCreateContext(o);l.outlet=r,this.contexts.set(o,l)}onChildOutletDestroyed(o){const r=this.getContext(o);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let r=this.getContext(o);return r||(r=new wL,this.contexts.set(o,r)),r}getContext(o){return this.contexts.get(o)||null}}let NC=(()=>{class i{constructor(r,l,h,d,m){this.parentContexts=r,this.location=l,this.resolver=h,this.changeDetector=m,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ie,this.deactivateEvents=new Ie,this.attachEvents=new Ie,this.detachEvents=new Ie,this.name=d||We,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,l){this.activated=r,this._activatedRoute=l,this.location.insert(r.hostView),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,l){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;const m=(l=l||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),w=this.parentContexts.getOrCreateContext(this.name).children,x=new _L(r,w,this.location.injector);this.activated=this.location.createComponent(m,this.location.length,x),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(r){return new(r||i)(at(j1),at(Zl),at(ll),_h("name"),at(ql))},i.\u0275dir=St({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class _L{constructor(o,r,l){this.route=o,this.childContexts=r,this.parent=l}get(o,r){return o===u0?this.route:o===j1?this.childContexts:this.parent.get(o,r)}}let Lk=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,l){1&r&&J(0,"router-outlet")},directives:[NC],encapsulation:2}),i})();function jk(i,o=""){for(let r=0;r<i.length;r++){const l=i[r];xL(l,DL(o,l))}}function xL(i,o){i.children&&jk(i.children,o)}function DL(i,o){return o?i||o.path?i&&!o.path?`${i}/`:!i&&o.path?o.path:`${i}/${o.path}`:"":i}function kC(i){const o=i.children&&i.children.map(kC),r=o?Object.assign(Object.assign({},i),{children:o}):Object.assign({},i);return!r.component&&(o||r.loadChildren)&&r.outlet&&r.outlet!==We&&(r.component=Lk),r}function cl(i){return i.outlet||We}function Hk(i,o){const r=i.filter(l=>cl(l)===o);return r.push(...i.filter(l=>cl(l)!==o)),r}const Vk={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function pD(i,o,r){var l;if(""===o.path)return"full"===o.pathMatch&&(i.hasChildren()||r.length>0)?Object.assign({},Vk):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const d=(o.matcher||FR)(r,i,o);if(!d)return Object.assign({},Vk);const m={};bo(d.posParams,(x,M)=>{m[M]=x.path});const w=d.consumed.length>0?Object.assign(Object.assign({},m),d.consumed[d.consumed.length-1].parameters):m;return{matched:!0,consumedSegments:d.consumed,lastChild:d.consumed.length,parameters:w,positionalParamSegments:null!==(l=d.posParams)&&void 0!==l?l:{}}}function gD(i,o,r,l,h="corrected"){if(r.length>0&&function CL(i,o,r){return r.some(l=>mD(i,o,l)&&cl(l)!==We)}(i,r,l)){const m=new nn(o,function ML(i,o,r,l){const h={};h[We]=l,l._sourceSegment=i,l._segmentIndexShift=o.length;for(const d of r)if(""===d.path&&cl(d)!==We){const m=new nn([],{});m._sourceSegment=i,m._segmentIndexShift=o.length,h[cl(d)]=m}return h}(i,o,l,new nn(r,i.children)));return m._sourceSegment=i,m._segmentIndexShift=o.length,{segmentGroup:m,slicedSegments:[]}}if(0===r.length&&function TL(i,o,r){return r.some(l=>mD(i,o,l))}(i,r,l)){const m=new nn(i.segments,function bL(i,o,r,l,h,d){const m={};for(const w of l)if(mD(i,r,w)&&!h[cl(w)]){const x=new nn([],{});x._sourceSegment=i,x._segmentIndexShift="legacy"===d?i.segments.length:o.length,m[cl(w)]=x}return Object.assign(Object.assign({},h),m)}(i,o,r,l,i.children,h));return m._sourceSegment=i,m._segmentIndexShift=o.length,{segmentGroup:m,slicedSegments:r}}const d=new nn(i.segments,i.children);return d._sourceSegment=i,d._segmentIndexShift=o.length,{segmentGroup:d,slicedSegments:r}}function mD(i,o,r){return(!(i.hasChildren()||o.length>0)||"full"!==r.pathMatch)&&""===r.path}function Bk(i,o,r,l){return!!(cl(i)===l||l!==We&&mD(o,r,i))&&("**"===i.path||pD(o,i,r).matched)}function Gk(i,o,r){return 0===o.length&&!i.children[r]}class H1{constructor(o){this.segmentGroup=o||null}}class Uk{constructor(o){this.urlTree=o}}function yD(i){return new xn(o=>o.error(new H1(i)))}function zk(i){return new xn(o=>o.error(new Uk(i)))}function SL(i){return new xn(o=>o.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class EL{constructor(o,r,l,h,d){this.configLoader=r,this.urlSerializer=l,this.urlTree=h,this.config=d,this.allowRedirects=!0,this.ngModule=o.get(Ic)}apply(){const o=gD(this.urlTree.root,[],[],this.config).segmentGroup,r=new nn(o.segments,o.children);return this.expandSegmentGroup(this.ngModule,this.config,r,We).pipe(Je(d=>this.createUrlTree(EC(d),this.urlTree.queryParams,this.urlTree.fragment))).pipe(yf(d=>{if(d instanceof Uk)return this.allowRedirects=!1,this.match(d.urlTree);throw d instanceof H1?this.noMatchError(d):d}))}match(o){return this.expandSegmentGroup(this.ngModule,this.config,o.root,We).pipe(Je(h=>this.createUrlTree(EC(h),o.queryParams,o.fragment))).pipe(yf(h=>{throw h instanceof H1?this.noMatchError(h):h}))}noMatchError(o){return new Error(`Cannot match any routes. URL Segment: '${o.segmentGroup}'`)}createUrlTree(o,r,l){const h=o.segments.length>0?new nn([],{[We]:o}):o;return new Tg(h,r,l)}expandSegmentGroup(o,r,l,h){return 0===l.segments.length&&l.hasChildren()?this.expandChildren(o,r,l).pipe(Je(d=>new nn([],d))):this.expandSegment(o,l,r,l.segments,h,!0)}expandChildren(o,r,l){const h=[];for(const d of Object.keys(l.children))"primary"===d?h.unshift(d):h.push(d);return Kt(h).pipe(E1(d=>{const m=l.children[d],w=Hk(r,d);return this.expandSegmentGroup(o,w,m,d).pipe(Je(x=>({segment:x,outlet:d})))}),ok((d,m)=>(d[m.outlet]=m.segment,d),{}),function xR(i,o){const r=arguments.length>=2;return l=>l.pipe(i?Ia((h,d)=>i(h,d,l)):su,gC(1),r?ak(o):sk(()=>new rD))}())}expandSegment(o,r,l,h,d,m){return Kt(l).pipe(E1(w=>this.expandSegmentAgainstRoute(o,r,l,w,h,d,m).pipe(yf(M=>{if(M instanceof H1)return Ce(null);throw M}))),s0(w=>!!w),yf((w,x)=>{if(w instanceof rD||"EmptyError"===w.name){if(Gk(r,h,d))return Ce(new nn([],{}));throw new H1(r)}throw w}))}expandSegmentAgainstRoute(o,r,l,h,d,m,w){return Bk(h,r,d,m)?void 0===h.redirectTo?this.matchSegmentAgainstRoute(o,r,h,d,m):w&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(o,r,l,h,d,m):yD(r):yD(r)}expandSegmentAgainstRouteUsingRedirect(o,r,l,h,d,m){return"**"===h.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(o,l,h,m):this.expandRegularSegmentAgainstRouteUsingRedirect(o,r,l,h,d,m)}expandWildCardWithParamsAgainstRouteUsingRedirect(o,r,l,h){const d=this.applyRedirectCommands([],l.redirectTo,{});return l.redirectTo.startsWith("/")?zk(d):this.lineralizeSegments(l,d).pipe(fi(m=>{const w=new nn(m,{});return this.expandSegment(o,w,r,m,h,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(o,r,l,h,d,m){const{matched:w,consumedSegments:x,lastChild:M,positionalParamSegments:N}=pD(r,h,d);if(!w)return yD(r);const I=this.applyRedirectCommands(x,h.redirectTo,N);return h.redirectTo.startsWith("/")?zk(I):this.lineralizeSegments(h,I).pipe(fi(H=>this.expandSegment(o,r,l,H.concat(d.slice(M)),m,!1)))}matchSegmentAgainstRoute(o,r,l,h,d){if("**"===l.path)return l.loadChildren?(l._loadedConfig?Ce(l._loadedConfig):this.configLoader.load(o.injector,l)).pipe(Je(H=>(l._loadedConfig=H,new nn(h,{})))):Ce(new nn(h,{}));const{matched:m,consumedSegments:w,lastChild:x}=pD(r,l,h);if(!m)return yD(r);const M=h.slice(x);return this.getChildConfig(o,l,h).pipe(fi(I=>{const H=I.module,B=I.routes,{segmentGroup:$,slicedSegments:X}=gD(r,w,M,B),lt=new nn($.segments,$.children);if(0===X.length&&lt.hasChildren())return this.expandChildren(H,B,lt).pipe(Je(Nt=>new nn(w,Nt)));if(0===B.length&&0===X.length)return Ce(new nn(w,{}));const ht=cl(l)===d;return this.expandSegment(H,lt,B,X,ht?We:d,!0).pipe(Je(yt=>new nn(w.concat(yt.segments),yt.children)))}))}getChildConfig(o,r,l){return r.children?Ce(new SC(r.children,o)):r.loadChildren?void 0!==r._loadedConfig?Ce(r._loadedConfig):this.runCanLoadGuards(o.injector,r,l).pipe(fi(h=>h?this.configLoader.load(o.injector,r).pipe(Je(d=>(r._loadedConfig=d,d))):function NL(i){return new xn(o=>o.error(yC(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`)))}(r))):Ce(new SC([],o))}runCanLoadGuards(o,r,l){const h=r.canLoad;return h&&0!==h.length?Ce(h.map(m=>{const w=o.get(m);let x;if(function gL(i){return i&&vf(i.canLoad)}(w))x=w.canLoad(r,l);else{if(!vf(w))throw new Error("Invalid CanLoad guard");x=w(r,l)}return qu(x)})).pipe(L1(),_s(m=>{if(!Ng(m))return;const w=yC(`Redirecting to "${this.urlSerializer.serialize(m)}"`);throw w.url=m,w}),Je(m=>!0===m)):Ce(!0)}lineralizeSegments(o,r){let l=[],h=r.root;for(;;){if(l=l.concat(h.segments),0===h.numberOfChildren)return Ce(l);if(h.numberOfChildren>1||!h.children[We])return SL(o.redirectTo);h=h.children[We]}}applyRedirectCommands(o,r,l){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),o,l)}applyRedirectCreatreUrlTree(o,r,l,h){const d=this.createSegmentGroup(o,r.root,l,h);return new Tg(d,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(o,r){const l={};return bo(o,(h,d)=>{if("string"==typeof h&&h.startsWith(":")){const w=h.substring(1);l[d]=r[w]}else l[d]=h}),l}createSegmentGroup(o,r,l,h){const d=this.createSegments(o,r.segments,l,h);let m={};return bo(r.children,(w,x)=>{m[x]=this.createSegmentGroup(o,w,l,h)}),new nn(d,m)}createSegments(o,r,l,h){return r.map(d=>d.path.startsWith(":")?this.findPosParam(o,d,h):this.findOrReturn(d,l))}findPosParam(o,r,l){const h=l[r.path.substring(1)];if(!h)throw new Error(`Cannot redirect to '${o}'. Cannot find '${r.path}'.`);return h}findOrReturn(o,r){let l=0;for(const h of r){if(h.path===o.path)return r.splice(l),h;l++}return o}}function EC(i){const o={};for(const l of Object.keys(i.children)){const d=EC(i.children[l]);(d.segments.length>0||d.hasChildren())&&(o[l]=d)}return function PL(i){if(1===i.numberOfChildren&&i.children[We]){const o=i.children[We];return new nn(i.segments.concat(o.segments),o.children)}return i}(new nn(i.segments,o))}class $k{constructor(o){this.path=o,this.route=this.path[this.path.length-1]}}class vD{constructor(o,r){this.component=o,this.route=r}}function OL(i,o,r){const l=i._root;return V1(l,o?o._root:null,r,[l.value])}function wD(i,o,r){const l=function FL(i){if(!i)return null;for(let o=i.parent;o;o=o.parent){const r=o.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(o);return(l?l.module.injector:r).get(i)}function V1(i,o,r,l,h={canDeactivateChecks:[],canActivateChecks:[]}){const d=l0(o);return i.children.forEach(m=>{(function RL(i,o,r,l,h={canDeactivateChecks:[],canActivateChecks:[]}){const d=i.value,m=o?o.value:null,w=r?r.getContext(i.value.outlet):null;if(m&&d.routeConfig===m.routeConfig){const x=function LL(i,o,r){if("function"==typeof r)return r(i,o);switch(r){case"pathParamsChange":return!Sg(i.url,o.url);case"pathParamsOrQueryParamsChange":return!Sg(i.url,o.url)||!Ju(i.queryParams,o.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bC(i,o)||!Ju(i.queryParams,o.queryParams);default:return!bC(i,o)}}(m,d,d.routeConfig.runGuardsAndResolvers);x?h.canActivateChecks.push(new $k(l)):(d.data=m.data,d._resolvedData=m._resolvedData),V1(i,o,d.component?w?w.children:null:r,l,h),x&&w&&w.outlet&&w.outlet.isActivated&&h.canDeactivateChecks.push(new vD(w.outlet.component,m))}else m&&B1(o,w,h),h.canActivateChecks.push(new $k(l)),V1(i,null,d.component?w?w.children:null:r,l,h)})(m,d[m.value.outlet],r,l.concat([m.value]),h),delete d[m.value.outlet]}),bo(d,(m,w)=>B1(m,r.getContext(w),h)),h}function B1(i,o,r){const l=l0(i),h=i.value;bo(l,(d,m)=>{B1(d,h.component?o?o.children.getContext(m):null:o,r)}),r.canDeactivateChecks.push(new vD(h.component&&o&&o.outlet&&o.outlet.isActivated?o.outlet.component:null,h))}class YL{}function Yk(i){return new xn(o=>o.error(i))}class KL{constructor(o,r,l,h,d,m){this.rootComponentType=o,this.config=r,this.urlTree=l,this.url=h,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m}recognize(){const o=gD(this.urlTree.root,[],[],this.config.filter(m=>void 0===m.redirectTo),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,o,We);if(null===r)return null;const l=new cD([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},We,this.rootComponentType,null,this.urlTree.root,-1,{}),h=new Vc(l,r),d=new Ek(this.url,h);return this.inheritParamsAndData(d._root),d}inheritParamsAndData(o){const r=o.value,l=kk(r,this.paramsInheritanceStrategy);r.params=Object.freeze(l.params),r.data=Object.freeze(l.data),o.children.forEach(h=>this.inheritParamsAndData(h))}processSegmentGroup(o,r,l){return 0===r.segments.length&&r.hasChildren()?this.processChildren(o,r):this.processSegment(o,r,r.segments,l)}processChildren(o,r){const l=[];for(const d of Object.keys(r.children)){const m=r.children[d],w=Hk(o,d),x=this.processSegmentGroup(w,m,d);if(null===x)return null;l.push(...x)}const h=Wk(l);return function XL(i){i.sort((o,r)=>o.value.outlet===We?-1:r.value.outlet===We?1:o.value.outlet.localeCompare(r.value.outlet))}(h),h}processSegment(o,r,l,h){for(const d of o){const m=this.processSegmentAgainstRoute(d,r,l,h);if(null!==m)return m}return Gk(r,l,h)?[]:null}processSegmentAgainstRoute(o,r,l,h){if(o.redirectTo||!Bk(o,r,l,h))return null;let d,m=[],w=[];if("**"===o.path){const B=l.length>0?gk(l).parameters:{};d=new cD(l,B,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Zk(o),cl(o),o.component,o,Kk(r),Xk(r)+l.length,Jk(o))}else{const B=pD(r,o,l);if(!B.matched)return null;m=B.consumedSegments,w=l.slice(B.lastChild),d=new cD(m,B.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Zk(o),cl(o),o.component,o,Kk(r),Xk(r)+m.length,Jk(o))}const x=function ZL(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(o),{segmentGroup:M,slicedSegments:N}=gD(r,m,w,x.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===N.length&&M.hasChildren()){const B=this.processChildren(x,M);return null===B?null:[new Vc(d,B)]}if(0===x.length&&0===N.length)return[new Vc(d,[])];const I=cl(o)===h,H=this.processSegment(x,M,N,I?We:h);return null===H?null:[new Vc(d,H)]}}function JL(i){const o=i.value.routeConfig;return o&&""===o.path&&void 0===o.redirectTo}function Wk(i){const o=[],r=new Set;for(const l of i){if(!JL(l)){o.push(l);continue}const h=o.find(d=>l.value.routeConfig===d.value.routeConfig);void 0!==h?(h.children.push(...l.children),r.add(h)):o.push(l)}for(const l of r){const h=Wk(l.children);o.push(new Vc(l.value,h))}return o.filter(l=>!r.has(l))}function Kk(i){let o=i;for(;o._sourceSegment;)o=o._sourceSegment;return o}function Xk(i){let o=i,r=o._segmentIndexShift?o._segmentIndexShift:0;for(;o._sourceSegment;)o=o._sourceSegment,r+=o._segmentIndexShift?o._segmentIndexShift:0;return r-1}function Zk(i){return i.data||{}}function Jk(i){return i.resolve||{}}function qk(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function PC(i){return jc(o=>{const r=i(o);return r?Kt(r).pipe(Je(()=>o)):Ce(o)})}class oj extends class rj{shouldDetach(o){return!1}store(o,r){}shouldAttach(o){return!1}retrieve(o){return null}shouldReuseRoute(o,r){return o.routeConfig===r.routeConfig}}{}const AC=new ue("ROUTES");class Qk{constructor(o,r,l,h){this.injector=o,this.compiler=r,this.onLoadStartListener=l,this.onLoadEndListener=h}load(o,r){if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);const h=this.loadModuleFactory(r.loadChildren).pipe(Je(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);const m=d.create(o);return new SC(pk(m.injector.get(AC,void 0,fe.Self|fe.Optional)).map(kC),m)}),yf(d=>{throw r._loader$=void 0,d}));return r._loader$=new vR(h,()=>new Mi).pipe(rk()),r._loader$}loadModuleFactory(o){return qu(o()).pipe(fi(r=>r instanceof wS?Ce(r):Kt(this.compiler.compileModuleAsync(r))))}}class aj{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,r){return o}}function lj(i){throw i}function uj(i,o,r){return o.parse("/")}function t2(i,o){return Ce(null)}const hj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ia=(()=>{class i{constructor(r,l,h,d,m,w,x){this.rootComponentType=r,this.urlSerializer=l,this.rootContexts=h,this.location=d,this.config=x,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Mi,this.errorHandler=lj,this.malformedUriErrorHandler=uj,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:t2,afterPreactivation:t2},this.urlHandlingStrategy=new aj,this.routeReuseStrategy=new oj,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=m.get(Ic),this.console=m.get(tN);const I=m.get(An);this.isNgZoneEnabled=I instanceof An&&An.isInAngularZone(),this.resetConfig(x),this.currentUrlTree=function LR(){return new Tg(new nn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Qk(m,w,H=>this.triggerEvent(new uk(H)),H=>this.triggerEvent(new hk(H))),this.routerState=Nk(this.currentUrlTree,this.rootComponentType),this.transitions=new lo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}setupNavigations(r){const l=this.events;return r.pipe(Ia(h=>0!==h.id),Je(h=>Object.assign(Object.assign({},h),{extractedUrl:this.urlHandlingStrategy.extract(h.rawUrl)})),jc(h=>{let d=!1,m=!1;return Ce(h).pipe(_s(w=>{this.currentNavigation={id:w.id,initialUrl:w.currentRawUrl,extractedUrl:w.extractedUrl,trigger:w.source,extras:w.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),jc(w=>{const x=this.browserUrlTree.toString(),M=!this.navigated||w.extractedUrl.toString()!==x||x!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||M)&&this.urlHandlingStrategy.shouldProcessUrl(w.rawUrl))return _D(w.source)&&(this.browserUrlTree=w.extractedUrl),Ce(w).pipe(jc(I=>{const H=this.transitions.getValue();return l.next(new mC(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),H!==this.transitions.getValue()?oa:Promise.resolve(I)}),function AL(i,o,r,l){return jc(h=>function kL(i,o,r,l,h){return new EL(i,o,r,l,h).apply()}(i,o,r,h.extractedUrl,l).pipe(Je(d=>Object.assign(Object.assign({},h),{urlAfterRedirects:d}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),_s(I=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:I.urlAfterRedirects})}),function qL(i,o,r,l,h){return fi(d=>function WL(i,o,r,l,h="emptyOnly",d="legacy"){try{const m=new KL(i,o,r,l,h,d).recognize();return null===m?Yk(new YL):Ce(m)}catch(m){return Yk(m)}}(i,o,d.urlAfterRedirects,r(d.urlAfterRedirects),l,h).pipe(Je(m=>Object.assign(Object.assign({},d),{targetSnapshot:m}))))}(this.rootComponentType,this.config,I=>this.serializeUrl(I),this.paramsInheritanceStrategy,this.relativeLinkResolution),_s(I=>{if("eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(B,I)}this.browserUrlTree=I.urlAfterRedirects}const H=new MR(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);l.next(H)}));if(M&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:B,source:$,restoredState:X,extras:lt}=w,ht=new mC(H,this.serializeUrl(B),$,X);l.next(ht);const tt=Nk(B,this.rootComponentType).snapshot;return Ce(Object.assign(Object.assign({},w),{targetSnapshot:tt,urlAfterRedirects:B,extras:Object.assign(Object.assign({},lt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=w.rawUrl,w.resolve(null),oa}),PC(w=>{const{targetSnapshot:x,id:M,extractedUrl:N,rawUrl:I,extras:{skipLocationChange:H,replaceUrl:B}}=w;return this.hooks.beforePreactivation(x,{navigationId:M,appliedUrlTree:N,rawUrlTree:I,skipLocationChange:!!H,replaceUrl:!!B})}),_s(w=>{const x=new CR(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(x)}),Je(w=>Object.assign(Object.assign({},w),{guards:OL(w.targetSnapshot,w.currentSnapshot,this.rootContexts)})),function jL(i,o){return fi(r=>{const{targetSnapshot:l,currentSnapshot:h,guards:{canActivateChecks:d,canDeactivateChecks:m}}=r;return 0===m.length&&0===d.length?Ce(Object.assign(Object.assign({},r),{guardsResult:!0})):function HL(i,o,r,l){return Kt(i).pipe(fi(h=>function $L(i,o,r,l,h){const d=o&&o.routeConfig?o.routeConfig.canDeactivate:null;return d&&0!==d.length?Ce(d.map(w=>{const x=wD(w,o,h);let M;if(function vL(i){return i&&vf(i.canDeactivate)}(x))M=qu(x.canDeactivate(i,o,r,l));else{if(!vf(x))throw new Error("Invalid CanDeactivate guard");M=qu(x(i,o,r,l))}return M.pipe(s0())})).pipe(L1()):Ce(!0)}(h.component,h.route,r,o,l)),s0(h=>!0!==h,!0))}(m,l,h,i).pipe(fi(w=>w&&function pL(i){return"boolean"==typeof i}(w)?function VL(i,o,r,l){return Kt(o).pipe(E1(h=>k1(function GL(i,o){return null!==i&&o&&o(new kR(i)),Ce(!0)}(h.route.parent,l),function BL(i,o){return null!==i&&o&&o(new PR(i)),Ce(!0)}(h.route,l),function zL(i,o,r){const l=o[o.length-1],d=o.slice(0,o.length-1).reverse().map(m=>function IL(i){const o=i.routeConfig?i.routeConfig.canActivateChild:null;return o&&0!==o.length?{node:i,guards:o}:null}(m)).filter(m=>null!==m).map(m=>ik(()=>Ce(m.guards.map(x=>{const M=wD(x,m.node,r);let N;if(function yL(i){return i&&vf(i.canActivateChild)}(M))N=qu(M.canActivateChild(l,i));else{if(!vf(M))throw new Error("Invalid CanActivateChild guard");N=qu(M(l,i))}return N.pipe(s0())})).pipe(L1())));return Ce(d).pipe(L1())}(i,h.path,r),function UL(i,o,r){const l=o.routeConfig?o.routeConfig.canActivate:null;if(!l||0===l.length)return Ce(!0);const h=l.map(d=>ik(()=>{const m=wD(d,o,r);let w;if(function mL(i){return i&&vf(i.canActivate)}(m))w=qu(m.canActivate(o,i));else{if(!vf(m))throw new Error("Invalid CanActivate guard");w=qu(m(o,i))}return w.pipe(s0())}));return Ce(h).pipe(L1())}(i,h.route,r))),s0(h=>!0!==h,!0))}(l,d,i,o):Ce(w)),Je(w=>Object.assign(Object.assign({},r),{guardsResult:w})))})}(this.ngModule.injector,w=>this.triggerEvent(w)),_s(w=>{if(Ng(w.guardsResult)){const M=yC(`Redirecting to "${this.serializeUrl(w.guardsResult)}"`);throw M.url=w.guardsResult,M}const x=new TR(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot,!!w.guardsResult);this.triggerEvent(x)}),Ia(w=>!!w.guardsResult||(this.restoreHistory(w),this.cancelNavigationTransition(w,""),!1)),PC(w=>{if(w.guards.canActivateChecks.length)return Ce(w).pipe(_s(x=>{const M=new SR(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);this.triggerEvent(M)}),jc(x=>{let M=!1;return Ce(x).pipe(function QL(i,o){return fi(r=>{const{targetSnapshot:l,guards:{canActivateChecks:h}}=r;if(!h.length)return Ce(r);let d=0;return Kt(h).pipe(E1(m=>function tj(i,o,r,l){return function ej(i,o,r,l){const h=qk(i);if(0===h.length)return Ce({});const d={};return Kt(h).pipe(fi(m=>function nj(i,o,r,l){const h=wD(i,o,l);return qu(h.resolve?h.resolve(o,r):h(o,r))}(i[m],o,r,l).pipe(_s(w=>{d[m]=w}))),gC(1),fi(()=>qk(d).length===h.length?Ce(d):oa))}(i._resolve,i,o,l).pipe(Je(d=>(i._resolvedData=d,i.data=Object.assign(Object.assign({},i.data),kk(i,r).resolve),null)))}(m.route,l,i,o)),_s(()=>d++),gC(1),fi(m=>d===h.length?Ce(r):oa))})}(this.paramsInheritanceStrategy,this.ngModule.injector),_s({next:()=>M=!0,complete:()=>{M||(this.restoreHistory(x),this.cancelNavigationTransition(x,"At least one route resolver didn't emit any value."))}}))}),_s(x=>{const M=new NR(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);this.triggerEvent(M)}))}),PC(w=>{const{targetSnapshot:x,id:M,extractedUrl:N,rawUrl:I,extras:{skipLocationChange:H,replaceUrl:B}}=w;return this.hooks.afterPreactivation(x,{navigationId:M,appliedUrlTree:N,rawUrlTree:I,skipLocationChange:!!H,replaceUrl:!!B})}),Je(w=>{const x=function eL(i,o,r){const l=I1(i,o._root,r?r._root:void 0);return new Sk(l,o)}(this.routeReuseStrategy,w.targetSnapshot,w.currentRouterState);return Object.assign(Object.assign({},w),{targetRouterState:x})}),_s(w=>{this.currentUrlTree=w.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl),this.routerState=w.targetRouterState,"deferred"===this.urlUpdateStrategy&&(w.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,w),this.browserUrlTree=w.urlAfterRedirects)}),((i,o,r)=>Je(l=>(new dL(o,l.targetRouterState,l.currentRouterState,r).activate(i),l)))(this.rootContexts,this.routeReuseStrategy,w=>this.triggerEvent(w)),_s({next(){d=!0},complete(){d=!0}}),function DR(i){return Hi((o,r)=>{try{o.subscribe(r)}finally{r.add(i)}})}(()=>{var w;d||m||this.cancelNavigationTransition(h,`Navigation ID ${h.id} is not equal to the current navigation id ${this.navigationId}`),(null===(w=this.currentNavigation)||void 0===w?void 0:w.id)===h.id&&(this.currentNavigation=null)}),yf(w=>{if(m=!0,function IR(i){return i&&i[dk]}(w)){const x=Ng(w.url);x||(this.navigated=!0,this.restoreHistory(h,!0));const M=new lk(h.id,this.serializeUrl(h.extractedUrl),w.message);l.next(M),x?setTimeout(()=>{const N=this.urlHandlingStrategy.merge(w.url,this.rawUrlTree),I={skipLocationChange:h.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_D(h.source)};this.scheduleNavigation(N,"imperative",null,I,{resolve:h.resolve,reject:h.reject,promise:h.promise})},0):h.resolve(!1)}else{this.restoreHistory(h,!0);const x=new bR(h.id,this.serializeUrl(h.extractedUrl),w);l.next(x);try{h.resolve(this.errorHandler(w))}catch(M){h.reject(M)}}return oa}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}setTransition(r){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),r))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const l="popstate"===r.type?"popstate":"hashchange";"popstate"===l&&setTimeout(()=>{var h;const d={replaceUrl:!0},m=(null===(h=r.state)||void 0===h?void 0:h.navigationId)?r.state:null;if(m){const x=Object.assign({},m);delete x.navigationId,delete x.\u0275routerPageId,0!==Object.keys(x).length&&(d.state=x)}const w=this.parseUrl(r.url);this.scheduleNavigation(w,l,m,d)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){jk(r),this.config=r.map(kC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,l={}){const{relativeTo:h,queryParams:d,fragment:m,queryParamsHandling:w,preserveFragment:x}=l,M=h||this.routerState.root,N=x?this.currentUrlTree.fragment:m;let I=null;switch(w){case"merge":I=Object.assign(Object.assign({},this.currentUrlTree.queryParams),d);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=d||null}return null!==I&&(I=this.removeEmptyProps(I)),function rL(i,o,r,l,h){if(0===r.length)return MC(o.root,o.root,o,l,h);const d=function oL(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new Ok(!0,0,i);let o=0,r=!1;const l=i.reduce((h,d,m)=>{if("object"==typeof d&&null!=d){if(d.outlets){const w={};return bo(d.outlets,(x,M)=>{w[M]="string"==typeof x?x.split("/"):x}),[...h,{outlets:w}]}if(d.segmentPath)return[...h,d.segmentPath]}return"string"!=typeof d?[...h,d]:0===m?(d.split("/").forEach((w,x)=>{0==x&&"."===w||(0==x&&""===w?r=!0:".."===w?o++:""!=w&&h.push(w))}),h):[...h,d]},[]);return new Ok(r,o,l)}(r);if(d.toRoot())return MC(o.root,new nn([],{}),o,l,h);const m=function sL(i,o,r){if(i.isAbsolute)return new CC(o.root,!0,0);if(-1===r.snapshot._lastPathIndex){const d=r.snapshot._urlSegment;return new CC(d,d===o.root,0)}const l=dD(i.commands[0])?0:1;return function aL(i,o,r){let l=i,h=o,d=r;for(;d>h;){if(d-=h,l=l.parent,!l)throw new Error("Invalid number of '../'");h=l.segments.length}return new CC(l,!1,h-d)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+l,i.numberOfDoubleDots)}(d,o,i),w=m.processChildren?fD(m.segmentGroup,m.index,d.commands):Ik(m.segmentGroup,m.index,d.commands);return MC(m.segmentGroup,w,o,l,h)}(M,this.currentUrlTree,r,I,null!=N?N:null)}navigateByUrl(r,l={skipLocationChange:!1}){const h=Ng(r)?r:this.parseUrl(r),d=this.urlHandlingStrategy.merge(h,this.rawUrlTree);return this.scheduleNavigation(d,"imperative",null,l)}navigate(r,l={skipLocationChange:!1}){return function dj(i){for(let o=0;o<i.length;o++){const r=i[o];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${o}`)}}(r),this.navigateByUrl(this.createUrlTree(r,l),l)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let l;try{l=this.urlSerializer.parse(r)}catch(h){l=this.malformedUriErrorHandler(h,this.urlSerializer,r)}return l}isActive(r,l){let h;if(h=!0===l?Object.assign({},hj):!1===l?Object.assign({},cj):l,Ng(r))return yk(this.currentUrlTree,r,h);const d=this.parseUrl(r);return yk(this.currentUrlTree,d,h)}removeEmptyProps(r){return Object.keys(r).reduce((l,h)=>{const d=r[h];return null!=d&&(l[h]=d),l},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new P1(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,r.resolve(!0)},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}scheduleNavigation(r,l,h,d,m){var w,x,M;if(this.disposed)return Promise.resolve(!1);const N=this.transitions.value,I=_D(l)&&N&&!_D(N.source),H=N.rawUrl.toString()===r.toString(),B=N.id===(null===(w=this.currentNavigation)||void 0===w?void 0:w.id);if(I&&H&&B)return Promise.resolve(!0);let X,lt,ht;m?(X=m.resolve,lt=m.reject,ht=m.promise):ht=new Promise((Nt,Vt)=>{X=Nt,lt=Vt});const tt=++this.navigationId;let yt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(h=this.location.getState()),yt=h&&h.\u0275routerPageId?h.\u0275routerPageId:d.replaceUrl||d.skipLocationChange?null!==(x=this.browserPageId)&&void 0!==x?x:0:(null!==(M=this.browserPageId)&&void 0!==M?M:0)+1):yt=0,this.setTransition({id:tt,targetPageId:yt,source:l,restoredState:h,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:d,resolve:X,reject:lt,promise:ht,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ht.catch(Nt=>Promise.reject(Nt))}setBrowserUrl(r,l){const h=this.urlSerializer.serialize(r),d=Object.assign(Object.assign({},l.extras.state),this.generateNgRouterState(l.id,l.targetPageId));this.location.isCurrentPathEqualTo(h)||l.extras.replaceUrl?this.location.replaceState(h,"",d):this.location.go(h,"",d)}restoreHistory(r,l=!1){var h,d;if("computed"===this.canceledNavigationResolution){const m=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(h=this.currentNavigation)||void 0===h?void 0:h.finalUrl)||0===m?this.currentUrlTree===(null===(d=this.currentNavigation)||void 0===d?void 0:d.finalUrl)&&0===m&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(m)}else"replace"===this.canceledNavigationResolution&&(l&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,l){const h=new lk(r.id,this.serializeUrl(r.extractedUrl),l);this.triggerEvent(h),r.resolve(!1)}generateNgRouterState(r,l){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:l}:{navigationId:r}}}return i.\u0275fac=function(r){hg()},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();function _D(i){return"imperative"!==i}let kg=(()=>{class i{constructor(r,l,h,d,m){this.router=r,this.route=l,this.tabIndexAttribute=h,this.renderer=d,this.el=m,this.commands=null,this.onChanges=new Mi,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){if(null!=this.tabIndexAttribute)return;const l=this.renderer,h=this.el.nativeElement;null!==r?l.setAttribute(h,"tabindex",r):l.removeAttribute(h,"tabindex")}ngOnChanges(r){this.onChanges.next(this)}set routerLink(r){null!=r?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const r={skipLocationChange:h0(this.skipLocationChange),replaceUrl:h0(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:h0(this.preserveFragment)})}}return i.\u0275fac=function(r){return new(r||i)(at(ia),at(u0),_h("tabindex"),at(zo),at(_n))},i.\u0275dir=St({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(r,l){1&r&&me("click",function(){return l.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_e]}),i})(),Hn=(()=>{class i{constructor(r,l,h){this.router=r,this.route=l,this.locationStrategy=h,this.commands=null,this.href=null,this.onChanges=new Mi,this.subscription=r.events.subscribe(d=>{d instanceof P1&&this.updateTargetUrlAndHref()})}set routerLink(r){this.commands=null!=r?Array.isArray(r)?r:[r]:null}ngOnChanges(r){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(r,l,h,d,m){if(0!==r||l||h||d||m||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const w={skipLocationChange:h0(this.skipLocationChange),replaceUrl:h0(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,w),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:h0(this.preserveFragment)})}}return i.\u0275fac=function(r){return new(r||i)(at(ia),at(u0),at(r0))},i.\u0275dir=St({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(r,l){1&r&&me("click",function(d){return l.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),2&r&&vt("target",l.target)("href",l.href,jt)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_e]}),i})();function h0(i){return""===i||!!i}class e2{}class n2{preload(o,r){return Ce(null)}}let r2=(()=>{class i{constructor(r,l,h,d){this.router=r,this.injector=h,this.preloadingStrategy=d,this.loader=new Qk(h,l,x=>r.triggerEvent(new uk(x)),x=>r.triggerEvent(new hk(x)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ia(r=>r instanceof P1),E1(()=>this.preload())).subscribe(()=>{})}preload(){const r=this.injector.get(Ic);return this.processRoutes(r,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,l){const h=[];for(const d of l)if(d.loadChildren&&!d.canLoad&&d._loadedConfig){const m=d._loadedConfig;h.push(this.processRoutes(m.module,m.routes))}else d.loadChildren&&!d.canLoad?h.push(this.preloadConfig(r,d)):d.children&&h.push(this.processRoutes(r,d.children));return Kt(h).pipe(oh(),Je(d=>{}))}preloadConfig(r,l){return this.preloadingStrategy.preload(l,()=>(l._loadedConfig?Ce(l._loadedConfig):this.loader.load(r.injector,l)).pipe(fi(d=>(l._loadedConfig=d,this.processRoutes(d.module,d.routes)))))}}return i.\u0275fac=function(r){return new(r||i)(Bt(ia),Bt(Vx),Bt(Fi),Bt(e2))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})(),OC=(()=>{class i{constructor(r,l,h={}){this.router=r,this.viewportScroller=l,this.options=h,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},h.scrollPositionRestoration=h.scrollPositionRestoration||"disabled",h.anchorScrolling=h.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof mC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof P1&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof ck&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,l){this.router.triggerEvent(new ck(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,l))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(r){hg()},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();const Eg=new ue("ROUTER_CONFIGURATION"),o2=new ue("ROUTER_FORROOT_GUARD"),mj=[WM,{provide:xk,useClass:Dk},{provide:ia,useFactory:function xj(i,o,r,l,h,d,m={},w,x){const M=new ia(null,i,o,r,l,h,pk(d));return w&&(M.urlHandlingStrategy=w),x&&(M.routeReuseStrategy=x),function Dj(i,o){i.errorHandler&&(o.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(o.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(o.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(o.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(o.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(o.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(o.canceledNavigationResolution=i.canceledNavigationResolution)}(m,M),m.enableTracing&&M.events.subscribe(N=>{var I,H;null===(I=console.group)||void 0===I||I.call(console,`Router Event: ${N.constructor.name}`),console.log(N.toString()),console.log(N),null===(H=console.groupEnd)||void 0===H||H.call(console)}),M},deps:[xk,j1,WM,Fi,Vx,AC,Eg,[class sj{},new ha],[class ij{},new ha]]},j1,{provide:u0,useFactory:function bj(i){return i.routerState.root},deps:[ia]},r2,n2,class gj{preload(o,r){return r().pipe(yf(()=>Ce(null)))}},{provide:Eg,useValue:{enableTracing:!1}}];function yj(){return new sN("Router",ia)}let s2=(()=>{class i{constructor(r,l){}static forRoot(r,l){return{ngModule:i,providers:[mj,a2(r),{provide:o2,useFactory:_j,deps:[[ia,new ha,new xu]]},{provide:Eg,useValue:l||{}},{provide:r0,useFactory:wj,deps:[Cg,[new yd(YM),new ha],Eg]},{provide:OC,useFactory:vj,deps:[ia,MF,Eg]},{provide:e2,useExisting:l&&l.preloadingStrategy?l.preloadingStrategy:n2},{provide:sN,multi:!0,useFactory:yj},[IC,{provide:jx,multi:!0,useFactory:Mj,deps:[IC]},{provide:l2,useFactory:Cj,deps:[IC]},{provide:QS,multi:!0,useExisting:l2}]]}}static forChild(r){return{ngModule:i,providers:[a2(r)]}}}return i.\u0275fac=function(r){return new(r||i)(Bt(o2,8),Bt(ia,8))},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({}),i})();function vj(i,o,r){return r.scrollOffset&&o.setOffset(r.scrollOffset),new OC(i,o,r)}function wj(i,o,r={}){return r.useHash?new oI(i,o):new TN(i,o)}function _j(i){return"guarded"}function a2(i){return[{provide:jb,multi:!0,useValue:i},{provide:AC,multi:!0,useValue:i}]}let IC=(()=>{class i{constructor(r){this.injector=r,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Mi}appInitializer(){return this.injector.get(nI,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let l=null;const h=new Promise(w=>l=w),d=this.injector.get(ia),m=this.injector.get(Eg);return"disabled"===m.initialNavigation?(d.setUpLocationChangeListener(),l(!0)):"enabled"===m.initialNavigation||"enabledBlocking"===m.initialNavigation?(d.hooks.afterPreactivation=()=>this.initNavigation?Ce(null):(this.initNavigation=!0,l(!0),this.resultOfPreactivationDone),d.initialNavigation()):l(!0),h})}bootstrapListener(r){const l=this.injector.get(Eg),h=this.injector.get(r2),d=this.injector.get(OC),m=this.injector.get(ia),w=this.injector.get(e0);r===w.components[0]&&(("enabledNonBlocking"===l.initialNavigation||void 0===l.initialNavigation)&&m.initialNavigation(),h.setUpPreloading(),d.init(),m.resetRootComponentType(w.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(r){return new(r||i)(Bt(Fi))},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})();function Mj(i){return i.appInitializer.bind(i)}function Cj(i){return i.bootstrapListener.bind(i)}const l2=new ue("Router Initializer");let Sj=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-adonis"]],decls:70,vars:0,consts:[["id","flowerpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom",2,"padding-bottom","2%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"ADONIS"),C(),T(33,"p",17),P(34," Of these deaths and flowery resurrections the most famous was that of Adonis. Every year the Greek girls mourned for him and every year they rejoiced when his flower, the bloodred anemone, the windflower, was seen blooming again. Aphrodite loved him; the Goddess of Love, who pierces with her shafts the hearts of gods and men alike, was fated herself to suffer that same piercing pain. "),C(),T(35,"p",17),P(36," She saw him when he was born and even then loved him and decided he should be hers. She carried him to Persephone to take charge of him for her, but Persephone loved him, too, and would not give him back to Aphrodite, not even when the goddess went down to the underworld to get him. Neither goddess would yield, and finally Zeus himself had to judge between them. He decided that Adonis should spend half the year with each, the autumn and winter with the Queen of the Dead; the spring and summer with the Goddess of Love and Beauty. "),C(),T(37,"p",17),P(38," All the time he was with Aphrodite she sought only to please him. He was keen for the chase, and often she would leave her swan-drawn car, in which she was used to glide at her ease through the air, and follow him along rough woodland ways dressed like a huntress. But one sad day she happened not to be with him and he tracked down a mighty boar. With his hunting dogs he brought the beast to bay. He hurled his spear at it, but he only wounded it, and before he could spring away, the boar mad with pain rushed at him and gored him with its great tusks. Aphrodite in her winged car high over the earth heard her lover\u2019s groan and flew to him. "),C(),T(39,"p",17),P(40," He was softly breathing his life away, the dark blood flowing down his skin of snow and his eyes growing heavy and dim. She kissed him, but Adonis knew not that she kissed him as he died. Cruel as his wound was, the wound in her heart was deeper. She spoke to him, although she knew he could not hear her:\u2014 "),C(),T(41,"p",18),P(42," \u201cYou die, O thrice desired,"),J(43,"br"),P(44," And my desire has flown like a dream."),J(45,"br"),P(46," Gone with you is the girdle of my beauty,"),J(47,"br"),P(48," But I myself must live who am a goddess"),J(49,"br"),P(50," And may not follow you."),J(51,"br"),P(52," Kiss me yet once again, the last, long kiss,"),J(53,"br"),P(54," Until I draw your soul within my lips"),J(55,"br"),P(56," And drink down all your love.\u201d"),J(57,"br"),P(58," The mountains all were calling and the oak trees answering,"),J(59,"br"),P(60," Oh, woe, woe for Adonis. He is dead."),J(61,"br"),P(62," And Echo cried in answer, Oh, woe, woe for Adonis."),J(63,"br"),P(64," And all the Loves wept for him and all the Muses too."),J(65,"br"),C(),T(66,"p",17),P(67," comes as a startling surprise. Bleak heights are carpeted in radiant colors; every crack and crevice of a frowning crag blossoms. The contrast of this laughing, luxuriant beauty with the clear-cut, austere grandeur all around arrests the attention sharply. Elsewhere wild flowers may be little noticed\u2014but never in Greece. "),C(),T(68,"p",19),P(69," But down in the black underworld Adonis could not hear them, nor see the crimson flower that sprang up where each drop of his blood had stained the earth. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})(),Nj=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-flower-list"]],decls:42,vars:0,consts:[["id","flowerpage",2,"padding-bottom","9%"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"padding-bottom","3%","margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px"],["href","/sherylMythology"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","centerimg",1,"col-md-4"],["src","/sherylMythology/assets/narcissui.jpg","routerLink","/flowerList/narcissus"],[2,"text-align","center","color","#333333","font-family","Glitten"],["src","/sherylMythology/assets/hyacinth.jpg","routerLink","/flowerList/hyacinth"],["src","/sherylMythology/assets/adonis.png","routerLink","/flowerList/adonis"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),J(31,"img",16),T(32,"h3",17),P(33,"Narcissus"),C(),C(),T(34,"div",15),J(35,"img",18),T(36,"h3",17),P(37,"Hyacinth"),C(),C(),T(38,"div",15),J(39,"img",19),T(40,"h3",17),P(41,"Adonis"),C(),C(),C(),C())},directives:[Hn,kg],styles:[""]}),i})(),kj=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-hyacinth"]],decls:62,vars:0,consts:[["id","flowerpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"HYACINTHS"),C(),T(33,"p",17),P(34," This was not the only story about the narcissus. There was another, as magical, but quite different. The hero of it was a beautiful lad, whose name was Narcissus. His beauty was so great, all the girls who saw him longed to be his, but he would have none of them. He would pass the loveliest carelessly by, no matter how much she tried to make him look at her. Heartbroken maidens were nothing to him. Even the sad case of the fairest of the nymphs, Echo, did not move him. She was a favorite of Artemis, the goddess of woods and wild creatures, but she came under the displeasure of a still mightier goddess, Hera herself, who was at her usual occupation of trying to discover what Zeus was about. She suspected that he was in love with one of the nymphs and she went to look them over to try to discover which. However, she was immediately diverted from her investigation by Echo\u2019s gay chatter. As she listened amused, the others silently stole away and Hera could come to no conclusion as to where Zeus\u2019s wandering fancy had alighted. With her usual injustice she turned against Echo. That nymph became another unhappy girl whom Hera punished. The goddess condemned her never to use her tongue again except to repeat what was said to her. \u201cYou will always have the last word,\u201d Hera said, \u201cbut no power to speak first.\u201d "),C(),T(35,"p",17),P(36," This was very hard, but hardest of all when Echo, too, with all the other lovelorn maidens, loved Narcissus. She could follow him, but she could not speak to him. How then could she make a youth who never looked at a girl pay attention to her? One day, however, it seemed her chance had come. He was calling to his companions. \u201cIs anyone here?\u201d and she called back in rapture, \u201cHere\u2014Here.\u201d She was still hidden by the trees so that he did not see her, and he shouted, \u201cCome!\u201d\u2014just what she longed to say to him. She answered joyfully, \u201cCome!\u201d and stepped forth from the woods with her arms outstretched. But he turned away in angry disgust. \u201cNot so,\u201d he said; \u201cI will die before I give you power over me.\u201d All she could say was, humbly, entreatingly, \u201cI give you power over me,\u201d but he was gone. She hid her blushes and her shame in a lonely cave, and never could be comforted. Still she lives in places like that, and they say she has so wasted away with longing that only her voice now is left to her. "),C(),T(37,"p",17),P(38," So Narcissus went on his cruel way, a scorner of love. But at last one of those he wounded prayed a prayer and it was answered by the gods: \u201cMay he who loves not others love himself.\u201d The great goddess Nemesis, which means righteous anger, undertook to bring this about. As Narcissus bent over a clear pool for a drink and saw there his own reflection, on the moment he fell in love with it. \u201cNow I know,\u201d he cried, \u201cwhat others have suffered from me, for I burn with love of my own self\u2014and yet how can I reach that loveliness I see mirrored in the water? But I cannot leave it. Only death can set me free.\u201d And so it happened. He pined away, leaning perpetually over the pool, fixed in one long gaze. Echo was near him, but she could do nothing; only when, dying, he called to his image, \u201cFarewell\u2014farewell,\u201d she could repeat the words as a last goodbye to him. "),C(),T(39,"p",17),P(40," They say that when his spirit crossed the river that encircles the world of the dead, it leaned over the boat to catch a final glimpse of itself in the water. dead, it leaned over the boat to catch a final glimpse of itself in the water. The nymphs he had scorned were kind to him in death and sought his body to give it burial, but they could not find it. Where it had lain there was blooming a new and lovely flower, and they called it by his name, Narcissus. Another flower that came into being through the death of a beautiful youth was the hyacinth, again not like the flower we call by that name, but lily-shaped and of a deep purple, or, some say, a splendid crimson. That was a tragic death, and each year it was commemorated by "),C(),T(41,"p",18),P(42," The festival of Hyacinthus"),J(43,"br"),P(44," That lasts throughout the tranquil night."),J(45,"br"),P(46," In a contest with Apollo"),J(47,"br"),P(48," He was slain."),J(49,"br"),P(50," Discus throwing they competed,"),J(51,"br"),P(52," And the god\u2019s swift cast"),J(53,"br"),P(54," Sped beyond the goal he aimed at"),J(55,"br"),C(),T(56,"p",17),P(57," and struck Hyacinthus full in the forehead a terrible wound. He had been Apollo\u2019s dearest companion. There was no rivalry between them when they tried which could throw the discus farthest; they were only playing a game. The god was horror-struck to see the blood gush forth and the lad, deathly pale, fall to the ground. He turned as pale himself as he caught him up in his arms and tried to stanch the wound. But it was too late. While he held him the boy\u2019s head fell back as a flower does when its stem is broken. He was dead and Apollo kneeling beside him wept for him, dying so young, so beautiful. He had killed him, although through no fault of his, and he cried, \u201cOh, if I could give my life for yours, or die with you.\u201d Even as he spoke, the bloodstained grass turned green again and there bloomed forth the wondrous flower that was to make the lad\u2019s name known forever. Apollo himself inscribed the petals\u2014some say with Hyacinth\u2019s initial, and others with the two letters of the Greek word that means \u201cAlas\u201d; either way, a memorial of the god\u2019s great sorrow. "),C(),T(58,"p",17),P(59," There is a story, too, that Zephyr, the West Wind, not Apollo, was the direct cause of the death, that he also loved this fairest of youths and in his jealous anger at seeing the god preferred to him he blew upon the discus and made it strike Hyacinth. "),C(),T(60,"p",19),P(61," Such charming tales of lovely young people who, dying in the springtime of life, were fittingly changed into spring flowers, have probably a dark background. were fittingly changed into spring flowers, have probably a dark background. They give a hint of black deeds that were done in the far-distant past. Long before there were any stories told in Greece or any poems sung which have come down to us, perhaps even before there were storytellers and poets, it might happen, if the fields around a village were not fruitful, if the corn did not spring up as it should, that one of the villagers would be killed and his\u2014or her\u2014blood sprinkled over the barren land. There was no idea as yet of the radiant gods of Olympus who would have loathed the hateful sacrifice. Mankind had only a dim feeling that as their own life depended utterly on seedtime and harvest, there must be a deep connection between themselves and the earth and that their blood, which was nourished by the corn, could in turn nourish it at need. What more natural then, if a beautiful boy had thus been killed, than to think when later the ground bloomed with narcissus or hyacinths that the flowers were his very self, changed and yet living again? So they would tell each other it had happened, a lovely miracle which made the cruel death seem less cruel. Then as the ages passed and people no longer believed that the earth needed blood to be fruitful, all that was cruel in the story would be dropped and in the end forgotten. No one would remember that terrible things had once been done. Hyacinthus, they would say, died not slaughtered by his kinsfolk to get food for them, but only because of a sorrowful mistake. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})(),Ej=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-narcissus"]],decls:48,vars:0,consts:[["id","flowerpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom",2,"padding-bottom","2%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"NARCISSUS"),C(),T(33,"p",17),P(34,"In Greece there are most lovely wild flowers. They would be beautiful anywhere, but Greece is not a rich and fertile country of wide meadows and fruitful fields where flowers seem at home. It is a land of rocky ways and stony hills and rugged mountains, and in such places the exquisite vivid bloom of the wild flowers, "),C(),T(35,"p",18),P(36," A profusion of delight,"),J(37,"br"),P(38," Gay, bewilderingly bright,"),J(39,"br"),C(),T(40,"p",17),P(41," comes as a startling surprise. Bleak heights are carpeted in radiant colors; every crack and crevice of a frowning crag blossoms. The contrast of this laughing, luxuriant beauty with the clear-cut, austere grandeur all around arrests the attention sharply. Elsewhere wild flowers may be little noticed\u2014but never in Greece. "),C(),T(42,"p",17),P(43," That was as true in the days of old as it is now. In the faraway ages when the tales of Greek mythology were taking shape men found the brilliant blossoms of the Greek spring a wonder and a delight. Those people separated from us by thousands of years, and almost completely unknown to us, felt as we do before that miracle of loveliness, each flower so delicate, yet all together covering the land like a rainbow mantle flung over the hills. The first storytellers in Greece told story after story about them, how they had been created and why they were so beautiful. "),C(),T(44,"p",17),P(45," It was the most natural thing possible to connect them with the gods. All things in heaven and earth were mysteriously linked with the divine powers, but beautiful things most of all. Often an especially exquisite flower was held to be the direct creation of a god for his own purpose. That was true of the narcissus, which was not like ours of that name, but a lovely bloom of glowing purple and silver. Zeus called it into being to help his brother, the lord of the dark underworld, when he wanted to carry away the maiden he had fallen in love with, Demeter\u2019s daughter, Persephone. She was gathering flowers with her companions in the vale of Enna, in a meadow of soft grass and roses and crocus and lovely violets and iris and hyacinths. Suddenly she caught sight of something quite new to her, a bloom more beautiful by far than any she had ever seen, a strange glory of a flower, a marvel to all, immortal gods and mortal men. A hundred blossoms grew up from the roots, and the fragrance was very sweet. The broad sky above and the whole earth laughed to see it, and the salt wave of the sea. "),C(),T(46,"p",19),P(47," Only Persephone among the maidens had spied it. The rest were at the other end of the meadow. She stole toward it, half fearful at being alone, but unable to resist the desire to fill her basket with it, exactly as Zeus had supposed she would feel. Wondering, she stretched out her hands to take the lovely plaything, but before she touched it a chasm opened in the earth and out of it coal-black horses sprang, drawing a chariot and driven by one who had a look of dark splendor, majestic and beautiful and terrible. He caught her to him and held her close. The next moment she was being borne away from the radiance of earth in springtime to the world of the dead by the king who rules it. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})(),Pj=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-aphrodite"]],decls:64,vars:0,consts:[["id","godpage"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom",2,"padding-bottom","2%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"HYACINTHS"),C(),T(33,"p",17),P(34," This was not the only story about the narcissus. There was another, as magical, but quite different. The hero of it was a beautiful lad, whose name was Narcissus. His beauty was so great, all the girls who saw him longed to be his, but he would have none of them. He would pass the loveliest carelessly by, no matter how much she tried to make him look at her. Heartbroken maidens were nothing to him. Even the sad case of the fairest of the nymphs, Echo, did not move him. She was a favorite of Artemis, the goddess of woods and wild creatures, but she came under the displeasure of a still mightier goddess, Hera herself, who was at her usual occupation of trying to discover what Zeus was about. She suspected that he was in love with one of the nymphs and she went to look them over to try to discover which. However, she was immediately diverted from her investigation by Echo\u2019s gay chatter. As she listened amused, the others silently stole away and Hera could come to no conclusion as to where Zeus\u2019s wandering fancy had alighted. With her usual injustice she turned against Echo. That nymph became another unhappy girl whom Hera punished. The goddess condemned her never to use her tongue again except to repeat what was said to her. \u201cYou will always have the last word,\u201d Hera said, \u201cbut no power to speak first.\u201d "),C(),T(35,"p",17),P(36," This was very hard, but hardest of all when Echo, too, with all the other lovelorn maidens, loved Narcissus. She could follow him, but she could not speak to him. How then could she make a youth who never looked at a girl pay attention to her? One day, however, it seemed her chance had come. He was calling to his companions. \u201cIs anyone here?\u201d and she called back in rapture, \u201cHere\u2014Here.\u201d She was still hidden by the trees so that he did not see her, and he shouted, \u201cCome!\u201d\u2014just what she longed to say to him. She answered joyfully, \u201cCome!\u201d and stepped forth from the woods with her arms outstretched. But he turned away in angry disgust. \u201cNot so,\u201d he said; \u201cI will die before I give you power over me.\u201d All she could say was, humbly, entreatingly, \u201cI give you power over me,\u201d but he was gone. She hid her blushes and her shame in a lonely cave, and never could be comforted. Still she lives in places like that, and they say she has so wasted away with longing that only her voice now is left to her. "),C(),T(37,"p",17),P(38," So Narcissus went on his cruel way, a scorner of love. But at last one of those he wounded prayed a prayer and it was answered by the gods: \u201cMay he who loves not others love himself.\u201d The great goddess Nemesis, which means righteous anger, undertook to bring this about. As Narcissus bent over a clear pool for a drink and saw there his own reflection, on the moment he fell in love with it. \u201cNow I know,\u201d he cried, \u201cwhat others have suffered from me, for I burn with love of my own self\u2014and yet how can I reach that loveliness I see mirrored in the water? But I cannot leave it. Only death can set me free.\u201d And so it happened. He pined away, leaning perpetually over the pool, fixed in one long gaze. Echo was near him, but she could do nothing; only when, dying, he called to his image, \u201cFarewell\u2014farewell,\u201d she could repeat the words as a last goodbye to him. "),C(),T(39,"p",17),P(40," They say that when his spirit crossed the river that encircles the world of the dead, it leaned over the boat to catch a final glimpse of itself in the water. dead, it leaned over the boat to catch a final glimpse of itself in the water. The nymphs he had scorned were kind to him in death and sought his body to give it burial, but they could not find it. Where it had lain there was blooming a new and lovely flower, and they called it by his name, Narcissus. Another flower that came into being through the death of a beautiful youth was the hyacinth, again not like the flower we call by that name, but lily-shaped and of a deep purple, or, some say, a splendid crimson. That was a tragic death, and each year it was commemorated by "),C(),T(41,"p",18),P(42," The festival of Hyacinthus"),J(43,"br"),P(44," That lasts throughout the tranquil night."),J(45,"br"),P(46," In a contest with Apollo"),J(47,"br"),P(48," He was slain."),J(49,"br"),P(50," Discus throwing they competed,"),J(51,"br"),P(52," And the god\u2019s swift cast"),J(53,"br"),P(54," Sped beyond the goal he aimed at"),J(55,"br"),C(),T(56,"p",17),P(57," and struck Hyacinthus full in the forehead a terrible wound. He had been Apollo\u2019s dearest companion. There was no rivalry between them when they tried which could throw the discus farthest; they were only playing a game. The god was horror-struck to see the blood gush forth and the lad, deathly pale, fall to the ground. He turned as pale himself as he caught him up in his arms and tried to stanch the wound. But it was too late. While he held him the boy\u2019s head fell back as a flower does when its stem is broken. He was dead and Apollo kneeling beside him wept for him, dying so young, so beautiful. He had killed him, although through no fault of his, and he cried, \u201cOh, if I could give my life for yours, or die with you.\u201d Even as he spoke, the bloodstained grass turned green again and there bloomed forth the wondrous flower that was to make the lad\u2019s name known forever. Apollo himself inscribed the petals\u2014some say with Hyacinth\u2019s initial, and others with the two letters of the Greek word that means \u201cAlas\u201d; either way, a memorial of the god\u2019s great sorrow. "),C(),T(58,"p",17),P(59," There is a story, too, that Zephyr, the West Wind, not Apollo, was the direct cause of the death, that he also loved this fairest of youths and in his jealous anger at seeing the god preferred to him he blew upon the discus and made it strike Hyacinth. "),C(),T(60,"p",18),P(61,"------------------------------"),C(),T(62,"p",19),P(63," Such charming tales of lovely young people who, dying in the springtime of life, were fittingly changed into spring flowers, have probably a dark background. were fittingly changed into spring flowers, have probably a dark background. They give a hint of black deeds that were done in the far-distant past. Long before there were any stories told in Greece or any poems sung which have come down to us, perhaps even before there were storytellers and poets, it might happen, if the fields around a village were not fruitful, if the corn did not spring up as it should, that one of the villagers would be killed and his\u2014or her\u2014blood sprinkled over the barren land. There was no idea as yet of the radiant gods of Olympus who would have loathed the hateful sacrifice. Mankind had only a dim feeling that as their own life depended utterly on seedtime and harvest, there must be a deep connection between themselves and the earth and that their blood, which was nourished by the corn, could in turn nourish it at need. What more natural then, if a beautiful boy had thus been killed, than to think when later the ground bloomed with narcissus or hyacinths that the flowers were his very self, changed and yet living again? So they would tell each other it had happened, a lovely miracle which made the cruel death seem less cruel. Then as the ages passed and people no longer believed that the earth needed blood to be fruitful, all that was cruel in the story would be dropped and in the end forgotten. No one would remember that terrible things had once been done. Hyacinthus, they would say, died not slaughtered by his kinsfolk to get food for them, but only because of a sorrowful mistake. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})(),Aj=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-apollo"]],decls:58,vars:0,consts:[["id","godpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"PHOEBUS APOLLO"),C(),T(33,"p",17),P(34,"The son of Zeus and Leto (Latona), born in the little island of Delos. He has been called \u201cthe most Greek of all the gods.\u201d He is a beautiful figure in Greek poetry, the master musician who delights Olympus as he plays on his golden lyre; the lord, too, of the silver bow, the Archer-god, far-shooting; the Healer, as well, who first taught men the healing art. Even more than of these good and lovely endowments, he is the God of Light, in whom is no darkness at all, and so he is the God of Truth. No false word ever falls from his lips. "),C(),T(35,"p",18),P(36," O Phoebus, from your throne of truth, "),J(37,"br"),P(38," From your dwelling-place at the heart of the world,"),J(39,"br"),P(40," You speak to men."),J(41,"br"),P(42," By Zeus\u2019s decree no lie comes there,"),J(43,"br"),P(44," No shadow to darken the word of truth."),J(45,"br"),P(46," Zeus sealed by an everlasting right"),J(47,"br"),P(48," Apollo\u2019s honour, that all may trust"),J(49,"br"),P(50," And brought her to the gods."),J(51,"br"),P(52," With unshaken faith when he speaks."),J(53,"br"),C(),T(54,"p",17),P(55," Delphi under towering Parnassus, where Apollo\u2019s oracle was, plays an important part in mythology. Castalia was its sacred spring; Cephissus its river. It was held to be the center of the world, so many pilgrims came to it, from foreign countries as well as Greece. No other shrine rivaled it. The answers to the questions asked by the anxious seekers for Truth were delivered by a priestess who went into a trance before she spoke. The trance was supposed to be caused by a vapor rising from a deep cleft in the rock over which her seat was placed, a three-legged stool, the tripod. "),C(),T(56,"p",19),P(57," Apollo was called Delian from Delos, the island of his birth, and Pythian from his killing of a serpent, Python, which once lived in the caves of Parnassus. It was a frightful monster and the contest was severe, but in the end the god\u2019s unerring arrows won the victory. Another name often given him was \u201cthe Lycian,\u201d variously explained as meaning Wolf-god, God of Light, and God of Lycia. In the Iliad he is called \u201cthe Sminthian,\u201d the Mouse-god, but whether because he protected mice or destroyed them no one knows. Often he was the Sun-god, too. His name Phoebus means \u201cbrilliant\u201d or \u201cshining.\u201d Accurately, however, the Sun-god was Helios, child of the Titan Hyperion. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})(),Oj=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-ares"]],decls:43,vars:0,consts:[["id","godpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para",2,"font-size","180%"],["id","char-para-bottom",2,"font-size","180%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"ARES"),C(),T(33,"p",17),P(34,"The God of War, son of Zeus and Hera, both of whom, Homer says, detested him. Indeed, he is hateful throughout the Iliad, poem of war though it is. Occasionally the heroes \u201crejoice in the delight of Ares\u2019 battle,\u201d but far oftener in having escaped \u201cthe fury of the ruthless god.\u201d Homer calls him murderous, bloodstained, the incarnate curse of mortals; and, strangely, a coward, too, who bellows with pain and runs away when he is wounded. Yet he has a train of attendants on the battlefield which should inspire anyone with confidence. His sister is there, Eris, which means Discord, and Strife, her son. The Goddess of War, Enyo\u2014in Latin Bellona\u2014walks beside him, and with her are Terror and Trembling and Panic. As they move, the voice of groaning arises behind them and the earth streams with blood. "),C(),T(35,"p",17),P(36," The Romans liked Mars better than the Greeks liked Ares. He never was to them the mean whining deity of the Iliad, but magnificent in shining armor, redoubtable, invincible. The warriors of the great Latin heroic poem, the Aeneid, far from rejoicing to escape from him, rejoice when they see that they are to fall \u201con Mars\u2019 field of renown.\u201d They \u201crush on glorious death\u201d and find it \u201csweet to die in battle.\u201d "),C(),T(37,"p",17),P(38," Ares figures little in mythology. In one story he is the lover of Aphrodite and held up to the contempt of the Olympians by Aphrodite\u2019s husband, Hephaestus; but for the most part he is little more than a symbol of war. He is not a distinct personality, like Hermes or Hera or Apollo. "),C(),T(39,"p",17),P(40," He had no cities where he was worshiped. The Greeks said vaguely that he came from Thrace, home of a rude, fierce people in the northeast of Greece. "),C(),T(41,"p",18),P(42," Appropriately, his bird was the vulture. The dog was wronged by being chosen as his animal. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})(),Ij=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-artemis"]],decls:70,vars:0,consts:[["id","godpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"ARTEMIS"),C(),T(33,"p",17),P(34," Apollo\u2019s twin sister, daughter of Zeus and Leto. She was one of the three maiden goddesses of Olympus:\u2014 "),C(),T(35,"p",18),P(36," Golden Aphrodite who stirs with love all creation, "),J(37,"br"),P(38," Cannot bend nor ensnare three hearts: the pure maiden Vesta,"),J(39,"br"),P(40," Gray-eyed Athena who cares but for war and the arts of the craftsmen,"),J(41,"br"),P(42," Artemis, lover of woods and the wild chase over the mountains."),J(43,"br"),C(),T(44,"p",17),P(45," She was the Lady of Wild Things, Huntsman-in-chief to the gods, an odd office for a woman. Like a good huntsman, she was careful to preserve the young; she was \u201cthe protectress of dewy youth\u201d everywhere. Nevertheless, with one of those startling contradictions so common in mythology, she kept the Greek Fleet from sailing to Troy until they sacrificed a maiden to her. In many another story, too, she is fierce and revengeful. On the other hand, when women died a swift and painless death, they were held to have been slain by her silver arrows. "),C(),T(46,"p",17),P(47," As Phoebus was the Sun, she was the Moon, called Phoebe and Selene (Luna in Latin). Neither name originally belonged to her. Phoebe was a Titan, one of the older gods. So too was Selene\u2014a moon-goddess, indeed, but not connected with Apollo. She was the sister of Helios, the sun-god with whom Apollo was confused. "),C(),T(48,"p",17),P(49," In the later poets, Artemis is identified with Hecate. She is \u201cthe goddess with three forms,\u201d Selene in the sky, Artemis on earth, Hecate in the lower world and in the world above when it is wrapped in darkness. Hecate was the Goddess of the Dark of the Moon, the black nights when the moon is hidden. She was associated with deeds of darkness, the Goddess of the Crossways, which were held to be ghostly places of evil magic. An awful divinity, "),C(),T(50,"p",18),P(51," Hecate of hell, "),J(52,"br"),P(53," Mighty to shatter every stubborn thing."),J(54,"br"),P(55," Hark! Hark! her hounds are baying through the town."),J(56,"br"),P(57," Where three roads meet, there she is standing."),J(58,"br"),C(),T(59,"p",17),P(60," It is a strange transformation from the lovely Huntress flashing through the forest, from the Moon making all beautiful with her light, from the pure Maiden- Goddess for whom "),C(),T(61,"p",18),P(62," Whoso is chaste of spirit utterly "),J(63,"br"),P(64," May gather leaves and fruits and flowers."),J(65,"br"),P(66," The unchaste never."),J(67,"br"),C(),T(68,"p",19),P(69," In her is shown most vividly the uncertainty between good and evil which is apparent in every one of the divinities. The cypress was sacred to her; and all wild animals, but especially the deer. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})(),Fj=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-athena"]],decls:41,vars:0,consts:[["id","godpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para",2,"font-size","150%"],["id","char-para-bottom",2,"font-size","150%","padding-bottom","41%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"PALLAS ATHENA"),C(),T(33,"p",17),P(34," She was the daughter of Zeus alone. No mother bore her. Full-grown and in full armor, she sprang from his head. In the earliest account of her, the Iliad, she is a fierce and ruthless battle-goddess, but elsewhere she is warlike only to defend the State and the home from outside enemies. She was pre-eminently the Goddess of the City, the protector of civilized life, of handicrafts and agriculture; the inventor of the bridle, who first tamed horses for men to use. "),C(),T(35,"p",17),P(36," She was Zeus\u2019s favorite child. He trusted her to carry the awful aegis, his buckler, and his devastating weapon, the thunderbolt. "),C(),T(37,"p",17),P(38," The word oftenest used to describe her is \u201cgray-eyed,\u201d or, as it is sometimes translated, \u201cflashing-eyed.\u201d Of the three virgin goddesses she was the chief and was called the Maiden, Parthenos, and her temple the Parthenon. In later poetry she is the embodiment of wisdom, reason, purity. "),C(),T(39,"p",18),P(40," Athens was her special city; the olive created by her was her tree; the owl her bird. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})(),Rj=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-demeter"]],decls:48,vars:0,consts:[["id","godpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom",2,"padding-bottom","39%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"HESTIA"),C(),T(33,"p",17),P(34," She was Zeus\u2019s sister, and like Athena and Artemis a virgin goddess. She has no distinct personality and she plays no part in the myths. She was the Goddess of the Hearth, the symbol of the home, around which the newborn child must be carried before it could be received into the family. Every meal began and ended with an offering to her. "),C(),T(35,"p",18),P(36," Hestia, in all dwellings of men and immortals "),J(37,"br"),P(38," Yours is the highest honor, the sweet wine offered"),J(39,"br"),P(40," First and last at the feast, poured out to you duly."),J(41,"br"),P(42," Never without you can gods or mortals hold banquet."),J(43,"br"),C(),T(44,"p",17),P(45," Each city, too, had a public hearth sacred to Hestia, where the fire was never allowed to go out. If a colony was to be founded, the colonists carried with them coals from the hearth of the mother-city with which to kindle the fire on the new city\u2019s hearth. "),C(),T(46,"p",19),P(47," In Rome her fire was cared for by six virgin priestesses, called Vestals. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})(),Lj=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-dionysos"]],decls:39,vars:0,consts:[["id","godpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-para-bottom",2,"padding-bottom","50%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"HADES"),C(),T(33,"p",17),P(34," He was the third brother among the Olympians, who drew for his share the underworld and the rule over the dead. He was also called Pluto, the God of Wealth, of the precious metals hidden in the earth. The Romans as well as the Greeks called him by this name, but often they translated it into Dis, the Latin word for rich. He had a far-famed cap or helmet which made whoever wore it invisible. It was rare that he left his dark realm to visit Olympus or the earth, nor was he urged to do so. He was not a welcome visitor. He was unpitying, inexorable, but just; a terrible, not an evil god. "),C(),T(35,"p",17),P(36," His wife was Persephone (Proserpine) whom he carried away from the earth and made Queen of the Lower World. "),C(),T(37,"p",18),P(38," He was King of the Dead\u2014not Death himself, whom the Greeks called Thanatos and the Romans, Orcus. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})(),jj=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-god-list"]],decls:79,vars:0,consts:[["id","godpage",2,"padding-bottom","11%"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"padding-bottom","3%","margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px"],["href","/sherylMythology"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row",2,"padding-bottom","2%"],["id","centerimg",1,"col-md-2"],["src","/sherylMythology/assets/zeus.png","routerLink","/godList/zeus"],[2,"text-align","center","color","white","font-family","Glitten"],["src","/sherylMythology/assets/poseidon.png","routerLink","/godList/poseidon"],["src","/sherylMythology/assets/hades.png","routerLink","/godList/hades"],["src","/sherylMythology/assets/hestia.png","routerLink","/godList/hestia"],["src","/sherylMythology/assets/hera.png","routerLink","/godList/hera"],["src","/sherylMythology/assets/ares.png","routerLink","/godList/ares"],[1,"row"],["src","/sherylMythology/assets/athena.png","routerLink","/godList/athena"],["src","/sherylMythology/assets/apollo.png","routerLink","/godList/apollo"],["src","/sherylMythology/assets/athrodite.png","routerLink","/godList/aphrodite"],["src","/sherylMythology/assets/hermes.png","routerLink","/godList/hermes"],["src","/sherylMythology/assets/artemis.png","routerLink","/godList/artemis"],["src","/sherylMythology/assets/hephaestus.png","routerLink","/godList/hephaestus"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),J(31,"img",16),T(32,"h3",17),P(33,"Zeus"),C(),C(),T(34,"div",15),J(35,"img",18),T(36,"h3",17),P(37,"Poseidon"),C(),C(),T(38,"div",15),J(39,"img",19),T(40,"h3",17),P(41,"Hades"),C(),C(),T(42,"div",15),J(43,"img",20),T(44,"h3",17),P(45,"Hestia"),C(),C(),T(46,"div",15),J(47,"img",21),T(48,"h3",17),P(49,"Hera"),C(),C(),T(50,"div",15),J(51,"img",22),T(52,"h3",17),P(53,"Ares"),C(),C(),C(),T(54,"div",23),T(55,"div",15),J(56,"img",24),T(57,"h3",17),P(58,"Athena"),C(),C(),T(59,"div",15),J(60,"img",25),T(61,"h3",17),P(62,"Apollo"),C(),C(),T(63,"div",15),J(64,"img",26),T(65,"h3",17),P(66,"Athrodite"),C(),C(),T(67,"div",15),J(68,"img",27),T(69,"h3",17),P(70,"Hermes"),C(),C(),T(71,"div",15),J(72,"img",28),T(73,"h3",17),P(74,"Artemis"),C(),C(),T(75,"div",15),J(76,"img",29),T(77,"h3",17),P(78,"Hephaestus"),C(),C(),C(),C())},directives:[Hn,kg],styles:[""]}),i})();var we=x0(813);function Rr(i){for(var o=arguments.length,r=Array(o>1?o-1:0),l=1;l<o;l++)r[l-1]=arguments[l];throw Error("[Immer] minified error nr: "+i+(r.length?" "+r.map(function(m){return"'"+m+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Bc(i){return!!i&&!!i[Fe]}function Qu(i){return!!i&&(function(o){if(!o||"object"!=typeof o)return!1;var r=Object.getPrototypeOf(o);if(null===r)return!0;var l=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return l===Object||"function"==typeof l&&Function.toString.call(l)===Wj}(i)||Array.isArray(i)||!!i[$1]||!!i.constructor[$1]||DD(i)||bD(i))}function Gc(i,o,r){void 0===r&&(r=!1),0===wf(i)?(r?Object.keys:c0)(i).forEach(function(l){r&&"symbol"==typeof l||o(l,i[l],i)}):i.forEach(function(l,h){return o(h,l,i)})}function wf(i){var o=i[Fe];return o?o.i>3?o.i-4:o.i:Array.isArray(i)?1:DD(i)?2:bD(i)?3:0}function _f(i,o){return 2===wf(i)?i.has(o):Object.prototype.hasOwnProperty.call(i,o)}function u2(i,o,r){var l=wf(i);2===l?i.set(o,r):3===l?(i.delete(o),i.add(r)):i[o]=r}function DD(i){return $j&&i instanceof Map}function bD(i){return Yj&&i instanceof Set}function Lr(i){return i.o||i.t}function FC(i){if(Array.isArray(i))return Array.prototype.slice.call(i);var o=y2(i);delete o[Fe];for(var r=c0(o),l=0;l<r.length;l++){var h=r[l],d=o[h];!1===d.writable&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(o[h]={configurable:!0,writable:!0,enumerable:d.enumerable,value:i[h]})}return Object.create(Object.getPrototypeOf(i),o)}function RC(i,o){return void 0===o&&(o=!1),LC(i)||Bc(i)||!Qu(i)||(wf(i)>1&&(i.set=i.add=i.clear=i.delete=Hj),Object.freeze(i),o&&Gc(i,function(r,l){return RC(l,!0)},!0)),i}function Hj(){Rr(2)}function LC(i){return null==i||"object"!=typeof i||Object.isFrozen(i)}function th(i){var o=YC[i];return o||Rr(18,i),o}function G1(){return z1}function HC(i,o){o&&(th("Patches"),i.u=[],i.s=[],i.v=o)}function MD(i){VC(i),i.p.forEach(Vj),i.p=null}function VC(i){i===z1&&(z1=i.l)}function c2(i){return z1={p:[],l:z1,h:i,m:!0,_:0}}function Vj(i){var o=i[Fe];0===o.i||1===o.i?o.j():o.O=!0}function BC(i,o){o._=o.p.length;var r=o.p[0],l=void 0!==i&&i!==r;return o.h.g||th("ES5").S(o,i,l),l?(r[Fe].P&&(MD(o),Rr(4)),Qu(i)&&(i=CD(o,i),o.l||TD(o,i)),o.u&&th("Patches").M(r[Fe].t,i,o.u,o.s)):i=CD(o,r,[]),MD(o),o.u&&o.v(o.u,o.s),i!==$C?i:void 0}function CD(i,o,r){if(LC(o))return o;var l=o[Fe];if(!l)return Gc(o,function(d,m){return d2(i,l,o,d,m,r)},!0),o;if(l.A!==i)return o;if(!l.P)return TD(i,l.t,!0),l.t;if(!l.I){l.I=!0,l.A._--;var h=4===l.i||5===l.i?l.o=FC(l.k):l.o;Gc(3===l.i?new Set(h):h,function(d,m){return d2(i,l,h,d,m,r)}),TD(i,h,!1),r&&i.u&&th("Patches").R(l,r,i.u,i.s)}return l.o}function d2(i,o,r,l,h,d){if(Bc(h)){var m=CD(i,h,d&&o&&3!==o.i&&!_f(o.D,l)?d.concat(l):void 0);if(u2(r,l,m),!Bc(m))return;i.m=!1}if(Qu(h)&&!LC(h)){if(!i.h.F&&i._<1)return;CD(i,h),o&&o.A.l||TD(i,h)}}function TD(i,o,r){void 0===r&&(r=!1),i.h.F&&i.m&&RC(o,r)}function GC(i,o){var r=i[Fe];return(r?Lr(r):i)[o]}function f2(i,o){if(o in i)for(var r=Object.getPrototypeOf(i);r;){var l=Object.getOwnPropertyDescriptor(r,o);if(l)return l;r=Object.getPrototypeOf(r)}}function ra(i){i.P||(i.P=!0,i.l&&ra(i.l))}function UC(i){i.o||(i.o=FC(i.t))}function U1(i,o,r){var l=DD(o)?th("MapSet").N(o,r):bD(o)?th("MapSet").T(o,r):i.g?function(h,d){var m=Array.isArray(h),w={i:m?1:0,A:d?d.A:G1(),P:!1,I:!1,D:{},l:d,t:h,k:null,o:null,j:null,C:!1},x=w,M=Y1;m&&(x=[w],M=W1);var N=Proxy.revocable(x,M),I=N.revoke,H=N.proxy;return w.k=H,w.j=I,H}(o,r):th("ES5").J(o,r);return(r?r.A:G1()).p.push(l),l}function p2(i,o){switch(o){case 2:return new Map(i);case 3:return Array.from(i)}return FC(i)}var g2,z1,zC="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),$j="undefined"!=typeof Map,Yj="undefined"!=typeof Set,m2="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,$C=zC?Symbol.for("immer-nothing"):((g2={})["immer-nothing"]=!0,g2),$1=zC?Symbol.for("immer-draftable"):"__$immer_draftable",Fe=zC?Symbol.for("immer-state"):"__$immer_state",Wj=("undefined"!=typeof Symbol&&Symbol,""+Object.prototype.constructor),c0="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:Object.getOwnPropertyNames,y2=Object.getOwnPropertyDescriptors||function(i){var o={};return c0(i).forEach(function(r){o[r]=Object.getOwnPropertyDescriptor(i,r)}),o},YC={},Y1={get:function(i,o){if(o===Fe)return i;var h,w,x,r=Lr(i);if(!_f(r,o))return h=i,(x=f2(r,o))?"value"in x?x.value:null===(w=x.get)||void 0===w?void 0:w.call(h.k):void 0;var l=r[o];return i.I||!Qu(l)?l:l===GC(i.t,o)?(UC(i),i.o[o]=U1(i.A.h,l,i)):l},has:function(i,o){return o in Lr(i)},ownKeys:function(i){return Reflect.ownKeys(Lr(i))},set:function(i,o,r){var l=f2(Lr(i),o);if(null==l?void 0:l.set)return l.set.call(i.k,r),!0;if(!i.P){var h=GC(Lr(i),o),d=null==h?void 0:h[Fe];if(d&&d.t===r)return i.o[o]=r,i.D[o]=!1,!0;if(function h2(i,o){return i===o?0!==i||1/i==1/o:i!=i&&o!=o}(r,h)&&(void 0!==r||_f(i.t,o)))return!0;UC(i),ra(i)}return i.o[o]===r&&"number"!=typeof r&&(void 0!==r||o in i.o)||(i.o[o]=r,i.D[o]=!0,!0)},deleteProperty:function(i,o){return void 0!==GC(i.t,o)||o in i.t?(i.D[o]=!1,UC(i),ra(i)):delete i.D[o],i.o&&delete i.o[o],!0},getOwnPropertyDescriptor:function(i,o){var r=Lr(i),l=Reflect.getOwnPropertyDescriptor(r,o);return l&&{writable:!0,configurable:1!==i.i||"length"!==o,enumerable:l.enumerable,value:r[o]}},defineProperty:function(){Rr(11)},getPrototypeOf:function(i){return Object.getPrototypeOf(i.t)},setPrototypeOf:function(){Rr(12)}},W1={};Gc(Y1,function(i,o){W1[i]=function(){return arguments[0]=arguments[0][0],o.apply(this,arguments)}}),W1.deleteProperty=function(i,o){return W1.set.call(this,i,o,void 0)},W1.set=function(i,o,r){return Y1.set.call(this,i[0],o,r,i[0])};var Fa=new(function(){function i(r){var l=this;this.g=m2,this.F=!0,this.produce=function(h,d,m){if("function"==typeof h&&"function"!=typeof d){var w=d;d=h;var x=l;return function(X){var lt=this;void 0===X&&(X=w);for(var ht=arguments.length,tt=Array(ht>1?ht-1:0),yt=1;yt<ht;yt++)tt[yt-1]=arguments[yt];return x.produce(X,function(Nt){var Vt;return(Vt=d).call.apply(Vt,[lt,Nt].concat(tt))})}}var M;if("function"!=typeof d&&Rr(6),void 0!==m&&"function"!=typeof m&&Rr(7),Qu(h)){var N=c2(l),I=U1(l,h,void 0),H=!0;try{M=d(I),H=!1}finally{H?MD(N):VC(N)}return"undefined"!=typeof Promise&&M instanceof Promise?M.then(function(X){return HC(N,m),BC(X,N)},function(X){throw MD(N),X}):(HC(N,m),BC(M,N))}if(!h||"object"!=typeof h){if(void 0===(M=d(h))&&(M=h),M===$C&&(M=void 0),l.F&&RC(M,!0),m){var B=[],$=[];th("Patches").M(h,M,B,$),m(B,$)}return M}Rr(21,h)},this.produceWithPatches=function(h,d){if("function"==typeof h)return function(M){for(var N=arguments.length,I=Array(N>1?N-1:0),H=1;H<N;H++)I[H-1]=arguments[H];return l.produceWithPatches(M,function(B){return h.apply(void 0,[B].concat(I))})};var m,w,x=l.produce(h,d,function(M,N){m=M,w=N});return"undefined"!=typeof Promise&&x instanceof Promise?x.then(function(M){return[M,m,w]}):[x,m,w]},"boolean"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),"boolean"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var o=i.prototype;return o.createDraft=function(r){Qu(r)||Rr(8),Bc(r)&&(r=function Bj(i){return Bc(i)||Rr(22,i),function o(r){if(!Qu(r))return r;var l,h=r[Fe],d=wf(r);if(h){if(!h.P&&(h.i<4||!th("ES5").K(h)))return h.t;h.I=!0,l=p2(r,d),h.I=!1}else l=p2(r,d);return Gc(l,function(m,w){h&&function xD(i,o){return 2===wf(i)?i.get(o):i[o]}(h.t,m)===w||u2(l,m,o(w))}),3===d?new Set(l):l}(i)}(r));var l=c2(this),h=U1(this,r,void 0);return h[Fe].C=!0,VC(l),h},o.finishDraft=function(r,l){var d=(r&&r[Fe]).A;return HC(d,l),BC(void 0,d)},o.setAutoFreeze=function(r){this.F=r},o.setUseProxies=function(r){r&&!m2&&Rr(20),this.g=r},o.applyPatches=function(r,l){var h;for(h=l.length-1;h>=0;h--){var d=l[h];if(0===d.path.length&&"replace"===d.op){r=d.value;break}}h>-1&&(l=l.slice(h+1));var m=th("Patches").$;return Bc(r)?m(r,l):this.produce(r,function(w){return m(w,l)})},i}()),Xj=Fa.produce;Fa.produceWithPatches.bind(Fa),Fa.setAutoFreeze.bind(Fa),Fa.setUseProxies.bind(Fa),Fa.applyPatches.bind(Fa),Fa.createDraft.bind(Fa),Fa.finishDraft.bind(Fa);const v2=Xj,Zj=["ngDiagram"];class Uc{constructor(){}static makeMouseMoveRunOutsideAngularZone(o,r){o.addEventListener=(l,h,d,m)=>{const w=we.S0.prototype.addEventListener;"mousemove"===h?r.runOutsideAngular(()=>w.call(this,l,h,d,m)):r.run(()=>{w.call(this,l,h,d,m)})}}static initializeModel(o,r,l,h){o.delayInitialization(()=>{o.model.commit(m=>{h&&m.assignAllDataProperties(m.modelData,h),m.mergeNodeDataArray(m.cloneDeep(r)),l&&m instanceof we.FJ&&m.mergeLinkDataArray(m.cloneDeep(l))},null)})}static initializeModelChangedListener(o){var r=null;!o.hasOwnProperty("diagram")&&!o.hasOwnProperty("palette")||(o.hasOwnProperty("diagram")&&(r=o.diagram),o.hasOwnProperty("palette")&&(r=o.palette),o.modelChangedListener=l=>{l.isTransactionFinished&&l.model&&!l.model.isReadOnly&&o.modelChange&&o.zone.run(()=>{const h=l.model.toIncrementalData(l);null!==h&&o.modelChange.emit(h)})},r.addModelChangedListener(o.modelChangedListener))}static mergeAppDataWithModel(o,r){var l=null;o.hasOwnProperty("diagram")&&(l=o.diagram),o.hasOwnProperty("palette")&&(l=o.palette),l.model.commit(h=>{r&&(l.model.modelData={}),l.model.assignAllDataProperties(l.model.modelData,o.modelData),r&&(l.model.nodeDataArray=[]),l.model.mergeNodeDataArray(o.nodeDataArray),o.linkDataArray&&l.model instanceof we.FJ&&(r&&(l.model.linkDataArray=[]),l.model.mergeLinkDataArray(o.linkDataArray))},r?null:"update data")}}let w2=(()=>{class i{constructor(r){this.zone=r,this.linkDataArray=null,this.modelData=null,this.modelChangedListener=null,this.skipsDiagramUpdate=!1,this.modelChange=new Ie,this.diagram=null,this.wasCleared=!1}ngAfterViewInit(){if(!this.diagramDiv)throw new Error("diagramDiv is not defined");if(this.diagram=this.initDiagram(),!(this.diagram instanceof we.S0))throw new Error("initDiagram function did not return a go.Diagram");Uc.makeMouseMoveRunOutsideAngularZone(this.diagram,this.zone);const r=this.diagramDiv.nativeElement;null!==r&&(this.diagram.div=r,Uc.initializeModel(this.diagram,this.nodeDataArray,this.linkDataArray,this.modelData),Uc.initializeModelChangedListener(this))}ngOnChanges(){!this.diagram||!this.diagram.model||this.skipsDiagramUpdate||(this.wasCleared?(this.diagram.delayInitialization(()=>{Uc.mergeAppDataWithModel(this,!0)}),this.wasCleared=!1):Uc.mergeAppDataWithModel(this))}clear(){const r=this.diagram;null!==r&&(r.clear(),this.wasCleared=!0)}ngOnDestroy(){this.diagram.div=null}}return i.\u0275fac=function(r){return new(r||i)(at(An))},i.\u0275cmp=Ct({type:i,selectors:[["gojs-diagram"]],viewQuery:function(r,l){if(1&r&&pf(Zj,7),2&r){let h;Ln(h=jn())&&(l.diagramDiv=h.first)}},inputs:{linkDataArray:"linkDataArray",modelData:"modelData",skipsDiagramUpdate:"skipsDiagramUpdate",initDiagram:"initDiagram",nodeDataArray:"nodeDataArray",divClassName:"divClassName"},outputs:{modelChange:"modelChange"},features:[_e],decls:2,vars:1,consts:[[3,"className"],["ngDiagram",""]],template:function(r,l){1&r&&J(0,"div",0,1),2&r&&je("className",l.divClassName)},encapsulation:2}),i})(),Qj=(()=>{class i{static syncNodeData(r,l,h){if(!r||!r.modifiedNodeData&&!r.insertedNodeKeys&&!r.removedNodeKeys)return l;const d=new we.D5;return v2(l,w=>{if(r.modifiedNodeData&&r.modifiedNodeData.forEach(x=>{const M=h?h.getKeyForNodeData(x):x.key;d.set(M,x);for(let N=0;N<l.length;N++){const I=l[N];(h?h.getKeyForNodeData(I):I.key)===M&&(w[N]=x)}}),r.insertedNodeKeys&&r.insertedNodeKeys.forEach(x=>{const M=d.get(x);M&&w.push(M)}),r.removedNodeKeys)return w.filter(x=>{const M=h?h.getKeyForNodeData(x):x.key;return!r.removedNodeKeys.includes(M)})})}static syncLinkData(r,l,h){if(!r||!r.modifiedLinkData&&!r.insertedLinkKeys&&!r.removedLinkKeys)return l;const d=new we.D5;return l=v2(l,m=>{if(r.modifiedLinkData&&r.modifiedLinkData.forEach(w=>{const x=h?h.getKeyForLinkData(w):w.key;d.set(x,w);for(let M=0;M<l.length;M++){const N=l[M];(h?h.getKeyForLinkData(N):N.key)===x&&(m[M]=w)}}),r.insertedLinkKeys&&r.insertedLinkKeys.forEach(w=>{const x=d.get(w);x&&m.push(x)}),r.removedLinkKeys)return m.filter(w=>{const x=h?h.getKeyForLinkData(w):w.key;return!r.removedLinkKeys.includes(x)})})}static syncModelData(r,l){return r&&r.modelData?r.modelData?r.modelData:void 0:l}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=A({token:i,factory:i.\u0275fac}),i})(),tH=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({providers:[Qj],imports:[[]]}),i})();const eH=["myDiag"],nH=[{path:"",children:[{path:"godList",children:[{path:"",component:jj},{path:"aphrodite",component:Pj},{path:"apollo",component:Aj},{path:"ares",component:Oj},{path:"artemis",component:Ij},{path:"athena",component:Fj},{path:"hestia",component:Rj},{path:"hades",component:Lj},{path:"hephaestus",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-hephaistos"]],decls:56,vars:0,consts:[["id","godpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom",2,"padding-bottom","8%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"HEPHAESTUS"),C(),T(33,"p",17),P(34," The God of Fire, sometimes said to be the son of Zeus and Hera, sometimes of Hera alone, who bore him in retaliation for Zeus\u2019s having brought forth Athena. Among the perfectly beautiful immortals he only was ugly. He was lame as well. In one place in the Iliad he says that his shameless mother, when she saw that he was born deformed, cast him out of heaven; in another place he declares that Zeus did this, angry with him for trying to defend Hera. This second story is the better known, because of Milton\u2019s familiar lines: Mulciber was "),C(),T(35,"p",18),P(36," Thrown by angry Jove "),J(37,"br"),P(38," Sheer o\u2019er the crystal battlements; from morn"),J(39,"br"),P(40," To noon he fell, from noon to dewy eve,"),J(41,"br"),P(42," A summer\u2019s day, and with the setting sun"),J(43,"br"),P(44," Dropt from the zenith like a falling star,"),J(45,"br"),P(46," On Lemnos, the Aegean isle."),J(47,"br"),C(),T(48,"p",17),P(49," These events, however, were supposed to have taken place in the far-distant past. In Homer he is in no danger of being driven from Olympus; he is highly honored there, the workman of the immortals, their armorer and smith, who makes their dwellings and their furnishings as well as their weapons. In his workshop he has handmaidens he has forged out of gold who can move and who help him in his work. "),C(),T(50,"p",17),P(51," In the later poets his forge is often said to be under this or that volcano, and to cause eruptions. "),C(),T(52,"p",17),P(53," His wife is one of the three Graces in the Iliad, called Aglaia in Hesiod; in the Odyssey she is Aphrodite. "),C(),T(54,"p",19),P(55," He was a kindly, peace-loving god, popular on earth as in heaven. With Athena, he was important in the life of the city. The two were the patrons of handicrafts, the arts which along with agriculture are the support of civilization; he the protector of the smiths as she of the weavers. When children were formally admitted to the city organization, the god of the ceremony was Hephaestus. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})()},{path:"hera",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-hera"]],decls:49,vars:0,consts:[["id","godpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom",2,"padding-bottom","20%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"HERA"),C(),T(33,"p",17),P(34," She was Zeus\u2019s wife and sister. The Titans Ocean and Tethys brought her up. She was the protector of marriage, and married women were her peculiar care. There is very little that is attractive in the portrait the poets draw of her. She is called, indeed, in an early poem, "),C(),T(35,"p",18),P(36," Golden-throned Hera, among immortals the queen,"),J(37,"br"),P(38," Chief among them in beauty, the glorious lady"),J(39,"br"),P(40," All the blessed in high Olympus revere,"),J(41,"br"),P(42," Honor even as Zeus, the lord of the thunder.br> "),C(),T(43,"p",17),P(44," But when any account of her gets down to details, it shows her chiefly engaged in punishing the many women Zeus fell in love with, even when they yielded only because he coerced or tricked them. It made no difference to Hera how reluctant any of them were or how innocent; the goddess treated them all alike. Her implacable anger followed them and their children, too. She never forgot an injury. The Trojan War would have ended in an honorable peace, leaving both sides unconquered, if it had not been for her hatred of a Trojan who had judged another goddess lovelier than she. The wrong of her slighted beauty remained with her until Troy fell in ruins. "),C(),T(45,"p",17),P(46," In one important story, the Quest of the Golden Fleece, she is the gracious protector of heroes and the inspirer of heroic deeds, but not in any other. Nevertheless she was venerated in every home. She was the goddess married women turned to for help. Ilithyia (or Eileithyia), who helped women in childbirth, was her daughter. "),C(),T(47,"p",19),P(48," The cow and the peacock were sacred to her. Argos was her favorite city. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})()},{path:"hermes",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-hermes"]],decls:46,vars:0,consts:[["id","godpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom",2,"padding-bottom","31%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"HERMES"),C(),T(33,"p",17),P(34," Zeus was his father and Maia, daughter of Atlas, his mother. Because of a very popular statue his appearance is more familiar to us than that of any other god. He was graceful and swift of motion. On his feet were winged sandals; wings were on his low-crowned hat, too, and on his magic wand, the Caduceus. He was Zeus\u2019s Messenger, who \u201cflies as fleet as thought to do his bidding.\u201d "),C(),T(35,"p",17),P(36," Of all the gods he was the shrewdest and most cunning; in fact he was the Master Thief, who started upon his career before he was a day old. "),C(),T(37,"p",18),P(38," The babe was born at the break of day, "),J(39,"br"),P(40," And ere the night fell he had stolen away Apollo\u2019s herds."),J(41,"br"),C(),T(42,"p",17),P(43," Zeus made him give them back, and he won Apollo\u2019s forgiveness by presenting him with the lyre which he had just invented, making it out of a tortoise\u2019s shell. Perhaps there was some connection between that very early story of him and the fact that he was God of Commerce and the Market, protector of traders. "),C(),T(44,"p",19),P(45," In odd contrast to this idea of him, he was also the solemn guide of the dead, the Divine Herald who led the souls down to their last home. He appears oftener in the tales of mythology than any other god. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})()},{path:"poseidon",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-poseidon"]],decls:55,vars:0,consts:[["id","godpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom",2,"padding-bottom","22%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"POSEIDON"),C(),T(33,"p",17),P(34," He was the ruler of the sea, Zeus\u2019s brother and second only to him in eminence. The Greeks on both sides of the Aegean were seamen and the God of the Sea was all-important to them. His wife was Amphitrite, a granddaughter of the Titan, Ocean. Poseidon had a splendid palace beneath the sea, but he was oftener to be found in Olympus. "),C(),T(35,"p",17),P(36," Besides being Lord of the Sea he gave the first horse to man, and he was honored as much for the one as for the other. "),C(),T(37,"p",18),P(38," Lord Poseidon, from you this pride is ours, "),J(39,"br"),P(40," The strong horses, the young horses, and also the rule of the deep."),J(41,"br"),C(),T(42,"p",17),P(43," Storm and calm were under his control:\u2014 "),C(),T(44,"p",18),P(45," He commanded and the storm wind rose "),J(46,"br"),P(47," And the surges of the sea."),J(48,"br"),C(),T(49,"p",17),P(50," But when he drove in his golden car over the waters, the thunder of the waves sank into stillness, and tranquil peace followed his smooth-rolling wheels. "),C(),T(51,"p",17),P(52," He was commonly called \u201cEarth-shaker\u201d and was always shown carrying his trident, a three-pronged spear, with which he would shake and shatter whatever he pleased. "),C(),T(53,"p",19),P(54," He had some connection with bulls as well as with horses, but the bull was connected with many other gods, too. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})()},{path:"zeus",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-zeus"]],decls:43,vars:0,consts:[["id","godpage",2,"background-size","auto"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-para-bottom",2,"padding-bottom","11%"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"ZEUS"),C(),T(33,"p",17),P(34," Zeus and his brothers drew lots for their share of the universe. The sea fell to Poseidon, and the underworld to Hades. Zeus became the supreme ruler. He was Lord of the Sky, the Rain-god and the Cloud-gatherer, who wielded the awful thunderbolt. His power was greater than that of all the other divinities together. In the Iliad he tells his family, \u201cI am mightiest of all. Make trial that you may know. Fasten a rope of gold to heaven and lay hold, every god and goddess. You could not drag down Zeus. But if I wished to drag you down, then I would. The rope I would bind to a pinnacle of Olympus and all would hang in air, yes, the very earth and the sea too.\u201d "),C(),T(35,"p",17),P(36," Nevertheless he was not omnipotent or omniscient, either. He could be opposed and deceived. Poseidon dupes him in the Iliad and so does Hera. Sometimes, too, the mysterious power, Fate, is spoken of as stronger than he. Homer makes Hera ask him scornfully if he proposes to deliver from death a man Fate has doomed. "),C(),T(37,"p",17),P(38," He is represented as falling in love with one woman after another and descending to all manner of tricks to hide his infidelity from his wife. The explanation why such actions were ascribed to the most majestic of the gods is, the scholars say, that the Zeus of song and story has been made by combining many gods. When his worship spread to a town where there was already a divine ruler the two were slowly fused into one. The wife of the early god was then transferred to Zeus. The result, however, was unfortunate and the later Greeks did not like these endless love affairs. "),C(),T(39,"p",17),P(40," Still, even in the earliest record Zeus had grandeur. In the Iliad Agamemnon prays: \u201cZeus, most glorious, most great, God of the storm-cloud, thou that dwellest in the heavens.\u201d He demanded, too, not only sacrifices from men, but right action. The Greek Army at Troy is told \u201cFather Zeus never helps liars or those who break their oaths.\u201d The two ideas of him, the low and the high, persisted side by side for a long time. "),C(),T(41,"p",18),P(42," His breastplate was the aegis, awful to behold; his bird was the eagle, his tree the oak. His oracle was Dodona in the land of oak trees. The god\u2019s will was revealed by the rustling of the oak leaves which the priests interpreted. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})()}]},{path:"heroList",children:[{path:"",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-hero-list"]],decls:46,vars:0,consts:[["id","heropage",2,"padding-bottom","17%"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"padding-bottom","3%","margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px"],["href","/sherylMythology"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],["id","centerimg",1,"row"],[1,"col-md-3"],["src","/sherylMythology/assets/perseus.jpg","routerLink","/heroList/perseus"],[2,"text-align","center","color","white","font-family","Glitten"],["src","/sherylMythology/assets/theseus.jpg","routerLink","/heroList/theseus"],["src","/sherylMythology/assets/hercules.jpg","routerLink","/heroList/hercules"],["src","/sherylMythology/assets/atalanta.png","routerLink","/heroList/atalanta"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),J(31,"img",16),T(32,"h3",17),P(33,"Perseus"),C(),C(),T(34,"div",15),J(35,"img",18),T(36,"h3",17),P(37,"Theseus"),C(),C(),T(38,"div",15),J(39,"img",19),T(40,"h3",17),P(41,"Hercules"),C(),C(),T(42,"div",15),J(43,"img",20),T(44,"h3",17),P(45,"Atalanta"),C(),C(),C(),C())},directives:[Hn,kg],styles:[""]}),i})()},{path:"atalanta",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-atalanta"]],decls:62,vars:0,consts:[["id","heropage",2,"background-size","contain"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"ATALANTA"),C(),T(33,"p",17),P(34," Sometimes there are said to have been two heroines of that name. Certainly two men, Iasus and Schoenius, are each called the father of Atalanta, but then it often happens in old stories that different names are given to unimportant persons. If there were two Atalantas it is certainly remarkable that both wanted to sail on the Argo, both took part in the Calydonian boar hunt, both married a man who beat them in a foot race, and both were ultimately changed into lionesses. Since the story of each is practically the same as that of the other it is simpler to take it for granted that there was only one. Indeed it would seem passing the bounds of the probable even in mythological stories to suppose that there were two maidens living at the same time who loved adventure as much as the most dauntless hero, and who could outshoot and outrun and outwrestle, too, the men of one of the two great ages of heroism. "),C(),T(35,"p",17),P(36," Atalanta\u2019s father, whatever his name was, when a daughter and not a son was born to him, was, of course, bitterly disappointed. He decided that she was not worthy bringing up and had the tiny creature left on a wild mountainside to die of cold and hunger. But, as so often happens in stories, animals proved kinder than humans. A she-bear took charge of her, nursed her and kept her warm, and the baby grew up thus into an active, daring little girl. Kind hunters then found her and took her to live with them. She became in the end more than their equal in all the arduous feats of a hunter\u2019s life. Once two Centaurs, swifter and stronger by far than any mortal, caught sight of her when she was alone and pursued her. She did not run from them; that would have been folly. She stood still and fitted an arrow to her bow and shot. A second arrow followed. Both Centaurs fell, mortally wounded. "),C(),T(37,"p",17),P(38," Then came the famous hunt of the Calydonian boar. This was a terrible creature sent to ravage the country of Calydon by Artemis in order to punish the King, Oeneus, because he forgot her when he was sacrificing the first fruits to the gods at the harvest-time. The brute devastated the land, destroyed the cattle, killed the men who tried to kill it. Finally Oeneus called for help upon the bravest men of Greece, and a splendid band of young heroes assembled, many of whom sailed later on the Argo. With them came as a matter of course Atalanta, \u201cThe pride of the woods of Arcady.\u201d We have a description of how she looked when she walked in on that masculine gathering: \u201cA shining buckle clasped her robe at the neck; her hair was simply dressed, caught up in a knot behind. An ivory quiver hung upon her left shoulder and in her hand was a bow. Thus was she attired. As for her face, it seemed too maidenly to be that of a boy, and too boyish to be that of a maiden.\u201d To one man there, however, she looked lovelier and more desirable than any maiden he had ever seen. Oeneus\u2019 son, Meleager, fell in love with her at first sight. But, we may be sure, Atalanta treated him as a good comrade, not as a possible lover. She had no liking for men except as companions in the hunt and she was determined never to marry. "),C(),T(39,"p",17),P(40," Some of the heroes resented her presence and felt it beneath them to go hunting with a woman, but Meleager insisted and they finally gave in to him. It proved well for them that they did, because when they surrounded the boar, the brute rushed upon them so swiftly that it killed two men before the others could come to their help, and, what was equally ominous, a third man fell pierced by a misdirected javelin. In this confusion of dying men and wildly flying weapons Atalanta kept her head and wounded the boar. Her arrow was the first to strike it. Meleager then rushed on the wounded creature and stabbed it to the heart. Technically speaking it was he who killed it, but the honors of the hunt went to Atalanta and Meleager insisted that they should give her the skin. "),C(),T(41,"p",17),P(42," Strangely enough this was the cause of his own death. When he was just a week old the Fates had appeared to his mother, Althea, and thrown a log of wood into the fire burning in her chamber. Then spinning as they ever did, twirling the distaff and twisting the thread of destiny, they sang, "),C(),T(43,"p",18),P(44," To you, O new-born child, we grant a gift,"),J(45,"br"),P(46," To live until this wood turns into ash."),J(47,"br"),C(),T(48,"p",17),P(49," Althea snatched the brand from the fire, quenched the flame, and hid it in a chest. Her brothers were among those who went to hunt the boar. They felt themselves insulted and were furiously angry at having the prize go to a girl\u2014as, no doubt, was the case with others, but they were Meleager\u2019s uncles and did not need to stand on any ceremony with him. They declared that Atalanta should not have the skin and told Meleager he had no more right to give it away than anyone else had. Whereupon Meleager killed them both, taking them completely off their guard. "),C(),T(50,"p",17),P(51," This news was brought to Althea. Her beloved brothers had been slain by her son because he had made a fool of himself over a shameless hussy who went hunting with men. A passion of rage took possession of her. She rushed to the chest for the brand and threw it into the fire. As it blazed up, Meleager fell to the ground dying, and by the time it was consumed his spirit had slipped away from his body. It is said that Althea, horror-stricken at what she had done, hanged herself. So the Calydonian boar hunt ended in tragedy. "),C(),T(52,"p",17),P(53," To Atalanta, however, it was only the beginning of her adventures. Some say that she sailed with the Argonauts; others that Jason persuaded her not to do so. She is never mentioned in the story of their exploits and she was certainly not one to hold back when deeds of daring were to be done, so that it seems probable that she did not go. The next time we hear of her is after the Argonauts returned, when Medea had killed Jason\u2019s uncle Pelias under the pretext of restoring him to youth. At the funeral games held in his honor Atalanta appeared among the contestants, and in the wrestling match conquered the young man who was to be the father of Achilles, the great hero Peleus. "),C(),T(54,"p",17),P(55," It was after this achievement that she discovered who her parents were and went to live with them, her father apparently being reconciled to having a daughter who really seemed almost if not quite as good as a son. It seems odd that a number of men wanted to marry her because she could hunt and shoot and wrestle, but it was so; she had a great many suitors. As a way of disposing of them easily and agreeably she declared that she would marry whoever could beat her in a foot race, knowing well that there was no such man alive. She had a delightful time. Fleet-footed young men were always arriving to race with her and she always outran them. "),C(),T(56,"p",17),P(57," But at last one came who used his head as well as his heels. He knew he was not as good as runner as she, but he had a plan. By the favor of Aphrodite, always on the lookout to subdue wild young maidens who despised love, this ingenious young man, whose name was either Melanion (Milanion) or Hippomenes, got possession of three wondrous apples, all of pure gold, beautiful as those that grew in the garden of the Hesperides. No one alive could see them and not want them. "),C(),T(58,"p",17),P(59," On the race course as Atalanta\u2014poised for the starting signal, and a hundredfold more lovely disrobed than with her garments on\u2014looked fiercely around her, wonder at her beauty took hold of all who saw her, but most of all the man who was waiting to run against her. He kept his head, however, and held fast to his golden apples. They started, she flying swift as an arrow, her hair tossed back over her white shoulders, a rosy flush tinging her fair body. She was out-stripping him when he rolled one of the apples directly in front of her. It needed but a moment for her to stoop and pick the lovely thing up, but that brief pause brought him abreast of her. A moment more and he threw the second, this time a little to the side. She had to swerve to reach it and he got ahead of her. Almost at once, however, she had caught up with him and the goal was now very near. But then the third golden sphere flashed across her path and rolled far into the grass beside the course. She saw the gleam through the green, she could not resist it. As she picked the apple up, her lover panting and almost winded touched the goal. She was his. Her free days alone in the forest and her athletic victories were over. "),C(),T(60,"p",19),P(61," The two are said to have been turned into lions because of some affront offered either to Zeus or to Aphrodite. But before that Atalanta had borne a son, Parthenopaeus, who was one of the Seven against Thebes. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})()},{path:"hercules",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-hercules"]],decls:171,vars:0,consts:[["id","heropage",2,"background-size","contain"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"HERCULES"),C(),T(33,"p",17),P(34," The greatest hero of Greece was Hercules. He was a personage of quite another order from the great hero of Athens, Theseus. He was what all Greece except Athens most admired. The Athenians were different from the other Greeks and their hero therefore was different. Theseus was, of course, bravest of the brave as all heroes are, but unlike other heroes he was as compassionate as he was brave and a man of great intellect as well as great bodily strength. It was natural that the Athenians should have such a hero because they valued thought and ideas as no other part of the country did. In Theseus their ideal was embodied. But Hercules embodied what the rest of Greece most valued. His qualities were those the Greeks in general honored and admired. Except for unflinching courage, they were not those that distinguished Theseus. "),C(),T(35,"p",17),P(36," Hercules was the strongest man on earth and he had the supreme selfconfidence magnificent physical strength gives. He considered himself on an equality with the gods\u2014and with some reason. They needed his help to conquer the Giants. In the final victory of the Olympians over the brutish sons of Earth, Hercules\u2019 arrows played an important part. He treated the gods accordingly. Once when the priestess at Delphi gave no response to the question he asked, he seized the tripod she sat on and declared that he would carry it off and have an oracle of his own. Apollo, of course, would not put up with this, but Hercules was perfectly willing to fight him and Zeus had to intervene. The quarrel was easily settled, however. Hercules was quite good-natured about it. He did not want to quarrel with Apollo, he only wanted an answer from his oracle. If Apollo would give it the matter was settled as far as he was concerned. Apollo on his side, facing this undaunted person, felt an admiration for his boldness and made his priestess deliver the response. "),C(),T(37,"p",17),P(38," Throughout his life Hercules had this perfect confidence that no matter who was against him he could never be defeated, and facts bore him out. Whenever he fought with anyone the issue was certain beforehand. He could be overcome only by a supernatural force. Hera used hers against him with terrible effect and in the end he was killed by magic, but nothing that lived in the air, sea, or on land ever defeated him. "),C(),T(39,"p",17),P(40," It would have been ludicrous to put him in command of a kingdom as Theseus was put; he had more than enough to do to command himself. He could never have thought out any new or great idea as the Athenian hero was held to have done. His thinking was limited to devising a way to kill a monster which was threatening to kill him. Nevertheless he had true greatness. Not because he had complete courage based upon overwhelming strength, which is merely a matter of course, but because, by his sorrow for wrongdoing and his willingness to do anything to expiate it, he showed greatness of soul. If only he had had some greatness of mind as well, at least enough to lead him along the ways of reason, he would have been the perfect hero. "),C(),T(41,"p",17),P(42," He was born in Thebes and for a long time was held to be the son of Amphitryon, a distinguished general. In those earlier years he was called Alcides, or descendant of Alcaeus who was Amphitryon\u2019s father. But in reality he was the son of Zeus, who had visited Amphitryon\u2019s wife Alcmena in the shape of her husband when the general was away fighting. She bore two children, Hercules to Zeus and Iphicles to Amphitryon. The difference in the boys\u2019 descent was clearly shown in the way each acted in face of a great danger which came to them before they were a year old. Hera, as always, was furiously jealous and she determined to kill Hercules. "),C(),T(43,"p",17),P(44," One evening Alcmena gave both the children their baths and their fill of milk and laid them in their crib, caressing them and saying, \u201cSleep, my little ones, soul of my soul. Happy be your slumber and happy your awakening.\u201d She rocked the cradle and in a moment the babies were asleep. But at darkest midnight when all was silent in the house two great snakes came crawling into the nursery. There was a light in the room and as the two reared up above the crib, with weaving heads and flickering tongues, the children woke. Iphicles screamed and tried to get out of bed, but Hercules sat up and grasped the deadly creatures by the throat. They turned and twisted and wound their coils around his body, but he held them fast. The mother heard Iphicles\u2019 screams and, calling to her husband, rushed to the nursery. There sat Hercules laughing, in each hand a long limp body. He gave them gleefully to Amphitryon. They were dead. All knew then that the child was destined to great things. Teiresias, the blind prophet of Thebes, told Alcmena: \u201cI swear that many a Greek woman as she cards the wool at eventide shall sing of this your son and you who bore him. He shall be the hero of all mankind.\u201d "),C(),T(45,"p",17),P(46," Great care was taken with his education, but teaching him what he did not wish to learn was a dangerous business. He seems not to have liked music, which was a most important part of a Greek boy\u2019s training, or else he disliked his music master. He flew into a rage with him and brained him with his lute. This was the first time he dealt a fatal blow without intending it. He did not mean to kill the poor musician; he just struck out on the impulse of the moment without thinking, hardly aware of his strength. He was sorry, very sorry, but that did not keep him from doing the same thing again and again. The other subjects he was taught, fencing, wrestling, and driving, he took to more kindly, and his teachers in these branches all survived. By the time he was eighteen he was fullgrown and he killed, alone by himself, a great lion which lived in the woods of Cithaeron, the Thespian lion. Ever after he wore its skin as a cloak with the head forming a kind of hood over his own head. "),C(),T(47,"p",17),P(48," His next exploit was to fight and conquer the Minyans, who had been exacting a burdensome tribute from the Thebans. The grateful citizens gave him as a reward the hand of the Princess Megara. He was devoted to her and to their children and yet this marriage brought upon him the greatest sorrow of his life as well as trials and dangers such as no one ever went through, before or after. When Megara had borne him three sons he went mad. Hera who never forgot a wrong sent the madness upon him. He killed his children and Megara, too, as she tried to protect the youngest. Then his sanity returned. He found himself in his bloodstained hall, the dead bodies of his sons and his wife beside him. He had no idea what had happened, how they had been killed. Only a moment since, as it seemed to him, they had all been talking together. As he stood there in utter bewilderment the terrified people who were watching him from a distance saw that the mad fit was over, and Amphitryon dared to approach him. There was no keeping the truth from Hercules. He had to know how this horror had come to pass and Amphitryon told him. Hercules heard him out; then he said, \u201cAnd I myself am the murderer of my dearest.\u201d "),C(),T(49,"p",17),P(50," \u201cYes,\u201d Amphitryon answered trembling. \u201cBut you were out of your mind.\u201d"),J(51,"br"),P(52," Hercules paid no attention to the implied excuse."),J(53,"br"),P(54," \u201cShall I spare my own life then?\u201d he said. \u201cI will avenge upon myself these deaths.\u201d"),J(55,"br"),C(),T(56,"p",17),P(57," But before he could rush out and kill himself, even as he started to do so, his desperate purpose was changed and his life was spared. This miracle\u2014it was nothing less\u2014of recalling Hercules, from frenzied feeling and violent action to sober reason and sorrowful acceptance, was not wrought by a god descending from the sky. It was a miracle caused by human friendship. His friend Theseus stood before him and stretched out his hands to clasp those bloodstained hands. Thus according to the common Greek idea he would himself become defiled and have a part in Hercules\u2019 guilt. "),C(),T(58,"p",17),P(59," \u201cDo not start back,\u201d he told Hercules. \u201cDo not keep me from sharing all with you. Evil I share with you is not evil to me. And hear me. Men great of soul can bear the blows of heaven and not flinch.\u201d "),J(60,"br"),P(61," Hercules said, \u201cDo you know what I have done?\u201d "),J(62,"br"),P(63," \u201cI know this,\u201d Theseus answered. \u201cYour sorrows reach from earth to heaven.\u201d "),J(64,"br"),P(65," \u201cSo I will die,\u201d said Hercules. "),J(66,"br"),P(67," \u201cNo hero spoke those words,\u201d Theseus said. "),J(68,"br"),P(69," \u201cWhat can I do but die?\u201d Hercules cried. \u201cLive? A branded man, for all to say, \u2018Look. There is he who killed his wife and sons!\u2019 Everywhere my jailers, the sharp scorpions of the tongue!\u201d "),J(70,"br"),P(71," \u201cEven so, suffer and be strong,\u201d Theseus answered. \u201cYou shall come to Athens with me, share my home and all things with me. And you will give to me and to the city a great return, the glory of having helped you.\u201d "),J(72,"br"),P(73," A long silence followed. At last Hercules spoke, slow, heavy words. \u201cSo let it be,\u201d he said, \u201cI will be strong and wait for death.\u201d "),J(74,"br"),C(),T(75,"p",17),P(76," The two went to Athens, but Hercules did not stay there long. Theseus, the thinker, rejected the idea that a man could be guilty of murder when he had not known what he was doing and that those who helped such a one could be reckoned defiled. The Athenians agreed and welcomed the poor hero. But he himself could not understand such ideas. He could not think the thing out at all; he could only feel. He had killed his family. Therefore he was defiled and a defiler of others. He deserved that all should turn from him with loathing. At Delphi where he went to consult the oracle, the priestess looked at the matter just as he did. He needed to be purified, she told him, and only a terrible penance could do that. She bade him go to his cousin Eurystheus, King of Mycenae (of Tiryns in some stories) and submit to whatever he demanded of him. He went willingly, ready to do anything that could make him clean again. It is plain from the rest of the story that the priestess knew what Eurystheus was like and that he would beyond question purge Hercules thoroughly. "),C(),T(77,"p",17),P(78," Eurystheus was by no means stupid, but of a very ingenious turn of mind, and when the strongest man on earth came to him humbly prepared to be his slave, he devised a series of penances which from the point of view of difficulty and danger could not have been improved upon. It must be said, however, that he was helped and urged on by Hera. To the end of Hercules\u2019 life she never forgave him for being Zeus\u2019s son. The tasks Eurystheus gave him to do are called \u201cthe Labors of Hercules.\u201d There were twelve of them and each one was all but impossible. "),C(),T(79,"p",17),P(80," The first was to kill the lion of Nemea, a beast no weapons could wound. That difficulty Hercules solved by choking the life out of him. Then he heaved the huge carcass up on his back and carried it into Mycenae. After that, Eurystheus, a cautious man, would not let him inside the city. He gave him his orders from afar. "),C(),T(81,"p",17),P(82," The second labor was to go to Lerna and kill a creature with nine heads called the Hydra which lived in a swamp there. This was exceedingly hard to do, because one of the heads was immortal and the others almost as bad, inasmuch as when Hercules chopped off one, two grew up instead. However, he was helped by his nephew Iolaus who brought him a burning brand with which he seared the neck as he cut each head off so that it could not sprout again. When all had been chopped off he disposed of the one that was immortal by burying it securely under a great rock. "),C(),T(83,"p",17),P(84," The third labor was to bring back alive a stag with horns of gold, sacred to Artemis, which lived in the forests of Cerynitia. He could have killed it easily, but to take it alive was another matter and he hunted it a whole year before he succeeded. "),C(),T(85,"p",17),P(86," The fourth labor was to capture a great boar which had its lair on Mount Erymanthus. He chased the beast from one place to another until it was exhausted; then he drove it into deep snow and trapped it. "),C(),T(87,"p",17),P(88," The fifth labor was to clean the Augean stables in a single day. Augeas had thousands of cattle and their stalls had not been cleared out for years. Hercules diverted the courses of two rivers and made them flow through the stables in a great flood that washed out the filth in no time at all. "),C(),T(89,"p",17),P(90," The sixth labor was to drive away the Stymphalian birds, which were a plague to the people of Stymphalus because of their enormous numbers. He was helped by Athena to drive them out of their coverts, and as they flew up he shot them. "),C(),T(91,"p",17),P(92," The seventh labor was to go to Crete and fetch from there the beautiful savage bull that Poseidon had given Minos. Hercules mastered him, put him in a boat, and brought him to Eurystheus. "),C(),T(93,"p",17),P(94," The eighth labor was to get the man-eating mares of King Diomedes of Thrace. Hercules slew Diomedes first and then drove off the mares unopposed. "),C(),T(95,"p",17),P(96," The ninth labor was to bring back the girdle of Hippolyta, the Queen of the Amazons. When Hercules arrived she met him kindly and told him she would give him the girdle, but Hera stirred up trouble. She made the Amazons think that Hercules was going to carry off their queen, and they charged down on his ship. Hercules, without a thought of how kind Hippolyta had been, without any thought at all, instantly killed her, taking it for granted that she was responsible for the attack. He was able to fight off the others and get away with the girdle. "),C(),T(97,"p",17),P(98," The tenth labor was to bring back the cattle of Geryon, who was a monster with three bodies living on Erythia, a western island. On his way there Hercules reached the land at the end of the Mediterranean and he set up as a memorial of his journey two great rocks, called the pillars of Hercules (now Gibraltar and Ceuta). Then he got the oxen and took them to Mycenae. "),C(),T(99,"p",17),P(100," The eleventh labor was the most difficult of all so far. It was to bring back the Golden Apples of the Hesperides, and he did not know where they were to be found. Atlas, who bore the vault of heaven upon his shoulders, was the father of the Hesperides, so Hercules went to him and asked him to get the apples for him. He offered to take upon himself the burden of the sky while Atlas was away. Atlas, seeing a chance of being relieved forever from his heavy task, gladly agreed. He came back with the apples, but he did not give them to Hercules. He told Hercules he could keep on holding up the sky, for Atlas himself would take the apples to Eurystheus. On this occasion Hercules had only his wits to trust to; he had to give all his strength to supporting that mighty load. He was successful, but because of Atlas\u2019 stupidity rather than his own cleverness. He agreed to Atlas\u2019 plan, but asked him to take the sky back for just a moment so that Hercules could put a pad on his shoulders to ease the pressure. Atlas did so, and Hercules picked up the apples and went off. "),C(),T(101,"p",17),P(102," The twelfth labor was the worst of all. It took him down to the lower world, and it was then that he freed Theseus from the Chair of Forgetfulness. His task was to bring Cerberus, the three-headed dog, up from Hades. Pluto gave him permission provided Hercules used no weapons to overcome him. He could use his hands only. Even so, he forced the terrible monster to submit to him. He lifted him and carried him all the way up to the earth and on to Mycenae. Eurystheus very sensibly did not want to keep him and made Hercules carry him back. This was his last labor "),C(),T(103,"p",17),P(104," When all were completed and full expiation made for the death of his wife and children, he would seem to have earned ease and tranquillity for the rest of his life. But it was not so. He was never tranquil and at ease. An exploit quite as difficult as most of the labors was the conquest of Antaeus, a Giant and a mighty wrestler who forced strangers to wrestle with him on condition that if he was victor he should kill them. He was roofing a temple with the skulls of his victims. As long as he could touch the earth he was invincible. If thrown to the ground he sprang up with renewed strength from the contact. Hercules lifted him up and holding him in the air strangled him. "),C(),T(105,"p",17),P(106," Story after story is told of his adventures. He fought the river-god Achelous because Achelous was in love with the girl Hercules now wanted to marry. Like everyone else by this time, Achelous had no desire to fight him and he tried to reason with him. But that never worked with Hercules. It only made him more angry. He said, \u201cMy hand is better than my tongue. Let me win fighting and you may win talking.\u201d Achelous took the form of a bull and attacked him fiercely, but Hercules was used to subduing bulls. He conquered him and broke off one of his horns. The cause of the contest, a young princess named Deianira, became his wife. "),C(),T(107,"p",17),P(108," He traveled to many lands and did many other great deeds. At Troy he rescued a maiden who was in the same plight as Andromeda, waiting on the shore to be devoured by a sea monster which could be appeased in no other way. She was the daughter of King Laomedon, who had cheated Apollo and Poseidon of their wages after at Zeus\u2019s command they had built for the King the walls of Troy. In return Apollo sent a pestilence, and Poseidon the sea serpent. Hercules agreed to rescue the girl if her father would give him the horses Zeus had given his grandfather. Laomedon promised, but when Hercules had slain the monster the King refused to pay. Hercules captured the city, killed the King, and gave the maiden to his friend, Telamon of Salamis, who had helped him. "),C(),T(109,"p",17),P(110," On his way to Atlas to ask him about the Golden Apples, Hercules came to the Caucasus, where he freed Prometheus, slaying the eagle that preyed on him. "),C(),T(111,"p",17),P(112," Along with these glorious deeds there were others not glorious. He killed with a careless thrust of his arm a lad who was serving him by pouring water on his hands before a feast. It was an accident and the boy\u2019s father forgave Hercules, but Hercules could not forgive himself and he went into exile for a time. Far worse was his deliberately slaying a good friend in order to avenge an insult offered him by the young man\u2019s father, King Eurytus. For this base action Zeus himself punished him: he sent him to Lydia to be a slave to the Queen, Omphale, some say for a year, some for three years. She amused herself with him, making him at times dress up as a woman and do woman\u2019s work, weave or spin. He submitted patiently, as always, but he felt himself degraded by this servitude and with complete unreason blamed Eurytus for it and swore he would punish him to the utmost when he was freed. "),C(),T(113,"p",17),P(114," All the stories told about him are characteristic, but the one which gives the clearest picture of him is the account of a visit he made when he was on his way to get the man-eating mares of Diomedes, one of the twelve labors. The house he had planned to spend a night in, that of his friend Admetus, a king in Thessaly, was a place of deep mourning when he came to it although he did not know. Admetus had just lost his wife in a very strange way. "),C(),T(115,"p",17),P(116," The cause of her death went back into the past, to the time when Apollo in anger at Zeus for killing his son Aesculapius killed Zeus\u2019s workmen, the Cyclopes. He was punished by being forced to serve on earth as a slave for a year and Admetus was the master he chose or Zeus chose for him. During his servitude Apollo made friends with the household, especially with the head of it and his wife Alcestis. When he had an opportunity to prove how strong his friendship was he took it. He learned that the three Fates had spun all of Admetus\u2019 thread of life, and were on the point of cutting it. He obtained from them a respite. If someone would die in Admetus\u2019 stead, he could live. This news he took to Admetus, who at once set about finding a substitute for himself. He went first quite confidently to his father and mother. They were old and they were devoted to him. Certainly one or the other would consent to take his place in the world of the dead. But to his astonishment he found they would not. They told him, \u201cGod\u2019s daylight is sweet even to the old. We do not ask you to die for us. We will not die for you.\u201d And they were completely unmoved by his angry contempt: \u201cYou, standing palsied at the gate of death and yet afraid to die!\u201d "),C(),T(117,"p",17),P(118," He would not give up, however. He went to his friends begging one after another of them to die and let him live. He evidently thought his life was so valuable that someone would surely save it even at the cost of the supreme sacrifice. But he met with an invariable refusal. At last in despair he went back to his house and there he found a substitute. His wife Alcestis offered to die for him. No one who has read so far will need to be told that he accepted the offer. He felt exceedingly sorry for her and still more for himself in having to lose so good a wife, and he stood weeping beside her as she died. When she was gone he was overwhelmed with grief and decreed that she should have the most magnificent of funerals. "),C(),T(119,"p",17),P(120," It was at this point that Hercules arrived, to rest and enjoy himself under a friend\u2019s roof on his journey north to Diomedes. The way Admetus treated him shows more plainly than any other story we have how high the standards of hospitality were, how much was expected from a host to a guest. "),C(),T(121,"p",17),P(122," As soon as Admetus was told of Hercules\u2019 arrival, he came to meet him with no appearance of mourning except in his dress. His manner was that of one gladly welcoming a friend. To Hercules\u2019 question who was dead he answered quietly that a woman of his household, but no relative of his, was to be buried that day. Hercules instantly declared that he would not trouble him with his presence at such a time, but Admetus steadily refused to let him go elsewhere. \u201cI will not have you sleep under another\u2019s roof,\u201d he told him. To his servants he said that the guest was to be taken to a distant room where he could hear no sounds of grief, and given dinner and lodging there. No one must let him know what had happened. "),C(),T(123,"p",17),P(124," Hercules dined alone, but he understood that Admetus must as a matter of form attend the funeral and the fact did not stand in the way of his enjoying himself. The servants left at home to attend to him were kept busy satisfying his enormous appetite and, still more, refilling his wine-jug. Hercules became very happy and very drunk and very noisy. He roared out songs at the top of his voice, some of them highly objectionable songs, and behaved himself in a way that was nothing less than indecent at the time of a funeral. When the servants looked their disapproval he shouted at them not to be so solemn. Couldn\u2019t they give him a smile now and then like good fellows? Their gloomy faces took away his appetite. \u201cHave a drink with me,\u201d he cried, \u201cmany drinks.\u201d "),C(),T(125,"p",17),P(126," One of them answered timidly that it was not a time for laughter and drinking. "),J(127,"br"),P(128," \u201cWhy not?\u201d thundered Hercules. \u201cBecause a stranger woman is dead?\u201d"),J(129,"br"),P(130," \u201cA stranger\u2014\u201d faltered the servant. "),J(131,"br"),P(132," \u201cWell, that\u2019s what Admetus told me,\u201d Hercules said angrily. \u201cI suppose you won\u2019t say he lied to me.\u201d"),J(133,"br"),P(134," \u201cOh, no,\u201d the servant answered. \u201cOnly\u2014he\u2019s too hospitable. But please have some more wine. Our trouble is only our own.\u201d"),J(135,"br"),P(136," He turned to fill the winecup but Hercules seized him\u2014and no one ever disregarded that grasp."),J(137,"br"),P(138," \u201cThere\u2019s something strange here,\u201d he said to the frightened man. \u201cWhat is wrong?\u201d"),J(139,"br"),P(140," \u201cYou see for yourself we are in mourning,\u201d the other answered."),J(141,"br"),P(142," \u201cBut why, man, why?\u201d Hercules cried. \u201cHas my host made a fool of me? Who is dead?\u201d"),J(143,"br"),P(144," \u201cAlcestis,\u201d the servant whispered. \u201cOur Queen.\u201d"),J(145,"br"),P(146," There was a long silence. Then Hercules threw down his cup."),J(147,"br"),P(148," \u201cI might have known,\u201d he said. \u201cI saw he had been weeping. His eyes were red. But he swore it was a stranger. He made me come in. Oh, good friend and good host. And I\u2014got drunk, made merry, in this house of sorrow. Oh, he should have told me.\u201d"),J(149,"br"),C(),T(150,"p",17),P(151," Then he did as always, he heaped blame upon himself. He had been a fool, a drunken fool, when the man he cared for was crushed with grief. As always, too, his thoughts turned quickly to find some way of atoning. What could he do to make amends? There was nothing he could not do. He was perfectly sure of that, but what was there which would help his friend? Then light dawned on him. \u201cOf course,\u201d he said to himself. \u201cThat is the way. I must bring Alcestis back from the dead. Of course. Nothing could be clearer. I\u2019ll find that old fellow, Death. He is sure to be near her tomb and I\u2019ll wrestle with him. I will crack his body between my arms until he gives her to me. If he is not by the grave I will go down to Hades after him. Oh, I will return good to my friend who has been so good to me.\u201d He hurried out exceedingly pleased with himself and enjoying the prospect of what promised to be a very good wrestling match. "),C(),T(152,"p",17),P(153," When Admetus returned to his empty and desolate house Hercules was there to greet him, and by his side was a woman. \u201cLook at her, Admetus,\u201d he said. \u201cIs she like anyone you know?\u201d And when Admetus cried out, \u201cA ghost! Is it a trick\u2014some mockery of the gods?\u201d Hercules answered, \u201cIt is your wife. I fought Death for her and I made him give her back.\u201d "),C(),T(154,"p",17),P(155," There is no other story about Hercules which shows so clearly his character as the Greeks saw it: his simplicity and blundering stupidity; his inability not to get roaring drunk in a house where someone was dead; his quick penitence and desire to make amends at no matter what cost; his perfect confidence that not even Death was his match. That is the portrait of Hercules. To be sure, it would have been still more accurate if it had shown him in a fit of rage killing one of the servants who were annoying him with their gloomy faces, but the poet Euripides from whom we get the story kept it clear of everything that did not bear directly on Alcestis\u2019 death and return to life. Another death or two, however natural when Hercules was present, would have blurred the picture he wanted to paint. "),C(),T(156,"p",17),P(157," As Hercules had sworn to do while he was Omphale\u2019s slave, no sooner was he free than he started to punish King Eurytus because he himself had been punished by Zeus for killing Eurytus\u2019 son. He collected an army, captured the King\u2019s city, and put him to death. But Eurytus, too, was avenged, for indirectly this victory was the cause of Hercules\u2019 own death. "),C(),T(158,"p",17),P(159," Before he had quite completed the destruction of the city, he sent home\u2014where Deianira, his devoted wife, was waiting for him to come back from Omphale in Lydia\u2014a band of captive maidens, one of them especially beautiful, Iole, the King\u2019s daughter. The man who brought them to Deianira told her that Hercules was madly in love with this Princess. This news was not so hard for Deianira as might be expected, because she believed she had a powerful lovecharm which she had kept for years against just such an evil, a woman in her own house preferred before her. Directly after her marriage, when Hercules was taking her home, they had reached a river where the Centaur Nessus acted as ferryman, carrying travelers over the water. He took Deianira on his back and in midstream insulted her. She shrieked and Hercules shot the beast as he reached the other bank. Before he died he told Deianira to take some of his blood and use it as a charm for Hercules if ever he loved another woman more than her. When she heard about Iole, it seemed to her the time had come, and she anointed a splendid robe with the blood and sent it to Hercules by the messenger. "),C(),T(160,"p",17),P(161," He asked his youthful follower, Philoctetes, to hold the torch to set the wood on fire; and he gave him his bow and arrows, which were to be far-famed in the young man\u2019s hands, too, at Troy. Then the flames rushed up and Hercules was seen no more on earth. He was taken to heaven, where he was reconciled to Hera and married her daughter Hebe, and where "),C(),T(162,"p",18),P(163," After his mighty labors he has rest."),J(164,"br"),P(165," His choicest prize eternal peace."),J(166,"br"),P(167," Within the homes of blessedness."),J(168,"br"),C(),T(169,"p",19),P(170," But it is not easy to imagine him contentedly enjoying rest and peace, or allowing the blessed gods to do so, either. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})()},{path:"perseus",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-perseus"]],decls:140,vars:0,consts:[["id","heropage",2,"background-size","contain"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"PERSEUS"),C(),T(33,"p",17),P(34," King Acrisius of Argos had only one child, a daughter, Dana\u2000. She was beautiful above all the other women of the land, but this was small comfort to the King for not having a son. He journeyed to Delphi to ask the god if there was any hope that some day he would be the father of a boy. The priestess told him no, and added what was far worse: that his daughter would have a son who would kill him. "),C(),T(35,"p",17),P(36," The only sure way to escape that fate was for the King to have Dana instantly put to death\u2014taking no chances, but seeing to it himself. This Acrisius would not do. His fatherly affection was not strong, as events proved, but his fear of the gods was. They visited with terrible punishment those who shed the blood of kindred. Acrisius did not dare slay his daughter. Instead, he had a house built all of bronze and sunk underground, but with part of the roof open to the sky so that light and air could come through. Here he shut her up and guarded her. "),C(),T(37,"p",18),P(38," So Dana endured, the beautiful,"),J(39,"br"),P(40," To change the glad daylight for brass-bound walls, "),J(41,"br"),P(42," And in that chamber secret as the grave "),J(43,"br"),P(44," She lived a prisoner. Yet to her came"),J(45,"br"),P(46," Zeus in the golden rain."),J(47,"br"),C(),T(48,"p",17),P(49," As she sat there through the long days and hours with nothing to do, nothing to see except the clouds moving by overhead, a mysterious thing happened, a shower of gold fell from the sky and filled her chamber. How it was revealed to her that it was Zeus who had visited her in this shape we are not told, but she knew that the child she bore was his son. "),C(),T(50,"p",17),P(51," For a time she kept his birth secret from her father, but it became increasingly difficult to do so in the narrow limits of that bronze house and finally one day the little boy\u2014his name was Perseus\u2014was discovered by his grandfather. \u201cYour child!\u201d Acrisius cried in great anger. \u201cWho is his father?\u201d But when Dana answered proudly, \u201cZeus,\u201d he would not believe her. One thing only he was sure of, that the boy\u2019s life was a terrible danger to his own. He was afraid to kill him for the same reason that had kept him from killing her, fear of Zeus and the Furies who pursue such murderers. But if he could not kill them outright, he could put them in the way of tolerably certain death. He had a great chest made, and the two placed in it. Then it was taken out to sea and cast into the water. "),C(),T(52,"p",17),P(53," In that strange boat Dana sat with her little son. The daylight faded and she was alone on the sea. "),C(),T(54,"p",18),P(55," When in the carven chest the winds and waves"),J(56,"br"),P(57," Struck fear into her heart she put her arms,"),J(58,"br"),P(59," Not without tears, round Perseus tenderly"),J(60,"br"),P(61," She said, \u201cO son, what grief is mine."),J(62,"br"),P(63," But you sleep softly, little child,"),J(64,"br"),P(65," Sunk deep in rest within your cheerless home,"),J(66,"br"),P(67," Only a box, brass-bound. The night, this darkness visible,"),J(68,"br"),P(69," The scudding waves so near to your soft curls,"),J(70,"br"),P(71," The shrill voice of the wind, you do not heed,"),J(72,"br"),P(73," Nestled in your red cloak, fair little face.\u201d"),J(74,"br"),C(),T(75,"p",17),P(76," Through the night in the tossing chest she listened to the waters that seemed always about to wash over them. The dawn came, but with no comfort to her for she could not see it. Neither could she see that around them there were islands rising high above the sea, many islands. All she knew was that presently a wave seemed to lift them and carry them swiftly on and then, retreating, leave them on something solid and motionless. They had made land; they were safe from the sea, but they were still in the chest, with no way to get out. "),C(),T(77,"p",17),P(78," Fate willed it\u2014or perhaps Zeus, who up to now had done little for his love and his child\u2014that they should be discovered by a good man, a fisherman named Dictys. He came upon the great box and broke it open and took the pitiful cargo home to his wife who was as kind as he. They had no children and they cared for Dana and Perseus as if they were their own. The two lived there many years, Dana content to let her son follow the fisherman\u2019s humble trade, out of harm\u2019s way. But in the end more trouble came. Polydectes, the ruler of the little island, was the brother of Dictys, but he was a cruel and ruthless man. He seems to have taken no notice of the mother and son for a long time, but at last Dana attracted his attention. She was still radiantly beautiful even though Perseus by now was full grown, and Polydectes fell in love with her. He wanted her, but he did not want her son, and he set himself to think out a way of getting rid of him. "),C(),T(79,"p",17),P(80," There were some fearsome monsters called Gorgons who lived on an island and were known far and wide because of their deadly power. Polydectes evidently talked to Perseus about them; he probably told him that he would rather have the head of one of them than anything else in the world. This seems practically certain from the plan he devised for killing Perseus. He announced that he was about to be married and he called his friends together for a celebration, including Perseus in the invitation. Each guest, as was customary, brought a gift for the bride-to-be, except Perseus alone. He had nothing he could give. He was young and proud and keenly mortified. He stood up before them all and did exactly what the King had hoped he would do, declared that he would give him a present better than any there. He would go off and kill Medusa and bring back her head as his gift. Nothing could have suited the King better. No one in his senses would have made such a proposal. Medusa was one of the Gorgons. "),C(),T(81,"p",18),P(82," And they are three, the Gorgons, each with wings"),J(83,"br"),P(84," And snaky hair, most horrible to mortals."),J(85,"br"),P(86," Whom no man shall behold and draw again"),J(87,"br"),P(88," The breath of life,"),J(89,"br"),C(),T(90,"p",17),P(91," for the reason that whoever looked at them was turned instantly into stone. It seemed that Perseus had been led by his angry pride into making an empty boast. No man unaided could kill Medusa. "),C(),T(92,"p",17),P(93," But Perseus was saved from his folly. Two great gods were watching over him. He took ship as soon as he left the King\u2019s hall, not daring to see his mother first and tell her what he intended, and he sailed to Greece to learn where the three monsters were found. He went to Delphi, but all the priestess would say was to bid him seek the land where men eat not Demeter\u2019s golden grain, but only acorns. So he went to Dodona, in the land of oak trees, where the talking oaks were which declared Zeus\u2019s will and where the Selli lived who made their bread from acorns. They could tell him, however, no more than this, that he was under the protection of the gods. They did not know where the Gorgons lived. "),C(),T(94,"p",17),P(95," When and how Hermes and Athena came to his help is not told in any story, but he must have known despair before they did so. At last, however, as he wandered on, he met a strange and beautiful person. We know what he looked like from many a poem, a young man with the first down upon his cheek when youth is loveliest, carrying, as no other young man ever did, a wand of gold with wings at one end, wearing a winged hat, too, and winged sandals. At sight of him hope must have entered Perseus\u2019 heart, for he would know that this could be none other than Hermes, the guide and the giver of good. "),C(),T(96,"p",17),P(97," This radiant personage told him that before he attacked Medusa he must first be properly equipped, and that what he needed was in the possession of the nymphs of the North. To find the nymphs\u2019 abode, they must go to the Gray Women who alone could tell them the way. These women dwelt in a land where all was dim and shrouded in twilight. No ray of sun looked ever on that country, nor the moon by night. In that gray place the three women lived, all gray themselves and withered as in extreme old age. They were strange creatures, indeed, most of all because they had but one eye for the three, which it was their custom to take turns with, each removing it from her forehead when she had had it for a time and handing it to another. All this Hermes told Perseus and then he unfolded his plan. He would himself guide Perseus to them. Once there Perseus must keep hidden until he saw one of them take the eye out of her forehead to pass it on. At that moment, when none of the three could see, he must rush forward and seize the eye and refuse to give it back until they told him how to reach the nymphs of the North. "),C(),T(98,"p",17),P(99," He himself, Hermes said, would give him a sword to attack Medusa with\u2014which could not be bent or broken by the Gorgon\u2019s scales, no matter how hard they were. This was a wonderful gift, no doubt, and yet of what use was a sword when the creature to be struck by it could turn the swordsman into stone before he was within striking distance? But another great deity was at hand to help. Pallas Athena stood beside Perseus. She took off the shield of polished bronze which covered her breast and held it out to him. \u201cLook into this when you attack the Gorgon,\u201d she said. \u201cYou will be able to see her in it as in a mirror, and so avoid her deadly power.\u201d "),C(),T(100,"p",17),P(101," Now, indeed, Perseus had good reason to hope. The journey to the twilight land was long, over the stream of Ocean and on to the very border of the black country where the Cimmerians dwell, but Hermes was his guide and he could not go astray. They found the Gray Women at last, looking in the wavering light like gray birds, for they had the shape of swans. But their heads were human and beneath their wings they had arms and hands. Perseus did just as Hermes had said, he held back until he saw one of them take the eye out of her forehead. Then before she could give it to her sister, he snatched it out of her hand. It was a moment or two before the three realized they had lost it. Each thought one of the others had it. But Perseus spoke out and told them he had taken it and that it would be theirs again only when they showed him how to find the nymphs of the North. They gave him full directions at once; they would have done anything to get their eye back. He returned it to them and went on the way they had pointed out to him. He was bound, although he did not know it, to the blessed country of the Hyperboreans, at the back of the North Wind, of which it is said: \u201cNeither by ship nor yet by land shall one find the wondrous road to the gathering place of the Hyperboreans.\u201d But Perseus had Hermes with him, so that the road lay open to him, and he reached that host of happy people who are always banqueting and holding joyful revelry. They showed him great kindness: they welcomed him to their feast, and the maidens dancing to the sound of flute and lyre paused to get for him the gifts he sought. These were three: winged sandals, a magic wallet which would always become the right size for whatever was to be carried in it, and, most important of all, a cap which made the wearer invisible. With these and Athena\u2019s shield and Hermes\u2019 sword Perseus was ready for the Gorgons. Hermes knew where they lived, and leaving the happy land the two flew back across Ocean and over the sea to the Terrible Sisters\u2019 island. "),C(),T(102,"p",17),P(103," By great good fortune they were all asleep when Perseus found them. In the mirror of the bright shield he could see them clearly, creatures with great wings and bodies covered with golden scales and hair a mass of twisting snakes. Athena was beside him now as well as Hermes. They told him which one was Medusa and that was important, for she alone of the three could be killed; the other two were immortal. Perseus on his winged sandals hovered above them, looking, however, only at the shield. Then he aimed a stroke down at Medusa\u2019s throat and Athena guided his hand. With a single sweep of his sword he cut through her neck and, his eyes still fixed on the shield with never a glance at her, he swooped low enough to seize the head. He dropped it into the wallet which closed around it. He had nothing to fear from it now. But the two other Gorgons had awakened and, horrified at the sight of their sister slain, tried to pursue the slayer. Perseus was safe; he had on the cap of darkness and they could not find him. "),C(),T(104,"p",18),P(105," So over the sea rich-haired Dana\u2019s son,"),J(106,"br"),P(107," Perseus, on his winged sandals sped,"),J(108,"br"),P(109," Flying swift as thought."),J(110,"br"),P(111," In a wallet of silver,"),J(112,"br"),P(113," A wonder to behold,"),J(114,"br"),P(115," He bore the head of the monster,"),J(116,"br"),P(117," While Hermes, the son of Maia,"),J(118,"br"),P(119," The messenger of Zeus,"),J(120,"br"),P(121," Kept ever at his side."),J(122,"br"),C(),T(123,"p",17),P(124," On his way back he came to Ethiopia and alighted there. By this time Hermes had left him. Perseus found, as Hercules was later to find, that a lovely maiden had been given up to be devoured by a horrible sea serpent. Her name was Andromeda and she was the daughter of a silly vain woman, "),C(),T(125,"p",18),P(126," That starred Ethiop queen who strove"),J(127,"br"),P(128," To set her beauty\u2019s praise above"),J(129,"br"),P(130," The sea-nymphs, and their power offended."),J(131,"br"),C(),T(132,"p",17),P(133," She had boasted that she was more beautiful than the daughters of Nereus, the Sea-god. An absolutely certain way in those days to draw down on one a wretched fate was to claim superiority in anything over any deity; nevertheless people were perpetually doing so. In this case the punishment for the arrogance the gods detested fell not on Queen Cassiopeia, Andromeda\u2019s mother, but on her daughter. The Ethiopians were being devoured in numbers by the serpent; and, learning from the oracle that they could be freed from the pest only if Andromeda were offered up to it, they forced Cepheus, her father, to consent. When Perseus arrived the maiden was on a rocky ledge by the sea, chained there to wait for the coming of the monster. Perseus saw her and on the instant loved her. He waited beside her until the great snake came for its prey; then he cut its head off just as he had the Gorgon\u2019s. The headless body dropped back into the water; Perseus took Andromeda to her parents and asked for her hand, which they gladly gave him. "),C(),T(134,"p",17),P(135," With her he sailed back to the island and his mother, but in the house where he had lived so long he found no one. The fisherman Dictys\u2019 wife was long since dead, and the two others, Dana and the man who had been like a father to Perseus, had had to fly and hide themselves from Polydectes, who was furious at Dana\u2019s refusal to marry him. They had taken refuge in a temple, Perseus was told. He learned also that the King was holding a banquet in the palace and all the men who favored him were gathered there. Perseus instantly saw his opportunity. He went straight to the palace and entered the hall. As he stood at the entrance, Athena\u2019s shining buckler on his breast, the silver wallet at his side, he drew the eyes of every man there. Then before any could look away he held up the Gorgon\u2019s head; and at the sight one and all, the cruel King and his servile courtiers, were turned into stone. There they sat, a row of statues, each, as it were, frozen stiff in the attitude he had struck when he first saw Perseus. When the islanders knew themselves freed from the tyrant it was easy for Perseus to find Dana and Dictys. He made Dictys king of the island, but he and his mother decided that they would go back with Andromeda to Greece and try to be reconciled to Acrisius, to see if the many years that had passed since he had put them in the chest had not softened him so that he would be glad to receive his daughter and grandson. When they reached Argos, however, they found that Acrisius had been driven away from the city, and where he was no one could say. It happened that soon after their arrival Perseus heard that the King of Larissa, in the North, was holding a great athletic contest, and he journeyed there to take part. In the discus-throwing when his turn came and he hurled the heavy missile, it swerved and fell among the spectators. Acrisius was there on a visit to the King, and the discus struck him. The blow was fatal and he died at once. "),C(),T(136,"p",17),P(137," So Apollo\u2019s oracle was again proved true. If Perseus felt any grief, at least he knew that his grandfather had done his best to kill him and his mother. With his death their troubles came to an end. Perseus and Andromeda lived happily ever after. Their son, Electryon, was the grandfather of Hercules. "),C(),T(138,"p",19),P(139," Medusa\u2019s head was given to Athena, who bore it always upon the aegis, Zeus\u2019s shield, which she carried for him. "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})()},{path:"theseus",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-theseus"]],decls:157,vars:0,consts:[["id","heropage",2,"background-size","contain"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px","padding-left","0px"],["href","/sherylMythology",2,"padding-left","0px"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","char-div",1,"col-md-10","offset-md-1"],["id","char-header"],["id","char-para"],["id","char-poet"],["id","char-para-bottom"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div",14),T(30,"div",15),T(31,"h1",16),P(32,"THESEUS"),C(),T(33,"p",17),P(34," The great Athenian hero was Theseus. He had so many adventures and took part in so many great enterprises that there grew up a saying in Athens, \u201cNothing without Theseus.\u201d "),C(),T(35,"p",17),P(36," He was the son of the Athenian King, Aegeus. He spent his youth, however, in his mother\u2019s home, a city in southern Greece. Aegeus went back to Athens before the child was born, but first he placed in a hollow a sword and a pair of shoes and covered them with a great stone. He did this with the knowledge of his wife and told her that whenever the boy\u2014if it was a boy\u2014grew strong enough to roll away the stone and get the things beneath it, she could send him to Athens to claim him as his father. The child was a boy and he grew up strong far beyond others, so that when his mother finally took him to the stone he lifted it with no trouble at all. She told him then that the time had come for him to seek his father, and a ship was placed at his disposal by his grandfather. But Theseus refused to go by water, because the voyage was safe and easy. His idea was to become a great hero as quickly as possible, and easy safety was certainly not the way to do that. Hercules, who was the most magnificent of all the heroes of Greece, was always in his mind, and the determination to be just as magnificent himself. This was quite natural since the two were cousins. "),C(),T(37,"p",17),P(38," He steadfastly refused, therefore, the ship his mother and grandfather urged on him, telling them that to sail on it would be a contemptible flight from danger, and he set forth to go to Athens by land. The journey was long and very hazardous because of the bandits that beset the road. He killed them all, however; he left not one alive to trouble future travelers. His idea of dealing justice was simple, but effective: what each had done to others, Theseus did to him. Sciron, for instance, who had made those he captured kneel to wash his feet and then kicked them down into the sea, Theseus hurled over a precipice. Sinis, who killed people by fastening them to two pine trees bent down to the ground and letting the trees go, died in that way himself. Procrustes was placed upon the iron bed which he used for his victims, tying them to it and then making them the right length for it by stretching those who were too short and cutting off as much as was necessary from those who were too long. The story does not say which of the two methods was used in his case, but there was not much to choose between them and in one way or the other Procrustes\u2019 career ended. "),C(),T(39,"p",17),P(40," It can be imagined how Greece rang with the praises of the young man who had cleared the land of these banes to travelers. When he reached Athens he was an acknowledged hero and he was invited to a banquet by the King, who of course was unaware that Theseus was his son. In fact he was afraid of the young man\u2019s great popularity, thinking that he might win the people over to make him king, and he invited him with the idea of poisoning him. The plan was not his, but Medea\u2019s, the heroine of the Quest of the Golden Fleece who knew through her sorcery who Theseus was. She had fled to Athens when she left Corinth in her winged car, and she had acquired great influence over Aegeus, which she did not want disturbed by the appearance of a son. But as she handed him the poisoned cup Theseus, wishing to make himself known at once to his father, drew his sword. The King instantly recognized it and dashed the cup to the ground. Medea escaped as she always did and got safely away to Asia. "),C(),T(41,"p",17),P(42," Aegeus then proclaimed to the country that Theseus was his son and heir. The new heir apparent soon had an opportunity to endear himself to the Athenians. "),C(),T(43,"p",17),P(44," Years before his arrival in Athens, a terrible misfortune had happened to the city. Minos, the powerful ruler of Crete, had lost his only son, Androgeus, while the young man was visiting the Athenian King. King Aegeus had done what no host should do, he had sent his guest on an expedition full of peril\u2014to kill a dangerous bull. Instead, the bull had killed the youth. Minos invaded the country, captured Athens, and declared that he would raze it to the ground unless every nine years the people sent him a tribute of seven maidens and seven youths. A horrible fate awaited these young creatures. When they reached Crete they were given to the Minotaur to devour. "),C(),T(45,"p",17),P(46," The Minotaur was a monster, half bull, half human, the offspring of Minos\u2019 wife Pasipha and a wonderfully beautiful bull. Poseidon had given this bull to Minos in order that he should sacrifice it to him, but Minos could not bear to slay it and had kept it for himself. To punish him, Poseidon had made Pasipha fall madly in love with it. "),C(),T(47,"p",17),P(48," When the Minotaur was born Minos did not kill him. He had Daedalus, a great architect and inventor, construct a place of confinement for him from which escape was impossible. Daedalus built the Labyrinth, famous throughout the world. Once inside, one would go endlessly along its twisting paths without ever finding the exit. To this place the young Athenians were each time taken and left to the Minotaur. There was no possible way to escape. In whatever direction they ran they might be running straight to the monster; if they stood still he might at any moment emerge from the maze. Such was the doom which awaited fourteen youths and maidens a few days after Theseus reached Athens. The time had come for the next installment of the tribute. "),C(),T(49,"p",17),P(50," At once Theseus came forward and offered to be one of the victims. All loved him for his goodness and admired him for his nobility, but they had no idea that he intended to try to kill the Minotaur. He told his father, however, and promised him that if he succeeded, he would have the black sail which the ship with its cargo of misery always carried changed to a white one, so that Aegeus could know long before it came to land that his son was safe. "),C(),T(51,"p",17),P(52," When the young victims arrived in Crete they were paraded before the inhabitants on their way to the Labyrinth. Minos\u2019 daughter Ariadne was among the spectators and she fell in love with Theseus at first sight as he marched past her. She sent for Daedalus and told him he must show her a way to get out of the Labyrinth, and she sent for Theseus and told him she would bring about his escape if he would promise to take her back to Athens and marry her. As may be imagined, he made no difficulty about that, and she gave him the clue she had got from Daedalus, a ball of thread which he was to fasten at one end to the inside of the door and unwind as he went on. This he did and, certain that he could retrace his steps whenever he chose, he walked boldly into the maze looking for the Minotaur. He came upon him asleep and fell upon him, pinning him to the ground; and with his fists\u2014he had no other weapon\u2014he battered the monster to death. "),C(),T(53,"p",18),P(54," As an oak tree falls on the hillside"),J(55,"br"),P(56," Crushing all that lies beneath,"),J(57,"br"),P(58," So Theseus. He presses out the life,"),J(59,"br"),P(60," The brute\u2019s savage life, and now it lies dead."),J(61,"br"),P(62," Only the head sways slowly, but the horns are useless now."),J(63,"br"),C(),T(64,"p",17),P(65," When Theseus lifted himself up from that terrific struggle, the ball of thread lay where he had dropped it. With it in his hands, the way out was clear. The others followed and taking Ariadne with them they fled to the ship and over the sea toward Athens. "),C(),T(66,"p",17),P(67," On the way there they put in at the island of Naxos and what happened then is differently reported. One story says that Theseus deserted Ariadne. She was asleep and he sailed away without her, but Dionysus found her and comforted her. The other story is much more favorable to Theseus. She was extremely seasick, and he set her ashore to recover while he returned to the ship to do some necessary work. A violent wind carried him out to sea and kept him there a long time. On his return he found that Ariadne had died, and he was deeply afflicted. "),C(),T(68,"p",17),P(69," So Theseus became King of Athens, a most wise and disinterested king. He declared to the people that he did not wish to rule over them; he wanted a people\u2019s government where all would be equal. He resigned his royal power and organized a commonwealth, building a council hall where the citizens should gather and vote. The only office he kept for himself was that of Commander in Chief. Thus Athens became, of all earth\u2019s cities, the happiest and most prosperous, the only true home of liberty, the one place in the world where the people governed themselves. It was for this reason that in the great War of the Seven against Thebes, when the victorious Thebans refused burial to those of the enemy who had died, the vanquished turned to Theseus and Athens for help, believing that free men under such a leader would never consent to having the helpless dead wronged. They did not turn in vain. Theseus led his army against Thebes, conquered her, and forced her to allow them to be buried. But when he was victor he did not return evil to the Thebans for the evil they had done. He showed himself the perfect knight. He refused to let his army enter and loot the city. He had come not to harm Thebes, but to bury the Argive dead, and the duty done he led his soldiers back to Athens. "),C(),T(70,"p",17),P(71," In many other stories he shows the same qualities. He received the aged Oedipus whom everyone else had cast out. He was with him when he died, sustaining and comforting him. He protected his two helpless daughters and sent them safely home after their father\u2019s death. When Hercules in his madness killed his wife and children and upon his return to sanity determined to kill himself, Theseus alone stood by him. Hercules\u2019 other friends fled, fearing to be polluted by the presence of one who had done so horrible a deed, but Theseus gave him his hand, roused his courage, told him to die would be a coward\u2019s act, and took him to Athens. "),C(),T(72,"p",17),P(73," All the cares of state, however, and all the deeds of knight-errantry to defend the wronged and helpless, could not restrain Theseus\u2019 love of danger for the sake of danger. He went to the country of the Amazons, the women warriors, some say with Hercules, some say alone, and brought away one of them, whose name is given sometimes as Antiope, sometimes as Hippolyta. It is certain that the son she bore Theseus was named Hippolytus, and also that after his birth the Amazons came to rescue her and invaded Attica, the country around Athens, even making their way into the city. They were finally defeated and no other enemy entered Attica as long as Theseus lived. "),C(),T(74,"p",17),P(75," But he had many other adventures. He was one of the men who sailed on the Argo to find the Golden Fleece. He took part in the great Calydonian Hunt, when the King of Calydon called upon the noblest in Greece to help him kill the terrible boar which was laying waste his country. During the hunt Theseus saved the life of his rash friend Pirithou\u0308s, as he did, indeed, a number of times. Pirithou\u0308s was quite as adventurous as Theseus, but by no means as successful, so that he was perpetually in trouble. Theseus was devoted to him and always helped him out. The friendship between them came about through an especially rash act on Pirithou\u0308s\u2019 part. It occurred to him that he would like to see for himself if Theseus was as great a hero as he was said to be, and he forthwith went into Attica and stole some of Theseus\u2019 cattle. When he heard that Theseus was pursuing him, instead of hurrying away he turned around and went to meet him, with the intention, of course, of deciding then and there which was the better man. But as the two faced each other Pirithou\u0308s, impulsive as always, suddenly forgot everything in his admiration of the other. He held out his hand to him and cried, \u201cI will submit to any penalty you impose. You be the judge.\u201d Theseus, delighted at this warm-hearted action, answered, \u201cAll I want is for you to be my friend and brother-in-arms.\u201d And they took a solemn oath of friendship. "),C(),T(76,"p",17),P(77," When Pirithou\u0308s, who was King of the Lapithae, married, Theseus was, of course, one of the guests, and was exceedingly useful there. The marriage feast was perhaps the most unfortunate that ever took place. The Centaurs, creatures who each had the body of a horse and the chest and face of a man, were related to the bride and came to the wedding. They proceeded to get drunk and to seize the women. Theseus leaped to the defense of the bride and struck down the Centaur who was trying to carry her off. A terrible battle followed, but the Lapithae conquered and finally drove the whole race of Centaurs out of the country, Theseus helping them to the end. "),C(),T(78,"p",17),P(79," But in the last adventure the two undertook he could not save his friend. Quite characteristically, Pirithou\u0308s, after the bride of the disastrous wedding feast was dead, decided that for his second wife he would try to get the most carefully guarded lady in all the universe, none other than Persephone herself. Theseus agreed, of course, to help him, but, stimulated probably by the idea of this magnificently dangerous undertaking, declared that first he would himself carry off Helen, the future heroine of Troy, then a child, and when she was grown marry her. This, though less hazardous than the rape of Persephone, was perilous enough to satisfy the most ambitious. Helen\u2019s brothers were Castor and Pollux, more than a match for any mortal hero. Theseus succeeded in kidnaping the little girl, just how we are not told, but the two brothers marched against the town she had been taken to, and got her back. Luckily for him they did not find Theseus there. He was on his way to the underworld with Pirithou\u0308s. "),C(),T(80,"p",17),P(81," The details of their journey and arrival there are not known beyond the fact that the Lord of Hades was perfectly aware of their intention and amused himself by frustrating it in a novel way. He did not kill them, of course, as they were already in the realm of death, but he invited them as a friendly gesture to sit in his presence. They did so on the seat he pointed them to\u2014and there they stayed. They could not arise from it. It was called the Chair of Forgetfulness. Whoever sat on it forgot everything. His mind became a blank and he did not move. There Pirithou\u0308s sits forever, but Theseus was freed by his cousin. When Hercules came to the underworld he lifted Theseus from the seat and brought him back to earth. He tried to do the same for Pirithou\u0308s, but could not. The King of the Dead knew that it was he who had planned to carry off Persephone, and he held him fast. "),C(),T(82,"p",17),P(83," In the later years of his life Theseus married Ariadne\u2019s sister Phaedra, and thereby drew down terrible misfortunes on her and on himself and on his son Hippolytus, the son the Amazon had borne him. He had sent Hippolytus away while still a young child to be brought up in the southern city where Theseus had spent his own youth. The boy grew to splendid manhood, a great athlete and hunter, despising those who lived in luxurious ease and still more those who were soft enough and silly enough to fall in love. He scorned Aphrodite, he worshiped only Artemis, the huntress chaste and fair. So matters stood when Theseus came to his old home bringing Phaedra with him. A strong affection grew up at once between father and son. They delighted in each other\u2019s company. As for Phaedra, her stepson Hippolytus took no notice of her; he never noticed women. But it was far otherwise with her. She fell in love with him, madly and miserably, overwhelmed with shame at such a love, but utterly unable to conquer it. Aphrodite was back of this wretched and ominous state of affairs. She was angry at Hippolytus and determined to punish him to the utmost. "),C(),T(84,"p",17),P(85," Phaedra, in her anguish, desperate, seeing no help for her anywhere, resolved to die and let no one know why. Theseus at the time was away from home, but her old nurse\u2014completely devoted to her and unable to think anything bad that Phaedra wanted\u2014discovered all, her secret passion, her despair, and her determination to kill herself. With only one thought in her mind, to save her mistress, she went straight to Hippolytus. "),C(),T(86,"p",17),P(87," \u201cShe is dying for love of you,\u201d she said. \u201cGive her life. Give her love for love.\u201d"),J(88,"br"),C(),T(89,"p",17),P(90," Hippolytus drew away from her with loathing. The love of any woman would have disgusted him, but this guilty love sickened and horrified him. He rushed out into the courtyard, she following him and beseeching him. Phaedra was sitting there, but he never saw her. He turned in furious indignation on the old woman. "),C(),T(91,"p",17),P(92," \u201cYou pitiable wretch,\u201d he said, \u201ctrying to make me betray my father. I feel polluted by merely hearing such words. Oh, women, vile women\u2014every one of them vile. I will never enter this house again except when my father is in it.\u201d "),J(93,"br"),C(),T(94,"p",17),P(95," He flung away and the nurse, turning, faced Phaedra. She had risen and there was a look on her face which frightened the old woman. "),C(),T(96,"p",17),P(97," \u201cI\u2019ll help you still,\u201d she stammered. "),J(98,"br"),P(99," \u201cHush,\u201d Phaedra said. \u201cI will settle my own affairs.\u201d With that she entered the house and the nurse trembling crept after her."),J(100,"br"),C(),T(101,"p",17),P(102," A few minutes later the voices of men were heard greeting the master of the house on his return and Theseus entered the courtyard. Weeping women met him there. They told him that Phaedra was dead. She had killed herself. They had just found her, quite dead, but in her hand a letter to her husband. "),C(),T(103,"p",17),P(104," \u201cO dearest and best,\u201d Theseus said. \u201cAre your last desires written here? This is your seal\u2014yours who will never more smile up at me.\u201d "),C(),T(105,"p",17),P(106," He opened and read it and read it again. Then he turned to the servants filling the courtyard. "),C(),T(107,"p",17),P(108," \u201cThis letter cries aloud,\u201d he said."),J(109,"br"),P(110," \u201cThe words speak\u2014they have a tongue. Know all of you that my son laid violent hands upon my wife. O Poseidon, God, hear me while I curse him, and fulfill my curse.\u201d "),J(111,"br"),C(),T(112,"p",17),P(113," The silence that followed was broken by hurrying footsteps. Hippolytus entered. "),C(),T(114,"p",17),P(115," \u201cWhat happened?\u201d he cried. \u201cHow did she die? Father, tell me yourself. Do not hide your grief from me.\u201d"),J(116,"br"),P(117," \u201cThere ought to be a true yardstick to measure affection by,\u201d said Theseus, \u201csome means to know who is to be trusted and who is not. You here, look at my son\u2014proved base by the hand of her who is dead. He offered her violence. Her letter outweighs any words he could speak. Go. You are an exile from this land. Go to your ruin and at once.\u201d"),J(118,"br"),P(119," \u201cFather,\u201d Hippolytus answered, \u201cI have no skill in speaking and there is no witness to my innocence. The only one is dead. All I can do is to swear by Zeus above that I never touched your wife, never desired to, never gave her a thought. May I die in wretchedness if I am guilty.\u201d"),J(120,"br"),P(121," \u201cDead she proves her truth,\u201d Theseus said. \u201cGo. You are banished from the land.\u201d"),J(122,"br"),C(),T(123,"p",17),P(124," Hippolytus went, but not into exile; death was waiting close at hand for him, too. As he drove along the sea-road away from the home he was leaving forever, his father\u2019s curse was fulfilled. A monster came up from the water and his horses, terrified beyond even his firm control, ran away. The chariot was shattered and he was mortally hurt. "),C(),T(125,"p",17),P(126," Theseus was not spared. Artemis appeared to him and told him the truth. "),C(),T(127,"p",18),P(128," I do not come to bring you help, but only pain,"),J(129,"br"),P(130," To show you that your son was honorable."),J(131,"br"),P(132," Your wife was guilty, mad with love for him,"),J(133,"br"),P(134," And yet she fought her passion and she died."),J(135,"br"),P(136," But what she wrote was false."),J(137,"br"),C(),T(138,"p",17),P(139," As Theseus listened, overwhelmed by this sum of terrible events, Hippolytus still breathing was carried in. "),C(),T(140,"p",17),P(141," He gasped out, \u201cI was innocent. Artemis, you? My goddess, your huntsman is dying.\u201d"),J(142,"br"),P(143," \u201cAnd no other can take your place, dearest of men to me,\u201d she told him. Hippolytus turned his eyes from her radiance to Theseus brokenhearted."),J(144,"br"),P(145," \u201cFather, dear Father,\u201d he said. \u201cIt was not your fault.\u201d"),J(146,"br"),P(147," \u201cIf only I could die for you,\u201d Theseus cried."),J(148,"br"),P(149," The calm sweet voice of the goddess broke in on their anguish. \u201cTake your son in your arms, Theseus,\u201d she said. \u201cIt was not you that killed him. It was Aphrodite. Know this, that he will never be forgotten. In song and story men will remember him.\u201d"),J(150,"br"),C(),T(151,"p",17),P(152," She vanished from sight, but Hippolytus, too, was gone. He had started on the road that leads down to the realm of death. "),C(),T(153,"p",17),P(154," Theseus\u2019 death, also, was wretched. He was at the court of a friend, King Lycomedes, where a few years later Achilles was to hide disguised as a girl. Some say that Theseus had gone there because Athens had banished him. At all events, the King, his friend and his host, killed him, we are not told why. "),C(),T(155,"p",19),P(156," Even if the Athenians did banish him, very soon after his death they honored him as no other mortal. They built a great tomb for him and decreed that it should be forever a sanctuary for slaves and for all poor and helpless people, in memory of one who through his life had been the protector of the defenseless "),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})()}]},{path:"flowerList",children:[{path:"",component:Nj},{path:"adonis",component:Sj},{path:"hyacinth",component:kj},{path:"narcissus",component:Ej}]},{path:"godTree",component:(()=>{class i{constructor(){this.name="Angular",this.familyData=[{key:1,name:"Uranus (Heaven)",title:"Caelus"},{key:2,name:"Gaea (Earth)",title:"Terra"},{key:3,name:"Cronus",title:"Saturn",parent:1},{key:4,name:"Rhea",title:"Ops",parent:1},{key:5,name:"Coeus",title:"Polus",parent:1},{key:6,name:"Phoebe",title:" ",parent:1},{key:7,name:"Ocean",title:" ",parent:1},{key:8,name:"Tethya",title:" ",parent:1},{key:9,name:"Hestia",title:"Vesta",parent:3},{key:10,name:"Hades",title:"Pluto",parent:3},{key:11,name:"Poseidon",title:"Neptune",parent:3},{key:12,name:"Zeus",title:"Jupiter",parent:3},{key:13,name:"Hera",title:"Juno",parent:3},{key:14,name:"Demeter",title:"Ceres",parent:3},{key:15,name:"Zeus",title:"Jupiter",parent:3},{key:16,name:"Zeus",title:"Jupiter",parent:5},{key:17,name:"Leto",title:" ",parent:5},{key:18,name:"Iapetus",title:" ",parent:7},{key:19,name:"Athena",title:"Minerva",parent:12},{key:20,name:"Ares",title:"Mars",parent:13},{key:21,name:"Hebe",title:" ",parent:13},{key:22,name:"Hephaestus",title:"Vulcan",parent:13},{key:23,name:"Persephone",title:"Proserpine",parent:14},{key:24,name:"Apollo",title:"Apollo",parent:5},{key:25,name:"Artmeis",title:"Diana",parent:5},{key:26,name:"Prometheus",title:"",parent:18},{key:27,name:"Atlas",title:" ",parent:18},{key:28,name:"Epimethues",title:" ",parent:18},{key:29,name:"Zeus",title:"Jupiter",parent:27},{key:30,name:"Maia",title:" ",parent:27},{key:31,name:"Zeus",title:"Jupiter",parent:28},{key:32,name:"Dione",title:" ",parent:28},{key:33,name:"Hermes",title:"Mercury",parent:27},{key:34,name:"Aphrodite",title:" ",parent:28},{key:35,name:"",title:" ",parent:21}],this.diagramDivClassName="myDiagramDiv",this.diagramModelData={prop:"value",color:"red"}}ngOnInit(){}ngAfterViewInit(){}initDiagram(){const r=we.bx.make,l=r(we.S0,{maxSelectionCount:1,validCycle:we.S0.CycleDestinationTree,"clickCreatingTool.archetypeNodeData":{name:"(new person)",title:"",comments:""},"clickCreatingTool.insertPart":function(x){return we.fp.prototype.insertPart.call(this,x)},layout:r(we.FF,{treeStyle:we.FF.StyleLastParents,arrangement:we.FF.ArrangementHorizontal,angle:90,layerSpacing:35,alternateAngle:90,alternateLayerSpacing:35,alternateAlignment:we.FF.AlignmentBus,alternateNodeSpacing:20}),"undoManager.isEnabled":!0});l.nodeTemplate=r(we.NB,"Auto",new we.KX("text","name"),new we.KX("layerName","isSelected",x=>x?"Foreground":"").ofObject(),r(we.bn,"Rectangle",{name:"SHAPE",fill:"#333333",stroke:"white",strokeWidth:3.5,portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer"}),r(we.s_,"Horizontal",r(we.t,{name:"Picture",desiredSize:new we.$u(70,70),margin:1.5},new we.KX("source","key",function m(x){return x<1||x>35?"../../assets/god_icon/nopic.jpg":"/sherylMythology/assets/god_icon/"+x+".jpg"})),r(we.s_,"Table",{minSize:new we.$u(130,NaN),maxSize:new we.$u(160,NaN),margin:new we.Zt(6,10,0,6),defaultAlignment:we.z6.Left},r(we.jE,{column:2,width:4}),r(we.al,{font:"10pt  Segoe UI,sans-serif",stroke:"white"},{row:0,column:0,columnSpan:5,font:"15pt Segoe UI,sans-serif",editable:!0,isMultiline:!1,minSize:new we.$u(10,16)},new we.KX("text","name").makeTwoWay()),r(we.al,{font:"10pt  Segoe UI,sans-serif",stroke:"white"},{row:1,column:0,columnSpan:4,editable:!0,isMultiline:!1,minSize:new we.$u(10,14)},new we.KX("text","title").makeTwoWay())))),l.linkTemplate=r(we.rU,we.rU.Orthogonal,{corner:5,relinkableFrom:!0,relinkableTo:!0},r(we.bn,{strokeWidth:1.5,stroke:"black"})),l.model=new we.rv(this.familyData);var w=1;return l.model.makeUniqueKeyFunction=(x,M)=>{for(var N=M.key||w;x.findNodeDataForKey(N);)N++;return M.key=w=N,N},l.initialAutoScale=we.S0.Uniform,l.add(r(we.Lz,{layerName:"Background",position:new we.E9(0,0),selectable:!1,pickable:!1},r(we.t,"/sherylMythology/assets/god_tree_background.jpg"))),this.dia=l,l}buttonCallback(r,l){console.log("e2: ",r.diagram.model.modelData.color),console.log("this: ",this.name)}onModelChange(r){console.log("Event: ",r)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["god-tree"]],viewQuery:function(r,l){if(1&r&&(pf(w2,5),pf(eH,5)),2&r){let h;Ln(h=jn())&&(l.diagramComponent=h.first),Ln(h=jn())&&(l.myDiag=h.first)}},decls:31,vars:4,consts:[["id","godtreepage"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"padding-bottom","6%","margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px"],["href","/sherylMythology"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[3,"initDiagram","modelData","nodeDataArray","divClassName","modelChange"],["myDiag",""]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"gojs-diagram",14,15),me("modelChange",function(d){return l.onModelChange(d)}),C(),C()),2&r&&(function $e(i){Dv(Gt(),wt(),Zi()+i,ua())}(29),je("initDiagram",l.initDiagram)("modelData",l.diagramModelData)("nodeDataArray",l.familyData)("divClassName",l.diagramDivClassName))},directives:[Hn,w2],styles:['@import"http://fonts.googleapis.com/css?family=Roboto:400,400italic,500,500italic,700,700italic,900,900italic,300italic,300,100italic,100";body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}.myDiagramDiv[_ngcontent-%COMP%]{background:whitesmoke;width:700px;height:300px;border:1px solid black}.myPaletteDiv[_ngcontent-%COMP%]{background:lightcyan;border:1px solid navy;width:125px;height:300px}.myOverviewDiv[_ngcontent-%COMP%]{width:200px;height:150px;background:whitesmoke;border:1px solid black}.left[_ngcontent-%COMP%]{float:left;padding:5px;margin:5px}.box[_ngcontent-%COMP%]{border:solid 1px black;background:whitesmoke;box-shadow:0 4px 8px #0003,0 6px 20px #00000030}.clear[_ngcontent-%COMP%]{clear:both}']}),i})()},{path:"reference",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-reference"]],decls:29,vars:0,consts:[["id","referencepage"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"padding-bottom","6%","margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px"],["href","/sherylMythology"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"]],template:function(r,l){1&r&&(T(0,"div",0),T(1,"div"),T(2,"h1",1),P(3,"Mythsionary"),C(),T(4,"p",2),P(5," by Sheryl"),C(),C(),T(6,"div",3),T(7,"div",4),J(8,"div",5),T(9,"div",6),T(10,"ul",7),T(11,"li"),T(12,"a",8),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",9),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",10),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",11),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",12),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",13),P(28,"References"),C(),C(),C(),C(),C(),C(),C())},directives:[Hn],styles:[""]}),i})()}]}];let ND=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[s2.forRoot(nH)],s2]}),i})();function iH(i,o){1&i&&(T(0,"div",1),T(1,"div"),T(2,"h1",2),P(3,"Mythsionary"),C(),T(4,"p",3),P(5," by Sheryl"),C(),C(),T(6,"div",4),T(7,"div",5),J(8,"div",6),T(9,"div",7),T(10,"ul",8),T(11,"li"),T(12,"a",9),P(13,"Home"),C(),C(),T(14,"li"),T(15,"a",10),P(16,"The Gods Tree"),C(),C(),T(17,"li"),T(18,"a",11),P(19,"The Olympians"),C(),C(),T(20,"li"),T(21,"a",12),P(22,"The Heroes"),C(),C(),T(23,"li"),T(24,"a",13),P(25,"The Flowers"),C(),C(),T(26,"li"),T(27,"a",14),P(28,"References"),C(),C(),C(),C(),C(),C(),T(29,"div"),T(30,"div",15),T(31,"div",16),J(32,"img",17),T(33,"h3",18),P(34,"The Twelve Great Olympians"),C(),C(),T(35,"div",16),J(36,"img",19),T(37,"h3",18),P(38,"The Four Great Heroes Before The Trojan War"),C(),C(),T(39,"div",16),J(40,"img",20),T(41,"h3",18),P(42,"The Three Flower Myths"),C(),C(),C(),C(),C())}let rH=(()=>{class i{constructor(r){this.router=r,this.buttonClicked=!1}ngOnInit(){}hasRoute(r){return"/"==this.router.url}}return i.\u0275fac=function(r){return new(r||i)(at(ia))},i.\u0275cmp=Ct({type:i,selectors:[["app-root"]],decls:2,vars:1,consts:[["id","homepage","style","padding-bottom: 11%;",4,"ngIf"],["id","homepage",2,"padding-bottom","11%"],[2,"text-align","center","margin-bottom","0px","font-size","500%","font-family","Margadeth"],[2,"font-style","italic","margin-top","0px","text-align","center","padding-left","20%","font-size","175%","font-family","Margadeth","color","rgb(97, 79, 56)"],[2,"padding-bottom","6%","margin-right","0px","font-family","Glitten"],[1,"row",2,"margin-right","0px"],[1,"col-md-1",2,"background-color","#333"],[1,"col-md-11",2,"background-color","#333","padding-left","0px"],[2,"margin-bottom","0px"],["href","/sherylMythology"],["routerLink","/godTree"],["routerLink","/godList"],["routerLink","/heroList"],["routerLink","/flowerList"],["routerLink","/reference"],[1,"row"],["id","centerimg",1,"col-md-4"],["src","/sherylMythology/assets/gods.jpg","routerLink","/godList"],[2,"text-align","center","color","#333","font-family","Glitten"],["src","/sherylMythology/assets/heroes.jpg","routerLink","/heroList"],["src","/sherylMythology/assets/flowers.jpg","routerLink","/flowerList"]],template:function(r,l){1&r&&(function Le(i,o,r,l,h,d,m,w){const x=wt(),M=Gt(),N=i+20,I=M.firstCreatePass?function lx(i,o,r,l,h,d,m,w,x){const M=o.consts,N=Uh(o,i,4,m||null,ho(M,w));Ov(o,r,N,ho(M,x)),id(o,N);const I=N.tViews=$h(2,N,l,h,d,o.directiveRegistry,o.pipeRegistry,null,o.schemas,M);return null!==o.queries&&(o.queries.template(o,N),I.queries=o.queries.embeddedTView(N)),N}(N,M,x,o,r,l,h,d,m):M.data[N];Is(I,!1);const H=x[11].createComment("");Pd(M,x,H,I),cr(H,x),wo(x,x[N]=Rv(H,x,H,I)),Ff(I)&&Bp(M,x,I),null!=m&&Ld(x,I,w)}(0,iH,43,0,"div",0),J(1,"router-outlet")),2&r&&je("ngIf",l.hasRoute("/"))},directives:[o0,Hn,kg,NC],styles:[".button[_ngcontent-%COMP%]{box-shadow:inset 0 1px #fff;background:#ffffff linear-gradient(to bottom,#ffffff 5%,#f6f6f6 100%);border-radius:6px;border:1px solid #dcdcdc;display:inline-block;cursor:pointer;color:#666;font-family:Arial,sans-serif;font-size:15px;font-weight:700;padding:6px 24px;text-decoration:none;text-shadow:0 1px 0 #ffffff;outline:0}.activebutton[_ngcontent-%COMP%]{box-shadow:inset 0 1px #dcecfb;background:#bddbfa linear-gradient(to bottom,#bddbfa 5%,#80b5ea 100%);border-radius:6px;border:1px solid #84bbf3;display:inline-block;cursor:pointer;color:#fff;font-family:Arial,sans-serif;font-size:15px;font-weight:700;padding:6px 24px;text-decoration:none;text-shadow:0 1px 0 #528ecc;outline:0}"]}),i})(),aE=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({}),i})(),rV=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[aE]]}),i})(),jD=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[rV]}),i})(),oV=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o,tH,jD,ND]]}),i})(),sV=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o,jD,ND]]}),i})(),aV=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o,jD,ND]]}),i})();const lV=["addListener","removeListener"],uV=["addEventListener","removeEventListener"],hV=["on","off"];function Ds(i,o,r,l){if(mt(r)&&(l=r,r=void 0),l)return Ds(i,o,r).pipe(fC(l));const[h,d]=function fV(i){return mt(i.addEventListener)&&mt(i.removeEventListener)}(i)?uV.map(m=>w=>i[m](o,w,r)):function cV(i){return mt(i.addListener)&&mt(i.removeListener)}(i)?lV.map(CE(i,o)):function dV(i){return mt(i.on)&&mt(i.off)}(i)?hV.map(CE(i,o)):[];if(!h&&Tw(i))return fi(m=>Ds(m,o,r))(Vr(i));if(!h)throw new TypeError("Invalid event target");return new xn(m=>{const w=(...x)=>m.next(1<x.length?x:x[0]);return h(w),()=>d(w)})}function CE(i,o){return r=>l=>i[r](o,l)}class pV extends Cs{constructor(o,r){super()}schedule(o,r=0){return this}}const HD={setInterval(...i){const{delegate:o}=HD;return((null==o?void 0:o.setInterval)||setInterval)(...i)},clearInterval(i){const{delegate:o}=HD;return((null==o?void 0:o.clearInterval)||clearInterval)(i)},delegate:void 0},TE={now:()=>(TE.delegate||Date).now(),delegate:void 0};class q1{constructor(o,r=q1.now){this.schedulerActionCtor=o,this.now=r}schedule(o,r=0,l){return new this.schedulerActionCtor(this,o).schedule(l,r)}}q1.now=TE.now;const yV=new class mV extends q1{constructor(o,r=q1.now){super(o,r),this.actions=[],this._active=!1,this._scheduled=void 0}flush(o){const{actions:r}=this;if(this._active)return void r.push(o);let l;this._active=!0;do{if(l=o.execute(o.state,o.delay))break}while(o=r.shift());if(this._active=!1,l){for(;o=r.shift();)o.unsubscribe();throw l}}}(class gV extends pV{constructor(o,r){super(o,r),this.scheduler=o,this.work=r,this.pending=!1}schedule(o,r=0){if(this.closed)return this;this.state=o;const l=this.id,h=this.scheduler;return null!=l&&(this.id=this.recycleAsyncId(h,l,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(h,this.id,r),this}requestAsyncId(o,r,l=0){return HD.setInterval(o.flush.bind(o,this),l)}recycleAsyncId(o,r,l=0){if(null!=l&&this.delay===l&&!1===this.pending)return r;HD.clearInterval(r)}execute(o,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const l=this._execute(o,r);if(l)return l;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(o,r){let h,l=!1;try{this.work(o)}catch(d){l=!0,h=d||new Error("Scheduled action threw falsy error")}if(l)return this.unsubscribe(),h}unsubscribe(){if(!this.closed){const{id:o,scheduler:r}=this,{actions:l}=r;this.work=this.state=this.scheduler=null,this.pending=!1,D0(l,this),null!=o&&(this.id=this.recycleAsyncId(r,o,null)),this.delay=null,super.unsubscribe()}}});const{isArray:wV}=Array;function NE(i){return 1===i.length&&wV(i[0])?i[0]:i}function VD(...i){const o=Ug(i),r=NE(i);return r.length?new xn(l=>{let h=r.map(()=>[]),d=r.map(()=>!1);l.add(()=>{h=d=null});for(let m=0;!l.closed&&m<r.length;m++)Vr(r[m]).subscribe($n(l,w=>{if(h[m].push(w),h.every(x=>x.length)){const x=h.map(M=>M.shift());l.next(o?o(...x):x),h.some((M,N)=>!M.length&&d[N])&&l.complete()}},()=>{d[m]=!0,!h[m].length&&l.complete()}));return()=>{h=d=null}}):oa}function jr(i){return Hi((o,r)=>{Vr(i).subscribe($n(r,()=>r.complete(),Sf)),!r.closed&&o.subscribe(r)})}function vT(...i){const o=Ug(i);return Hi((r,l)=>{const h=i.length,d=new Array(h);let m=i.map(()=>!1),w=!1;for(let x=0;x<h;x++)Vr(i[x]).subscribe($n(l,M=>{d[x]=M,!w&&!m[x]&&(m[x]=!0,(w=m.every(su))&&(m=null))},Sf));r.subscribe($n(l,x=>{if(w){const M=[x,...d];l.next(o?o(...M):M)}}))})}new xn(Sf),Math,Math,Math;const R3=["*"],tB=["dialog"];function Ig(i){return null!=i}function v0(i){return(i||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(i){let o=this;if(!document.documentElement.contains(o))return null;do{if(o.matches(i))return o;o=o.parentElement||o.parentNode}while(null!==o&&1===o.nodeType);return null});const KE={animation:!0,transitionTimerDelayMs:5},XB=()=>{},{transitionTimerDelayMs:ZB}=KE,ow=new Map,bs=(i,o,r,l)=>{let h=l.context||{};const d=ow.get(o);if(d)switch(l.runningTransition){case"continue":return oa;case"stop":i.run(()=>d.transition$.complete()),h=Object.assign(d.context,h),ow.delete(o)}const m=r(o,l.animation,h)||XB;if(!l.animation||"none"===window.getComputedStyle(o).transitionProperty)return i.run(()=>m()),Ce(void 0).pipe(function WB(i){return o=>new xn(r=>o.subscribe({next:m=>i.run(()=>r.next(m)),error:m=>i.run(()=>r.error(m)),complete:()=>i.run(()=>r.complete())}))}(i));const w=new Mi,x=new Mi,M=w.pipe(function xV(...i){return o=>k1(o,Ce(...i))}(!0));ow.set(o,{transition$:w,complete:()=>{x.next(),x.complete()},context:h});const N=function KB(i){const{transitionDelay:o,transitionDuration:r}=window.getComputedStyle(i);return 1e3*(parseFloat(o)+parseFloat(r))}(o);return i.runOutsideAngular(()=>{const I=Ds(o,"transitionend").pipe(jr(M),Ia(({target:B})=>B===o));(function kE(...i){return 1===(i=NE(i)).length?Vr(i[0]):new xn(function _V(i){return o=>{let r=[];for(let l=0;r&&!o.closed&&l<i.length;l++)r.push(Vr(i[l]).subscribe($n(o,h=>{if(r){for(let d=0;d<r.length;d++)d!==l&&r[d].unsubscribe();r=null}o.next(h)})))}}(i))})(function mT(i=0,o,r=yV){let l=-1;return null!=o&&(Wt(o)?r=o:l=o),new xn(h=>{let d=function vV(i){return i instanceof Date&&!isNaN(i)}(i)?+i-r.now():i;d<0&&(d=0);let m=0;return r.schedule(function(){h.closed||(h.next(m++),0<=l?this.schedule(void 0,l):h.complete())},d)})}(N+ZB).pipe(jr(M)),I,x).pipe(jr(M)).subscribe(()=>{ow.delete(o),i.run(()=>{m(),w.next(),w.complete()})})}),w.asObservable()};let YD=(()=>{class i{constructor(){this.animation=KE.animation}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),tP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o]]}),i})(),eP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o]]}),i})(),iP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({}),i})(),sP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o]]}),i})(),aP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({}),i})();var Hr=(()=>{return(i=Hr||(Hr={}))[i.Tab=9]="Tab",i[i.Enter=13]="Enter",i[i.Escape=27]="Escape",i[i.Space=32]="Space",i[i.PageUp=33]="PageUp",i[i.PageDown=34]="PageDown",i[i.End=35]="End",i[i.Home=36]="Home",i[i.ArrowLeft=37]="ArrowLeft",i[i.ArrowUp=38]="ArrowUp",i[i.ArrowRight=39]="ArrowRight",i[i.ArrowDown=40]="ArrowDown",Hr;var i})();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const uP=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function hP(i){const o=Array.from(i.querySelectorAll(uP)).filter(r=>-1!==r.tabIndex);return[o[0],o[o.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let vP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o,jD]]}),i})(),DP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({}),i})();class jg{constructor(o,r,l){this.nodes=o,this.viewRef=r,this.componentRef=l}}let BG=(()=>{class i{constructor(r,l){this._el=r,this._zone=l}ngOnInit(){this._zone.onStable.asObservable().pipe(Ti(1)).subscribe(()=>{bs(this._zone,this._el.nativeElement,(r,l)=>{l&&v0(r),r.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return bs(this._zone,this._el.nativeElement,({classList:r})=>r.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return i.\u0275fac=function(r){return new(r||i)(at(_n),at(An))},i.\u0275cmp=Ct({type:i,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,l){2&r&&(Qa("modal-backdrop"+(l.backdropClass?" "+l.backdropClass:"")),qn("show",!l.animation)("fade",l.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(r,l){},encapsulation:2}),i})();class bP{close(o){}dismiss(o){}}class GG{constructor(o,r,l,h){this._windowCmptRef=o,this._contentRef=r,this._backdropCmptRef=l,this._beforeDismiss=h,this._closed=new Mi,this._dismissed=new Mi,this._hidden=new Mi,o.instance.dismissEvent.subscribe(d=>{this.dismiss(d)}),this.result=new Promise((d,m)=>{this._resolve=d,this._reject=m}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(jr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(jr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(o){this._windowCmptRef&&(this._closed.next(o),this._resolve(o),this._removeModalElements())}_dismiss(o){this._dismissed.next(o),this._reject(o),this._removeModalElements()}dismiss(o){if(this._windowCmptRef)if(this._beforeDismiss){const r=this._beforeDismiss();!function $B(i){return i&&i.then}(r)?!1!==r&&this._dismiss(o):r.then(l=>{!1!==l&&this._dismiss(o)},()=>{})}else this._dismiss(o)}_removeModalElements(){const o=this._windowCmptRef.instance.hide(),r=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Ce(void 0);o.subscribe(()=>{const{nativeElement:l}=this._windowCmptRef.location;l.parentNode.removeChild(l),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),r.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:l}=this._backdropCmptRef.location;l.parentNode.removeChild(l),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),VD(o,r).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var uw=(()=>{return(i=uw||(uw={}))[i.BACKDROP_CLICK=0]="BACKDROP_CLICK",i[i.ESC=1]="ESC",uw;var i})();let UG=(()=>{class i{constructor(r,l,h){this._document=r,this._elRef=l,this._zone=h,this._closed$=new Mi,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Ie,this.shown=new Mi,this.hidden=new Mi}dismiss(r){this.dismissEvent.emit(r)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Ti(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:r}=this._elRef,l={animation:this.animation,runningTransition:"stop"},m=VD(bs(this._zone,r,()=>r.classList.remove("show"),l),bs(this._zone,this._dialogEl.nativeElement,()=>{},l));return m.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),m}_show(){const r={animation:this.animation,runningTransition:"continue"};VD(bs(this._zone,this._elRef.nativeElement,(d,m)=>{m&&v0(d),d.classList.add("show")},r),bs(this._zone,this._dialogEl.nativeElement,()=>{},r)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:r}=this._elRef;this._zone.runOutsideAngular(()=>{Ds(r,"keydown").pipe(jr(this._closed$),Ia(h=>h.which===Hr.Escape)).subscribe(h=>{this.keyboard?requestAnimationFrame(()=>{h.defaultPrevented||this._zone.run(()=>this.dismiss(uw.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let l=!1;Ds(this._dialogEl.nativeElement,"mousedown").pipe(jr(this._closed$),_s(()=>l=!1),jc(()=>Ds(r,"mouseup").pipe(jr(this._closed$),Ti(1))),Ia(({target:h})=>r===h)).subscribe(()=>{l=!0}),Ds(r,"click").pipe(jr(this._closed$)).subscribe(({target:h})=>{r===h&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!l&&this._zone.run(()=>this.dismiss(uw.BACKDROP_CLICK))),l=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:r}=this._elRef;if(!r.contains(document.activeElement)){const l=r.querySelector("[ngbAutofocus]"),h=hP(r)[0];(l||h||r).focus()}}_restoreFocus(){const r=this._document.body,l=this._elWithFocus;let h;h=l&&l.focus&&r.contains(l)?l:r,this._zone.runOutsideAngular(()=>{setTimeout(()=>h.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&bs(this._zone,this._elRef.nativeElement,({classList:r})=>(r.add("modal-static"),()=>r.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return i.\u0275fac=function(r){return new(r||i)(at(Do),at(_n),at(An))},i.\u0275cmp=Ct({type:i,selectors:[["ngb-modal-window"]],viewQuery:function(r,l){if(1&r&&pf(tB,7),2&r){let h;Ln(h=jn())&&(l._dialogEl=h.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,l){2&r&&(vt("aria-modal",!0)("aria-labelledby",l.ariaLabelledBy)("aria-describedby",l.ariaDescribedBy),Qa("modal d-block"+(l.windowClass?" "+l.windowClass:"")),qn("fade",l.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:R3,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(r,l){1&r&&(function cg(i){const o=wt()[16][6];if(!o.projection){const l=o.projection=cd(i?i.length:1,null),h=l.slice();let d=o.child;for(;null!==d;){const m=i?xx(d,i):0;null!==m&&(h[m]?h[m].projectionNext=d:l[m]=d,h[m]=d),d=d.next}}}(),T(0,"div",0,1),T(2,"div",2),function qa(i,o=0,r){const l=wt(),h=Gt(),d=Uh(h,20+i,16,null,r||null);null===d.projection&&(d.projection=o),Xi(),64!=(64&d.flags)&&function Bm(i,o,r){Gm(o[11],0,o,r,bt(i,r,o),as(r.parent||o[6],r,o))}(h,l,d)}(3),C(),C()),2&r&&Qa("modal-dialog"+(l.size?" modal-"+l.size:"")+(l.centered?" modal-dialog-centered":"")+(l.scrollable?" modal-dialog-scrollable":"")+(l.modalDialogClass?" "+l.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),i})(),zG=(()=>{class i{constructor(r){this._document=r}hide(){const r=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),l=this._document.body,h=l.style,{overflow:d,paddingRight:m}=h;if(r>0){const w=parseFloat(window.getComputedStyle(l).paddingRight);h.paddingRight=`${w+r}px`}return h.overflow="hidden",()=>{r>0&&(h.paddingRight=m),h.overflow=d}}}return i.\u0275fac=function(r){return new(r||i)(Bt(Do))},i.\u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$G=(()=>{class i{constructor(r,l,h,d,m,w){this._applicationRef=r,this._injector=l,this._document=h,this._scrollBar=d,this._rendererFactory=m,this._ngZone=w,this._activeWindowCmptHasChanged=new Mi,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new Ie,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const x=this._windowCmpts[this._windowCmpts.length-1];((i,o,r,l=!1)=>{this._ngZone.runOutsideAngular(()=>{const h=Ds(o,"focusin").pipe(jr(r),Je(d=>d.target));Ds(o,"keydown").pipe(jr(r),Ia(d=>d.which===Hr.Tab),vT(h)).subscribe(([d,m])=>{const[w,x]=hP(o);(m===w||m===o)&&d.shiftKey&&(x.focus(),d.preventDefault()),m===x&&!d.shiftKey&&(w.focus(),d.preventDefault())}),l&&Ds(o,"click").pipe(jr(r),vT(h),Je(d=>d[1])).subscribe(d=>d.focus())})})(0,x.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(x.location.nativeElement)}})}open(r,l,h,d){const m=d.container instanceof HTMLElement?d.container:Ig(d.container)?this._document.querySelector(d.container):this._document.body,w=this._rendererFactory.createRenderer(null,null),x=this._scrollBar.hide(),M=()=>{this._modalRefs.length||(w.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!m)throw new Error(`The specified modal container "${d.container||"body"}" was not found in the DOM.`);const N=new bP,I=this._getContentRef(r,d.injector||l,h,N,d);let H=!1!==d.backdrop?this._attachBackdrop(r,m):void 0,B=this._attachWindowComponent(r,m,I),$=new GG(B,I,H,d.beforeDismiss);return this._registerModalRef($),this._registerWindowCmpt(B),$.result.then(x,x),$.result.then(M,M),N.close=X=>{$.close(X)},N.dismiss=X=>{$.dismiss(X)},this._applyWindowOptions(B.instance,d),1===this._modalRefs.length&&w.addClass(this._document.body,"modal-open"),H&&H.instance&&(this._applyBackdropOptions(H.instance,d),H.changeDetectorRef.detectChanges()),B.changeDetectorRef.detectChanges(),$}get activeInstances(){return this._activeInstances}dismissAll(r){this._modalRefs.forEach(l=>l.dismiss(r))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(r,l){let d=r.resolveComponentFactory(BG).create(this._injector);return this._applicationRef.attachView(d.hostView),l.appendChild(d.location.nativeElement),d}_attachWindowComponent(r,l,h){let m=r.resolveComponentFactory(UG).create(this._injector,h.nodes);return this._applicationRef.attachView(m.hostView),l.appendChild(m.location.nativeElement),m}_applyWindowOptions(r,l){this._windowAttributes.forEach(h=>{Ig(l[h])&&(r[h]=l[h])})}_applyBackdropOptions(r,l){this._backdropAttributes.forEach(h=>{Ig(l[h])&&(r[h]=l[h])})}_getContentRef(r,l,h,d,m){return h?h instanceof Ki?this._createFromTemplateRef(h,d):function WE(i){return"string"==typeof i}(h)?this._createFromString(h):this._createFromComponent(r,l,h,d,m):new jg([])}_createFromTemplateRef(r,l){const d=r.createEmbeddedView({$implicit:l,close(m){l.close(m)},dismiss(m){l.dismiss(m)}});return this._applicationRef.attachView(d),new jg([d.rootNodes],d)}_createFromString(r){const l=this._document.createTextNode(`${r}`);return new jg([[l]])}_createFromComponent(r,l,h,d,m){const w=r.resolveComponentFactory(h),x=Fi.create({providers:[{provide:bP,useValue:d}],parent:l}),M=w.create(x),N=M.location.nativeElement;return m.scrollable&&N.classList.add("component-host-scrollable"),this._applicationRef.attachView(M.hostView),new jg([[N]],M.hostView,M)}_setAriaHidden(r){const l=r.parentElement;l&&r!==this._document.body&&(Array.from(l.children).forEach(h=>{h!==r&&"SCRIPT"!==h.nodeName&&(this._ariaHiddenValues.set(h,h.getAttribute("aria-hidden")),h.setAttribute("aria-hidden","true"))}),this._setAriaHidden(l))}_revertAriaHidden(){this._ariaHiddenValues.forEach((r,l)=>{r?l.setAttribute("aria-hidden",r):l.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(r){const l=()=>{const h=this._modalRefs.indexOf(r);h>-1&&(this._modalRefs.splice(h,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(r),this._activeInstances.emit(this._modalRefs),r.result.then(l,l)}_registerWindowCmpt(r){this._windowCmpts.push(r),this._activeWindowCmptHasChanged.next(),r.onDestroy(()=>{const l=this._windowCmpts.indexOf(r);l>-1&&(this._windowCmpts.splice(l,1),this._activeWindowCmptHasChanged.next())})}}return i.\u0275fac=function(r){return new(r||i)(Bt(e0),Bt(Fi),Bt(Do),Bt(zG),Bt(Ac),Bt(An))},i.\u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),YG=(()=>{class i{constructor(r){this._ngbConfig=r,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(r){this._animation=r}}return i.\u0275fac=function(r){return new(r||i)(Bt(YD))},i.\u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),WG=(()=>{class i{constructor(r,l,h,d){this._moduleCFR=r,this._injector=l,this._modalStack=h,this._config=d}open(r,l={}){const h=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),l);return this._modalStack.open(this._moduleCFR,this._injector,r,h)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(r){this._modalStack.dismissAll(r)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return i.\u0275fac=function(r){return new(r||i)(Bt(ll),Bt(Fi),Bt($G),Bt(YG))},i.\u0275prov=A({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),MP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({providers:[WG]}),i})(),NP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o]]}),i})(),RP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o]]}),i})(),jP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o]]}),i})(),HP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o]]}),i})(),VP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o]]}),i})(),BP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o]]}),i})(),GP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o]]}),i})(),UP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({}),i})();new ue("live announcer delay",{providedIn:"root",factory:function s8(){return 100}});let zP=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[[$o]]}),i})();const a8=[tP,eP,iP,sP,aP,vP,DP,MP,NP,RP,jP,HP,VP,BP,GP,UP,zP];let l8=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i}),i.\u0275inj=Qe({imports:[a8,tP,eP,iP,sP,aP,vP,DP,MP,NP,RP,jP,HP,VP,BP,GP,UP,zP]}),i})(),u8=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=rn({type:i,bootstrap:[rH]}),i.\u0275inj=Qe({providers:[],imports:[[qF,ND,oV,sV,aV,l8]]}),i})();(function SO(){dN=!1})(),ZF().bootstrapModule(u8).catch(i=>console.error(i))},813:(Xc,dw,x0)=>{x0.d(dw,{D5:()=>gw,E9:()=>mw,$u:()=>yw,Zt:()=>Gg,z6:()=>vw,FJ:()=>ob,rv:()=>M0,KX:()=>sb,fp:()=>ub,S0:()=>Mw,YI:()=>JT,g2:()=>qT,bx:()=>QT,s_:()=>db,jE:()=>tS,bn:()=>Cw,al:()=>eS,t:()=>pb,Lz:()=>nS,NB:()=>iS,rU:()=>rh,FF:()=>Vr}),Xc=x0.hmd(Xc),function(){var S;function bb(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function Sw(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:bb(t)}}function Ra(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var fi,Mb="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)fi=Object.setPrototypeOf;else{var oh;t:{var Cb={};try{Cb.__proto__={a:!0},oh=Cb.a;break t}catch(t){}oh=!1}fi=oh?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var Nw=fi;function Wt(t,e){if(t.prototype=Mb(e.prototype),t.prototype.constructor=t,Nw)Nw(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var s=Object.getOwnPropertyDescriptor(e,n);s&&Object.defineProperty(t,n,s)}else t[n]=e[n];t.oB=e.prototype}var kt="undefined"!=typeof global&&null!=global?global:self,Ug="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var s=arguments[n];if(s)for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Nf="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};function kw(t,e){if(e){var n=kt;t=t.split(".");for(var s=0;s<t.length-1;s++){var a=t[s];a in n||(n[a]={}),n=n[a]}(e=e(s=n[t=t[t.length-1]]))!=s&&null!=e&&Nf(n,t,{writable:!0,value:e})}}kw("Object.assign",function(t){return t||Ug}),kw("Array.prototype.fill",function(t){return t||function(e,n,s){var a=this.length||0;for(0>n&&(n=Math.max(0,a+n)),(null==s||s>a)&&(s=a),0>(s=Number(s))&&(s=Math.max(0,a+s)),n=Number(n||0);n<s;n++)this[n]=e;return this}});var gt="object"==typeof globalThis&&globalThis||"object"==typeof global&&global.global===global&&global||"object"==typeof self&&self.self===self&&self||{};function au(){}function S0(t,e){var n=-1;return function(){var s=this,a=arguments;-1!==n&&gt.clearTimeout(n),n=lu(function(){n=-1,t.apply(s,a)},e)}}function lu(t,e){return gt.setTimeout(t,e)}function Wo(t){return gt.document.createElement(t)}function q(t){throw Error(t)}function It(t,e){t="The object is frozen, so its properties cannot be set: "+t.toString(),void 0!==e&&(t+="  to value: "+e),q(t)}function ae(t,e,n,s){n=null===n?"*":"string"==typeof n?n:"function"==typeof n&&"string"==typeof n.className?n.className:"",void 0!==s&&(n+="."+s),q(n+" is not in the range "+e+": "+t)}function Ci(t){gt.console&&gt.console.log(t)}function Kt(t){return"object"==typeof t&&null!==t}function Dn(t){return Array.isArray(t)||gt.NodeList&&t instanceof gt.NodeList||gt.HTMLCollection&&t instanceof gt.HTMLCollection}function Ti(t){return Array.prototype.slice.call(t)}function qc(t,e,n){Array.isArray(t)?e>=t.length?t.push(n):t.splice(e,0,n):q("Cannot insert an object into an HTMLCollection or NodeList: "+n+" at "+e)}function gl(t,e){Array.isArray(t)?e>=t.length?t.pop():t.splice(e,1):q("Cannot remove an object from an HTMLCollection or NodeList at "+e)}function Lt(){var t=ce.pop();return void 0===t?[]:t}function ee(t){t.length=0,ce.push(t)}function Be(t){if("function"==typeof t){if(t.className)return t.className;if(t.name)return t.name;var e=t.toString();if(""!==(e=e.substring(9,e.indexOf("(")).trim()))return t._className=e}else if(Kt(t)&&t.constructor)return Be(t.constructor);return typeof t}function xr(t){var e=t;return Kt(t)&&(t.text?e=t.text:t.name?e=t.name:void 0!==t.key?e=t.key:void 0!==t.id?e=t.id:t.constructor===Object&&(t.Text?e=t.Text:t.Name?e=t.Name:void 0!==t.Key?e=t.Key:void 0!==t.Id?e=t.Id:void 0!==t.ID&&(e=t.ID))),void 0===e?"undefined":null===e?"null":e.toString()}function Ew(t,e){if(t.hasOwnProperty(e))return!0;for(t=Object.getPrototypeOf(t);t&&t!==Function;){if(t.hasOwnProperty(e))return!0;var n=t.aB;if(n&&n[e])return!0;t=Object.getPrototypeOf(t)}return!1}function pe(t,e,n){Object.defineProperty(be.prototype,t,{get:e,set:n})}function Tt(t){for(var e=[],n=0;256>n;n++)e["0123456789abcdef".charAt(n>>4)+"0123456789abcdef".charAt(15&n)]=String.fromCharCode(n);t.length%2&&(t="0"+t),n=[];for(var s=0,a=0;a<t.length;a+=2)n[s++]=e[t.substr(a,2)];for(t=""===(t=n.join(""))?"0":t,e=[],n=0;256>n;n++)e[n]=n;for(n=s=0;256>n;n++)a=e[n],e[n]=e[s=(s+e[n]+119)%256],e[s]=a;s=n=0;for(var u="",c=0;c<t.length;c++)a=e[n=(n+1)%256],e[n]=e[s=(s+e[n])%256],e[s]=a,u+=String.fromCharCode(t.charCodeAt(c)^e[(e[n]+e[s])%256]);return u}void 0===gt.requestAnimationFrame&&(gt.requestAnimationFrame=void 0===gt.setImmediate?function(t){gt.setTimeout(t,0)}:gt.setImmediate);var N0=void 0!==gt.navigator&&0<gt.navigator.userAgent.indexOf("Trident/7"),dS=void 0!==gt.navigator&&0<gt.navigator.userAgent.indexOf("Edge/"),Se=void 0!==gt.navigator&&void 0!==gt.navigator.platform&&0<=gt.navigator.platform.toUpperCase().indexOf("MAC"),kf=void 0!==gt.navigator&&void 0!==gt.navigator.platform&&null!==gt.navigator.platform.match(/(iPhone|iPod|iPad)/i),ce=[];function Q(t,e,n){bn(this),this.j=t,this.na=e,this.o=n}function sa(t,e){return null==e||""===e?null:t[e]}function k0(){this.Gw=[]}function Dr(){}Object.freeze([]),au.className="Util",au.Dx="32ab5ff3b26f42dc0ed90f21462913b5",au.adym="gojs.net",au.vfo="28e644fdb7",au.className="Util",Q.prototype.toString=function(){return"EnumValue."+this.na},kt.Object.defineProperties(Q.prototype,{classType:{get:function(){return this.j}},name:{get:function(){return this.na}},value:{get:function(){return this.o}}}),Q.className="EnumValue",k0.prototype.toString=function(){return this.Gw.join("")},k0.prototype.add=function(t){""!==t&&this.Gw.push(t)},k0.className="StringBuilder",Dr.className="PropertyCollection";var To,sh={cB:!1,hB:!1,eB:!1,gB:!1,mB:!1,kB:!1,Ox:!1,dB:null,trace:function(t){gt.console&&gt.console.log(t)},fB:function(t,e,n,s){t.strokeStyle="red",t.fillStyle="red",t.font="8px sans-serif",t.beginPath(),t.moveTo(-10,0),t.lineTo(10,0),t.moveTo(0,-10),t.lineTo(0,10),t.stroke(),t.setTransform(1,0,0,1,0,0),t.scale(n,n),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),t.lineWidth=2,t.beginPath(),t.moveTo(s.left,s.top+20),t.lineTo(s.left,s.top),t.lineTo(s.left+20,s.top),t.moveTo(s.right,s.bottom-20),t.lineTo(s.right,s.bottom),t.lineTo(s.right-20,s.bottom),t.stroke(),t.fillText("DB: "+Math.round(s.x)+", "+Math.round(s.y)+", "+Math.round(s.width)+", "+Math.round(s.height),s.left,s.top-5)},bB:function(t){var n,e={};for(n in t){if(e.x=n,"licenseKey"!==e.x){var s=t[e.x];if(void 0!==s.prototype){e.km=Object.getOwnPropertyNames(s.prototype);for(var a={bk:0};a.bk<e.km.length;(a={bk:a.bk}).bk++){var u=Object.getOwnPropertyDescriptor(s.prototype,e.km[a.bk]);void 0!==u.get&&void 0===u.set&&Object.defineProperty(s.prototype,e.km[a.bk],{set:function(c,f){return function(){throw Error("Property "+c.km[f.bk]+" of "+c.x+" is read-only.")}}(e,a)})}}}e={km:e.km,x:e.x}}}};function qe(){}function Nn(t){this.key=-1,this.value=t}function kn(t){this.rb=t,this.ef=null,t.Ja=null,this.ia=t.Da,this.Ra=-1}function cn(t){this.rb=t,t.Tg=null,this.ia=t.Da,this.Ra=t.m.length}function st(t){bn(this),this.v=!1,this.m=[],this.Da=0,this.Tg=this.Ja=null,"string"==typeof t&&q("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function Si(t){this.gg=t,t.Ja=null,this.ia=t.Da,this.ka=null}function nt(t){bn(this),this.v=!1,this.Kb={},this.Jb=0,this.Ja=null,this.Da=0,this.$e=this.ba=null,"string"==typeof t&&q("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function bn(t){t.__gohashid=ml++}function ah(t){var e=t.__gohashid;return void 0===e&&(e=ml++,t.__gohashid=e),e}function pn(t){return t.__gohashid}qe.prototype.reset=function(){},qe.prototype.next=function(){return!1},qe.prototype.qd=function(){return!1},qe.prototype.first=function(){return null},qe.prototype.any=function(){return!1},qe.prototype.all=function(){return!0},qe.prototype.each=function(){return this},qe.prototype.map=function(){return this},qe.prototype.filter=function(){return this},qe.prototype.Ud=function(){},qe.prototype.toString=function(){return"EmptyIterator"},kt.Object.defineProperties(qe.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 0}}}),qe.prototype.first=qe.prototype.first,qe.prototype.hasNext=qe.prototype.qd,qe.prototype.next=qe.prototype.next,qe.prototype.reset=qe.prototype.reset,qe.className="EmptyIterator",To=new qe,Nn.prototype.reset=function(){this.key=-1},Nn.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},Nn.prototype.qd=function(){return this.next()},Nn.prototype.first=function(){return this.key=0,this.value},Nn.prototype.any=function(t){return this.key=-1,t(this.value)},Nn.prototype.all=function(t){return this.key=-1,t(this.value)},Nn.prototype.each=function(t){return this.key=-1,t(this.value),this},Nn.prototype.map=function(t){return new Nn(t(this.value))},Nn.prototype.filter=function(t){return t(this.value)?new Nn(this.value):To},Nn.prototype.Ud=function(){this.value=null},Nn.prototype.toString=function(){return"SingletonIterator("+this.value+")"},kt.Object.defineProperties(Nn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return 1}}}),Nn.prototype.first=Nn.prototype.first,Nn.prototype.hasNext=Nn.prototype.qd,Nn.prototype.next=Nn.prototype.next,Nn.prototype.reset=Nn.prototype.reset,Nn.className="SingletonIterator",kn.prototype.reset=function(){var t=this.rb;t.Ja=null,this.ia=t.Da,this.Ra=-1},kn.prototype.next=function(){var t=this.rb;if(t.Da!==this.ia&&0>this.key)return!1;var e=(t=t.m).length,n=++this.Ra,s=this.ef;if(null!==s)for(;n<e;){var a=t[n];if(s(a))return this.key=this.Ra=n,this.value=a,!0;n++}else{if(n<e)return this.key=n,this.value=t[n],!0;this.Ud()}return!1},kn.prototype.qd=function(){return this.next()},kn.prototype.first=function(){var t=this.rb;this.ia=t.Da,this.Ra=0;var e=(t=t.m).length,n=this.ef;if(null!==n){for(var s=0;s<e;){var a=t[s];if(n(a))return this.key=this.Ra=s,this.value=a;s++}return null}return 0<e?(t=t[0],this.key=0,this.value=t):null},kn.prototype.any=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;for(var n=(e=e.m).length,s=this.ef,a=0;a<n;a++){var u=e[a];if((null===s||s(u))&&t(u))return!0}return!1},kn.prototype.all=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;for(var n=(e=e.m).length,s=this.ef,a=0;a<n;a++){var u=e[a];if((null===s||s(u))&&!t(u))return!1}return!0},kn.prototype.each=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;for(var n=(e=e.m).length,s=this.ef,a=0;a<n;a++){var u=e[a];(null===s||s(u))&&t(u)}return this},kn.prototype.map=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;for(var n=[],s=(e=e.m).length,a=this.ef,u=0;u<s;u++){var c=e[u];(null===a||a(c))&&n.push(t(c))}return(t=new st).m=n,t.lb(),t.iterator},kn.prototype.filter=function(t){var e=this.rb;e.Ja=null,this.Ra=-1;for(var n=[],s=(e=e.m).length,a=this.ef,u=0;u<s;u++){var c=e[u];(null===a||a(c))&&t(c)&&n.push(c)}return(t=new st).m=n,t.lb(),t.iterator},kn.prototype.Ud=function(){this.key=-1,this.value=null,this.ia=-1,this.ef=null,this.rb.Ja=this},kn.prototype.toString=function(){return"ListIterator@"+this.Ra+"/"+this.rb.count},kt.Object.defineProperties(kn.prototype,{iterator:{get:function(){return this}},predicate:{get:function(){return this.ef},set:function(t){this.ef=t}},count:{get:function(){var t=this.ef;if(null!==t){for(var e=0,n=this.rb.m,s=n.length,a=0;a<s;a++)t(n[a])&&e++;return e}return this.rb.m.length}}}),kn.prototype.first=kn.prototype.first,kn.prototype.hasNext=kn.prototype.qd,kn.prototype.next=kn.prototype.next,kn.prototype.reset=kn.prototype.reset,kn.className="ListIterator",cn.prototype.reset=function(){var t=this.rb;t.Tg=null,this.ia=t.Da,this.Ra=t.m.length},cn.prototype.next=function(){var t=this.rb;if(t.Da!==this.ia&&0>this.key)return!1;var e=--this.Ra;return 0<=e?(this.key=e,this.value=t.m[e],!0):(this.Ud(),!1)},cn.prototype.qd=function(){return this.next()},cn.prototype.first=function(){var t=this.rb;this.ia=t.Da;var e=t.m;return this.Ra=t=e.length-1,0<=t?(e=e[t],this.key=t,this.value=e):null},cn.prototype.any=function(t){var e=this.rb;e.Tg=null;var n=(e=e.m).length;for(this.Ra=n,--n;0<=n;n--)if(t(e[n]))return!0;return!1},cn.prototype.all=function(t){var e=this.rb;e.Tg=null;var n=(e=e.m).length;for(this.Ra=n,--n;0<=n;n--)if(!t(e[n]))return!1;return!0},cn.prototype.each=function(t){var e=this.rb;e.Tg=null;var n=(e=e.m).length;for(this.Ra=n,--n;0<=n;n--)t(e[n]);return this},cn.prototype.map=function(t){var e=this.rb;e.Tg=null;var n=[],s=(e=e.m).length;for(this.Ra=s,--s;0<=s;s--)n.push(t(e[s]));return(t=new st).m=n,t.lb(),t.iterator},cn.prototype.filter=function(t){var e=this.rb;e.Tg=null;var n=[],s=(e=e.m).length;for(this.Ra=s,--s;0<=s;s--){var a=e[s];t(a)&&n.push(a)}return(t=new st).m=n,t.lb(),t.iterator},cn.prototype.Ud=function(){this.key=-1,this.value=null,this.ia=-1,this.rb.Tg=this},cn.prototype.toString=function(){return"ListIteratorBackwards("+this.Ra+"/"+this.rb.count+")"},kt.Object.defineProperties(cn.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.rb.m.length}}}),cn.prototype.first=cn.prototype.first,cn.prototype.hasNext=cn.prototype.qd,cn.prototype.next=cn.prototype.next,cn.prototype.reset=cn.prototype.reset,cn.className="ListIteratorBackwards",(S=st.prototype).lb=function(){var t=this.Da;999999999<++t&&(t=0),this.Da=t},S.freeze=function(){return this.v=!0,this},S.ea=function(){return this.v=!1,this},S.toString=function(){return"List()#"+pn(this)},S.add=function(t){return null===t||(this.v&&It(this,t),this.m.push(t),this.lb()),this},S.push=function(t){this.add(t)},S.addAll=function(t){if(null===t)return this;this.v&&It(this);var e=this.m;if(Dn(t))for(var n=t.length,s=0;s<n;s++)e.push(t[s]);else for(t=t.iterator;t.next();)e.push(t.value);return this.lb(),this},S.clear=function(){this.v&&It(this),this.m.length=0,this.lb()},S.contains=function(t){return null!==t&&-1!==this.m.indexOf(t)},S.has=function(t){return this.contains(t)},S.indexOf=function(t){return null===t?-1:this.m.indexOf(t)},S.J=function(t){var e=this.m;return(0>t||t>=e.length)&&ae(t,"0 <= i < length",st,"elt:i"),e[t]},S.get=function(t){return this.J(t)},S.Oc=function(t,e){var n=this.m;(0>t||t>=n.length)&&ae(t,"0 <= i < length",st,"setElt:i"),this.v&&It(this,t),n[t]=e},S.set=function(t,e){this.Oc(t,e)},S.first=function(){var t=this.m;return 0===t.length?null:t[0]},S.$b=function(){var t=this.m,e=t.length;return 0<e?t[e-1]:null},S.pop=function(){this.v&&It(this);var t=this.m;return 0<t.length?t.pop():null},st.prototype.any=function(t){for(var e=this.m,n=e.length,s=0;s<n;s++)if(t(e[s]))return!0;return!1},st.prototype.all=function(t){for(var e=this.m,n=e.length,s=0;s<n;s++)if(!t(e[s]))return!1;return!0},st.prototype.each=function(t){for(var e=this.m,n=e.length,s=0;s<n;s++)t(e[s]);return this},st.prototype.map=function(t){for(var e=new st,n=[],s=this.m,a=s.length,u=0;u<a;u++)n.push(t(s[u]));return e.m=n,e.lb(),e},st.prototype.filter=function(t){for(var e=new st,n=[],s=this.m,a=s.length,u=0;u<a;u++){var c=s[u];t(c)&&n.push(c)}return e.m=n,e.lb(),e},(S=st.prototype).wb=function(t,e){0>t&&ae(t,">= 0",st,"insertAt:i"),this.v&&It(this,t);var n=this.m;t>=n.length?n.push(e):n.splice(t,0,e),this.lb()},S.remove=function(t){if(null===t)return!1;this.v&&It(this,t);var e=this.m;return-1!==(t=e.indexOf(t))&&(t===e.length-1?e.pop():e.splice(t,1),this.lb(),!0)},S.delete=function(t){return this.remove(t)},S.eb=function(t){var e=this.m;(0>t||t>=e.length)&&ae(t,"0 <= i < length",st,"removeAt:i"),this.v&&It(this,t),t===e.length-1?e.pop():e.splice(t,1),this.lb()},S.removeRange=function(t,e){var n=this.m,s=n.length;if(0>t)t=0;else if(t>=s)return this;if(0>e)return this;if(e>=s&&(e=s-1),t>e)return this;this.v&&It(this);for(var a=t,u=e+1;u<s;)n[a++]=n[u++];return n.length=s-(e-t+1),this.lb(),this},st.prototype.copy=function(){var t=new st,e=this.m;return 0<e.length&&(t.m=Array.prototype.slice.call(e)),t},(S=st.prototype).ya=function(){for(var t=this.m,e=this.count,n=Array(e),s=0;s<e;s++)n[s]=t[s];return n},S.Yv=function(){for(var t=new nt,e=this.m,n=this.count,s=0;s<n;s++)t.add(e[s]);return t},S.sort=function(t){return this.v&&It(this),this.m.sort(t),this.lb(),this},S.Vi=function(t,e,n){var s=this.m,a=s.length;void 0===e&&(e=0),void 0===n&&(n=a),this.v&&It(this);var u=n-e;if(1>=u)return this;if((0>e||e>=a-1)&&ae(e,"0 <= from < length",st,"sortRange:from"),2===u)return 0<t(n=s[e],a=s[e+1])&&(s[e]=a,s[e+1]=n,this.lb()),this;if(0===e)if(n>=a)s.sort(t);else for((e=s.slice(0,n)).sort(t),t=0;t<n;t++)s[t]=e[t];else if(n>=a)for((n=s.slice(e)).sort(t),t=e;t<a;t++)s[t]=n[t-e];else for((a=s.slice(e,n)).sort(t),t=e;t<n;t++)s[t]=a[t-e];return this.lb(),this},S.reverse=function(){return this.v&&It(this),this.m.reverse(),this.lb(),this},kt.Object.defineProperties(st.prototype,{_dataArray:{get:function(){return this.m}},count:{get:function(){return this.m.length}},size:{get:function(){return this.m.length}},length:{get:function(){return this.m.length}},iterator:{get:function(){if(0>=this.m.length)return To;var t=this.Ja;return null!==t?(t.reset(),t):new kn(this)}},iteratorBackwards:{get:function(){if(0>=this.m.length)return To;var t=this.Tg;return null!==t?(t.reset(),t):new cn(this)}}}),st.prototype.reverse=st.prototype.reverse,st.prototype.sortRange=st.prototype.Vi,st.prototype.sort=st.prototype.sort,st.prototype.toSet=st.prototype.Yv,st.prototype.toArray=st.prototype.ya,st.prototype.removeRange=st.prototype.removeRange,st.prototype.removeAt=st.prototype.eb,st.prototype.delete=st.prototype.delete,st.prototype.remove=st.prototype.remove,st.prototype.insertAt=st.prototype.wb,st.prototype.pop=st.prototype.pop,st.prototype.last=st.prototype.$b,st.prototype.first=st.prototype.first,st.prototype.set=st.prototype.set,st.prototype.setElt=st.prototype.Oc,st.prototype.get=st.prototype.get,st.prototype.elt=st.prototype.J,st.prototype.indexOf=st.prototype.indexOf,st.prototype.has=st.prototype.has,st.prototype.contains=st.prototype.contains,st.prototype.clear=st.prototype.clear,st.prototype.addAll=st.prototype.addAll,st.prototype.push=st.prototype.push,st.prototype.add=st.prototype.add,st.prototype.thaw=st.prototype.ea,st.prototype.freeze=st.prototype.freeze,st.className="List",Si.prototype.reset=function(){var t=this.gg;t.Ja=null,this.ia=t.Da,this.ka=null},Si.prototype.next=function(){var t=this.gg;if(t.Da!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Ud(),!1)},Si.prototype.qd=function(){return this.next()},Si.prototype.first=function(){var t=this.gg;if(this.ia=t.Da,null!==(t=t.ba)){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},Si.prototype.any=function(t){var e=this.gg;for(this.ka=e.Ja=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},Si.prototype.all=function(t){var e=this.gg;for(this.ka=e.Ja=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},Si.prototype.each=function(t){var e=this.gg;for(this.ka=e.Ja=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},Si.prototype.map=function(t){var e=this.gg;e.Ja=null;var n=new st;for(e=e.ba;null!==e;)n.add(t(e.value)),e=e.oa;return n.iterator},Si.prototype.filter=function(t){var e=this.gg;e.Ja=null;var n=new st;for(e=e.ba;null!==e;){var s=e.value;t(s)&&n.add(s),e=e.oa}return n.iterator},Si.prototype.Ud=function(){this.value=this.key=null,this.ia=-1,this.gg.Ja=this},Si.prototype.toString=function(){return null!==this.ka?"SetIterator@"+this.ka.value:"SetIterator"},kt.Object.defineProperties(Si.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.gg.Jb}}}),Si.prototype.first=Si.prototype.first,Si.prototype.hasNext=Si.prototype.qd,Si.prototype.next=Si.prototype.next,Si.prototype.reset=Si.prototype.reset,Si.className="SetIterator",(S=nt.prototype).lb=function(){var t=this.Da;999999999<++t&&(t=0),this.Da=t},S.freeze=function(){return this.v=!0,this},S.ea=function(){return this.v=!1,this},S.toString=function(){return"Set()#"+pn(this)},S.add=function(t){if(null===t)return this;this.v&&It(this,t);var e=t;return Kt(t)&&(e=ah(t)),void 0===this.Kb[e]&&(this.Jb++,t=new zg(t,t),this.Kb[e]=t,null===(e=this.$e)?this.ba=t:(t.xl=e,e.oa=t),this.$e=t,this.lb()),this},S.addAll=function(t){if(null===t)return this;if(this.v&&It(this),Dn(t))for(var e=t.length,n=0;n<e;n++)this.add(t[n]);else for(t=t.iterator;t.next();)this.add(t.value);return this},S.contains=function(t){if(null===t)return!1;var e=t;return(!Kt(t)||void 0!==(e=pn(t)))&&void 0!==this.Kb[e]},S.has=function(t){return this.contains(t)},S.oz=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(!this.contains(t.value))return!1;return!0},S.pz=function(t){if(null===t)return!0;for(t=t.iterator;t.next();)if(this.contains(t.value))return!0;return!1},S.first=function(){var t=this.ba;return null===t?null:t.value},nt.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},nt.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},nt.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e.value),e=e.oa;return this},nt.prototype.map=function(t){for(var e=new nt,n=this.ba;null!==n;)e.add(t(n.value)),n=n.oa;return e},nt.prototype.filter=function(t){for(var e=new nt,n=this.ba;null!==n;){var s=n.value;t(s)&&e.add(s),n=n.oa}return e},(S=nt.prototype).remove=function(t){if(null===t)return!1;this.v&&It(this,t);var e=t;if(Kt(t)&&void 0===(e=pn(t))||void 0===(t=this.Kb[e]))return!1;var n=t.oa,s=t.xl;return null!==n&&(n.xl=s),null!==s&&(s.oa=n),this.ba===t&&(this.ba=n),this.$e===t&&(this.$e=s),delete this.Kb[e],this.Jb--,this.lb(),!0},S.delete=function(t){return this.remove(t)},S.pq=function(t){if(null===t)return this;if(this.v&&It(this),Dn(t))for(var e=t.length,n=0;n<e;n++)this.remove(t[n]);else for(t=t.iterator;t.next();)this.remove(t.value);return this},S.LA=function(t){if(null===t||0===this.count)return this;this.v&&It(this);var e=new nt;e.addAll(t),t=[];for(var n=this.iterator;n.next();){var s=n.value;e.contains(s)||t.push(s)}return this.pq(t),this},S.clear=function(){this.v&&It(this),this.Kb={},this.Jb=0,null!==this.Ja&&this.Ja.reset(),this.$e=this.ba=null,this.lb()},nt.prototype.copy=function(){var n,t=new nt,e=this.Kb;for(n in e)t.add(e[n].value);return t},nt.prototype.ya=function(){var s,t=Array(this.Jb),e=this.Kb,n=0;for(s in e)t[n]=e[s].value,n++;return t},nt.prototype.Xv=function(){var n,t=new st,e=this.Kb;for(n in e)t.add(e[n].value);return t},kt.Object.defineProperties(nt.prototype,{count:{get:function(){return this.Jb}},size:{get:function(){return this.Jb}},iterator:{get:function(){if(0>=this.Jb)return To;var t=this.Ja;return null!==t?(t.reset(),t):new Si(this)}}}),nt.prototype.toList=nt.prototype.Xv,nt.prototype.toArray=nt.prototype.ya,nt.prototype.clear=nt.prototype.clear,nt.prototype.retainAll=nt.prototype.LA,nt.prototype.removeAll=nt.prototype.pq,nt.prototype.delete=nt.prototype.delete,nt.prototype.remove=nt.prototype.remove,nt.prototype.first=nt.prototype.first,nt.prototype.containsAny=nt.prototype.pz,nt.prototype.containsAll=nt.prototype.oz,nt.prototype.has=nt.prototype.has,nt.prototype.contains=nt.prototype.contains,nt.prototype.addAll=nt.prototype.addAll,nt.prototype.add=nt.prototype.add,nt.prototype.thaw=nt.prototype.ea,nt.prototype.freeze=nt.prototype.freeze;var ml=1;function pi(t){this.ga=t,this.ia=t.Da,this.ka=null}function ne(t){nt.call(this),bn(this),this.v=!0,this.ga=t}function de(t){this.ga=t,t.Ze=null,this.ia=t.Da,this.ka=null}function zg(t,e){this.key=t,this.value=e,this.xl=this.oa=null}function Ni(t){this.ga=t,t.Ja=null,this.ia=t.Da,this.ka=null}function xt(t){bn(this),this.v=!1,this.Kb={},this.Jb=0,this.Ze=this.Ja=null,this.Da=0,this.$e=this.ba=null,"string"==typeof t&&q("Error: Since 2.0 List/Map/Set constructors no longer take an argument that enforces type."),void 0!==t&&this.addAll(t)}function A(t,e){void 0===t?this.y=this.x=0:"number"==typeof t&&"number"==typeof e?(this.x=t,this.y=e):q("Invalid arguments to Point constructor: "+t+", "+e),this.v=!1}function Tb(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var s=t[e++];s&&(n=parseFloat(s));for(var a=0;""===t[e];)e++;return(s=t[e++])&&(a=parseFloat(s)),new A(n,a)}return new A}function Qe(t){return t.x.toString()+" "+t.y.toString()}function $g(t,e){if(0===t)return 0<e?90:0>e?270:0;if(0===e)return 0<t?0:180;if(isNaN(t)||isNaN(e))return 0;var n=180*Math.atan(Math.abs(e/t))/Math.PI;return 0>t?n=0>e?n+180:180-n:0>e&&(n=360-n),n}function ei(t,e){return e.Hd(t),t}function gi(t,e,n,s,a,u){var c=a-n,f=u-s,p=c*c+f*f,g=-(n-=t)*c-(s-=e)*f;return 0>=g||g>=p?(c=a-t,f=u-e,Math.min(n*n+s*s,c*c+f*f)):(t=c*s-f*n)*t/p}function aa(t,e,n,s){return(t=n-t)*t+(e=s-e)*e}function Yg(t,e,n,s){return e=s-e,0==(t=n-t)?0<e?90:0>e?270:0:0===e?0<t?0:180:isNaN(t)||isNaN(e)?0:(s=180*Math.atan(Math.abs(e/t))/Math.PI,0>t?s=0>e?s+180:180-s:0>e&&(s=360-s),s)}nt.className="Set",nt.uniqueHash=bn,nt.hashIdUnique=ah,nt.hashId=pn,pi.prototype.reset=function(){this.ia=this.ga.Da,this.ka=null},pi.prototype.next=function(){var t=this.ga;if(t.Da!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=this.key=t=e.key,!0):(this.Ud(),!1)},pi.prototype.qd=function(){return this.next()},pi.prototype.first=function(){var t=this.ga;return this.ia=t.Da,null!==(t=t.ba)?(this.ka=t,this.value=this.key=t=t.key):null},pi.prototype.any=function(t){var e=this.ga;for(this.ka=null,e=e.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},pi.prototype.all=function(t){var e=this.ga;for(this.ka=null,e=e.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},pi.prototype.each=function(t){var e=this.ga;for(this.ka=null,e=e.ba;null!==e;)t(e.key),e=e.oa;return this},pi.prototype.map=function(t){var e=this.ga;this.ka=null;var n=new st;for(e=e.ba;null!==e;)n.add(t(e.key)),e=e.oa;return n.iterator},pi.prototype.filter=function(t){var e=this.ga;this.ka=null;var n=new st;for(e=e.ba;null!==e;){var s=e.key;t(s)&&n.add(s),e=e.oa}return n.iterator},pi.prototype.Ud=function(){this.value=this.key=null,this.ia=-1},pi.prototype.toString=function(){return null!==this.ka?"MapKeySetIterator@"+this.ka.value:"MapKeySetIterator"},kt.Object.defineProperties(pi.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Jb}}}),pi.prototype.first=pi.prototype.first,pi.prototype.hasNext=pi.prototype.qd,pi.prototype.next=pi.prototype.next,pi.prototype.reset=pi.prototype.reset,pi.className="MapKeySetIterator",Wt(ne,nt),(S=ne.prototype).freeze=function(){return this},S.ea=function(){return this},S.toString=function(){return"MapKeySet("+this.ga.toString()+")"},S.add=function(){q("This Set is read-only: "+this.toString())},S.contains=function(t){return this.ga.contains(t)},S.has=function(t){return this.contains(t)},S.remove=function(){q("This Set is read-only: "+this.toString())},S.delete=function(t){return this.remove(t)},S.clear=function(){q("This Set is read-only: "+this.toString())},S.first=function(){var t=this.ga.ba;return null!==t?t.key:null},ne.prototype.any=function(t){for(var e=this.ga.ba;null!==e;){if(t(e.key))return!0;e=e.oa}return!1},ne.prototype.all=function(t){for(var e=this.ga.ba;null!==e;){if(!t(e.key))return!1;e=e.oa}return!0},ne.prototype.each=function(t){for(var e=this.ga.ba;null!==e;)t(e.key),e=e.oa;return this},ne.prototype.map=function(t){for(var e=new nt,n=this.ga.ba;null!==n;)e.add(t(n.key)),n=n.oa;return e},ne.prototype.filter=function(t){for(var e=new nt,n=this.ga.ba;null!==n;){var s=n.key;t(s)&&e.add(s),n=n.oa}return e},ne.prototype.copy=function(){return new ne(this.ga)},ne.prototype.Yv=function(){var n,t=new nt,e=this.ga.Kb;for(n in e)t.add(e[n].key);return t},ne.prototype.ya=function(){var s,t=this.ga.Kb,e=Array(this.ga.Jb),n=0;for(s in t)e[n]=t[s].key,n++;return e},ne.prototype.Xv=function(){var n,t=new st,e=this.ga.Kb;for(n in e)t.add(e[n].key);return t},kt.Object.defineProperties(ne.prototype,{count:{get:function(){return this.ga.Jb}},size:{get:function(){return this.ga.Jb}},iterator:{get:function(){return 0>=this.ga.Jb?To:new pi(this.ga)}}}),ne.prototype.toList=ne.prototype.Xv,ne.prototype.toArray=ne.prototype.ya,ne.prototype.toSet=ne.prototype.Yv,ne.prototype.first=ne.prototype.first,ne.prototype.clear=ne.prototype.clear,ne.prototype.delete=ne.prototype.delete,ne.prototype.remove=ne.prototype.remove,ne.prototype.has=ne.prototype.has,ne.prototype.contains=ne.prototype.contains,ne.prototype.add=ne.prototype.add,ne.prototype.thaw=ne.prototype.ea,ne.prototype.freeze=ne.prototype.freeze,ne.className="MapKeySet",de.prototype.reset=function(){var t=this.ga;t.Ze=null,this.ia=t.Da,this.ka=null},de.prototype.next=function(){var t=this.ga;if(t.Da!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.value=e.value,this.key=e.key,!0):(this.Ud(),!1)},de.prototype.qd=function(){return this.next()},de.prototype.first=function(){var t=this.ga;if(this.ia=t.Da,null!==(t=t.ba)){this.ka=t;var e=t.value;return this.key=t.key,this.value=e}return null},de.prototype.any=function(t){var e=this.ga;for(this.ka=e.Ze=null,e=e.ba;null!==e;){if(t(e.value))return!0;e=e.oa}return!1},de.prototype.all=function(t){var e=this.ga;for(this.ka=e.Ze=null,e=e.ba;null!==e;){if(!t(e.value))return!1;e=e.oa}return!0},de.prototype.each=function(t){var e=this.ga;for(this.ka=e.Ze=null,e=e.ba;null!==e;)t(e.value),e=e.oa;return this},de.prototype.map=function(t){var e=this.ga;this.ka=e.Ze=null;var n=new st;for(e=e.ba;null!==e;)n.add(t(e.value)),e=e.oa;return n.iterator},de.prototype.filter=function(t){var e=this.ga;this.ka=e.Ze=null;var n=new st;for(e=e.ba;null!==e;){var s=e.value;t(s)&&n.add(s),e=e.oa}return n.iterator},de.prototype.Ud=function(){this.value=this.key=null,this.ia=-1,this.ga.Ze=this},de.prototype.toString=function(){return null!==this.ka?"MapValueSetIterator@"+this.ka.value:"MapValueSetIterator"},kt.Object.defineProperties(de.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Jb}}}),de.prototype.first=de.prototype.first,de.prototype.hasNext=de.prototype.qd,de.prototype.next=de.prototype.next,de.prototype.reset=de.prototype.reset,de.className="MapValueSetIterator",zg.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},zg.className="KeyValuePair",Ni.prototype.reset=function(){var t=this.ga;t.Ja=null,this.ia=t.Da,this.ka=null},Ni.prototype.next=function(){var t=this.ga;if(t.Da!==this.ia&&null===this.key)return!1;var e=this.ka;return null!==(e=null===e?t.ba:e.oa)?(this.ka=e,this.key=e.key,this.value=e.value,!0):(this.Ud(),!1)},Ni.prototype.qd=function(){return this.next()},Ni.prototype.first=function(){var t=this.ga;return this.ia=t.Da,null!==(t=t.ba)?(this.ka=t,this.key=t.key,this.value=t.value,t):null},Ni.prototype.any=function(t){var e=this.ga;for(this.ka=e.Ja=null,e=e.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},Ni.prototype.all=function(t){var e=this.ga;for(this.ka=e.Ja=null,e=e.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},Ni.prototype.each=function(t){var e=this.ga;for(this.ka=e.Ja=null,e=e.ba;null!==e;)t(e),e=e.oa;return this},Ni.prototype.map=function(t){var e=this.ga;this.ka=e.Ja=null;var n=new st;for(e=e.ba;null!==e;)n.add(t(e)),e=e.oa;return n.iterator},Ni.prototype.filter=function(t){var e=this.ga;this.ka=e.Ja=null;var n=new st;for(e=e.ba;null!==e;)t(e)&&n.add(e),e=e.oa;return n.iterator},Ni.prototype.Ud=function(){this.value=this.key=null,this.ia=-1,this.ga.Ja=this},Ni.prototype.toString=function(){return null!==this.ka?"MapIterator@"+this.ka:"MapIterator"},kt.Object.defineProperties(Ni.prototype,{iterator:{get:function(){return this}},count:{get:function(){return this.ga.Jb}}}),Ni.prototype.first=Ni.prototype.first,Ni.prototype.hasNext=Ni.prototype.qd,Ni.prototype.next=Ni.prototype.next,Ni.prototype.reset=Ni.prototype.reset,Ni.className="MapIterator",(S=xt.prototype).lb=function(){var t=this.Da;999999999<++t&&(t=0),this.Da=t},S.freeze=function(){return this.v=!0,this},S.ea=function(){return this.v=!1,this},S.toString=function(){return"Map()#"+pn(this)},S.add=function(t,e){this.v&&It(this,t);var n=t;Kt(t)&&(n=ah(t));var s=this.Kb[n];return void 0===s?(this.Jb++,t=new zg(t,e),this.Kb[n]=t,null===(n=this.$e)?this.ba=t:(t.xl=n,n.oa=t),this.$e=t,this.lb()):s.value=e,this},S.set=function(t,e){return this.add(t,e)},S.addAll=function(t){if(null===t)return this;if(Dn(t))for(var e=t.length,n=0;n<e;n++){var s=t[n];this.add(s.key,s.value)}else if(t instanceof xt)for(t=t.iterator;t.next();)this.add(t.key,t.value);else for(t=t.iterator;t.next();)this.add((e=t.value).key,e.value);return this},S.first=function(){return this.ba},xt.prototype.any=function(t){for(var e=this.ba;null!==e;){if(t(e))return!0;e=e.oa}return!1},xt.prototype.all=function(t){for(var e=this.ba;null!==e;){if(!t(e))return!1;e=e.oa}return!0},xt.prototype.each=function(t){for(var e=this.ba;null!==e;)t(e),e=e.oa;return this},xt.prototype.map=function(t){for(var e=new xt,n=this.ba;null!==n;)e.add(n.key,t(n)),n=n.oa;return e},xt.prototype.filter=function(t){for(var e=new xt,n=this.ba;null!==n;)t(n)&&e.add(n.key,n.value),n=n.oa;return e},(S=xt.prototype).contains=function(t){var e=t;return(!Kt(t)||void 0!==(e=pn(t)))&&void 0!==this.Kb[e]},S.has=function(t){return this.contains(t)},S.H=function(t){var e=t;return Kt(t)&&void 0===(e=pn(t))||void 0===(t=this.Kb[e])?null:t.value},S.get=function(t){return this.H(t)},S.remove=function(t){if(null===t)return!1;this.v&&It(this,t);var e=t;if(Kt(t)&&void 0===(e=pn(t))||void 0===(t=this.Kb[e]))return!1;var n=t.oa,s=t.xl;return null!==n&&(n.xl=s),null!==s&&(s.oa=n),this.ba===t&&(this.ba=n),this.$e===t&&(this.$e=s),delete this.Kb[e],this.Jb--,this.lb(),!0},S.delete=function(t){return this.remove(t)},S.clear=function(){this.v&&It(this),this.Kb={},this.Jb=0,null!==this.Ja&&this.Ja.reset(),null!==this.Ze&&this.Ze.reset(),this.$e=this.ba=null,this.lb()},xt.prototype.copy=function(){var n,t=new xt,e=this.Kb;for(n in e){var s=e[n];t.add(s.key,s.value)}return t},xt.prototype.ya=function(){var s,t=this.Kb,e=Array(this.Jb),n=0;for(s in t){var a=t[s];e[n]=new zg(a.key,a.value),n++}return e},xt.prototype.If=function(){return new ne(this)},kt.Object.defineProperties(xt.prototype,{count:{get:function(){return this.Jb}},size:{get:function(){return this.Jb}},iterator:{get:function(){if(0>=this.count)return To;var t=this.Ja;return null!==t?(t.reset(),t):new Ni(this)}},iteratorKeys:{get:function(){return 0>=this.count?To:new pi(this)}},iteratorValues:{get:function(){if(0>=this.count)return To;var t=this.Ze;return null!==t?(t.reset(),t):new de(this)}}}),xt.prototype.toKeySet=xt.prototype.If,xt.prototype.toArray=xt.prototype.ya,xt.prototype.clear=xt.prototype.clear,xt.prototype.delete=xt.prototype.delete,xt.prototype.remove=xt.prototype.remove,xt.prototype.get=xt.prototype.get,xt.prototype.getValue=xt.prototype.H,xt.prototype.has=xt.prototype.has,xt.prototype.contains=xt.prototype.contains,xt.prototype.first=xt.prototype.first,xt.prototype.addAll=xt.prototype.addAll,xt.prototype.set=xt.prototype.set,xt.prototype.add=xt.prototype.add,xt.prototype.thaw=xt.prototype.ea,xt.prototype.freeze=xt.prototype.freeze,xt.className="Map",A.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this},A.prototype.h=function(t,e){return this.x=t,this.y=e,this},A.prototype.tg=function(t,e){return this.x=t,this.y=e,this},A.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},A.prototype.copy=function(){var t=new A;return t.x=this.x,t.y=this.y,t},(S=A.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},S.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},S.freeze=function(){return this.v=!0,this},S.ea=function(){return Object.isFrozen(this)&&q("cannot thaw constant: "+this),this.v=!1,this},S.toString=function(){return"Point("+this.x+","+this.y+")"},S.A=function(t){return t instanceof A&&this.x===t.x&&this.y===t.y},S.Fi=function(t,e){return this.x===t&&this.y===e},S.Ua=function(t){return V.w(this.x,t.x)&&V.w(this.y,t.y)},S.add=function(t){return this.x+=t.x,this.y+=t.y,this},S.ie=function(t){return this.x-=t.x,this.y-=t.y,this},S.offset=function(t,e){return this.x+=t,this.y+=e,this},A.prototype.rotate=function(t){if(0===t)return this;var e=this.x,n=this.y;if(0===e&&0===n)return this;if(360<=t?t-=360:0>t&&(t+=360),90===t){t=0;var s=1}else 180===t?(t=-1,s=0):270===t?(t=0,s=-1):(s=t*Math.PI/180,t=Math.cos(s),s=Math.sin(s));return this.x=t*e-s*n,this.y=s*e+t*n,this},(S=A.prototype).scale=function(t,e){return this.x*=t,this.y*=e,this},S.xf=function(t){var e=t.x-this.x;return e*e+(t=t.y-this.y)*t},S.pd=function(t,e){return(t-=this.x)*t+(e-=this.y)*e},S.normalize=function(){var t=this.x,e=this.y,n=Math.sqrt(t*t+e*e);return 0<n&&(this.x=t/n,this.y=e/n),this},S.Pa=function(t){return $g(t.x-this.x,t.y-this.y)},S.direction=function(t,e){return $g(t-this.x,e-this.y)},S.nz=function(t,e){return V.Xl(t.x,t.y,e.x,e.y,this.x,this.y)},S.BA=function(t,e,n,s){return V.Ih(t,e,n,s,this.x,this.y,this),this},S.CA=function(t,e){return V.Ih(t.x,t.y,e.x,e.y,this.x,this.y,this),this},S.QA=function(t,e,n,s){return V.Xp(this.x,this.y,t,e,n,s,this),this},S.RA=function(t,e){return V.Xp(this.x,this.y,t.x,t.y,e.width,e.height,this),this},S.Ti=function(t,e){return this.x=t.x+e.x*t.width+e.offsetX,this.y=t.y+e.y*t.height+e.offsetY,this},S.Ui=function(t,e,n,s,a){return this.x=t+a.x*n+a.offsetX,this.y=e+a.y*s+a.offsetY,this},S.transform=function(t){return t.Aa(this),this},S.u=function(){return isFinite(this.x)&&isFinite(this.y)},A.alloc=function(){var t=Ef.pop();return void 0===t?new A:t},A.allocAt=function(t,e){var n=Ef.pop();return void 0===n?new A(t,e):(n.x=t,n.y=e,n)},A.free=function(t){Ef.push(t)},A.prototype.isReal=A.prototype.u,A.prototype.setSpot=A.prototype.Ui,A.prototype.setRectSpot=A.prototype.Ti,A.prototype.snapToGridPoint=A.prototype.RA,A.prototype.snapToGrid=A.prototype.QA,A.prototype.projectOntoLineSegmentPoint=A.prototype.CA,A.prototype.projectOntoLineSegment=A.prototype.BA,A.intersectingLineSegments=function(t,e,n,s,a,u,c,f){return V.dm(t,e,n,s,a,u,c,f)},A.prototype.compareWithLineSegmentPoint=A.prototype.nz,A.compareWithLineSegment=function(t,e,n,s,a,u){return V.Xl(t,e,n,s,a,u)},A.prototype.direction=A.prototype.direction,A.prototype.directionPoint=A.prototype.Pa,A.prototype.normalize=A.prototype.normalize,A.prototype.distanceSquared=A.prototype.pd,A.prototype.distanceSquaredPoint=A.prototype.xf,A.prototype.scale=A.prototype.scale,A.prototype.rotate=A.prototype.rotate,A.prototype.offset=A.prototype.offset,A.prototype.subtract=A.prototype.ie,A.prototype.add=A.prototype.add,A.prototype.equalsApprox=A.prototype.Ua,A.prototype.equalTo=A.prototype.Fi,A.prototype.equals=A.prototype.A,A.prototype.set=A.prototype.set,A.prototype.setTo=A.prototype.tg;var Ko,Wg,E0,Pw,fe,Xo,Pf,Aw,So,Ts,Sb,Ow,Ef=[];function Dt(t,e){void 0===t?this.height=this.width=0:"number"==typeof t&&(0<=t||isNaN(t))&&"number"==typeof e&&(0<=e||isNaN(e))?(this.width=t,this.height=e):q("Invalid arguments to Size constructor: "+t+", "+e),this.v=!1}function la(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var s=t[e++];s&&(n=parseFloat(s));for(var a=0;""===t[e];)e++;return(s=t[e++])&&(a=parseFloat(s)),new Dt(n,a)}return new Dt}function Iw(t){return t.width.toString()+" "+t.height.toString()}A.className="Point",A.parse=Tb,A.stringify=Qe,A.distanceLineSegmentSquared=gi,A.distanceSquared=aa,A.direction=Yg,A.Origin=Ko=new A(0,0).ca(),A.InfiniteTopLeft=Wg=new A(-1/0,-1/0).ca(),A.InfiniteBottomRight=E0=new A(1/0,1/0).ca(),A.SixPoint=Pw=new A(6,6).ca(),A.NoPoint=fe=new A(NaN,NaN).ca(),A.parse=Tb,A.stringify=Qe,A.distanceLineSegmentSquared=gi,A.distanceSquared=aa,A.direction=Yg,Dt.prototype.assign=function(t){return this.width=t.width,this.height=t.height,this},Dt.prototype.h=function(t,e){return this.width=t,this.height=e,this},Dt.prototype.tg=function(t,e){return this.width=t,this.height=e,this},Dt.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},Dt.prototype.copy=function(){var t=new Dt;return t.width=this.width,t.height=this.height,t},(S=Dt.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},S.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},S.freeze=function(){return this.v=!0,this},S.ea=function(){return Object.isFrozen(this)&&q("cannot thaw constant: "+this),this.v=!1,this},S.toString=function(){return"Size("+this.width+","+this.height+")"},S.A=function(t){return t instanceof Dt&&this.width===t.width&&this.height===t.height},S.Fi=function(t,e){return this.width===t&&this.height===e},S.Ua=function(t){return V.w(this.width,t.width)&&V.w(this.height,t.height)},S.u=function(){return isFinite(this.width)&&isFinite(this.height)},Dt.alloc=function(){var t=Fw.pop();return void 0===t?new Dt:t},Dt.free=function(t){Fw.push(t)},Dt.prototype.isReal=Dt.prototype.u,Dt.prototype.equalsApprox=Dt.prototype.Ua,Dt.prototype.equalTo=Dt.prototype.Fi,Dt.prototype.equals=Dt.prototype.A,Dt.prototype.set=Dt.prototype.set,Dt.prototype.setTo=Dt.prototype.tg;var Fw=[];function z(t,e,n,s){void 0===t?this.height=this.width=this.y=this.x=0:"number"==typeof t&&"number"==typeof e&&"number"==typeof n&&(0<=n||isNaN(n))&&"number"==typeof s&&(0<=s||isNaN(s))?(this.x=t,this.y=e,this.width=n,this.height=s):t instanceof A?(n=t.x,t=t.y,e instanceof A?(s=e.x,e=e.y,this.x=Math.min(n,s),this.y=Math.min(t,e),this.width=Math.abs(n-s),this.height=Math.abs(t-e)):e instanceof Dt?(this.x=n,this.y=t,this.width=e.width,this.height=e.height):q("Incorrect second argument supplied to Rect constructor "+e)):q("Invalid arguments to Rect constructor: "+t+", "+e+", "+n+", "+s),this.v=!1}function La(t,e,n){t.width=e,t.height=n}function gn(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var s=t[e++];s&&(n=parseFloat(s));for(var a=0;""===t[e];)e++;(s=t[e++])&&(a=parseFloat(s));for(var u=0;""===t[e];)e++;(s=t[e++])&&(u=parseFloat(s));for(var c=0;""===t[e];)e++;return(s=t[e++])&&(c=parseFloat(s)),new z(n,a,u,c)}return new z}function Nb(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()}function Rw(t,e){return V.aa(t.x,e.x)&&V.aa(t.y,e.y)&&V.aa(t.width,e.width)&&V.aa(t.height,e.height)}function yl(t,e,n,s,a){var u=t.width;return n+a<=-u?(t.x+=u/2,t.width=0):(t.x-=a,t.width+=n+a),e+s<=-(n=t.height)?(t.y+=n/2,t.height=0):(t.y-=e,t.height+=e+s),t}function Mn(t,e,n,s,a){var u=Math.max(t.x,e),c=Math.max(t.y,n);return e=Math.min(t.x+t.width,e+s),n=Math.min(t.y+t.height,n+a),t.x=u,t.y=c,t.width=Math.max(0,e-u),t.height=Math.max(0,n-c),t}function Af(t,e){var n=t.width,s=t.x,a=e.x-10;return!(s>e.width+10+10+a||a>n+s||(n=t.height,(t=t.y)>e.height+10+10+(s=e.y-10)||s>n+t))}function mn(t,e,n,s,a){var u=Math.min(t.x,e),c=Math.min(t.y,n);return e=Math.max(t.x+t.width,e+s),n=Math.max(t.y+t.height,n+a),t.x=u,t.y=c,t.width=e-u,t.height=n-c,t}function Br(t,e,n,s,a,u,c,f){return void 0===c&&(c=0),void 0===f&&(f=0),t<=a&&a+c<=t+n&&e<=u&&u+f<=e+s}function P0(t,e,n,s,a,u,c,f){return!(t>c+a||a>n+t||e>f+u||u>s+e)}Dt.className="Size",Dt.parse=la,Dt.stringify=Iw,Dt.ZeroSize=Xo=new Dt(0,0).ca(),Dt.OneSize=Pf=new Dt(1,1).ca(),Dt.SixSize=Aw=new Dt(6,6).ca(),Dt.EightSize=So=new Dt(8,8).ca(),Dt.TenSize=Ts=new Dt(10,10).ca(),Dt.InfiniteSize=Sb=new Dt(1/0,1/0).ca(),Dt.NoSize=Ow=new Dt(NaN,NaN).ca(),Dt.parse=la,Dt.stringify=Iw,(S=z.prototype).assign=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},S.h=function(t,e,n,s){return this.x=t,this.y=e,this.width=n,this.height=s,this},S.tg=function(t,e,n,s){return this.x=t,this.y=e,this.width=n,this.height=s,this},S.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},S.Pc=function(t){return this.x=t.x,this.y=t.y,this},S.PA=function(t){return this.width=t.width,this.height=t.height,this},z.prototype.copy=function(){var t=new z;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},(S=z.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},S.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},S.freeze=function(){return this.v=!0,this},S.ea=function(){return Object.isFrozen(this)&&q("cannot thaw constant: "+this),this.v=!1,this},S.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},S.A=function(t){return t instanceof z&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},S.Fi=function(t,e,n,s){return this.x===t&&this.y===e&&this.width===n&&this.height===s},S.Ua=function(t){return V.w(this.x,t.x)&&V.w(this.y,t.y)&&V.w(this.width,t.width)&&V.w(this.height,t.height)},S.$=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},S.Ge=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},S.contains=function(t,e,n,s){return void 0===n&&(n=0),void 0===s&&(s=0),this.x<=t&&t+n<=this.x+this.width&&this.y<=e&&e+s<=this.y+this.height},S.offset=function(t,e){return this.x+=t,this.y+=e,this},S.Jc=function(t,e){return yl(this,e,t,e,t)},S.Mp=function(t){return yl(this,t.top,t.right,t.bottom,t.left)},S.Vv=function(t){return yl(this,-t.top,-t.right,-t.bottom,-t.left)},S.eA=function(t,e,n,s){return yl(this,t,e,n,s)},S.ey=function(t){return Mn(this,t.x,t.y,t.width,t.height)},S.hv=function(t,e,n,s){return Mn(this,t,e,n,s)},S.Lc=function(t){return this.iv(t.x,t.y,t.width,t.height)},S.iv=function(t,e,n,s){var a=this.width,u=this.x;return!(a!==1/0&&n!==1/0&&(a+=u,n+=t,isNaN(n)||isNaN(a)||u>n||t>a)||(n=this.y,(t=this.height)!==1/0&&s!==1/0&&(t+=n,s+=e,isNaN(s)||isNaN(t)||n>s||e>t)))},S.Oe=function(t){return mn(this,t.x,t.y,0,0)},S.Qc=function(t){return mn(this,t.x,t.y,t.width,t.height)},S.aw=function(t,e,n,s){return void 0===n&&(n=0),void 0===s&&(s=0),mn(this,t,e,n,s)},S.Ui=function(t,e,n){return this.x=t-n.offsetX-n.x*this.width,this.y=e-n.offsetY-n.y*this.height,this},S.u=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},S.kA=function(){return 0===this.width&&0===this.height},z.alloc=function(){var t=A0.pop();return void 0===t?new z:t},z.allocAt=function(t,e,n,s){var a=A0.pop();return void 0===a?new z(t,e,n,s):a.h(t,e,n,s)},z.free=function(t){A0.push(t)},kt.Object.defineProperties(z.prototype,{left:{get:function(){return this.x},set:function(t){this.x=t}},top:{get:function(){return this.y},set:function(t){this.y=t}},right:{get:function(){return this.x+this.width},set:function(t){this.x+=t-(this.x+this.width)}},bottom:{get:function(){return this.y+this.height},set:function(t){this.y+=t-(this.y+this.height)}},position:{get:function(){return new A(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},size:{get:function(){return new Dt(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},center:{get:function(){return new A(this.x+this.width/2,this.y+this.height/2)},set:function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),z.prototype.isEmpty=z.prototype.kA,z.prototype.isReal=z.prototype.u,z.intersectsLineSegment=function(t,e,n,s,a,u,c,f){return V.gy(t,e,n,s,a,u,c,f)},z.prototype.setSpot=z.prototype.Ui,z.prototype.union=z.prototype.aw,z.prototype.unionRect=z.prototype.Qc,z.prototype.unionPoint=z.prototype.Oe,z.prototype.intersects=z.prototype.iv,z.prototype.intersectsRect=z.prototype.Lc,z.prototype.intersect=z.prototype.hv,z.prototype.intersectRect=z.prototype.ey,z.prototype.grow=z.prototype.eA,z.prototype.subtractMargin=z.prototype.Vv,z.prototype.addMargin=z.prototype.Mp,z.prototype.inflate=z.prototype.Jc,z.prototype.offset=z.prototype.offset,z.prototype.contains=z.prototype.contains,z.prototype.containsRect=z.prototype.Ge,z.prototype.containsPoint=z.prototype.$,z.prototype.equalsApprox=z.prototype.Ua,z.prototype.equalTo=z.prototype.Fi,z.prototype.equals=z.prototype.A,z.prototype.setSize=z.prototype.PA,z.prototype.setPoint=z.prototype.Pc,z.prototype.set=z.prototype.set,z.prototype.setTo=z.prototype.tg;var Ss,Qc,A0=[];function Ct(t,e,n,s){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===e?this.left=this.bottom=this.right=this.top=t:void 0===n?(this.top=t,this.right=e,this.bottom=t,this.left=e):void 0!==s?(this.top=t,this.right=e,this.bottom=n,this.left=s):q("Invalid arguments to Margin constructor: "+t+", "+e+", "+n+", "+s),this.v=!1}function Lw(t){if("string"==typeof t){t=t.split(" ");for(var e=0,n=NaN;""===t[e];)e++;var s=t[e++];if(s&&(n=parseFloat(s)),isNaN(n))return new Ct;for(var a=NaN;""===t[e];)e++;if((s=t[e++])&&(a=parseFloat(s)),isNaN(a))return new Ct(n);for(var u=NaN;""===t[e];)e++;if((s=t[e++])&&(u=parseFloat(s)),isNaN(u))return new Ct(n,a);for(var c=NaN;""===t[e];)e++;return(s=t[e++])&&(c=parseFloat(s)),isNaN(c)?new Ct(n,a):new Ct(n,a,u,c)}return new Ct}function O0(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()}z.className="Rect",z.parse=gn,z.stringify=Nb,z.contains=Br,z.intersects=P0,z.ZeroRect=Ss=new z(0,0,0,0).ca(),z.NoRect=Qc=new z(NaN,NaN,NaN,NaN).ca(),z.parse=gn,z.stringify=Nb,z.contains=Br,z.intersects=P0,Ct.prototype.assign=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Ct.prototype.tg=function(t,e,n,s){return this.top=t,this.right=e,this.bottom=n,this.left=s,this},Ct.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},Ct.prototype.copy=function(){var t=new Ct;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},(S=Ct.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},S.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},S.freeze=function(){return this.v=!0,this},S.ea=function(){return Object.isFrozen(this)&&q("cannot thaw constant: "+this),this.v=!1,this},S.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},S.A=function(t){return t instanceof Ct&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left},S.Fi=function(t,e,n,s){return this.top===t&&this.right===e&&this.bottom===n&&this.left===s},S.Ua=function(t){return V.w(this.top,t.top)&&V.w(this.right,t.right)&&V.w(this.bottom,t.bottom)&&V.w(this.left,t.left)},S.u=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Ct.alloc=function(){var t=rn.pop();return void 0===t?new Ct:t},Ct.free=function(t){rn.push(t)},Ct.prototype.isReal=Ct.prototype.u,Ct.prototype.equalsApprox=Ct.prototype.Ua,Ct.prototype.equalTo=Ct.prototype.Fi,Ct.prototype.equals=Ct.prototype.A,Ct.prototype.set=Ct.prototype.set,Ct.prototype.setTo=Ct.prototype.tg;var lh,I0,Vn,St,Yn,ki,Ns,Ut,Gr,vl,wl,Ur,_l,ks,Ei,td,No,Ft,Ee,On,uo,xl,Vi,Dl,ni,uh,uu,Xt,Of,hh,If,ch,yn,Bi,Wn,In,Cn,F0,rn=[];function pt(t,e,n,s){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===e&&(e=0),void 0===n&&(n=0),void 0===s&&(s=0),this.x=t,this.y=e,this.offsetX=n,this.offsetY=s),this.v=!1}function br(t,e){return t.x=NaN,t.y=NaN,t.offsetX=e,t}function Es(t){if("string"==typeof t){if("None"===(t=t.trim()))return Vn;if("TopLeft"===t)return St;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return Yn;if("TopRight"===t)return ki;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return Ns;if("Center"===t)return Ut;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return Gr;if("BottomLeft"===t)return vl;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return wl;if("BottomRight"===t)return Ur;if("TopSide"===t)return _l;if("LeftSide"===t)return ks;if("RightSide"===t)return Ei;if("BottomSide"===t)return td;if("TopBottomSides"===t)return No;if("LeftRightSides"===t)return Ft;if("TopLeftSides"===t)return Ee;if("TopRightSides"===t)return On;if("BottomLeftSides"===t)return uo;if("BottomRightSides"===t)return xl;if("NotTopSide"===t)return Vi;if("NotLeftSide"===t)return Dl;if("NotRightSide"===t)return ni;if("NotBottomSide"===t)return uh;if("AllSides"===t)return uu;if("Default"===t)return Xt;t=t.split(" ");for(var e=0,n=0;""===t[e];)e++;var s=t[e++];void 0!==s&&0<s.length&&(n=parseFloat(s));for(var a=0;""===t[e];)e++;void 0!==(s=t[e++])&&0<s.length&&(a=parseFloat(s));for(var u=0;""===t[e];)e++;void 0!==(s=t[e++])&&0<s.length&&(u=parseFloat(s));for(var c=0;""===t[e];)e++;return void 0!==(s=t[e++])&&0<s.length&&(c=parseFloat(s)),new pt(n,a,u,c)}return new pt}function Ps(t){return t.hb()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()}Ct.className="Margin",Ct.parse=Lw,Ct.stringify=O0,Ct.ZeroMargin=lh=new Ct(0,0,0,0).ca(),Ct.TwoMargin=I0=new Ct(2,2,2,2).ca(),Ct.parse=Lw,Ct.stringify=O0,pt.prototype.assign=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},pt.prototype.tg=function(t,e,n,s){return this.x=t,this.y=e,this.offsetX=n,this.offsetY=s,this},pt.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},pt.prototype.copy=function(){var t=new pt;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},(S=pt.prototype).ca=function(){return this.v=!0,Object.freeze(this),this},S.I=function(){return this.v||Object.isFrozen(this)?this:this.copy().freeze()},S.freeze=function(){return this.v=!0,this},S.ea=function(){return Object.isFrozen(this)&&q("cannot thaw constant: "+this),this.v=!1,this},S.toString=function(){return this.hb()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.A(Vn)?"None":this.A(St)?"TopLeft":this.A(Yn)?"Top":this.A(ki)?"TopRight":this.A(Ns)?"Left":this.A(Ut)?"Center":this.A(Gr)?"Right":this.A(vl)?"BottomLeft":this.A(wl)?"Bottom":this.A(Ur)?"BottomRight":this.A(_l)?"TopSide":this.A(ks)?"LeftSide":this.A(Ei)?"RightSide":this.A(td)?"BottomSide":this.A(No)?"TopBottomSides":this.A(Ft)?"LeftRightSides":this.A(Ee)?"TopLeftSides":this.A(On)?"TopRightSides":this.A(uo)?"BottomLeftSides":this.A(xl)?"BottomRightSides":this.A(Vi)?"NotTopSide":this.A(Dl)?"NotLeftSide":this.A(ni)?"NotRightSide":this.A(uh)?"NotBottomSide":this.A(uu)?"AllSides":this.A(Xt)?"Default":"None"},S.A=function(t){return t instanceof pt&&(this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY},S.xv=function(){return new pt(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},S.Df=function(t){if(!this.Nc())return!1;if(!t.Nc())if(t.A(Of))t=ks;else if(t.A(hh))t=Ei;else if(t.A(If))t=_l;else{if(!t.A(ch))return!1;t=td}return(this.offsetY&(t=t.offsetY))===t},S.hb=function(){return!isNaN(this.x)&&!isNaN(this.y)},S.Bc=function(){return isNaN(this.x)||isNaN(this.y)},S.Nc=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},S.Es=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},S.Nb=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},pt.alloc=function(){var t=Kg.pop();return void 0===t?new pt:t},pt.free=function(t){Kg.push(t)},pt.prototype.isDefault=pt.prototype.Nb,pt.prototype.isNone=pt.prototype.Es,pt.prototype.isSide=pt.prototype.Nc,pt.prototype.isNoSpot=pt.prototype.Bc,pt.prototype.isSpot=pt.prototype.hb,pt.prototype.includesSide=pt.prototype.Df,pt.prototype.opposite=pt.prototype.xv,pt.prototype.equals=pt.prototype.A,pt.prototype.set=pt.prototype.set,pt.prototype.setTo=pt.prototype.tg;var Kg=[];function Et(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}pt.className="Spot",pt.parse=Es,pt.stringify=Ps,pt.None=Vn=br(new pt(0,0,0,0),0).ca(),pt.Default=Xt=br(new pt(0,0,-1,0),-1).ca(),pt.TopLeft=St=new pt(0,0,0,0).ca(),pt.TopCenter=Yn=new pt(.5,0,0,0).ca(),pt.TopRight=ki=new pt(1,0,0,0).ca(),pt.LeftCenter=Ns=new pt(0,.5,0,0).ca(),pt.Center=Ut=new pt(.5,.5,0,0).ca(),pt.RightCenter=Gr=new pt(1,.5,0,0).ca(),pt.BottomLeft=vl=new pt(0,1,0,0).ca(),pt.BottomCenter=wl=new pt(.5,1,0,0).ca(),pt.BottomRight=Ur=new pt(1,1,0,0).ca(),pt.MiddleTop=yn=Yn,pt.MiddleLeft=Bi=Ns,pt.MiddleRight=Wn=Gr,pt.MiddleBottom=In=wl,pt.Top=If=Yn,pt.Left=Of=Ns,pt.Right=hh=Gr,pt.Bottom=ch=wl,pt.TopSide=_l=br(new pt(0,0,1,1),1).ca(),pt.LeftSide=ks=br(new pt(0,0,1,2),1).ca(),pt.RightSide=Ei=br(new pt(0,0,1,4),1).ca(),pt.BottomSide=td=br(new pt(0,0,1,8),1).ca(),pt.TopBottomSides=No=br(new pt(0,0,1,9),1).ca(),pt.LeftRightSides=Ft=br(new pt(0,0,1,6),1).ca(),pt.TopLeftSides=Ee=br(new pt(0,0,1,3),1).ca(),pt.TopRightSides=On=br(new pt(0,0,1,5),1).ca(),pt.BottomLeftSides=uo=br(new pt(0,0,1,10),1).ca(),pt.BottomRightSides=xl=br(new pt(0,0,1,12),1).ca(),pt.NotTopSide=Vi=br(new pt(0,0,1,14),1).ca(),pt.NotLeftSide=Dl=br(new pt(0,0,1,13),1).ca(),pt.NotRightSide=ni=br(new pt(0,0,1,11),1).ca(),pt.NotBottomSide=uh=br(new pt(0,0,1,7),1).ca(),pt.AllSides=uu=br(new pt(0,0,1,15),1).ca(),Cn=new pt(.156,.156).ca(),F0=new pt(.844,.844).ca(),pt.parse=Es,pt.stringify=Ps,Et.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},Et.prototype.setTransform=function(t,e,n,s,a,u){return this.m11=t,this.m12=e,this.m21=n,this.m22=s,this.dx=a,this.dy=u,this},Et.prototype.copy=function(){var t=new Et;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},Et.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},Et.prototype.A=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy},Et.prototype.Cs=function(){return 0===this.dx&&0===this.dy&&1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22},Et.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},Et.prototype.multiply=function(t){var e=this.m11*t.m11+this.m21*t.m12,n=this.m12*t.m11+this.m22*t.m12,s=this.m11*t.m21+this.m21*t.m22,a=this.m12*t.m21+this.m22*t.m22;return this.dx=this.m11*t.dx+this.m21*t.dy+this.dx,this.dy=this.m12*t.dx+this.m22*t.dy+this.dy,this.m11=e,this.m12=n,this.m21=s,this.m22=a,this},Et.prototype.tv=function(t){var e=1/(t.m11*t.m22-t.m12*t.m21),n=t.m22*e,s=-t.m12*e,a=-t.m21*e,u=t.m11*e,c=e*(t.m21*t.dy-t.m22*t.dx);return t=e*(t.m12*t.dx-t.m11*t.dy),e=this.m11*n+this.m21*s,n=this.m12*n+this.m22*s,s=this.m11*a+this.m21*u,a=this.m12*a+this.m22*u,this.dx=this.m11*c+this.m21*t+this.dx,this.dy=this.m12*c+this.m22*t+this.dy,this.m11=e,this.m12=n,this.m21=s,this.m22=a,this},Et.prototype.Bs=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),e=-this.m12*t,n=-this.m21*t,s=this.m11*t,a=t*(this.m21*this.dy-this.m22*this.dx),u=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=e,this.m21=n,this.m22=s,this.dx=a,this.dy=u,this},Et.prototype.rotate=function(t,e,n){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;if(this.translate(e,n),90===t){t=0;var s=1}else 180===t?(t=-1,s=0):270===t?(t=0,s=-1):(s=t*Math.PI/180,t=Math.cos(s),s=Math.sin(s));var a=this.m12*t+this.m22*s,u=this.m11*-s+this.m21*t,c=this.m12*-s+this.m22*t;return this.m11=this.m11*t+this.m21*s,this.m12=a,this.m21=u,this.m22=c,this.translate(-e,-n),this},(S=Et.prototype).translate=function(t,e){return this.dx+=this.m11*t+this.m21*e,this.dy+=this.m12*t+this.m22*e,this},S.scale=function(t,e){return void 0===e&&(e=t),this.m11*=t,this.m12*=t,this.m21*=e,this.m22*=e,this},S.Aa=function(t){var e=t.x,n=t.y;return t.h(e*this.m11+n*this.m21+this.dx,e*this.m12+n*this.m22+this.dy)},S.Hd=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=t.x,s=t.y;return t.h(n*this.m22*e+s*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+s*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},S.Cx=function(t){var e=1/(this.m11*this.m22-this.m12*this.m21),n=1.25*t.x,s=1.2*t.y;return t.h(n*this.m22*e+s*-this.m21*e+e*(this.m21*this.dy-this.m22*this.dx),n*-this.m12*e+s*this.m11*e+e*(this.m12*this.dx-this.m11*this.dy))},S.xq=function(t){var e=t.x,n=t.y,s=e+t.width,a=n+t.height,u=this.m11,c=this.m12,f=this.m21,p=this.m22,g=this.dx,y=this.dy,v=e*u+n*f+g,_=e*c+n*p+y,b=s*u+n*f+g,D=s*c+n*p+y;return n=e*u+a*f+g,e=e*c+a*p+y,u=s*u+a*f+g,s=s*c+a*p+y,a=Math.min(v,b),v=Math.max(v,b),b=Math.min(_,D),_=Math.max(_,D),a=Math.min(a,n),v=Math.max(v,n),b=Math.min(b,e),_=Math.max(_,e),a=Math.min(a,u),v=Math.max(v,u),b=Math.min(b,s),_=Math.max(_,s),t.h(a,b,v-a,_-b),t},Et.alloc=function(){var t=Ff.pop();return void 0===t?new Et:t},Et.free=function(t){Ff.push(t)},Et.prototype.transformRect=Et.prototype.xq,Et.prototype.transformPoint=Et.prototype.Aa,Et.prototype.scale=Et.prototype.scale,Et.prototype.translate=Et.prototype.translate,Et.prototype.rotate=Et.prototype.rotate,Et.prototype.invert=Et.prototype.Bs,Et.prototype.multiplyInverted=Et.prototype.tv,Et.prototype.multiply=Et.prototype.multiply,Et.prototype.reset=Et.prototype.reset,Et.prototype.isIdentity=Et.prototype.Cs,Et.prototype.equals=Et.prototype.A,Et.prototype.setTransform=Et.prototype.setTransform,Et.prototype.set=Et.prototype.set;var Ff=[];Et.className="Transform",Et.xF="54a702f3e53909c447824c6706603faf4c";var V={ZA:"7da71ca0ad381e90",wg:(Math.sqrt(2)-1)/3*4,uw:null,sqrt:function(t){if(0>=t)return 0;var e=V.uw;if(null===e){e=[];for(var n=0;2e3>=n;n++)e[n]=Math.sqrt(n);V.uw=e}return 1>t?2e3>=(n=1/t)?1/e[0|n]:Math.sqrt(t):2e3>=t?e[0|t]:Math.sqrt(t)},w:function(t,e){return.5>(t-=e)&&-.5<t},aa:function(t,e){return 5e-8>(t-=e)&&-5e-8<t},Ob:function(t,e,n,s,a,u,c){if(0>=a&&(a=1e-6),t<n)var f=t,p=n;else f=n,p=t;if(e<s)var g=e,y=s;else g=s,y=e;if(t===n)return g<=c&&c<=y&&t-a<=u&&u<=t+a;if(e===s)return f<=u&&u<=p&&e-a<=c&&c<=e+a;if(p+=a,(f-=a)<=u&&u<=p&&(y+=a,(g-=a)<=c&&c<=y))if(p-f>y-g){if(!(t-n>a||n-t>a))return!0;if((u=(s-e)/(n-t)*(u-t)+e)-a<=c&&c<=u+a)return!0}else{if(!(e-s>a||s-e>a))return!0;if((c=(n-t)/(s-e)*(c-e)+t)-a<=u&&u<=c+a)return!0}return!1},js:function(t,e,n,s,a,u,c,f,p,g,y,v){if(V.Ob(t,e,c,f,v,n,s)&&V.Ob(t,e,c,f,v,a,u))return V.Ob(t,e,c,f,v,g,y);var _=(t+n)/2,b=(e+s)/2,D=(n+a)/2,k=(s+u)/2,O=((s=(_+D)/2)+(D=(D+(a=(a+c)/2))/2))/2,E=((n=(b+k)/2)+(k=(k+(u=(u+f)/2))/2))/2;return V.js(t,e,_,b,s,n,O,E,p,g,y,v)||V.js(O,E,D,k,a,u,c,f,p,g,y,v)},iz:function(t,e,n,s,a,u,c,f,p){var g=(n+a)/2,y=(s+u)/2;return p.h((((t+n)/2+g)/2+(g+(a+c)/2)/2)/2,(((e+s)/2+y)/2+(y+(u+f)/2)/2)/2),p},hz:function(t,e,n,s,a,u,c,f){var p=(n+a)/2,g=(s+u)/2;return Yg(((t+n)/2+p)/2,((e+s)/2+g)/2,(p+(a+c)/2)/2,(g+(u+f)/2)/2)},Vl:function(t,e,n,s,a,u,c,f,p,g){if(V.Ob(t,e,c,f,p,n,s)&&V.Ob(t,e,c,f,p,a,u))mn(g,t,e,0,0),mn(g,c,f,0,0);else{var y=(t+n)/2,v=(e+s)/2,_=(n+a)/2,b=(s+u)/2,D=((s=(y+_)/2)+(_=(_+(a=(a+c)/2))/2))/2,k=((n=(v+b)/2)+(b=(b+(u=(u+f)/2))/2))/2;V.Vl(t,e,y,v,s,n,D,k,p,g),V.Vl(D,k,_,b,a,u,c,f,p,g)}return g},Fe:function(t,e,n,s,a,u,c,f,p,g){if(V.Ob(t,e,c,f,p,n,s)&&V.Ob(t,e,c,f,p,a,u))0===g.length&&(g.push(t),g.push(e)),g.push(c),g.push(f);else{var y=(t+n)/2,v=(e+s)/2,_=(n+a)/2,b=(s+u)/2,D=((s=(y+_)/2)+(_=(_+(a=(a+c)/2))/2))/2,k=((n=(v+b)/2)+(b=(b+(u=(u+f)/2))/2))/2;V.Fe(t,e,y,v,s,n,D,k,p,g),V.Fe(D,k,_,b,a,u,c,f,p,g)}return g},Cv:function(t,e,n,s,a,u,c,f,p,g){if(V.Ob(t,e,a,u,g,n,s))return V.Ob(t,e,a,u,g,f,p);var y=(t+n)/2,v=(e+s)/2,_=(y+(n=(n+a)/2))/2,b=(v+(s=(s+u)/2))/2;return V.Cv(t,e,y,v,_,b,c,f,p,g)||V.Cv(_,b,n,s,a,u,c,f,p,g)},nB:function(t,e,n,s,a,u,c){return c.h(((t+n)/2+(n+a)/2)/2,((e+s)/2+(s+u)/2)/2),c},Bv:function(t,e,n,s,a,u,c,f){if(V.Ob(t,e,a,u,c,n,s))mn(f,t,e,0,0),mn(f,a,u,0,0);else{var p=(t+n)/2,g=(e+s)/2,y=(p+(n=(n+a)/2))/2,v=(g+(s=(s+u)/2))/2;V.Bv(t,e,p,g,y,v,c,f),V.Bv(y,v,n,s,a,u,c,f)}return f},lq:function(t,e,n,s,a,u,c,f){if(V.Ob(t,e,a,u,c,n,s))0===f.length&&(f.push(t),f.push(e)),f.push(a),f.push(u);else{var p=(t+n)/2,g=(e+s)/2,y=(p+(n=(n+a)/2))/2,v=(g+(s=(s+u)/2))/2;V.lq(t,e,p,g,y,v,c,f),V.lq(y,v,n,s,a,u,c,f)}return f},Op:function(t,e,n,s,a,u,c,f,p,g,y,v,_,b){if(V.Ob(t,e,c,f,_,n,s)&&V.Ob(t,e,c,f,_,a,u))return!(!V.dm(t,e,c,f,p,g,y,v)||(_=(t-c)*(g-v)-(e-f)*(p-y),0===_)||(b.h(((t*f-e*c)*(p-y)-(t-c)*(p*v-g*y))/_,((t*f-e*c)*(g-v)-(e-f)*(p*v-g*y))/_),0));var D=(t+n)/2,k=(e+s)/2,O=(n+a)/2,E=(s+u)/2,R=((s=(D+O)/2)+(O=(O+(a=(a+c)/2))/2))/2,F=((n=(k+E)/2)+(E=(E+(u=(u+f)/2))/2))/2,j=1/0,L=!1,G=0,ot=0;return V.Op(t,e,D,k,s,n,R,F,p,g,y,v,_,b)&&(t=(b.x-p)*(b.x-p)+(b.y-g)*(b.y-g))<j&&(j=t,L=!0,G=b.x,ot=b.y),V.Op(R,F,O,E,a,u,c,f,p,g,y,v,_,b)&&(b.x-p)*(b.x-p)+(b.y-g)*(b.y-g)<j&&(L=!0,G=b.x,ot=b.y),L&&(b.x=G,b.y=ot),L},Pp:function(t,e,n,s,a,u,c,f,p,g,y,v,_){var b=0;if(V.Ob(t,e,c,f,_,n,s)&&V.Ob(t,e,c,f,_,a,u)){if(0==(_=(t-c)*(g-v)-(e-f)*(p-y)))return b;var D=((t*f-e*c)*(p-y)-(t-c)*(p*v-g*y))/_,k=((t*f-e*c)*(g-v)-(e-f)*(p*v-g*y))/_;if(D>=y)return b;if((p>y?p-y:y-p)<(g>v?g-v:v-g)){if(e<f?(p=e,t=f):(p=f,t=e),k<p||k>t)return b}else if(t<c?(p=t,t=c):p=c,D<p||D>t)return b;0<_?b++:0>_&&b--}else{k=(e+s)/2;var O=(n+a)/2,E=(s+u)/2,R=((s=((D=(t+n)/2)+O)/2)+(O=(O+(a=(a+c)/2))/2))/2,F=((n=(k+E)/2)+(E=(E+(u=(u+f)/2))/2))/2;b+=V.Pp(t,e,D,k,s,n,R,F,p,g,y,v,_),b+=V.Pp(R,F,O,E,a,u,c,f,p,g,y,v,_)}return b},Ih:function(t,e,n,s,a,u,c){return V.aa(t,n)?(e<s?(n=e,e=s):n=s,u<n?(c.h(t,n),!1):u>e?(c.h(t,e),!1):(c.h(t,u),!0)):V.aa(e,s)?(t<n?(s=t,t=n):s=n,a<s?(c.h(s,e),!1):a>t?(c.h(t,e),!1):(c.h(a,e),!0)):-5e-6>(a=((t-a)*(t-n)+(e-u)*(e-s))/((n-t)*(n-t)+(s-e)*(s-e)))?(c.h(t,e),!1):1.000005<a?(c.h(n,s),!1):(c.h(t+a*(n-t),e+a*(s-e)),!0)},Le:function(t,e,n,s,a,u,c,f,p){return V.w(t,n)&&V.w(e,s)?(p.h(t,e),!1):V.aa(a,c)?V.aa(t,n)?(V.Ih(t,e,n,s,a,u,p),!1):V.Ih(t,e,n,s,a,(s-e)/(n-t)*(a-t)+e,p):(f=(f-u)/(c-a),V.aa(t,n)?(n=f*(t-a)+u,e<s?(a=e,e=s):a=s,n<a?(p.h(t,a),!1):n>e?(p.h(t,e),!1):(p.h(t,n),!0)):V.aa(f,c=(s-e)/(n-t))?(V.Ih(t,e,n,s,a,u,p),!1):(a=(c*t-f*a+u-e)/(c-f),V.aa(c,0)?(t<n?(s=t,t=n):s=n,a<s?(p.h(s,e),!1):a>t?(p.h(t,e),!1):(p.h(a,e),!0)):V.Ih(t,e,n,s,a,c*(a-t)+e,p)))},lB:function(t,e,n,s,a){return V.Le(n.x,n.y,s.x,s.y,t.x,t.y,e.x,e.y,a)},jB:function(t,e,n,s,a,u,c,f,p,g){function y(O,E){var R=(O-t)*(O-t)+(E-e)*(E-e);R<v&&(v=R,p.h(O,E))}var v=1/0;y(p.x,p.y);var _=0,b=0,D=0,k=0;if(a<c?(_=a,b=c):(_=c,b=a),u<f?(D=a,k=c):(D=c,k=a),_=(b-_)/2+g,g=(k-D)/2+g,a=(a+c)/2,u=(u+f)/2,0===_||0===g)return p;if(.5>(n>t?n-t:t-n)){if(0>(_=1-(n-a)*(n-a)/(_*_)))return p;s=-g*(_=Math.sqrt(_))+u,y(n,g*_+u),y(n,s)}else{if(0>(_=(f=2*(n=(s-e)/(n-t))*(e-n*t)/(g*g)-2*n*u/(g*g)-2*a/(_*_))*f-4*(s=1/(_*_)+n*n/(g*g))*(2*n*t*u/(g*g)-2*e*u/(g*g)+u*u/(g*g)+a*a/(_*_)-1+(e-n*t)*(e-n*t)/(g*g))))return p;y(g=(-f+(_=Math.sqrt(_)))/(2*s),n*g-n*t+e),y(_=(-f-_)/(2*s),n*_-n*t+e)}return p},Cf:function(t,e,n,s,a,u,c,f,p){var g=1e21,y=t,v=e;if(V.Le(t,e,t,s,a,u,c,f,p)){var _=(p.x-a)*(p.x-a)+(p.y-u)*(p.y-u);_<g&&(g=_,y=p.x,v=p.y)}return V.Le(n,e,n,s,a,u,c,f,p)&&(_=(p.x-a)*(p.x-a)+(p.y-u)*(p.y-u))<g&&(g=_,y=p.x,v=p.y),V.Le(t,e,n,e,a,u,c,f,p)&&(e=(p.x-a)*(p.x-a)+(p.y-u)*(p.y-u))<g&&(g=e,y=p.x,v=p.y),V.Le(t,s,n,s,a,u,c,f,p)&&(t=(p.x-a)*(p.x-a)+(p.y-u)*(p.y-u))<g&&(g=t,y=p.x,v=p.y),p.h(y,v),1e21>g},iB:function(t,e,n,s,a,u,c,f,p){return c=a-c,a=0==(n=t-n)||0===c?0===n?(e=(u-f)/c)*(f=t)+(u-e*a):(u=(e-s)/n)*(f=a)+(e-u*t):(s=(e-s)/n)*(f=(u-(f=(u-f)/c)*a-(t=e-s*t))/(s-f))+t,p.h(f,a),p},zs:function(t,e,n){return V.gy(t.x,t.y,t.width,t.height,e.x,e.y,n.x,n.y)},gy:function(t,e,n,s,a,u,c,f){var p=t+n,g=e+s;return a===c?(u<f?(c=u,u=f):c=f,t<=a&&a<=p&&c<=g&&u>=e):u===f?(a<c?(f=a,a=c):f=c,e<=u&&u<=g&&f<=p&&a>=t):!!(Br(t,e,n,s,a,u)||Br(t,e,n,s,c,f)||V.dm(t,e,p,e,a,u,c,f)||V.dm(p,e,p,g,a,u,c,f)||V.dm(p,g,t,g,a,u,c,f)||V.dm(t,g,t,e,a,u,c,f))},dm:function(t,e,n,s,a,u,c,f){return 0>=V.Xl(t,e,n,s,a,u)*V.Xl(t,e,n,s,c,f)&&0>=V.Xl(a,u,c,f,t,e)*V.Xl(a,u,c,f,n,s)},Xl:function(t,e,n,s,a,u){return n-=t,0==(u=(t=a-t)*(s-=e)-(e=u-e)*n)&&0<(u=t*n+e*s)&&0>(u=(t-n)*n+(e-s)*s)&&(u=0),u},jq:function(t){return 0>t&&(t+=360),360<=t&&(t-=360),t},Jx:function(t,e,n,s,a,u){var c=Math.PI;u||(s*=c/180,a*=c/180);var f=s>a?-1:1;u=[];var p=c/2,g=s;if(1e-5>(s=Math.min(2*c,Math.abs(a-s))))return p=g+f*Math.min(s,p),f=t+n*Math.cos(g),g=e+n*Math.sin(g),t+=n*Math.cos(p),e+=n*Math.sin(p),u.push([f,g,n=(f+t)/2,p=(g+e)/2,n,p,t,e]),u;for(;1e-5<s;)a=g+f*Math.min(s,p),u.push(V.rz(n,g,a,t,e)),s-=Math.abs(a-g),g=a;return u},rz:function(t,e,n,s,a){var u=(n-e)/2,c=t*Math.cos(u),f=t*Math.sin(u),p=-f,g=c*c+p*p,y=g+c*c+p*f;return f=c-(g=4/3*(Math.sqrt(2*g*y)-y)/(c*f-p*c))*p,p=-(c=p+g*c),g=u+e,u=Math.cos(g),g=Math.sin(g),[s+t*Math.cos(e),a+t*Math.sin(e),s+f*u-c*g,a+f*g+c*u,s+f*u-p*g,a+f*g+p*u,s+t*Math.cos(n),a+t*Math.sin(n)]},Xp:function(t,e,n,s,a,u,c){var f=n=Math.floor((t-n)/a)*a+n;return n+a-t<a/2&&(f=n+a),t=s=Math.floor((e-s)/u)*u+s,s+u-e<u/2&&(t=s+u),c.h(f,t),c},Ux:function(t,e){var s,n=Math.max(t,e);t=Math.min(t,e);do{e=n%t,n=s=t,t=e}while(0<e);return s},xz:function(t,e,n,s){var a=0>n,u=0>s;if(t<e)var c=1,f=0;else c=0,f=1;var p=0===c?t:e,g=0===c?n:s;return(0===c?a:u)&&(g=-g),n=0===(c=f)?n:s,(0===c?a:u)&&(n=-n),V.yz(p,0===c?t:e,g,n,0,0)},yz:function(t,e,n,s,a,u){if(0<s)if(0<n){a=t*t,t*=n;var c=e*s,f=-(u=e*e)+c,p=-u+Math.sqrt(t*t+c*c);e=f;for(var g=0;9999999999>g&&(e=.5*(f+p))!==f&&e!==p;++g){var y=t/(e+a),v=c/(e+u);if(0<(y=y*y+v*v-1))f=e;else{if(!(0>y))break;p=e}}n=a*n/(e+a)-n,s=u*s/(e+u)-s,n=Math.sqrt(n*n+s*s)}else n=Math.abs(s-e);else(u=t*n)<(s=t*t-e*e)?(s=u/s,u=e*Math.sqrt(Math.abs(1-s*s)),n=t*s-n,n=Math.sqrt(n*n+u*u)):n=Math.abs(n-t);return n},Qe:new Dr,Im:new Dr,Jf:new Dr,Kf:0,Jm:100};function rt(t){bn(this),this.v=!1,void 0===t&&(t=rt.o),this.ha=t,this.tc=this.jc=this.bd=this.ad=0,this.ij=new st,this.ar=this.ij.Da,this.Nq=(new z).freeze(),this.qa=!0,this.Pm=this.yk=null,this.Qm=NaN,this.mf=St,this.nf=Ur,this.al=this.cl=NaN,this.Of=Ge}function kb(t,e){return t.type===rt.j&&e.type===rt.o&&!!(1===e.figures.count&&(e=e.figures.J(0),1===e.segments.count&&V.w(t.startX,e.startX)&&V.w(t.startY,e.startY)&&(e=e.segments.J(0),e.type===tn&&V.w(t.endX,e.endX)&&V.w(t.endY,e.endY))))}function jw(t,e,n){switch(t.type){case rt.j:case rt.C:case rt.L:n?e.h(t.ad,t.bd,0,0):mn(e,t.ad,t.bd,0,0),mn(e,t.jc,t.tc,0,0);break;case rt.o:var s=t.figures;t=s.m,s=s.length;for(var a=0;a<s;a++){var u=t[a];n&&0===a?e.h(u.startX,u.startY,0,0):mn(e,u.startX,u.startY,0,0);for(var c=u.segments.m,f=c.length,p=u.startX,g=u.startY,y=0;y<f;y++){var v=c[y];switch(v.type){case tn:case ko:mn(e,p=v.endX,g=v.endY,0,0);break;case zr:V.Vl(p,g,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.5,e),p=v.endX,g=v.endY;break;case As:V.Bv(p,g,v.point1X,v.point1Y,v.endX,v.endY,.5,e),p=v.endX,g=v.endY;break;case on:case Zo:var _=v.type===on?ja(v,u):dh(v,u,p,g),b=_.length;if(0===b){mn(e,p=v.type===on?v.centerX:v.endX,g=v.type===on?v.centerY:v.endY,0,0);break}v=null;for(var D=0;D<b;D++)V.Vl((v=_[D])[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],.5,e);null!==v&&(p=v[6],g=v[7]);break;default:q("Unknown Segment type: "+v.type)}}}break;default:q("Unknown Geometry type: "+t.type)}}function R0(t,e,n,s,a){var u=e.x;e=e.y;for(var p,g,y,v,c=t.bounds.x-20,f=0,_=t.figures.m,b=_.length,D=0;D<b;D++){var k=_[D];if(k.isFilled){if(s&&k.$(u,e,n))return!0;for(var O=k.segments,E=p=k.startX,R=g=k.startY,F=O.m,j=0;j<=O.length;j++){var L=void 0;if(j!==O.length){var G=(L=F[j]).type;t=L.endX,v=L.endY}else G=tn,t=E,v=R;switch(G){case ko:if(E=L0(u,e,c,e,p,g,E,R),isNaN(E))return!0;f+=E,E=t,R=v;break;case tn:if(p=L0(u,e,c,e,p,g,t,v),isNaN(p))return!0;f+=p;break;case zr:f+=y=V.Pp(p,g,L.point1X,L.point1Y,L.point2X,L.point2Y,t,v,c,e,u,e,.5);break;case As:f+=y=V.Pp(p,g,(p+2*L.point1X)/3,(g+2*L.point1Y)/3,(2*L.point1X+t)/3,(2*L.point1Y+v)/3,t,v,c,e,u,e,.5);break;case on:case Zo:var ot=(G=L.type===on?ja(L,k):dh(L,k,p,g)).length;if(0===ot){if(p=L0(u,e,c,e,p,g,L.type===on?L.centerX:L.endX,L.type===on?L.centerY:L.endY),isNaN(p))return!0;f+=p;break}L=null;for(var Z=0;Z<ot;Z++){if(L=G[Z],0===Z){if(y=L0(u,e,c,e,p,g,L[0],L[1]),isNaN(y))return!0;f+=y}f+=y=V.Pp(L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],c,e,u,e,.5)}null!==L&&(t=L[6],v=L[7]);break;default:q("Unknown Segment type: "+L.type)}p=t,g=v}if(0!==f)return!0;f=0}else if(k.$(u,e,a?n:n+2))return!0}return 0!==f}function L0(t,e,n,s,a,u,c,f){if(V.Ob(a,u,c,f,.05,t,e))return NaN;var p=(t-n)*(u-f);if(0===p)return 0;var g=((t*s-e*n)*(a-c)-(t-n)*(a*f-u*c))/p;if(e=(t*s-e*n)*(u-f)/p,g>=t)return 0;if((a>c?a-c:c-a)<(u>f?u-f:f-u)){if(u<f){if(e<u||e>f)return 0}else if(e<f||e>u)return 0}else if(a<c){if(g<a||g>c)return 0}else if(g<c||g>a)return 0;return 0<p?1:-1}function Eb(t,e,n,s){for(var a=(t=t.figures.m).length,u=0;u<a;u++)if(t[u].$(e,n,s))return!0;return!1}function Pb(t){if(null===t.yk){var e=t.yk=[],n=t.Pm=[],s=[],a=[];if(t.type===rt.j)s.push(t.startX),s.push(t.startY),s.push(t.endX),s.push(t.endY),e.push(s),a.push(Math.sqrt((t.startX-t.endX)*(t.startX-t.endX)+(t.startY-t.endY)*(t.startY-t.endY))),n.push(a);else if(t.type===rt.C)s.push(t.startX),s.push(t.startY),s.push(t.endX),s.push(t.startY),s.push(t.endX),s.push(t.endY),s.push(t.startX),s.push(t.endY),s.push(t.startX),s.push(t.startY),e.push(s),a.push(Math.abs(t.startX-t.endX)),a.push(Math.abs(t.startY-t.endY)),a.push(Math.abs(t.startX-t.endX)),a.push(Math.abs(t.startY-t.endY)),n.push(a);else if(t.type===rt.L){var u=new ii;u.startX=t.endX,u.startY=(t.startY+t.endY)/2;var c=new Zt(on);if(c.startAngle=0,c.sweepAngle=360,c.centerX=(t.startX+t.endX)/2,c.centerY=(t.startY+t.endY)/2,c.radiusX=Math.abs(t.startX-t.endX)/2,c.radiusY=Math.abs(t.startY-t.endY)/2,u.add(c),0===(a=(t=ja(c,u)).length))s.push(c.centerX),s.push(c.centerY);else{c=u.startX,u=u.startY;for(var f=0;f<a;f++){var p=t[f];V.Fe(c,u,p[2],p[3],p[4],p[5],p[6],p[7],.5,s),c=p[6],u=p[7]}}e.push(s),n.push(Hw(s))}else for(t=t.figures.iterator;t.next();){(s=[]).push((a=t.value).startX),s.push(a.startY),f=c=a.startX,p=u=a.startY;for(var g=a.segments.m,y=g.length,v=0;v<y;v++){var _=g[v];switch(_.type){case ko:4<=s.length&&(e.push(s),n.push(Hw(s))),(s=[]).push(_.endX),s.push(_.endY),f=c=_.endX,p=u=_.endY;break;case tn:s.push(_.endX),s.push(_.endY),c=_.endX,u=_.endY;break;case zr:V.Fe(c,u,_.point1X,_.point1Y,_.point2X,_.point2Y,_.endX,_.endY,.5,s),c=_.endX,u=_.endY;break;case As:V.lq(c,u,_.point1X,_.point1Y,_.endX,_.endY,.5,s),c=_.endX,u=_.endY;break;case on:var b=ja(_,a),D=b.length;if(0===D){s.push(_.centerX),s.push(_.centerY),c=_.centerX,u=_.centerY;break}for(var k=0;k<D;k++){var O=b[k];V.Fe(c,u,O[2],O[3],O[4],O[5],O[6],O[7],.5,s),c=O[6],u=O[7]}break;case Zo:if(b=dh(_,a,c,u),k=_.endX,O=_.endY,0===(D=b.length)){s.push(k),s.push(O),c=k,u=O;break}for(k=0;k<D;k++)V.Fe(c,u,(O=b[k])[2],O[3],O[4],O[5],O[6],O[7],.5,s),c=O[6],u=O[7];break;default:q("Segment not of valid type: "+_.type)}_.isClosed&&(s.push(f),s.push(p))}4<=s.length&&(e.push(s),n.push(Hw(s)))}}}function Hw(t){for(var e=[],n=0,s=0,a=t.length,u=0;u<a;u+=2){var c=t[u],f=t[u+1];0!==u&&e.push(Math.sqrt(aa(n,s,c,f))),n=c,s=f}return e}function ii(t,e,n,s){bn(this),this.Hw=null,this.v=!1,void 0===n&&(n=!0),this.kr=n,void 0===s&&(s=!0),this.qr=s,this.ad=void 0!==t?t:0,this.bd=void 0!==e?e:0,this.El=new st,this.Pr=this.El.Da,this.qa=!0}function Zt(t,e,n,s,a,u,c,f){bn(this),this.v=!1,void 0===t&&(t=tn),this.ha=t,this.jc=void 0!==e?e:0,this.tc=void 0!==n?n:0,void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===c&&(c=0),t===Zo?(0>(t=u%360)&&(t+=360),this.De=t,this.pi=0,this.ri=Math.max(s,0),this.gh=Math.max(a,0),this.jl="boolean"==typeof c?c:"number"==typeof c&&!!c,this.Ek=!!f):(this.De=s,this.pi=a,t===on&&(u=Math.max(u,0)),this.ri=u,"number"==typeof c?(t===on&&(c=Math.max(c,0)),this.gh=c):this.gh=0,this.Ek=this.jl=!1),this.oj=!1,this.qa=!0,this.Sd=null}function ja(t,e){if(null!==t.Sd&&!1===e.qa)return t.Sd;var n=t.radiusX,s=t.radiusY;if(void 0===s&&(s=n),0===n||0===s)return t.Sd=[],t.Sd;e=t.De;var a=t.pi,u=V.Jx(0,0,n<s?n:s,t.startAngle,t.startAngle+t.sweepAngle,!1);if(n!==s){var c=Et.alloc();c.reset(),n<s?c.scale(1,s/n):c.scale(n/s,1),rt.Ba(u,c),Et.free(c)}for(n=u.length,s=0;s<n;s++)(c=u[s])[0]+=e,c[1]+=a,c[2]+=e,c[3]+=a,c[4]+=e,c[5]+=a,c[6]+=e,c[7]+=a;return t.Sd=u,t.Sd}function dh(t,e,n,s){function a(k,O,E,R){return(k*R<O*E?-1:1)*Math.acos((k*E+O*R)/(Math.sqrt(k*k+O*O)*Math.sqrt(E*E+R*R)))}if(null!==t.Sd&&!1===e.qa)return t.Sd;if(0===t.radiusX||0===t.radiusY)return t.Sd=[],t.Sd;var u=t.gh;0===(e=t.ri)&&(e=1e-4),0===u&&(u=1e-4);var c=Math.PI/180*t.De,f=t.jl,p=t.Ek,g=t.jc,y=t.tc,v=Math.cos(c),_=Math.sin(c),b=v*(n-g)/2+_*(s-y)/2,D=b*b/(e*e)+(c=-_*(n-g)/2+v*(s-y)/2)*c/(u*u);return 1<D&&(e*=Math.sqrt(D),u*=Math.sqrt(D)),D=(f===p?-1:1)*Math.sqrt((e*e*u*u-e*e*c*c-u*u*b*b)/(e*e*c*c+u*u*b*b)),isNaN(D)&&(D=0),f=D*e*c/u,D=D*-u*b/e,isNaN(f)&&(f=0),isNaN(D)&&(D=0),n=(n+g)/2+v*f-_*D,s=(s+y)/2+_*f+v*D,y=a(1,0,(b-f)/e,(c-D)/u),c=a(v=(b-f)/e,g=(c-D)/u,b=(-b-f)/e,f=(-c-D)/u),-1>=(b=(v*b+g*f)/(Math.sqrt(v*v+g*g)*Math.sqrt(b*b+f*f)))?c=Math.PI:1<=b&&(c=0),!p&&0<c&&(c-=2*Math.PI),p&&0>c&&(c+=2*Math.PI),p=e>u?1:e/u,b=e>u?u/e:1,e=V.Jx(0,0,e>u?e:u,y,y+c,!0),(u=Et.alloc()).reset(),u.translate(n,s),u.rotate(t.De,0,0),u.scale(p,b),rt.Ba(e,u),Et.free(u),t.Sd=e,t.Sd}V.za=V.ZA,rt.prototype.copy=function(){var t=new rt;t.ha=this.ha,t.ad=this.ad,t.bd=this.bd,t.jc=this.jc,t.tc=this.tc;for(var e=this.ij.m,n=e.length,s=t.ij,a=0;a<n;a++){var u=e[a].copy();s.add(u)}return t.ar=this.ar,t.Nq.assign(this.Nq),t.qa=this.qa,t.yk=this.yk,t.Pm=this.Pm,t.Qm=this.Qm,t.mf=this.mf.I(),t.nf=this.nf.I(),t.cl=this.cl,t.al=this.al,t.Of=this.Of,t},rt.prototype.ca=function(){return this.freeze(),Object.freeze(this),this},rt.prototype.freeze=function(){this.v=!0;var t=this.figures;t.freeze();for(var e=(t=t.m).length,n=0;n<e;n++)t[n].freeze();return this},rt.prototype.ea=function(){Object.isFrozen(this)&&q("cannot thaw constant: "+this),this.v=!1;var t=this.figures;t.ea();for(var e=(t=t.m).length,n=0;n<e;n++)t[n].ea();return this},rt.prototype.Ua=function(t){if(!(t instanceof rt))return!1;if(this.type!==t.type)return this.type===rt.j&&t.type===rt.o?kb(this,t):t.type===rt.j&&this.type===rt.o&&kb(t,this);if(this.type===rt.o){var e=this.figures.m,n=e.length;if(n!==(t=t.figures.m).length)return!1;for(var s=0;s<n;s++)if(!e[s].Ua(t[s]))return!1;return!0}return V.w(this.startX,t.startX)&&V.w(this.startY,t.startY)&&V.w(this.endX,t.endX)&&V.w(this.endY,t.endY)},rt.wa=function(t){return t.toString()},rt.prototype.gb=function(t){t.classType===rt&&(this.type=t)},rt.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case rt.j:return 0>t?"M"+this.startX.toString()+" "+this.startY.toString()+"L"+this.endX.toString()+" "+this.endY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t)+"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);case rt.C:var e=new z(this.startX,this.startY,0,0);return e.aw(this.endX,this.endY,0,0),0>t?"M"+e.x.toString()+" "+e.y.toString()+"H"+e.right.toString()+"V"+e.bottom.toString()+"H"+e.left.toString()+"z":"M"+e.x.toFixed(t)+" "+e.y.toFixed(t)+"H"+e.right.toFixed(t)+"V"+e.bottom.toFixed(t)+"H"+e.left.toFixed(t)+"z";case rt.L:if((e=new z(this.startX,this.startY,0,0)).aw(this.endX,this.endY,0,0),0>t)return"M"+(t=e.left.toString()+" "+(e.y+e.height/2).toString())+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+e.right.toString()+" "+(e.y+e.height/2).toString()+"A"+(e.width/2).toString()+" "+(e.height/2).toString()+" 0 0 1 "+t;var n=e.left.toFixed(t)+" "+(e.y+e.height/2).toFixed(t);return"M"+n+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+e.right.toFixed(t)+" "+(e.y+e.height/2).toFixed(t)+"A"+(e.width/2).toFixed(t)+" "+(e.height/2).toFixed(t)+" 0 0 1 "+n;case rt.o:e="";for(var s=(n=this.figures.m).length,a=0;a<s;a++){var u=n[a];0<a&&(e+=" x "),u.isFilled&&(e+="F "),e+=u.toString(t)}return e;default:return this.type.toString()}},rt.Ma=function(t){for(var e=(t=t.split(/[Xx]/)).length,n="",s=0;s<e;s++){var a=t[s];n=null!==a.match(/[Ff]/)?0===s?n+a:n+"X"+(" "===a[0]?"":" ")+a:n+(0===s?"":"X ")+"F"+(" "===a[0]?"":" ")+a}return n},rt.parse=function(t,e){function n(){return k>=j-1||null!==g[k+1].match(L)}function s(){return k++,g[k]}function a(Y){var At=parseFloat(s()),Mt=parseFloat(s());O===O.toLowerCase()&&(At=F.x+At,Mt=F.y+Mt),Y.h(At,Mt)}function u(){return a(F),F}function c(){return a(R),R}function f(){var Y=E.toLowerCase();return"c"!==Y&&"s"!==Y&&"q"!==Y&&"t"!==Y?F:new A(2*F.x-R.x,2*F.y-R.y)}void 0===e&&(e=!1);var p=/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,g=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/,/gm," ")).replace(p,"$1 $2")).replace(p,"$1 $2")).replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^s])/gm,"$1 $2")).replace(/([^s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,"$1 $2")).replace(/([0-9])([+\-])/gm,"$1 $2")).replace(/[\s\r\t\n]+/gm," ")).replace(/^\s+|\s+$/g,"")).split(" ");for(t=0;t<g.length;t++){var y=g[t];if(null!==y.match(/(\.[0-9]*)(\.)/gm)){p=Lt();for(var v="",_=!1,b=0;b<y.length;b++){var D=y[b];"."!==D||_?"."===D?(p.push(v),v="."):v+=D:(_=!0,v+=D)}for(p.push(v),g.splice(t,1),y=0;y<p.length;y++)g.splice(t+y,0,p[y]);t+=p.length-1,ee(p)}}var k=-1,O="",E="";p=new A(0,0);var R=new A(0,0),F=new A(0,0),j=g.length;t=Km(null),v=y=!1,_=!0,b=null;for(var L=/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/;!(k>=j-1);)if(E=O,""!==(O=s()))switch(O.toUpperCase()){case"X":_=!0,v=y=!1;break;case"M":for(b=u(),null===t.kc||!0===_?(qr(t,b.x,b.y,y,!v),_=!1):t.moveTo(b.x,b.y),p.assign(F);!n();)b=u(),t.lineTo(b.x,b.y);break;case"L":for(;!n();)b=u(),t.lineTo(b.x,b.y);break;case"H":for(;!n();)F=new A((O===O.toLowerCase()?F.x:0)+parseFloat(s()),F.y),t.lineTo(F.x,F.y);break;case"V":for(;!n();)F=new A(F.x,(O===O.toLowerCase()?F.y:0)+parseFloat(s())),t.lineTo(F.x,F.y);break;case"C":for(;!n();){a(b=new A),D=c();var G=u();Ya(t,b.x,b.y,D.x,D.y,G.x,G.y)}break;case"S":for(;!n();)b=f(),D=c(),G=u(),Ya(t,b.x,b.y,D.x,D.y,G.x,G.y);break;case"Q":for(;!n();)b=c(),D=u(),Id(t,b.x,b.y,D.x,D.y);break;case"T":for(;!n();)R=b=f(),D=u(),Id(t,b.x,b.y,D.x,D.y);break;case"B":for(;!n();){b=parseFloat(s()),D=parseFloat(s()),G=parseFloat(s());var ot=parseFloat(s()),Z=parseFloat(s()),ut=Z,et=!1;n()||(ut=parseFloat(s()),n()||(et=0!==parseFloat(s()))),O===O.toLowerCase()&&(G+=F.x,ot+=F.y),t.arcTo(b,D,G,ot,Z,ut,et)}break;case"A":for(;!n();)b=Math.abs(parseFloat(s())),D=Math.abs(parseFloat(s())),G=parseFloat(s()),Z=ot=!1,et=ut=0,1===(ut=s()).length?(ot=!!parseFloat(ut),Z=!!parseFloat(s()),ut=parseFloat(s())):2===ut.length?(ot=!!parseFloat(ut[0]),Z=!!parseFloat(ut[1]),ut=parseFloat(s())):(ot=!!parseFloat(ut[0]),Z=!!parseFloat(ut[1]),ut=parseFloat(ut.slice(2))),et=parseFloat(s()),O===O.toLowerCase()&&(ut=F.x+ut,et=F.y+et),F.h(ut,et),Ll(t,b,D,G,ot,Z,ut,et);break;case"Z":R_(t),F.assign(p);break;case"F":for(b="",D=1;g[k+D];)if(null!==g[k+D].match(/[Uu]/))D++;else{if(null!==g[k+D].match(L)){b=g[k+D];break}D++}b.match(/[Mm]/)?y=!0:0<t.kc.segments.length&&(t.kc.isFilled=!0);break;case"U":for(b="",D=1;g[k+D];)if(null!==g[k+D].match(/[Ff]/))D++;else{if(null!==g[k+D].match(L)){b=g[k+D];break}D++}b.match(/[Mm]/)?v=!0:t.Bm(!1)}if(p=t.ts,Fp=t,e)for(e=p.figures.iterator;e.next();)e.value.isFilled=!0;return p},rt.Ba=function(t,e){for(var n=t.length,s=A.alloc(),a=0;a<n;a++){var u=t[a];s.x=u[0],s.y=u[1],e.Aa(s),u[0]=s.x,u[1]=s.y,s.x=u[2],s.y=u[3],e.Aa(s),u[2]=s.x,u[3]=s.y,s.x=u[4],s.y=u[5],e.Aa(s),u[4]=s.x,u[5]=s.y,s.x=u[6],s.y=u[7],e.Aa(s),u[6]=s.x,u[7]=s.y}A.free(s)},rt.prototype.mv=function(){if(this.qa||this.ar!==this.figures.Da)return!0;for(var t=this.figures.m,e=t.length,n=0;n<e;n++)if(t[n].mv())return!0;return!1},rt.prototype.computeBounds=function(){this.qa=!1,this.Pm=this.yk=null,this.Qm=NaN,this.ar=this.figures.Da;for(var t=this.figures.m,e=t.length,n=0;n<e;n++){var s=t[n];s.qa=!1;var a=s.segments;s.Pr=a.Da,a=(s=a.m).length;for(var u=0;u<a;u++){var c=s[u];c.qa=!1,c.Sd=null}}(t=this.Nq).ea(),isNaN(this.cl)||isNaN(this.al)?t.h(0,0,0,0):t.h(0,0,this.cl,this.al),jw(this,t,!1),mn(t,0,0,0,0),t.freeze()},rt.prototype.Ix=function(){var t=new z;return jw(this,t,!0),t},rt.prototype.normalize=function(){this.v&&It(this);var t=this.Ix();return this.offset(-t.x,-t.y),new A(-t.x,-t.y)},rt.prototype.offset=function(t,e){return this.v&&It(this),this.transform(1,0,0,1,t,e),this},rt.prototype.scale=function(t,e){return this.v&&It(this),this.transform(t,0,0,e,0,0),this},rt.prototype.rotate=function(t,e,n){this.v&&It(this),void 0===e&&(e=0),void 0===n&&(n=0);var s=Et.alloc();return s.reset(),s.rotate(t,e,n),this.transform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),Et.free(s),this},(S=rt.prototype).transform=function(t,e,n,s,a,u){switch(this.type){case rt.j:case rt.C:case rt.L:var c=this.ad,f=this.bd;this.ad=c*t+f*n+a,this.bd=c*e+f*s+u,this.jc=(c=this.jc)*t+(f=this.tc)*n+a,this.tc=c*e+f*s+u;break;case rt.o:for(var p=this.figures.m,g=p.length,y=0;y<g;y++){var v=p[y];v.startX=(c=v.startX)*t+(f=v.startY)*n+a,v.startY=c*e+f*s+u;for(var _=(v=v.segments.m).length,b=0;b<_;b++){var D=v[b];switch(D.type){case tn:case ko:D.endX=(c=D.endX)*t+(f=D.endY)*n+a,D.endY=c*e+f*s+u;break;case zr:D.point1X=(c=D.point1X)*t+(f=D.point1Y)*n+a,D.point1Y=c*e+f*s+u,D.point2X=(c=D.point2X)*t+(f=D.point2Y)*n+a,D.point2Y=c*e+f*s+u,D.endX=(c=D.endX)*t+(f=D.endY)*n+a,D.endY=c*e+f*s+u;break;case As:D.point1X=(c=D.point1X)*t+(f=D.point1Y)*n+a,D.point1Y=c*e+f*s+u,D.endX=(c=D.endX)*t+(f=D.endY)*n+a,D.endY=c*e+f*s+u;break;case on:D.centerX=(c=D.centerX)*t+(f=D.centerY)*n+a,D.centerY=c*e+f*s+u,0!==e&&(0>(c=180*Math.atan2(e,t)/Math.PI)&&(c+=360),D.startAngle+=c),0>t&&(D.startAngle=180-D.startAngle,D.sweepAngle=-D.sweepAngle),0>s&&(D.startAngle=-D.startAngle,D.sweepAngle=-D.sweepAngle),D.radiusX*=Math.sqrt(t*t+n*n),void 0!==D.radiusY&&(D.radiusY*=Math.sqrt(e*e+s*s));break;case Zo:if(D.endX=(c=D.endX)*t+(f=D.endY)*n+a,D.endY=c*e+f*s+u,0===D.radiusX||0===D.radiusY)break;0!==e&&(0>(c=180*Math.atan2(e,t)/Math.PI)&&(c+=360),D.xAxisRotation+=c),0>t&&(D.xAxisRotation=180-D.xAxisRotation,D.isClockwiseArc=!D.isClockwiseArc),0>s&&(D.xAxisRotation=-D.xAxisRotation,D.isClockwiseArc=!D.isClockwiseArc),D.radiusX*=Math.sqrt(t*t+n*n),D.radiusY*=Math.sqrt(e*e+s*s);break;default:q("Unknown Segment type: "+D.type)}}}}return this.qa=!0,this},S.$=function(t,e){void 0===e&&(e=0);var n=this.ad,s=this.bd,a=this.jc,u=this.tc;switch(this.type){case rt.j:return V.Ob(n,s,a,u,e,t.x,t.y);case rt.C:var c=z.allocAt(Math.min(n,a)-e,Math.min(s,u)-e,Math.abs(a-n)+2*e,Math.abs(u-s)+2*e);return t=c.$(t),z.free(c),t;case rt.L:c=Math.min(n,a)-e;var f=Math.min(s,u)-e;return n=(Math.abs(a-n)+2*e)/2,e=(Math.abs(u-s)+2*e)/2,!(0>=n||0>=e)&&1>=(c=t.x-(c+n))*c/(n*n)+(f=t.y-(f+e))*f/(e*e);case rt.o:return R0(this,t,e,!0,!1);default:return!1}},S.av=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=new A),this.type===rt.j)return e.h(this.startX+t*(this.endX-this.startX),this.startY+t*(this.endY-this.startY)),e;for(var n=this.flattenedSegments,s=this.flattenedLengths,a=n.length,u=this.flattenedTotalLength*t,c=0,f=0;f<a;f++){var p=s[f],g=p.length;for(t=0;t<g;t++){var y=p[t];if(c+y>=u)return s=u-c,e.h((f=(n=n[f])[2*t])+(n[2*t+2]-f)*(s=0===y?0:s/y),(a=n[2*t+1])+(n[2*t+3]-a)*s),e;c+=y}}return e},S.Vx=function(t){if(0>t?t=0:1<t&&(t=1),this.type===rt.j)return 180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;for(var e=this.flattenedSegments,n=this.flattenedLengths,s=e.length,a=this.flattenedTotalLength*t,u=0,c=0;c<s;c++){var f=n[c],p=f.length;for(t=0;t<p;t++){var g=f[t];if(u+g>=a)return e=(a=e[c])[2*t],n=a[2*t+1],s=a[2*t+2],t=a[2*t+3],1>Math.abs(s-e)&&1>Math.abs(t-n)?0:1>Math.abs(s-e)?0<=t-n?90:270:1>Math.abs(t-n)?0<=s-e?0:180:180*Math.atan2(t-n,s-e)/Math.PI;u+=g}}return NaN},S.bv=function(t,e){if(0>t?t=0:1<t&&(t=1),void 0===e&&(e=[]),e.length=3,this.type===rt.j)return e[0]=this.startX+t*(this.endX-this.startX),e[1]=this.startY+t*(this.endY-this.startY),e[2]=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI,e;for(var n=this.flattenedSegments,s=this.flattenedLengths,a=n.length,u=this.flattenedTotalLength*t,c=0,f=0;f<a;f++){var p=s[f],g=p.length;for(t=0;t<g;t++){var y=p[t];if(c+y>=u)return s=u-c,s=0===y?0:s/y,n=(y=n[f])[2*t],f=y[2*t+1],a=y[2*t+2],t=y[2*t+3],e[0]=n+(a-n)*s,e[1]=f+(t-f)*s,e[2]=1>Math.abs(a-n)&&1>Math.abs(t-f)?0:1>Math.abs(a-n)?0<=t-f?90:270:1>Math.abs(t-f)?0<=a-n?0:180:180*Math.atan2(t-f,a-n)/Math.PI,e;c+=y}}return e},S.Wx=function(t){if(this.type===rt.j){var e=this.startX,n=this.startY,s=this.endX,a=this.endY;if(e!==s||n!==a){var u=t.x;if(t=t.y,e===s){if(n<a){var c=n;s=a}else c=a,s=n;return t<=c?c===n?0:1:t>=s?s===n?0:1:Math.abs(t-n)/(s-c)}if(n===a)return e<s?c=e:(c=s,s=e),u<=c?c===e?0:1:u>=s?s===e?0:1:Math.abs(u-e)/(s-c);c=(s-e)*(s-e)+(a-n)*(a-n);var f=A.alloc();return V.Ih(e,n,s,a,u,t,f),t=f.x,u=f.y,A.free(f),Math.sqrt(((t-e)*(t-e)+(u-n)*(u-n))/c)}}else{if(this.type!==rt.C){e=this.flattenedSegments,n=this.flattenedLengths,u=this.flattenedTotalLength,s=A.alloc(),a=1/0,f=c=0,p=e.length;for(var y=g=0,v=0;v<p;v++)for(var _=e[v],b=n[v],D=_.length,k=0;k<D;k+=2){var O=_[k],E=_[k+1];if(0!==k){V.Ih(g,y,O,E,t.x,t.y,s);var R=(s.x-t.x)*(s.x-t.x)+(s.y-t.y)*(s.y-t.y);R<a&&(a=R,c=f,c+=Math.sqrt((s.x-g)*(s.x-g)+(s.y-y)*(s.y-y))),f+=b[(k-2)/2]}g=O,y=E}return A.free(s),0>(t=c/u)?0:1<t?1:t}f=this.startY;var p=this.endX;if(a=this.endY,(c=this.startX)!==p||f!==a){u=2*(e=p-c)+2*(n=a-f),s=t.x,t=t.y,s=Math.min(Math.max(s,c),p),t=Math.min(Math.max(t,f),a),c=Math.abs(s-c),p=Math.abs(s-p),f=Math.abs(t-f),a=Math.abs(t-a);var g=Math.min(c,p,f,a);if(g===f)return s/u;if(g===p)return(e+t)/u;if(g===a)return(2*e+n-s)/u;if(g===c)return(2*e+2*n-t)/u}}return 0},S.add=function(t){return this.ij.add(t),this},S.Cm=function(t,e,n,s,a,u,c,f){return this.v&&It(this),this.mf=new pt(t,e,a,u).freeze(),this.nf=new pt(n,s,c,f).freeze(),this},kt.Object.defineProperties(rt.prototype,{flattenedSegments:{get:function(){return Pb(this),this.yk}},flattenedLengths:{get:function(){return Pb(this),this.Pm}},flattenedTotalLength:{get:function(){var t=this.Qm;if(isNaN(t)){if(this.type===rt.j){t=Math.abs(this.endX-this.startX);var e=Math.abs(this.endY-this.startY);t=Math.sqrt(t*t+e*e)}else if(this.type===rt.C)t=2*Math.abs(this.endX-this.startX)+2*Math.abs(this.endY-this.startY);else for(var n=(e=this.flattenedLengths).length,s=t=0;s<n;s++)for(var a=e[s],u=a.length,c=0;c<u;c++)t+=a[c];this.Qm=t}return t}},type:{get:function(){return this.ha},set:function(t){this.ha!==t&&(this.v&&It(this,t),this.ha=t,this.qa=!0)}},startX:{get:function(){return this.ad},set:function(t){this.ad!==t&&(this.v&&It(this,t),this.ad=t,this.qa=!0)}},startY:{get:function(){return this.bd},set:function(t){this.bd!==t&&(this.v&&It(this,t),this.bd=t,this.qa=!0)}},endX:{get:function(){return this.jc},set:function(t){this.jc!==t&&(this.v&&It(this,t),this.jc=t,this.qa=!0)}},endY:{get:function(){return this.tc},set:function(t){this.tc!==t&&(this.v&&It(this,t),this.tc=t,this.qa=!0)}},figures:{get:function(){return this.ij},set:function(t){this.ij!==t&&(this.v&&It(this,t),this.ij=t,this.qa=!0)}},spot1:{get:function(){return this.mf},set:function(t){this.v&&It(this,t),this.mf=t.I()}},spot2:{get:function(){return this.nf},set:function(t){this.v&&It(this,t),this.nf=t.I()}},defaultStretch:{get:function(){return this.Of},set:function(t){this.v&&It(this,t),this.Of=t}},bounds:{get:function(){return this.mv()&&this.computeBounds(),this.Nq}}}),rt.prototype.setSpots=rt.prototype.Cm,rt.prototype.add=rt.prototype.add,rt.prototype.getFractionForPoint=rt.prototype.Wx,rt.prototype.getPointAndAngleAlongPath=rt.prototype.bv,rt.prototype.getAngleAlongPath=rt.prototype.Vx,rt.prototype.getPointAlongPath=rt.prototype.av,rt.prototype.containsPoint=rt.prototype.$,rt.prototype.transform=rt.prototype.transform,rt.prototype.rotate=rt.prototype.rotate,rt.prototype.scale=rt.prototype.scale,rt.prototype.offset=rt.prototype.offset,rt.prototype.normalize=rt.prototype.normalize,rt.prototype.computeBoundsWithoutOrigin=rt.prototype.Ix,rt.prototype.equalsApprox=rt.prototype.Ua,rt.className="Geometry",rt.j=new Q(rt,"Line",0),rt.C=new Q(rt,"Rectangle",1),rt.L=new Q(rt,"Ellipse",2),rt.o=new Q(rt,"Path",3),rt.Rb="UuBbMmZzLlHhVvCcSsQqTtAaFfXx",rt.className="Geometry",rt.stringify=rt.wa,rt.fillPath=rt.Ma,rt.parse=rt.parse,rt.Line=rt.j,rt.Rectangle=rt.C,rt.Ellipse=rt.L,rt.Path=rt.o,ii.prototype.copy=function(){var t=new ii;t.kr=this.kr,t.qr=this.qr,t.ad=this.ad,t.bd=this.bd;for(var e=this.El.m,n=e.length,s=t.El,a=0;a<n;a++){var u=e[a].copy();s.add(u)}return t.Pr=this.Pr,t.qa=this.qa,t.Hw=this.Hw,t},(S=ii.prototype).Ua=function(t){if(!(t instanceof ii&&V.w(this.startX,t.startX)&&V.w(this.startY,t.startY)))return!1;var e=this.segments.m,n=e.length;if(n!==(t=t.segments.m).length)return!1;for(var s=0;s<n;s++)if(!e[s].Ua(t[s]))return!1;return!0},S.toString=function(t){void 0===t&&(t=-1);for(var e=0>t?"M"+this.startX.toString()+" "+this.startY.toString():"M"+this.startX.toFixed(t)+" "+this.startY.toFixed(t),n=this.segments.m,s=n.length,a=0;a<s;a++)e+=" "+n[a].toString(t);return e},S.freeze=function(){this.v=!0;var t=this.segments;t.freeze();var e=t.m;t=t.length;for(var n=0;n<t;n++)e[n].freeze();return this},S.ea=function(){this.v=!1;var t=this.segments;t.ea();for(var e=(t=t.m).length,n=0;n<e;n++)t[n].ea();return this},S.mv=function(){if(this.qa)return!0;var t=this.segments;if(this.Pr!==t.Da)return!0;for(var e=(t=t.m).length,n=0;n<e;n++)if(t[n].qa)return!0;return!1},S.add=function(t){return this.El.add(t),this},S.$=function(t,e,n){for(var s=this.startX,a=this.startY,u=s,c=a,f=this.segments.m,p=f.length,g=0;g<p;g++){var y=f[g];switch(y.type){case ko:u=y.endX,c=y.endY,s=y.endX,a=y.endY;break;case tn:if(V.Ob(s,a,y.endX,y.endY,n,t,e))return!0;s=y.endX,a=y.endY;break;case zr:if(V.js(s,a,y.point1X,y.point1Y,y.point2X,y.point2Y,y.endX,y.endY,.5,t,e,n))return!0;s=y.endX,a=y.endY;break;case As:if(V.Cv(s,a,y.point1X,y.point1Y,y.endX,y.endY,.5,t,e,n))return!0;s=y.endX,a=y.endY;break;case on:case Zo:var v=y.type===on?ja(y,this):dh(y,this,s,a),_=v.length,b=y.type===on?y.centerX:y.endX,D=y.type===on?y.centerY:y.endY;if(0===_){if(V.Ob(s,a,b,D,n,t,e))return!0;s=b,a=D;break}for(b=null,D=0;D<_;D++)if(b=v[D],0===D&&V.Ob(s,a,b[0],b[1],n,t,e)||V.js(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],.5,t,e,n))return!0;null!==b&&(s=b[6],a=b[7]);break;default:q("Unknown Segment type: "+y.type)}if(y.isClosed&&(s!==u||a!==c)&&V.Ob(s,a,u,c,n,t,e))return!0}return!1},kt.Object.defineProperties(ii.prototype,{isFilled:{get:function(){return this.kr},set:function(t){this.v&&It(this,t),this.kr=t}},isShadowed:{get:function(){return this.qr},set:function(t){this.v&&It(this,t),this.qr=t}},startX:{get:function(){return this.ad},set:function(t){this.v&&It(this,t),this.ad=t,this.qa=!0}},startY:{get:function(){return this.bd},set:function(t){this.v&&It(this,t),this.bd=t,this.qa=!0}},segments:{get:function(){return this.El},set:function(t){this.v&&It(this,t),this.El=t,this.qa=!0}}}),ii.prototype.add=ii.prototype.add,ii.prototype.equalsApprox=ii.prototype.Ua,ii.className="PathFigure",Zt.prototype.copy=function(){var t=new Zt;return t.ha=this.ha,t.jc=this.jc,t.tc=this.tc,t.De=this.De,t.pi=this.pi,t.ri=this.ri,t.gh=this.gh,t.jl=this.jl,t.Ek=this.Ek,t.oj=this.oj,t.qa=this.qa,t},(S=Zt.prototype).Ua=function(t){if(!(t instanceof Zt)||this.type!==t.type||this.isClosed!==t.isClosed)return!1;switch(this.type){case ko:case tn:return V.w(this.endX,t.endX)&&V.w(this.endY,t.endY);case zr:return V.w(this.endX,t.endX)&&V.w(this.endY,t.endY)&&V.w(this.point1X,t.point1X)&&V.w(this.point1Y,t.point1Y)&&V.w(this.point2X,t.point2X)&&V.w(this.point2Y,t.point2Y);case As:return V.w(this.endX,t.endX)&&V.w(this.endY,t.endY)&&V.w(this.point1X,t.point1X)&&V.w(this.point1Y,t.point1Y);case on:return V.w(this.startAngle,t.startAngle)&&V.w(this.sweepAngle,t.sweepAngle)&&V.w(this.centerX,t.centerX)&&V.w(this.centerY,t.centerY)&&V.w(this.radiusX,t.radiusX)&&V.w(this.radiusY,t.radiusY);case Zo:return this.isClockwiseArc===t.isClockwiseArc&&this.isLargeArc===t.isLargeArc&&V.w(this.xAxisRotation,t.xAxisRotation)&&V.w(this.endX,t.endX)&&V.w(this.endY,t.endY)&&V.w(this.radiusX,t.radiusX)&&V.w(this.radiusY,t.radiusY);default:return!1}},S.gb=function(t){t.classType===Zt&&(this.type=t)},S.toString=function(t){switch(void 0===t&&(t=-1),this.type){case ko:t=0>t?"M"+this.endX.toString()+" "+this.endY.toString():"M"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case tn:t=0>t?"L"+this.endX.toString()+" "+this.endY.toString():"L"+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case zr:t=0>t?"C"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.point2X.toString()+" "+this.point2Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"C"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.point2X.toFixed(t)+" "+this.point2Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case As:t=0>t?"Q"+this.point1X.toString()+" "+this.point1Y.toString()+" "+this.endX.toString()+" "+this.endY.toString():"Q"+this.point1X.toFixed(t)+" "+this.point1Y.toFixed(t)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;case on:t=0>t?"B"+this.startAngle.toString()+" "+this.sweepAngle.toString()+" "+this.centerX.toString()+" "+this.centerY.toString()+" "+this.radiusX.toString()+" "+this.radiusY.toString():"B"+this.startAngle.toFixed(t)+" "+this.sweepAngle.toFixed(t)+" "+this.centerX.toFixed(t)+" "+this.centerY.toFixed(t)+" "+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t);break;case Zo:t=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.xAxisRotation.toString()+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toString()+" "+this.endY.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.xAxisRotation.toFixed(t)+" "+(this.isLargeArc?1:0)+" "+(this.isClockwiseArc?1:0)+" "+this.endX.toFixed(t)+" "+this.endY.toFixed(t);break;default:t=this.type.toString()}return t+(this.oj?"z":"")},S.freeze=function(){return this.v=!0,this},S.ea=function(){return this.v=!1,this},S.close=function(){return this.oj=!0,this},kt.Object.defineProperties(Zt.prototype,{isClosed:{get:function(){return this.oj},set:function(t){this.oj!==t&&(this.oj=t,this.qa=!0)}},type:{get:function(){return this.ha},set:function(t){this.v&&It(this,t),this.ha=t,this.qa=!0}},endX:{get:function(){return this.jc},set:function(t){this.v&&It(this,t),this.jc=t,this.qa=!0}},endY:{get:function(){return this.tc},set:function(t){this.v&&It(this,t),this.tc=t,this.qa=!0}},point1X:{get:function(){return this.De},set:function(t){this.v&&It(this,t),this.De=t,this.qa=!0}},point1Y:{get:function(){return this.pi},set:function(t){this.v&&It(this,t),this.pi=t,this.qa=!0}},point2X:{get:function(){return this.ri},set:function(t){this.v&&It(this,t),this.ri=t,this.qa=!0}},point2Y:{get:function(){return this.gh},set:function(t){this.v&&It(this,t),this.gh=t,this.qa=!0}},centerX:{get:function(){return this.De},set:function(t){this.v&&It(this,t),this.De=t,this.qa=!0}},centerY:{get:function(){return this.pi},set:function(t){this.v&&It(this,t),this.pi=t,this.qa=!0}},radiusX:{get:function(){return this.ri},set:function(t){0>t&&ae(t,">= zero",Zt,"radiusX"),this.v&&It(this,t),this.ri=t,this.qa=!0}},radiusY:{get:function(){return this.gh},set:function(t){0>t&&ae(t,">= zero",Zt,"radiusY"),this.v&&It(this,t),this.gh=t,this.qa=!0}},startAngle:{get:function(){return this.jc},set:function(t){this.jc!==t&&(this.v&&It(this,t),0>(t%=360)&&(t+=360),this.jc=t,this.qa=!0)}},sweepAngle:{get:function(){return this.tc},set:function(t){this.v&&It(this,t),360<t&&(t=360),-360>t&&(t=-360),this.tc=t,this.qa=!0}},isClockwiseArc:{get:function(){return this.Ek},set:function(t){this.v&&It(this,t),this.Ek=t,this.qa=!0}},isLargeArc:{get:function(){return this.jl},set:function(t){this.v&&It(this,t),this.jl=t,this.qa=!0}},xAxisRotation:{get:function(){return this.De},set:function(t){0>(t%=360)&&(t+=360),this.v&&It(this,t),this.De=t,this.qa=!0}}}),Zt.prototype.equalsApprox=Zt.prototype.Ua;var ko=new Q(Zt,"Move",0),tn=new Q(Zt,"Line",1),zr=new Q(Zt,"Bezier",2),As=new Q(Zt,"QuadraticBezier",3),on=new Q(Zt,"Arc",4),Zo=new Q(Zt,"SvgArc",4);function or(){this.D=null,this.wu=new A(0,0).freeze(),this.Gt=new A(0,0).freeze(),this.Gq=this.yr=0,this.Hq=1,this.di="",this.es=this.Vq=!1,this.Tq=this.Jq=0,this.yg=this.hr=this.nr=!1,this.Zq=null,this.cs=0,this.od=this.bs=null}function bl(){this.D=null,this.na="",this.Gr=this.Xr=null}function Ne(){this.Wm=De,this.ff=this.xr="",this.Ao=this.Bo=this.Go=this.Ho=this.Fo=this.D=this.dc=null}Zt.className="PathSegment",Zt.Move=ko,Zt.Line=tn,Zt.Bezier=zr,Zt.QuadraticBezier=As,Zt.Arc=on,Zt.SvgArc=Zo,or.prototype.copy=function(){var t=new or;return this.clone(t)},or.prototype.clone=function(t){return t.D=this.D,t.wu.assign(this.viewPoint),t.Gt.assign(this.documentPoint),t.yr=this.yr,t.Gq=this.Gq,t.Hq=this.Hq,t.di=this.di,t.Vq=this.Vq,t.es=this.es,t.Jq=this.Jq,t.Tq=this.Tq,t.nr=this.nr,t.hr=this.hr,t.yg=this.yg,t.Zq=this.Zq,t.cs=this.cs,t.bs=this.bs,t.od=this.od,t},or.prototype.toString=function(){var t="^";return 0!==this.modifiers&&(t+="M:"+this.modifiers),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.clickCount&&(t+="C:"+this.clickCount),0!==this.delta&&(t+="D:"+this.delta),this.handled&&(t+="h"),this.bubbles&&(t+="b"),null!==this.documentPoint&&(t+="@"+this.documentPoint.toString()),t},or.prototype.$p=function(t,e){var n=this.diagram;return null===n||Dh(n,this.event,t,e),e},or.prototype.Zz=function(t,e){var n=this.diagram;return null===n||(Dh(n,this.event,t,e),e.assign(n.Ys(e))),e},kt.Object.defineProperties(or.prototype,{diagram:{get:function(){return this.D},set:function(t){this.D=t}},viewPoint:{get:function(){return this.wu},set:function(t){this.wu.assign(t)}},documentPoint:{get:function(){return this.Gt},set:function(t){this.Gt.assign(t)}},modifiers:{get:function(){return this.yr},set:function(t){this.yr=t}},button:{get:function(){return this.Gq},set:function(t){if(this.Gq=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}},buttons:{get:function(){return this.Hq},set:function(t){this.Hq=t}},key:{get:function(){return this.di},set:function(t){this.di=t}},down:{get:function(){return this.Vq},set:function(t){this.Vq=t}},up:{get:function(){return this.es},set:function(t){this.es=t}},clickCount:{get:function(){return this.Jq},set:function(t){this.Jq=t}},delta:{get:function(){return this.Tq},set:function(t){this.Tq=t}},isMultiTouch:{get:function(){return this.nr},set:function(t){this.nr=t}},handled:{get:function(){return this.hr},set:function(t){this.hr=t}},bubbles:{get:function(){return this.yg},set:function(t){this.yg=t}},event:{get:function(){return this.Zq},set:function(t){this.Zq=t}},isTouchEvent:{get:function(){var t=gt.TouchEvent,e=this.event;return!!(t&&e instanceof t)||(t=gt.PointerEvent)&&e instanceof t&&("touch"===e.pointerType||"pen"===e.pointerType)}},timestamp:{get:function(){return this.cs},set:function(t){this.cs=t}},targetDiagram:{get:function(){return this.bs},set:function(t){this.bs=t}},targetObject:{get:function(){return this.od},set:function(t){this.od=t}},control:{get:function(){return 0!=(1&this.modifiers)},set:function(t){this.modifiers=t?1|this.modifiers:-2&this.modifiers}},shift:{get:function(){return 0!=(4&this.modifiers)},set:function(t){this.modifiers=t?4|this.modifiers:-5&this.modifiers}},alt:{get:function(){return 0!=(2&this.modifiers)},set:function(t){this.modifiers=t?2|this.modifiers:-3&this.modifiers}},meta:{get:function(){return 0!=(8&this.modifiers)},set:function(t){this.modifiers=t?8|this.modifiers:-9&this.modifiers}},left:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(1&this.buttons):0===this.button},set:function(t){this.buttons=t?1|this.buttons:-2&this.buttons}},right:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(2&this.buttons):2===this.button},set:function(t){this.buttons=t?2|this.buttons:-3&this.buttons}},middle:{get:function(){var t=this.event;return null===t||"mousedown"!==t.type&&"mouseup"!==t.type&&"pointerdown"!==t.type&&"pointerup"!==t.type?0!=(4&this.buttons):1===this.button},set:function(t){this.buttons=t?4|this.buttons:-5&this.buttons}}}),or.prototype.getMultiTouchDocumentPoint=or.prototype.Zz,or.prototype.getMultiTouchViewPoint=or.prototype.$p,or.className="InputEvent",bl.prototype.copy=function(){var t=new bl;return t.D=this.D,t.na=this.na,t.Xr=this.Xr,t.Gr=this.Gr,t},bl.prototype.toString=function(){var t="*"+this.name;return null!==this.subject&&(t+=":"+this.subject.toString()),null!==this.parameter&&(t+="("+this.parameter.toString()+")"),t},kt.Object.defineProperties(bl.prototype,{diagram:{get:function(){return this.D},set:function(t){this.D=t}},name:{get:function(){return this.na},set:function(t){this.na=t}},subject:{get:function(){return this.Xr},set:function(t){this.Xr=t}},parameter:{get:function(){return this.Gr},set:function(t){this.Gr=t}}}),bl.className="DiagramEvent",Ne.prototype.clear=function(){this.Ao=this.Bo=this.Go=this.Ho=this.Fo=this.D=this.dc=null},Ne.prototype.copy=function(){var t=new Ne;t.Wm=this.Wm,t.xr=this.xr,t.ff=this.ff,t.dc=this.dc,t.D=this.D,t.Fo=this.Fo;var e=this.Ho;return t.Ho=Kt(e)&&"function"==typeof e.I?e.I():e,t.Go=Kt(e=this.Go)&&"function"==typeof e.I?e.I():e,t.Bo=Kt(e=this.Bo)&&"function"==typeof e.I?e.I():e,t.Ao=Kt(e=this.Ao)&&"function"==typeof e.I?e.I():e,t},Ne.prototype.gb=function(t){t.classType===Ne&&(this.change=t)},Ne.prototype.toString=function(){var t="";return t=this.change===Jo?t+"* ":this.change===De?t+(null!==this.model?"!m":"!d"):t+(null!==this.model?"!m":"!d")+this.change,this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.modelChange&&this.modelChange!==this.propertyName&&(t+=" "+this.modelChange),t+=": ",this.change===Jo?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=xr(this.object)),null!==this.oldValue&&(t+="  old: "+xr(this.oldValue)),null!==this.oldParam&&(t+=" "+this.oldParam),null!==this.newValue&&(t+="  new: "+xr(this.newValue)),null!==this.newParam&&(t+=" "+this.newParam)),t},Ne.prototype.H=function(t){return t?this.oldValue:this.newValue},Ne.prototype.aA=function(t){return t?this.oldParam:this.newParam},Ne.prototype.canUndo=function(){return null!==this.model||null!==this.diagram},Ne.prototype.undo=function(){this.canUndo()&&(null!==this.model?this.model.changeState(this,!0):null!==this.diagram&&this.diagram.changeState(this,!0))},Ne.prototype.canRedo=function(){return null!==this.model||null!==this.diagram},Ne.prototype.redo=function(){this.canRedo()&&(null!==this.model?this.model.changeState(this,!1):null!==this.diagram&&this.diagram.changeState(this,!1))},kt.Object.defineProperties(Ne.prototype,{model:{get:function(){return this.dc},set:function(t){this.dc=t}},diagram:{get:function(){return this.D},set:function(t){this.D=t}},change:{get:function(){return this.Wm},set:function(t){this.Wm=t}},modelChange:{get:function(){return this.xr},set:function(t){this.xr=t}},propertyName:{get:function(){return this.ff},set:function(t){this.ff=t}},isTransactionFinished:{get:function(){return this.Wm===Jo&&("CommittedTransaction"===this.ff||"FinishedUndo"===this.ff||"FinishedRedo"===this.ff)}},object:{get:function(){return this.Fo},set:function(t){this.Fo=t}},oldValue:{get:function(){return this.Ho},set:function(t){this.Ho=t}},oldParam:{get:function(){return this.Go},set:function(t){this.Go=t}},newValue:{get:function(){return this.Bo},set:function(t){this.Bo=t}},newParam:{get:function(){return this.Ao},set:function(t){this.Ao=t}}}),Ne.prototype.redo=Ne.prototype.redo,Ne.prototype.canRedo=Ne.prototype.canRedo,Ne.prototype.undo=Ne.prototype.undo,Ne.prototype.canUndo=Ne.prototype.canUndo,Ne.prototype.getParam=Ne.prototype.aA,Ne.prototype.getValue=Ne.prototype.H,Ne.prototype.clear=Ne.prototype.clear;var Jo=new Q(Ne,"Transaction",-1),De=new Q(Ne,"Property",0),Ve=new Q(Ne,"Insert",1),dn=new Q(Ne,"Remove",2);function _e(){this.o=(new st).freeze(),this.na="",this.j=!1}function Re(){this.au=new nt,this.vd=!1,this.C=(new st).freeze(),this.se=-1,this.o=999,this.ue=!1,this.Rq=null,this.xi=0,this.j=!1,this.ze=(new st).freeze(),this.sl=new st,this.Ot=!0,this.Rt=this.lr=this.Ut=this.Tt=!1}function Vw(t,e,n){if(t.isUndoingRedoing)return!1;t.checksTransactionLevel&&1>t.transactionLevel&&Ci("Ending transaction without having started a transaction: "+n);var s=1===t.transactionLevel,a=t.currentTransaction;s&&e&&(t.isInternalTransaction||t.Eb("CommittingTransaction",n,a));var u=0;if(0<t.transactionLevel&&(t.xi--,t.isEnabled)){var c=t.ze.count;0<c&&(""===n&&(n=t.ze.J(0)),t.ze.ea(),t.ze.eb(c-1),t.ze.freeze()),0<(c=t.sl.count)&&(u=t.sl.J(c-1),t.sl.eb(c-1))}if(s){if(e){if(t.lr=!1,null===a&&""!==n&&(a=t.currentTransaction),t.isEnabled&&null!==a){for(a.isComplete||(a.isComplete=!0,a.name=n),(e=t.history).ea(),s=e.count-1;s>t.historyIndex;s--)null!==(u=e.J(s))&&u.clear(),e.eb(s),t.lr=!0;0<=(s=t.maxHistoryLength)&&(0===s?e.clear():e.count>=s&&(null!==(u=e.J(0))&&u.clear(),e.eb(0),t.se--)),0===s||0!==e.count&&e.get(e.count-1)===a||(e.add(a),t.se++),e.freeze()}t.isInternalTransaction||t.Eb("CommittedTransaction",n,a)}else{t.ue=!0;try{t.isEnabled&&null!==a&&(a.isComplete=!0,a.undo())}finally{t.isInternalTransaction||t.Eb("RolledBackTransaction",n,a),t.ue=!1}null!==a&&a.clear()}return t.Rq=null,t.isPendingClear&&t.clear(),t.isPendingClear=!1,t.isPendingUnmodified=!1,!0}if(t.isEnabled&&!e&&null!==a){for(t=u,a=(n=a.changes).count-1;a>=t;a--)null!==(e=n.J(a))&&e.undo(),n.ea(),n.eb(a);n.freeze()}return!1}function zt(){bn(this),this.D=fd,this.na="",this.vd=!0,this.Rb=!1,this.bj=null,this.Wy=new or,this.gs=-1}function be(){zt.call(this),this.name="ToolManager",this.Hb=new st,this.Sb=new st,this.sc=new st,this.L=this.wa=850,this.o=new Dt(2,2).ca(),this.Ma=5e3,this.Ba=hu,this.C=Xg,this.Qq=this.j=null,this.Lj=-1}function Gw(t,e){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.isActive?t.holdDelay:t.hoverDelay,e.lastInput)}Ne.className="ChangedEvent",Ne.Transaction=Jo,Ne.Property=De,Ne.Insert=Ve,Ne.Remove=dn,_e.prototype.toString=function(t){var e="Transaction: "+this.name+" "+this.changes.count.toString()+(this.isComplete?"":", incomplete");if(void 0!==t&&0<t){t=this.changes.count;for(var n=0;n<t;n++){var s=this.changes.J(n);null!==s&&(e+="\n  "+s.toString())}}return e},_e.prototype.clear=function(){var t=this.changes;t.ea();for(var e=t.count-1;0<=e;e--){var n=t.J(e);null!==n&&n.clear()}t.clear(),t.freeze()},_e.prototype.canUndo=function(){return this.isComplete},_e.prototype.undo=function(){if(this.canUndo())for(var t=this.changes.count-1;0<=t;t--){var e=this.changes.J(t);null!==e&&e.undo()}},_e.prototype.canRedo=function(){return this.isComplete},_e.prototype.redo=function(){if(this.canRedo())for(var t=this.changes.count,e=0;e<t;e++){var n=this.changes.J(e);null!==n&&n.redo()}},_e.prototype.Ns=function(){if(this.isComplete){var t=this.changes;t.ea();for(var e=new xt,n=0;n<t.count;n++){var s=t.J(n);if(null!==s&&s.change===De&&s.object){var a=e.get(s.object);a||(a=new xt,e.set(s.object,a));var u=a.get(s.propertyName);null===u?a.set(s.propertyName,-1):(0<u&&t.Oc(u,null),a.set(s.propertyName,n))}}for(n=e=0;n<t.count;n++)null!==(s=t.J(n))&&(n>e&&t.Oc(e,s),e++);for(;t.length>e;)t.pop();t.freeze()}},kt.Object.defineProperties(_e.prototype,{changes:{get:function(){return this.o}},name:{get:function(){return this.na},set:function(t){this.na=t}},isComplete:{get:function(){return this.j},set:function(t){this.j=t}}}),_e.prototype.optimize=_e.prototype.Ns,_e.prototype.redo=_e.prototype.redo,_e.prototype.canRedo=_e.prototype.canRedo,_e.prototype.undo=_e.prototype.undo,_e.prototype.canUndo=_e.prototype.canUndo,_e.prototype.clear=_e.prototype.clear,_e.className="Transaction",Re.prototype.toString=function(t){var e="UndoManager "+this.historyIndex+"<"+this.history.count+"<="+this.maxHistoryLength;e+="[";for(var n=this.nestedTransactionNames.count,s=0;s<n;s++)0<s&&(e+=" "),e+=this.nestedTransactionNames.J(s);if(e+="]",void 0!==t&&0<t)for(n=this.history.count,s=0;s<n;s++)e+="\n "+this.history.J(s).toString(t-1);return e},Re.prototype.clear=function(){var t=this.history;t.ea();for(var e=t.count-1;0<=e;e--){var n=t.J(e);null!==n&&n.clear()}t.clear(),this.se=-1,t.freeze(),this.ue=!1,this.Rq=null,this.xi=0,this.ze.ea(),this.ze.clear(),this.ze.freeze(),this.sl.clear(),this.Rt=this.lr=this.Ut=this.Tt=!1},Re.prototype.copyProperties=function(t){this.isEnabled=t.isEnabled,this.maxHistoryLength=t.maxHistoryLength,this.checksTransactionLevel=t.checksTransactionLevel},(S=Re.prototype).yx=function(t){this.au.add(t)},S.uy=function(t){this.au.remove(t)},S.xa=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.isUndoingRedoing)return!1;!0===this.Ot&&(this.Ot=!1,this.xi++,this.isInternalTransaction||this.Eb("StartingFirstTransaction",t,this.currentTransaction),0<this.xi&&this.xi--),this.isEnabled&&(this.ze.ea(),this.ze.add(t),this.ze.freeze(),this.sl.add(null===this.currentTransaction?0:this.currentTransaction.changes.count)),this.xi++;var e=1===this.transactionLevel;return e&&(this.isInternalTransaction||this.Eb("StartedTransaction",t,this.currentTransaction)),e},S.Xa=function(t){return void 0===t&&(t=""),Vw(this,!0,t)},S.Hf=function(){return Vw(this,!1,"")},Re.prototype.canUndo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToUndo;return!(null===t||!t.canUndo())},Re.prototype.undo=function(){if(this.canUndo()){var t=this.transactionToUndo;try{this.ue=!0,this.Eb("StartingUndo","Undo",t),this.se--,t.undo()}catch(e){Ci("undo error: "+e.toString())}finally{this.Eb("FinishedUndo","Undo",t),this.ue=!1}}},Re.prototype.canRedo=function(){if(!this.isEnabled||0<this.transactionLevel)return!1;var t=this.transactionToRedo;return!(null===t||!t.canRedo())},Re.prototype.redo=function(){if(this.canRedo()){var t=this.transactionToRedo;try{this.ue=!0,this.Eb("StartingRedo","Redo",t),this.se++,t.redo()}catch(e){Ci("redo error: "+e.toString())}finally{this.Eb("FinishedRedo","Redo",t),this.ue=!1}}},Re.prototype.Eb=function(t,e,n){void 0===n&&(n=null);var s=new Ne;for(s.change=Jo,s.propertyName=t,s.object=n,s.oldValue=e,t=this.models;t.next();)s.model=e=t.value,e.ks(s)},Re.prototype.fv=function(t){if(this.isEnabled&&!this.isUndoingRedoing&&!this.skipsEvent(t)){var e=this.currentTransaction;null===e&&(this.Rq=e=new _e);var n=t.copy();(e=e.changes).ea(),e.add(n),e.freeze(),this.checksTransactionLevel&&0>=this.transactionLevel&&!this.Ot&&(null!==(t=t.diagram)&&!1===t.Oi||Ci("Change not within a transaction: "+n.toString()))}},Re.prototype.skipsEvent=function(t){if(null===t||0>t.change.value)return!0;if(null===(t=t.object))return!1;if(void 0!==t.layer){if(null!==(t=t.layer)&&t.isTemporary)return!0}else if(t.isTemporary)return!0;return!1},kt.Object.defineProperties(Re.prototype,{models:{get:function(){return this.au.iterator}},isEnabled:{get:function(){return this.vd},set:function(t){this.vd=t}},transactionToUndo:{get:function(){return 0<=this.historyIndex&&this.historyIndex<=this.history.count-1?this.history.J(this.historyIndex):null}},transactionToRedo:{get:function(){return this.historyIndex<this.history.count-1?this.history.J(this.historyIndex+1):null}},isUndoingRedoing:{get:function(){return this.ue}},history:{get:function(){return this.C}},maxHistoryLength:{get:function(){return this.o},set:function(t){this.o=t}},historyIndex:{get:function(){return this.se}},currentTransaction:{get:function(){return this.Rq}},transactionLevel:{get:function(){return this.xi}},isInTransaction:{get:function(){return 0<this.xi}},checksTransactionLevel:{get:function(){return this.j},set:function(t){this.j=t}},nestedTransactionNames:{get:function(){return this.ze}},isPendingClear:{get:function(){return this.Tt},set:function(t){this.Tt=t}},isPendingUnmodified:{get:function(){return this.Ut},set:function(t){this.Ut=t}},isInternalTransaction:{get:function(){return this.Rt},set:function(t){this.Rt=t}},isJustDiscarded:{get:function(){return this.lr}}}),Re.prototype.handleChanged=Re.prototype.fv,Re.prototype.redo=Re.prototype.redo,Re.prototype.undo=Re.prototype.undo,Re.prototype.canUndo=Re.prototype.canUndo,Re.prototype.rollbackTransaction=Re.prototype.Hf,Re.prototype.commitTransaction=Re.prototype.Xa,Re.prototype.startTransaction=Re.prototype.xa,Re.prototype.removeModel=Re.prototype.uy,Re.prototype.addModel=Re.prototype.yx,Re.prototype.clear=Re.prototype.clear,Re.className="UndoManager",zt.prototype.toString=function(){return""!==this.name?this.name+" Tool":Be(this.constructor)},zt.prototype.updateAdornments=function(){},zt.prototype.canStart=function(){return this.isEnabled},zt.prototype.doStart=function(){},zt.prototype.doActivate=function(){this.isActive=!0},zt.prototype.doDeactivate=function(){this.isActive=!1},zt.prototype.doStop=function(){},zt.prototype.doCancel=function(){this.transactionResult=null,this.stopTool()},zt.prototype.stopTool=function(){var t=this.diagram;t.currentTool===this&&(t.currentTool=null,t.currentCursor="")},zt.prototype.doMouseDown=function(){!this.isActive&&this.canStart()&&this.doActivate()},zt.prototype.doMouseMove=function(){},zt.prototype.doMouseUp=function(){this.stopTool()},zt.prototype.doMouseWheel=function(){},zt.prototype.canStartMultiTouch=function(){return!0},zt.prototype.standardPinchZoomStart=function(){var t=this.diagram,e=t.lastInput,n=e.$p(0,A.allocAt(NaN,NaN)),s=e.$p(1,A.allocAt(NaN,NaN));if(n.u()&&s.u()&&(this.doCancel(),t.cm("hasGestureZoom"))){t.ax=t.scale;var a=s.x-n.x,u=s.y-n.y;t.kx=Math.sqrt(a*a+u*u),e.bubbles=!1}A.free(n),A.free(s)},zt.prototype.standardPinchZoomMove=function(){var t=this.diagram,e=t.lastInput,n=e.$p(0,A.allocAt(NaN,NaN)),s=e.$p(1,A.allocAt(NaN,NaN));if(n.u()&&s.u()&&(this.doCancel(),t.cm("hasGestureZoom"))){var a=s.x-n.x,u=s.y-n.y;u=Math.sqrt(a*a+u*u)/t.kx,a=new A((Math.min(s.x,n.x)+Math.max(s.x,n.x))/2,(Math.min(s.y,n.y)+Math.max(s.y,n.y))/2);var c=t.commandHandler;if((u*=t.ax)!==t.scale&&c.canResetZoom(u)){var f=t.zoomPoint;t.zoomPoint=a,c.resetZoom(u),t.zoomPoint=f}e.bubbles=!1}A.free(n),A.free(s)},zt.prototype.doKeyDown=function(){"Esc"===this.diagram.lastInput.key&&this.doCancel()},zt.prototype.doKeyUp=function(){},zt.prototype.xa=function(t){return void 0===t&&(t=this.name),this.transactionResult=null,this.diagram.xa(t)},zt.prototype.stopTransaction=function(){var t=this.diagram;return null===this.transactionResult?t.Hf():t.Xa(this.transactionResult)},zt.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.lastInput,n=t.am(e.documentPoint,!1);if(null!==n){if(Se?e.meta:e.control){for(t.S("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!e.isSelected),t.S("ChangedSelection",t.selection)}else if(e.shift){if(!n.isSelected){for(t.S("ChangingSelection",t.selection),e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&(e.isSelected=!0),t.S("ChangedSelection",t.selection)}}else if(!n.isSelected){for(e=n;null!==e&&!e.canSelect();)e=e.containingGroup;null!==e&&t.select(e)}}else!e.left||(Se?e.meta:e.control)||e.shift||t.clearSelection()}},zt.prototype.standardMouseClick=function(t,e){void 0===t&&(t=null),void 0===e&&(e=function(a){return!a.layer.isTemporary});var n=this.diagram,s=n.lastInput;return t=n.Zb(s.documentPoint,t,e),s.targetObject=t,function Bw(t,e,n){if(e.handled=!1,null===t||t.Ef()){var s=0;e.left?s=1===e.clickCount?1:2===e.clickCount?2:1:e.right&&1===e.clickCount&&(s=3);var a="ObjectSingleClicked";if(null!==t){switch(s){case 1:a="ObjectSingleClicked";break;case 2:a="ObjectDoubleClicked";break;case 3:a="ObjectContextClicked"}0!==s&&n.S(a,t)}else{switch(s){case 1:a="BackgroundSingleClicked";break;case 2:a="BackgroundDoubleClicked";break;case 3:a="BackgroundContextClicked"}0!==s&&n.S(a)}if(null!==t)for(;null!==t;){switch(n=null,s){case 1:n=t.click;break;case 2:n=t.doubleClick?t.doubleClick:t.click;break;case 3:n=t.contextClick}if(null!==n&&(n(e,t),e.handled))break;t=t.panel}else{switch(t=null,s){case 1:t=n.click;break;case 2:t=n.doubleClick?n.doubleClick:n.click;break;case 3:t=n.contextClick}null!==t&&t(e)}}}(t,s,n),s.handled},zt.prototype.standardMouseOver=function(){var t=this.diagram,e=t.lastInput;if(!0!==t.animationManager.tb){var n=t.skipsUndoManager;t.skipsUndoManager=!0;var s=t.viewportBounds.$(e.documentPoint)?t.Zb(e.documentPoint,null,null):null;e.targetObject=s;var a=!1;if(s!==t.Kk){var u=t.Kk,c=u;for(t.Kk=s,this.doCurrentObjectChanged(u,s),e.handled=!1;null!==u;){var f=u.mouseLeave;if(null!==f&&(s===u||null!==s&&s.sg(u)||(f(e,u,s),a=!0,e.handled)))break;u=u.panel}for(u=c,e.handled=!1;null!==s&&(null===(c=s.mouseEnter)||!(u===s||null!==u&&u.sg(s)||(c(e,s,u),a=!0,e.handled)));)s=s.panel;s=t.Kk}if(null!==s){for(u=s,c="";null!==u&&""===(c=u.cursor);)u=u.panel;for(t.currentCursor=c,e.handled=!1,u=s;null!==u&&(null===(s=u.mouseOver)||(s(e,u),a=!0,!e.handled));)u=u.panel}else t.currentCursor="",null!==(s=t.mouseOver)&&(s(e),a=!0);a&&t.Gb(),t.skipsUndoManager=n}},zt.prototype.doCurrentObjectChanged=function(){},zt.prototype.standardMouseWheel=function(){var t=this.diagram,e=t.lastInput,n=e.delta;if(0!==n&&t.documentBounds.u()){var s=t.commandHandler,a=t.toolManager.mouseWheelBehavior;if(null!==s&&(a===Rf&&!e.shift||a===hu&&e.control))(0<n?s.canIncreaseZoom():s.canDecreaseZoom())&&(a=t.zoomPoint,t.zoomPoint=e.viewPoint,0<n?s.increaseZoom():s.decreaseZoom(),t.zoomPoint=a),e.bubbles=!1;else if(a===Rf&&e.shift||a===hu&&!e.control){s=t.position.copy();var u=0<n?n:-n,c=e.event,f=c.deltaMode;if(a=c.deltaX,c=c.deltaY,(N0||dS)&&(f=1,0<a&&(a=3),0>a&&(a=-3),0<c&&(c=3),0>c&&(c=-3)),void 0===f||void 0===a||void 0===c||0===a&&0===c||e.shift)!e.shift&&t.allowVerticalScroll?t.scroll("pixel",0<n?"up":"down",u=3*u*t.scrollVerticalLineChange):e.shift&&t.allowHorizontalScroll&&t.scroll("pixel",0<n?"left":"right",u=3*u*t.scrollHorizontalLineChange);else{switch(f){case 0:default:n="pixel";break;case 1:n="line";break;case 2:n="page"}0!==a&&t.allowHorizontalScroll&&(0<(a*=t.scrollHorizontalLineChange/16)?t.scroll(n,"left",-a):t.scroll(n,"right",a)),0!==c&&t.allowVerticalScroll&&(0<(c*=t.scrollVerticalLineChange/16)?t.scroll(n,"up",-c):t.scroll(n,"down",c))}t.position.A(s)||(e.bubbles=!1)}}},zt.prototype.standardWaitAfter=function(t,e){void 0===e&&(e=this.diagram.lastInput),this.cancelWaitAfter();var n=this,s=e.clone(this.Wy);this.gs=lu(function(){n.doWaitAfter(s)},t)},zt.prototype.cancelWaitAfter=function(){-1!==this.gs&&gt.clearTimeout(this.gs),this.gs=-1},zt.prototype.doWaitAfter=function(){},zt.prototype.findToolHandleAt=function(t,e){return null===(t=this.diagram.Zb(t,function(n){for(;null!==n&&!(n.panel instanceof Rt);)n=n.panel;return n}))?null:t.part.category===e?t:null},zt.prototype.isBeyondDragSize=function(t,e){var n=this.diagram;void 0===t&&(t=n.firstInput.viewPoint),void 0===e&&(e=n.lastInput.viewPoint);var s=n.toolManager.dragSize,a=s.width;return s=s.height,n.firstInput.isTouchEvent&&(a+=6,s+=6),Math.abs(e.x-t.x)>a||Math.abs(e.y-t.y)>s},kt.Object.defineProperties(zt.prototype,{diagram:{get:function(){return this.D},set:function(t){t instanceof U&&(this.D=t)}},name:{get:function(){return this.na},set:function(t){this.na=t}},isEnabled:{get:function(){return this.vd},set:function(t){this.vd=t}},isActive:{get:function(){return this.Rb},set:function(t){this.Rb=t}},transactionResult:{get:function(){return this.bj},set:function(t){this.bj=t}}}),zt.prototype.startTransaction=zt.prototype.xa,zt.className="Tool",Wt(be,zt),be.prototype.initializeStandardTools=function(){},be.prototype.updateAdornments=function(t){var e=this.currentToolTip;if(e instanceof Rt&&this.Qq===t){var n=e.adornedObject;(null!==t?n.part===t:null===n)?this.showToolTip(e,n):this.hideToolTip()}},be.prototype.doMouseDown=function(){var t=this.diagram,e=t.lastInput;if(e.isTouchEvent&&this.gestureBehavior===Zg&&(e.bubbles=!1),e.isMultiTouch){if(this.cancelWaitAfter(),this.gestureBehavior===Lf)return void(e.bubbles=!0);if(this.gestureBehavior===Zg)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomStart()}for(var n=this.mouseDownTools.length,s=0;s<n;s++){var a=this.mouseDownTools.J(s);if(a.diagram=this.diagram,a.canStart())return t.doFocus(),t.currentTool=a,void(t.currentTool===a&&(a.isActive||a.doActivate(),a.doMouseDown()))}1===t.lastInput.button&&(this.mouseWheelBehavior===hu?this.mouseWheelBehavior=Rf:this.mouseWheelBehavior===Rf&&(this.mouseWheelBehavior=hu)),this.doActivate(),this.standardWaitAfter(this.holdDelay,e)},be.prototype.doMouseMove=function(){var t=this.diagram,e=t.lastInput;if(e.isMultiTouch){if(this.gestureBehavior===Lf)return void(e.bubbles=!0);if(this.gestureBehavior===Zg)return;if(t.currentTool.canStartMultiTouch())return void t.currentTool.standardPinchZoomMove()}if(this.isActive)for(var n=this.mouseMoveTools.length,s=0;s<n;s++){var a=this.mouseMoveTools.J(s);if(a.diagram=this.diagram,a.canStart())return t.doFocus(),t.currentTool=a,void(t.currentTool===a&&(a.isActive||a.doActivate(),a.doMouseMove()))}Gw(this,t),null===(t=e.event)||"pointermove"!==t.type&&t.cancelable||(e.bubbles=!0)},be.prototype.doCurrentObjectChanged=function(t,e){null===(t=this.currentToolTip)||null!==e&&t instanceof Rt&&(e===t||e.sg(t))||this.hideToolTip()},be.prototype.doWaitAfter=function(t){var e=this.diagram;e.Ca&&(this.doMouseHover(),this.isActive||this.doToolTip(),t.isTouchEvent&&!e.lastInput.handled&&((t=t.copy()).button=2,t.buttons=2,e.lastInput=t,e.ru=!0,e.doMouseUp()))},be.prototype.doMouseHover=function(){var t=this.diagram,e=t.lastInput;null===e.targetObject&&(e.targetObject=t.Zb(e.documentPoint,null,null));var n=e.targetObject;if(null!==n)for(e.handled=!1;null!==n&&(null===(t=this.isActive?n.mouseHold:n.mouseHover)||(t(e,n),!e.handled));)n=n.panel;else null!==(n=this.isActive?t.mouseHold:t.mouseHover)&&n(e)},be.prototype.doToolTip=function(){var t=this.diagram,e=t.lastInput;if(null===e.targetObject&&(e.targetObject=t.Zb(e.documentPoint,null,null)),null!==(e=e.targetObject)){if(!((t=this.currentToolTip)instanceof Rt)||e!==t&&!e.sg(t)){for(;null!==e;){if(null!==(t=e.toolTip))return void this.showToolTip(t,e);e=e.panel}this.hideToolTip()}}else null!==(e=t.toolTip)?this.showToolTip(e,null):this.hideToolTip()},be.prototype.showToolTip=function(t,e){var n=this.diagram;if(t!==this.currentToolTip&&this.hideToolTip(),t instanceof Rt){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category="ToolTip",null!==t.placeholder&&(t.placeholder.scale=n.scale);var s=t.diagram;null!==s&&s!==n&&s.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Ta(),this.positionToolTip(t,e)}else t instanceof sr&&t!==this.currentToolTip&&t.show(e,n,this);if(this.currentToolTip=t,-1!==this.Lj&&(gt.clearTimeout(this.Lj),this.Lj=-1),0<(t=this.toolTipDuration)&&t!==1/0){var a=this;this.Lj=lu(function(){a.hideToolTip()},t)}},be.prototype.positionToolTip=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),s=t.measuredBounds,a=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=s.width),n.x+s.width>a.right&&(n.x-=s.width+5/e.scale),n.x<a.x&&(n.x=a.x),n.y=n.y+20/e.scale+s.height>a.bottom?n.y-(s.height+5/e.scale):n.y+20/e.scale,n.y<a.y&&(n.y=a.y),t.position=n}},be.prototype.hideToolTip=function(){-1!==this.Lj&&(gt.clearTimeout(this.Lj),this.Lj=-1);var t=this.diagram,e=this.currentToolTip;null!==e&&(e instanceof Rt?(t.remove(e),null!==this.Qq&&this.Qq.Gf(e.category),e.data=null,e.adornedObject=null):e instanceof sr&&null!==e.hide&&e.hide(t,this),this.currentToolTip=null)},be.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.diagram;if(this.isActive)for(var e=this.mouseUpTools.length,n=0;n<e;n++){var s=this.mouseUpTools.J(n);if(s.diagram=this.diagram,s.canStart())return t.doFocus(),t.currentTool=s,void(t.currentTool===s&&(s.isActive||s.doActivate(),s.doMouseUp()))}t.doFocus(),this.doDeactivate()},be.prototype.doMouseWheel=function(){this.standardMouseWheel()},be.prototype.doKeyDown=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyDown()},be.prototype.doKeyUp=function(){var t=this.diagram;null!==t.commandHandler&&t.commandHandler.doKeyUp()},be.prototype.findTool=function(t){for(var e=this.mouseDownTools.length,n=0;n<e;n++){var s=this.mouseDownTools.J(n);if(s.name===t)return s}for(e=this.mouseMoveTools.length,n=0;n<e;n++)if((s=this.mouseMoveTools.J(n)).name===t)return s;for(e=this.mouseUpTools.length,n=0;n<e;n++)if((s=this.mouseUpTools.J(n)).name===t)return s;return null},be.prototype.replaceTool=function(t,e){null!==e&&(e.diagram=this.diagram);for(var n=this.mouseDownTools.length,s=0;s<n;s++){var a=this.mouseDownTools.J(s);if(a.name===t)return null!==e?this.mouseDownTools.Oc(s,e):this.mouseDownTools.eb(s),a}for(n=this.mouseMoveTools.length,s=0;s<n;s++)if((a=this.mouseMoveTools.J(s)).name===t)return null!==e?this.mouseMoveTools.Oc(s,e):this.mouseMoveTools.eb(s),a;for(n=this.mouseUpTools.length,s=0;s<n;s++)if((a=this.mouseUpTools.J(s)).name===t)return null!==e?this.mouseUpTools.Oc(s,e):this.mouseUpTools.eb(s),a;return null},be.prototype.Za=function(t,e,n){null!==e&&(e.name=t,e.diagram=this.diagram),this.findTool(t)?this.replaceTool(t,e):null!==e&&n.add(e)},kt.Object.defineProperties(be.prototype,{mouseWheelBehavior:{get:function(){return this.Ba},set:function(t){this.Ba=t}},gestureBehavior:{get:function(){return this.C},set:function(t){this.C=t}},currentToolTip:{get:function(){return this.j},set:function(t){this.j=t,this.Qq=null!==t&&t instanceof Rt?t.adornedPart:null}},mouseDownTools:{get:function(){return this.Hb}},mouseMoveTools:{get:function(){return this.Sb}},mouseUpTools:{get:function(){return this.sc}},hoverDelay:{get:function(){return this.wa},set:function(t){this.wa=t}},holdDelay:{get:function(){return this.L},set:function(t){this.L=t}},dragSize:{get:function(){return this.o},set:function(t){this.o=t.I()}},toolTipDuration:{get:function(){return this.Ma},set:function(t){this.Ma=t}}}),be.prototype.replaceStandardTool=be.prototype.Za;var hu=new Q(be,"WheelScroll",0),Rf=new Q(be,"WheelZoom",1),Os=new Q(be,"WheelNone",2),Xg=new Q(be,"GestureZoom",3),Zg=new Q(be,"GestureCancel",4),Lf=new Q(be,"GestureNone",5);function Me(){zt.call(this),this.name="Dragging",this.C=this.Sb=!0,this.o=this.Ma=this.wa=this.cg=null,this.sn=this.sc=!1,this.Kl=new A(NaN,NaN),this.Vr=new A,this.Hb=!0,this.Qk=100,this.Kg=[],this.ke=(new nt).freeze(),this.Ba=new _d,this.co=null,this.L="copy",this.Nd="",this.Od="no-drop"}function j0(t,e){if(t.dragsLink){var n=t.diagram;n.allowRelink&&(n.model.dk()&&1===e.count&&e.first()instanceof K?(t.draggedLink=e.first(),t.draggedLink.canRelinkFrom()&&t.draggedLink.canRelinkTo()&&t.draggedLink.Qj(),t.cg=n.toolManager.findTool("Relinking"),null===t.cg&&(t.cg=new $r,t.cg.diagram=n)):(t.draggedLink=null,t.cg=null))}}function jf(t){var e=t.diagram,n=e.skipsUndoManager;e.skipsUndoManager=!0,zw(t,e.lastInput,null),e.skipsUndoManager=n,t.Kg.length=0}function Uw(){var t=Fn;cu(t),H0(t);var e=t.diagram;t.Kl.u()&&(e.position=t.Kl),e.ug()}function Hf(t,e){if(null===t.copiedParts){var n=t.diagram;if((!e||!n.isReadOnly&&!n.isModelReadOnly)&&null!==t.draggedParts){var s=n.undoManager;for(s.isEnabled&&s.isInTransaction?null!==s.currentTransaction&&0<s.currentTransaction.changes.count&&(n.undoManager.Hf(),n.xa("Drag")):H0(t),n.skipsUndoManager=!e,n.partManager.addsToTemporaryLayer=!e,t.startPoint=n.firstInput.documentPoint,e=t.copiesEffectiveCollection?t.draggedParts.If():n.selection,e=n.Vj(e,n,!0),n=new xt,s=t.draggedParts.iterator;s.next();){var a=s.key;if(a.Mc()&&a.canCopy()){var u=e.H(a);null!==u&&(u.location=a.location,u.Ta(),n.add(u,t.Ad(u.location)))}}for(e=e.iterator;e.next();)(s=e.value)instanceof K&&s.canCopy()&&n.add(s,t.Ad());t.copiedParts=n,j0(t,n.If()),null!==t.draggedLink&&wa(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null,!0)}}}function cu(t){var e=t.diagram;if(null!==t.copiedParts){if(e.Qs(t.copiedParts.If(),!1),t.copiedParts=null,null!==t.draggedParts)for(var n=t.draggedParts.iterator;n.next();)n.key instanceof K&&(n.value.point=new A(0,0));t.doUpdateCursor(null,!0)}e.skipsUndoManager=!1,e.partManager.addsToTemporaryLayer=!1,t.startPoint=e.firstInput.documentPoint}function ri(t){if(null!==t.draggedLink){if(t.dragsLink&&null!==t.cg){var e=t.cg;e.diagram.remove(e.temporaryFromNode),e.diagram.remove(e.temporaryToNode)}t.draggedLink=null,t.cg=null}}function du(t,e,n){var s=t.diagram,a=t.startPoint,u=A.alloc();u.assign(s.lastInput.documentPoint),t.moveParts(e,u.ie(a),n),A.free(u),!0===s.Ie("temporaryPixelRatio")&&null===s.si&&30<s.Bx&&(ld(s),s.oq())}function H0(t){if(null!==t.draggedParts){for(var e=t.diagram,n=t.draggedParts.iterator;n.next();){var s=n.key;s.Mc()&&(s.location=n.value.point)}for(n=t.draggedParts.iterator;n.next();)if((s=n.key)instanceof K&&s.suspendsRouting){var a=n.value.point;t.draggedParts.add(s,t.Ad()),wa(s,-a.x,-a.y)}e.gd()}}function mi(t,e){var n=t.diagram;t.dragsLink&&(null!==t.draggedLink&&(t.draggedLink.fromNode=null,t.draggedLink.toNode=null),qo(t,!1));var s=t.findDragOverObject(e),a=n.lastInput;a.targetObject=s,t.doUpdateCursor(s,!1);var u=n.skipsUndoManager,c=!1;try{if(n.skipsUndoManager=!0,c=zw(t,a,s),!t.isActive&&null===Fn)return;var f=null!==s?s.part:null;if(null===f||n.handlesDragDropForTopLevelParts&&f.isTopLevel&&!(f instanceof _t)){var p=n.mouseDragOver;null!==p&&(p(a),c=!0)}if(!t.isActive&&null===Fn||(t.doDragOver(e,s),!t.isActive&&null===Fn))return}finally{n.skipsUndoManager=u,c&&n.gd()}t.co=s,n.isReadOnly||!n.allowMove&&!n.allowCopy||!n.allowHorizontalScroll&&!n.allowVerticalScroll||n.ns(a.viewPoint)}function zw(t,e,n){var s=!1,a=t.Kg.length,u=0<a?t.Kg[0]:null;if(n===u)return!1;e.handled=!1;for(var c=0;c<a;c++){var f=t.Kg[c],p=f.mouseDragLeave;if(null!==p&&(p(e,f,n),s=!0,e.handled))break}if(t.Kg.length=0,!t.isActive&&null===Fn||null===n)return s;for(e.handled=!1,a=n;null!==a;)t.Kg.push(a),a=Ab(a);for(a=t.Kg.length,n=0;n<a&&(null===(f=(c=t.Kg[n]).mouseDragEnter)||(f(e,c,u),s=!0,!e.handled));n++);return s}function Ab(t){var e=t.panel;return null!==e?e:t instanceof ft&&!(t instanceof _t)&&null!==(t=t.containingGroup)&&t.handlesDragDropForMembers?t:null}function Vf(t,e,n){var s=t.cg;if(null===s)return null;var a=t.diagram.qg(e,s.portGravity,function(g){return s.findValidLinkablePort(g,n)});t=A.alloc();var u=1/0,c=null;for(a=a.iterator;a.next();){var f=a.value;if(null!==f.part){var p=f.da(Ut,t);(p=e.xf(p))<u&&(c=f,u=p)}}return A.free(t),c}function qo(t,e){var n=t.draggedLink;if(null!==n&&!(2>n.pointsCount)){var s=t.diagram;if(!s.isReadOnly){var a=t.cg;if(null!==a){var u=null,c=null;null===n.fromNode&&null!==(u=Vf(t,n.i(0),!1))&&(c=u.part);var f=null,p=null;null===n.toNode&&null!==(f=Vf(t,n.i(n.pointsCount-1),!0))&&(p=f.part),a.isValidLink(c,u,p,f)?e?(n.defaultFromPoint=n.i(0),n.defaultToPoint=n.i(n.pointsCount-1),n.suspendsRouting=!1,n.fromNode=c,null!==u&&(n.fromPortId=u.portId),n.toNode=p,null!==f&&(n.toPortId=f.portId),n.fromPort!==s.oy&&s.S("LinkRelinked",n,s.oy),n.toPort!==s.py&&s.S("LinkRelinked",n,s.py)):wt(a,c,u,p,f):wt(a,null,null,null,null)}}}}function $w(t,e){var n=t.diagram;t.dragsLink&&qo(t,!0),jf(t);var s=t.findDragOverObject(e),a=n.lastInput;if(a.targetObject=s,null!==s){a.handled=!1;for(var u=s;null!==u;){var c=u.mouseDrop;if(null!==c&&(c(a,u),a.handled))break;V0(t,a,u),u=Ab(u)}}else null!==(u=n.mouseDrop)&&u(a);if(t.isActive||null!==Fn){for(a=(t.copiedParts||t.draggedParts).iterator;a.next();)(u=a.key)instanceof it&&u.linksConnected.each(function(f){f.suspendsRouting=!1});if(t.doDropOnto(e,s),t.isActive||null!==Fn){for(t=z.alloc(),e=n.selection.iterator;e.next();)(s=e.value)instanceof it&&ed(n,s,t);z.free(t)}}}function V0(t,e,n){n=n.part,!(t=t.diagram).handlesDragDropForTopLevelParts||!n.isTopLevel||n instanceof _t||null!==(n=t.mouseDrop)&&n(e)}function ed(t,e,n){var s=!1;if(e.getAvoidableRect(n),t.viewportBounds.Ge(n)&&(s=!0),0!==(t=t.Yu(n,function(a){return a.part},function(a){return a instanceof K},!0,function(a){return a instanceof K},s)).count)for(t=t.iterator;t.next();)!(n=t.value).Jd(e)&&n.isAvoiding&&n.Va()}function B0(t,e,n,s){if(null===t.copiedParts){var a=t.diagram;if(!a.isReadOnly&&!a.isModelReadOnly){a.skipsUndoManager=!n,a.partManager.addsToTemporaryLayer=!n,t.startPoint=s.documentPoint,n=a.Vj(e,a,!0);var u=z.alloc();a=s=1/0;for(var c=-1/0,f=-1/0,p=e.iterator;p.next();){var g=p.value;if(g.isVisible()){var y=g.location;g=y.x,y=y.y,isNaN(g)||isNaN(y)||(g<s&&(s=g),y<a&&(a=y),g>c&&(c=g),y>f&&(f=y))}}for(s===1/0?u.h(0,0,0,0):u.h(s,a,c-s,f-a),s=u.x+u.width/2,a=u.y+u.height/2,z.free(u),u=t.Vr,c=new xt,f=A.alloc(),p=e.iterator;p.next();)(g=p.value)instanceof K&&g.canCopy()&&null!==(y=n.H(g))&&(y.points=g.points,wa(y,u.x-s,u.y-a),y.suspendsRouting=!0,c.add(y,t.Ad()));for(e=e.iterator;e.next();)(g=e.value).Mc()&&g.canCopy()&&null!==(p=n.H(g))&&(f.h(u.x-(s-(g=g.location).x),u.y-(a-g.y)),p.location=f,p.Ta(),c.add(p,t.Ad(f)));A.free(f),t.copiedParts=c,j0(t,c.If()),null!==t.draggedLink&&wa(n=t.draggedLink,t.startPoint.x-((e=n.routeBounds).x+e.width/2),t.startPoint.y-(e.y+e.height/2)),t.doUpdateCursor(null,!0)}}}be.className="ToolManager",be.WheelScroll=hu,be.WheelZoom=Rf,be.WheelNone=Os,be.GestureZoom=Xg,be.GestureCancel=Zg,be.GestureNone=Lf,Wt(Me,zt),Me.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly&&!t.allowDragOut||!t.allowMove&&!t.allowCopy&&!t.allowDragOut||!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.isTouchEvent&&e.timestamp-t.firstInput.timestamp<this.Qk))&&null!==this.findDraggablePart()},Me.prototype.findDraggablePart=function(){var t=this.diagram;if(null===(t=t.am(t.firstInput.documentPoint,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.containingGroup;return null!==t&&(t.canMove()||t.canCopy())?t:null},Me.prototype.standardMouseSelect=function(){var t=this.diagram;if(t.allowSelect){var e=t.am(t.firstInput.documentPoint,!1);if(null!==e){for(;null!==e&&!e.canSelect();)e=e.containingGroup;this.currentPart=e,null===this.currentPart||this.currentPart.isSelected||(t.S("ChangingSelection",t.selection),e=t.lastInput,(Se?e.meta:e.control)||e.shift||t.clearSelection(!0),this.currentPart.isSelected=!0,t.S("ChangedSelection",t.selection))}}},Me.prototype.doActivate=function(){var t=this.diagram;this.co=null,null===this.currentPart&&this.standardMouseSelect();var e=this.currentPart;null!==e&&(e.canMove()||e.canCopy())&&(t.Hu(!0),Fn=null,this.isActive=!0,this.Kl.set(t.position),j0(this,t.selection),this.Kg.length=0,t.animationManager.rc(),this.draggedParts=this.computeEffectiveCollection(t.selection,this.dragOptions),t.Ws=!0,!0===t.Ie("temporaryPixelRatio")&&30<t.Bx&&ld(t),np(t,this.draggedParts),this.xa("Drag"),this.startPoint=t.firstInput.documentPoint,t.isMouseCaptured=!0,t.allowDragOut&&(this.isDragOutStarted=!0,this.sn=!1,Fn=this,ho=this.diagram,this.doSimulatedDragOut()))},Me.prototype.computeEffectiveCollection=function(t,e){return this.diagram.commandHandler.computeEffectiveCollection(t,e)},Me.prototype.Ad=function(t){return new El(void 0===t?Ko:this.isGridSnapEnabled?new A(Math.round(1e3*t.x)/1e3,Math.round(1e3*t.y)/1e3):t.copy())},Me.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;if(t.Hu(!1),t.ug(),jf(this),_u(t,this.draggedParts),this.draggedParts=this.currentPart=this.co=null,this.sn=this.isDragOutStarted=!1,0<Ml.count){for(var e=Ml,n=e.length,s=0;s<n;s++){var a=e.J(s);ri(a),cu(a),jf(a),a.diagram.ug()}e.clear()}ri(this),this.Kl.h(NaN,NaN),null!==ho&&(ho.currentCursor=""),Fn=ho=null,cu(this),t.isMouseCaptured=!1,t.currentCursor="",t.Ws=!1,this.stopTransaction(),tp(t,!0)},Me.prototype.stopTransaction=function(){var t=this.diagram,e=zt.prototype.stopTransaction.call(this);return e&&null!==t.undoManager.transactionToUndo&&t.undoManager.transactionToUndo.Ns(),e},Me.prototype.doCancel=function(){cu(this),H0(this);var t=this.diagram;this.Kl.u()&&(t.position=this.Kl),this.stopTool()},Me.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput;this.isActive&&("Esc"===e.key?this.doCancel():e.key!==t.previousInput.key&&this.doMouseMove())},Me.prototype.doKeyUp=function(){this.isActive&&this.doMouseMove()},Me.prototype.moveParts=function(t,e,n){void 0===n&&(n=!1);var s=this.diagram;null!==s&&iv(s,t,e,this.dragOptions,n)},Me.prototype.findDragOverObject=function(t){var e=this;return mu(this.diagram,t,null,function(n){return!(n=null===n||!!(null===(n=n.part)||n instanceof Rt||n.layer.isTemporary||e.draggedParts&&e.draggedParts.contains(n)||e.copiedParts&&e.copiedParts.contains(n)))})},Me.prototype.doUpdateCursor=function(t,e){var n=this.diagram;(e||this.co!==t)&&(!this.diagram.currentTool.isActive||this.mayCopy()?n.currentCursor=this.copyCursor:this.mayMove()?n.currentCursor=this.moveCursor:this.mayDragOut()&&(n.currentCursor=this.nodropCursor))},Me.prototype.doDragOver=function(){},Me.prototype.doDropOnto=function(){},Me.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;this.simulatedMouseMove(e.event,e.documentPoint,e.targetDiagram)||null===this.currentPart||null===this.draggedParts||(this.mayCopy()?(Hf(this,!1),np(t,this.copiedParts),du(this,this.copiedParts,!1),_u(t,this.copiedParts)):this.mayMove()?(cu(this),du(this,this.draggedParts,!0)):this.mayDragOut()?(Hf(this,!1),du(this,this.copiedParts,!1)):cu(this),mi(this,t.lastInput.documentPoint))}},Me.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=t.lastInput;if(!this.simulatedMouseUp(e.event,e.documentPoint,e.targetDiagram)){e=!1;var n=this.mayCopy();if(n&&null!==this.copiedParts?(cu(this),Hf(this,!0),np(t,this.copiedParts),du(this,this.copiedParts,!1),_u(t,this.copiedParts),null!==this.copiedParts&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(a){a.isSelected=!0}))):(e=!0,cu(this),this.mayMove()&&(du(this,this.draggedParts,!0),mi(this,t.lastInput.documentPoint))),this.sn=!0,$w(this,t.lastInput.documentPoint),this.isActive){var s=n?this.copiedParts.If():this.draggedParts.If();this.copiedParts=null,e&&function Qo(t){if(null!==t.draggedParts)for(var e=t.draggedParts.iterator;e.next();){var n=e.key;n instanceof it&&(null===(n=n.containingGroup)||null===n.placeholder||t.draggedParts.contains(n)||n.placeholder.s())}}(this),t.Qa(),_u(t,this.draggedParts),this.transactionResult=n?"Copy":"Move",t.S(n?"SelectionCopied":"SelectionMoved",s)}this.stopTool(),n&&t.S("ChangedSelection",t.selection)}}},Me.prototype.simulatedMouseMove=function(t,e,n){if(null===Fn)return!1;var s=Fn.diagram;n instanceof U||(n=null);var a=ho;return n!==a&&(null!==a&&a!==s&&(a.ug(),Fn.isDragOutStarted=!1,null!==(a=a.toolManager.findTool("Dragging"))&&a.doSimulatedDragLeave()),ho=n,null!==n&&n!==s&&(Uw(),null!==(a=n.toolManager.findTool("Dragging"))&&(Ml.contains(a)||Ml.add(a),a.doSimulatedDragEnter())),this.doUpdateCursor(null,!0)),!(null===n||n===s||!n.allowDrop||n.isReadOnly||!n.allowInsert||(null!==(s=n.toolManager.findTool("Dragging"))&&(null!==t&&(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.wq(e),n.lastInput.down=!1,n.lastInput.up=!1,s.doSimulatedDragOver()),0))},Me.prototype.simulatedMouseUp=function(t,e,n){if(null===Fn)return!1;var s=ho,a=Fn.diagram;if(null===n)return Fn.doCancel(),!0;if(n!==s){var u=s.toolManager.findTool("Dragging");if(null!==s&&s!==a&&null!==u)return s.ug(),Fn.isDragOutStarted=!1,u.doSimulatedDragLeave(),!1;ho=n,null!==(s=n.toolManager.findTool("Dragging"))&&(Uw(),Ml.contains(s)||Ml.add(s),s.doSimulatedDragEnter())}return n!==this.diagram&&(null!==t?(void 0!==t.targetTouches&&(0<t.targetTouches.length?t=t.targetTouches[0]:0<t.changedTouches.length&&(t=t.changedTouches[0])),e=n.getMouse(t)):null===e&&(e=new A),n.lastInput.documentPoint=e,n.lastInput.viewPoint=n.wq(e),n.lastInput.down=!1,n.lastInput.up=!0,null!==(t=n.toolManager.findTool("Dragging"))&&t.doSimulatedDrop(),null!==(t=Fn)&&(n=t.mayCopy(),t.transactionResult=n?"Copy":"Move",t.stopTool()),!0)},Me.prototype.mayCopy=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowCopy||(Se?!t.lastInput.alt:!t.lastInput.control))return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},Me.prototype.mayDragOut=function(){if(!this.isCopyEnabled)return!1;var t=this.diagram;if(!t.allowDragOut||!t.allowCopy||t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canCopy())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canCopy())},Me.prototype.mayMove=function(){var t=this.diagram;if(t.isReadOnly||!t.allowMove)return!1;for(t=t.selection.iterator;t.next();)if(t.value.canMove())return!0;return!(null===this.draggedLink||!this.dragsLink||!this.draggedLink.canMove())},Me.prototype.computeBorder=function(t,e,n){return this.sn||null===this.draggedParts||this.draggedParts.contains(t)?null:n.assign(e)},Me.prototype.Yz=function(){return Fn},Me.prototype.mayDragIn=function(){var t=this.diagram;return!(!t.allowDrop||t.isReadOnly||t.isModelReadOnly||!t.allowInsert)&&!(null===Fn||Fn.diagram.model.dataFormat!==t.model.dataFormat)},Me.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.diagram;t.animationManager.rc(),ue(t),t.animationManager.rc(),null!==(t=Fn)&&(t.diagram.Ws=!1),this.doUpdateCursor(null,!0)}},Me.prototype.doSimulatedDragLeave=function(){null!==Fn&&Fn.doSimulatedDragOut(),this.doCancel()},Me.prototype.doSimulatedDragOver=function(){var t=this.diagram;t.animationManager.Um=!0;var e=Fn;if(null!==e&&null!==e.draggedParts){if(!this.mayDragIn())return;B0(this,e.draggedParts.If(),!1,t.firstInput),du(this,this.copiedParts,!1),mi(this,t.lastInput.documentPoint)}t.animationManager.Um=!1},Me.prototype.doSimulatedDrop=function(){var t=this.diagram,e=Fn;if(null!==e){var n=e.diagram;if(e.sn=!0,cu(this),!this.mayDragIn())return;t.animationManager.Um=!0,t.S("ChangingSelection",t.selection),this.xa("Drop"),B0(this,e.draggedParts.If(),!0,t.lastInput),du(this,this.copiedParts,!1),null!==this.copiedParts&&(t.clearSelection(!0),this.copiedParts.iteratorKeys.each(function(s){s.isSelected=!0})),$w(this,t.lastInput.documentPoint),t.Qa(),e=t.selection,null!==this.copiedParts?this.transactionResult="ExternalCopy":e=new nt,this.copiedParts=null,t.doFocus(),t.S("ExternalObjectsDropped",e,n),this.stopTransaction(),t.S("ChangedSelection",t.selection)}t.animationManager.Um=!1},Me.prototype.doSimulatedDragOut=function(){var t=this.diagram;t.Ws=!1,t.currentCursor=this.mayCopy()||this.mayMove()?"":this.nodropCursor,this.co=null},Me.prototype.computeMove=function(t,e,n,s){return null!==(n=this.diagram)?n.computeMove(t,e,this.dragOptions,s):new A},kt.Object.defineProperties(Me.prototype,{isCopyEnabled:{get:function(){return this.Sb},set:function(t){this.Sb=t}},copiesEffectiveCollection:{get:function(){return this.C},set:function(t){this.C=t}},dragOptions:{get:function(){return this.Ba},set:function(t){this.Ba=t}},isGridSnapEnabled:{get:function(){return this.dragOptions.isGridSnapEnabled},set:function(t){this.dragOptions.isGridSnapEnabled=t}},isComplexRoutingRealtime:{get:function(){return this.Hb},set:function(t){this.Hb=t}},isGridSnapRealtime:{get:function(){return this.dragOptions.isGridSnapRealtime},set:function(t){this.dragOptions.isGridSnapRealtime=t}},gridSnapCellSize:{get:function(){return this.dragOptions.gridSnapCellSize},set:function(t){this.dragOptions.gridSnapCellSize.A(t)||(t=t.I(),this.dragOptions.gridSnapCellSize=t)}},gridSnapCellSpot:{get:function(){return this.dragOptions.gridSnapCellSpot},set:function(t){this.dragOptions.gridSnapCellSpot.A(t)||(t=t.I(),this.dragOptions.gridSnapCellSpot=t)}},gridSnapOrigin:{get:function(){return this.dragOptions.gridSnapOrigin},set:function(t){this.dragOptions.gridSnapOrigin.A(t)||(t=t.I(),this.dragOptions.gridSnapOrigin=t)}},dragsLink:{get:function(){return this.dragOptions.dragsLink},set:function(t){this.dragOptions.dragsLink=t}},dragsTree:{get:function(){return this.dragOptions.dragsTree},set:function(t){this.dragOptions.dragsTree=t}},copyCursor:{get:function(){return this.L},set:function(t){this.L=t}},moveCursor:{get:function(){return this.Nd},set:function(t){this.Nd=t}},nodropCursor:{get:function(){return this.Od},set:function(t){this.Od=t}},currentPart:{get:function(){return this.wa},set:function(t){this.wa=t}},copiedParts:{get:function(){return this.o},set:function(t){this.o=t}},draggedParts:{get:function(){return this.Ma},set:function(t){this.Ma=t}},draggingParts:{get:function(){return null!==this.copiedParts?this.copiedParts.If():null!==this.draggedParts?this.draggedParts.If():this.ke}},draggedLink:{get:function(){return this.diagram.draggedLink},set:function(t){this.diagram.draggedLink=t}},isDragOutStarted:{get:function(){return this.sc},set:function(t){this.sc=t}},startPoint:{get:function(){return this.Vr},set:function(t){this.Vr.A(t)||this.Vr.assign(t)}},delay:{get:function(){return this.Qk},set:function(t){this.Qk=t}}}),Me.prototype.getDraggingSource=Me.prototype.Yz;var Ml=null,Fn=null,ho=null;function Bn(){zt.call(this),this.Od=100,this.Ba=!1,this.Th="pointer";var t=new K,e=new bt;e.isPanelMain=!0,e.stroke="blue",t.add(e),(e=new bt).toArrow="Standard",e.fill="blue",e.stroke="blue",t.add(e),t.layerName="Tool",this.$i=t,t=new it,(e=new bt).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Pf,t.add(e),t.selectable=!1,t.layerName="Tool",this.Zi=t,this.j=e,t=new it,(e=new bt).portId="",e.figure="Rectangle",e.fill=null,e.stroke="magenta",e.strokeWidth=2,e.desiredSize=Pf,t.add(e),t.selectable=!1,t.layerName="Tool",this.aj=t,this.o=e,this.Nd=this.sc=this.Hb=this.Ma=this.Sb=null,this.wa=!0,this.tk=new xt,this.ke=this.ii=this.Yi=null}function Bf(t,e,n,s){if(e===n)return!0;var a=e.fromNode;return!(null===a||!a.isLinkLabel||(s.add(a),!Bf(t,a.labeledLink,n,s)))||!(null===(e=e.toNode)||!e.isLinkLabel||(s.add(e),!Bf(t,e.labeledLink,n,s)))}function re(t,e,n,s,a){if(e===n)return!0;if(null===e||null===n)return!1;for(var u=e.linksConnected;u.next();){var c=u.value;if(c!==s&&(!a||c.isTreeLink)&&c.toNode===e&&(c=c.fromNode)!==e&&re(t,c,n,s,a))return!0}return!1}function Ob(t,e,n,s,a){if(n===s)return!0;if(null===n||null===s||e.contains(n))return!1;e.add(n);for(var u=n.linksConnected;u.next();){var c=u.value;if(c!==a&&c.toNode===n&&(c=c.fromNode)!==n&&Ob(t,e,c,s,a))return!0}return!1}function Yw(t,e,n,s,a){if(n===s)return!0;if(null===n||null===s||e.contains(n))return!1;e.add(n);for(var u=n.linksConnected;u.next();){var c=u.value;if(c!==a){var f=c.fromNode;if(c=c.toNode,(f=f===n?c:f)!==n&&Yw(t,e,f,s,a))return!0}}return!1}function Gi(){Bn.call(this),this.name="Linking",this.L={},this.C=null,this.K=Jg,this.Pd=null}Me.className="DraggingTool",Ml=new st,pe("draggingTool",function(){return this.findTool("Dragging")},function(t){this.Za("Dragging",t,this.mouseMoveTools)}),be.prototype.doCancel=function(){null!==Fn&&Fn.doCancel(),zt.prototype.doCancel.call(this)},Wt(Bn,zt),Bn.prototype.doStop=function(){this.diagram.ug(),this.originalToPort=this.originalToNode=this.originalFromPort=this.originalFromNode=this.originalLink=null,this.validPortsCache.clear(),this.targetPort=null},Bn.prototype.copyPortProperties=function(t,e,n,s,a){if(null!==t&&null!==e&&null!==n&&null!==s){var u=e.Af(),c=Dt.alloc();c.width=e.naturalBounds.width*u,c.height=e.naturalBounds.height*u,s.desiredSize=c,Dt.free(c),a?(s.toSpot=e.toSpot,s.toEndSegmentLength=e.toEndSegmentLength):(s.fromSpot=e.fromSpot,s.fromEndSegmentLength=e.fromEndSegmentLength),n.locationSpot=Ut,u=A.alloc(),n.location=e.da(Ut,u),A.free(u),s.angle=e.Ki(),null!==this.portTargeted&&this.portTargeted(t,e,n,s,a)}},Bn.prototype.setNoTargetPortProperties=function(t,e,n){null!==e&&(e.desiredSize=Pf,e.fromSpot=Vn,e.toSpot=Vn),null!==t&&(t.location=this.diagram.lastInput.documentPoint),null!==this.portTargeted&&this.portTargeted(null,null,t,e,n)},Bn.prototype.doMouseDown=function(){this.isActive&&this.doMouseMove()},Bn.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram;if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort&&this.targetPort.part instanceof it){var e=this.targetPort.part;this.isForwards?this.copyPortProperties(e,this.targetPort,this.temporaryToNode,this.temporaryToPort,!0):this.copyPortProperties(e,this.targetPort,this.temporaryFromNode,this.temporaryFromPort,!1)}else this.isForwards?this.setNoTargetPortProperties(this.temporaryToNode,this.temporaryToPort,!0):this.setNoTargetPortProperties(this.temporaryFromNode,this.temporaryFromPort,!1);(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.ns(t.lastInput.viewPoint)}},Bn.prototype.findValidLinkablePort=function(t,e){if(null===t)return null;var n=t.part;if(!(n instanceof it))return null;for(;null!==t;){var s=e?t.toLinkable:t.fromLinkable;if(!0===s&&(null!==t.portId||t instanceof it)&&(e?this.isValidTo(n,t):this.isValidFrom(n,t)))return t;if(!1===s)break;t=t.panel}return null},Bn.prototype.findTargetPort=function(t){var e=this.diagram,n=e.lastInput.documentPoint,s=this.portGravity;0>=s&&(s=.1);var a=this,u=e.qg(n,s,function(v){return a.findValidLinkablePort(v,t)},null,!0);for(s=1/0,e=null,u=u.iterator;u.next();){var c=u.value,f=c.part;if(f instanceof it){var p=c.da(Ut,A.alloc()),g=n.x-p.x,y=n.y-p.y;A.free(p),(p=g*g+y*y)<s&&(null!==(g=this.validPortsCache.H(c))?g&&(e=c,s=p):t&&this.isValidLink(this.originalFromNode,this.originalFromPort,f,c)||!t&&this.isValidLink(f,c,this.originalToNode,this.originalToPort)?(this.validPortsCache.add(c,!0),e=c,s=p):this.validPortsCache.add(c,!1))}}return null!==e&&(n=e.part)instanceof it&&(null===n.layer||n.layer.allowLink)?e:null},Bn.prototype.isValidFrom=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.fromLinkable))return!1;var n=e.fromMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalFromNode&&e===this.originalFromPort)return!0;if(null===(e=e.portId)&&(e=""),t.Wp(e).count>=n)return!1}return!0},Bn.prototype.isValidTo=function(t,e){if(null===t||null===e)return this.isUnconnectedLinkValid;if(this.diagram.currentTool===this&&(null!==t.layer&&!t.layer.allowLink||!0!==e.toLinkable))return!1;var n=e.toMaxLinks;if(1/0>n){if(null!==this.originalLink&&t===this.originalToNode&&e===this.originalToPort)return!0;if(null===(e=e.portId)&&(e=""),t.Gd(e).count>=n)return!1}return!0},Bn.prototype.isInSameNode=function(t,e){return null!==t&&null!==e&&(t===e||(e=e.part,null!==(t=t.part)&&t===e))},Bn.prototype.isLinked=function(t,e){if(null===t||null===e)return!1;var n=t.part;if(!(n instanceof it))return!1;null===(t=t.portId)&&(t="");var s=e.part;if(!(s instanceof it))return!1;for(null===(e=e.portId)&&(e=""),e=s.Gd(e);e.next();)if((s=e.value).fromNode===n&&s.fromPortId===t)return!0;return!1},Bn.prototype.isValidLink=function(t,e,n,s){if(!this.isValidFrom(t,e)||!this.isValidTo(n,s)||!(null===e||null===s||(e.fromLinkableSelfNode&&s.toLinkableSelfNode||!this.isInSameNode(e,s))&&(e.fromLinkableDuplicates&&s.toLinkableDuplicates||!this.isLinked(e,s)))||null!==this.originalLink&&(null!==t&&this.isLabelDependentOnLink(t,this.originalLink)||null!==n&&this.isLabelDependentOnLink(n,this.originalLink))||null!==t&&null!==n&&(null===t.data&&null!==n.data||null!==t.data&&null===n.data)||!this.isValidCycle(t,n,this.originalLink))return!1;if(null!==t){var a=t.linkValidation;if(null!==a&&!a(t,e,n,s,this.originalLink))return!1}return!(null!==n&&(a=n.linkValidation,null!==a&&!a(t,e,n,s,this.originalLink)))&&(null===(a=this.linkValidation)||a(t,e,n,s,this.originalLink))},Bn.prototype.isLabelDependentOnLink=function(t,e){if(null===t)return!1;var n=t.labeledLink;if(null===n)return!1;if(n===e)return!0;var s=new nt;return s.add(t),Bf(this,n,e,s)},Bn.prototype.isValidCycle=function(t,e,n){if(void 0===n&&(n=null),null===t||null===e)return this.isUnconnectedLinkValid;var s=this.diagram.validCycle;if(s!==Ch){if(s===yd){if(null!==(s=n||this.temporaryLink)&&!s.isTreeLink)return!0;for(s=e.linksConnected;s.next();){var a=s.value;if(a!==n&&a.isTreeLink&&a.toNode===e)return!1}return!re(this,t,e,n,!0)}if(s===ha){if(null!==(s=n||this.temporaryLink)&&!s.isTreeLink)return!0;for(s=t.linksConnected;s.next();)if((a=s.value)!==n&&a.isTreeLink&&a.fromNode===t)return!1;return!re(this,t,e,n,!0)}if(s===d_)return t===e?t=!0:((s=new nt).add(e),t=Ob(this,s,t,e,n)),!t;if(s===f_)return!re(this,t,e,n,!1);if(s===p_)return t===e?t=!0:((s=new nt).add(e),t=Yw(this,s,t,e,n)),!t}return!0},kt.Object.defineProperties(Bn.prototype,{portGravity:{get:function(){return this.Od},set:function(t){0<=t&&(this.Od=t)}},isUnconnectedLinkValid:{get:function(){return this.Ba},set:function(t){this.Ba=t}},linkingCursor:{get:function(){return this.Th},set:function(t){this.Th=t}},temporaryLink:{get:function(){return this.$i},set:function(t){this.$i=t}},temporaryFromNode:{get:function(){return this.Zi},set:function(t){(this.Zi=t)&&(this.j=t.port)}},temporaryFromPort:{get:function(){return this.j},set:function(t){if(null!==this.j){var e=this.j.panel;if(null!==e){var n=e.T.indexOf(this.j);e.eb(n),e.wb(n,t)}}this.j=t}},temporaryToNode:{get:function(){return this.aj},set:function(t){(this.aj=t)&&(this.o=t.port)}},temporaryToPort:{get:function(){return this.o},set:function(t){if(null!==this.o){var e=this.o.panel;if(null!==e){var n=e.T.indexOf(this.o);e.eb(n),e.wb(n,t)}}this.o=t}},originalLink:{get:function(){return this.Sb},set:function(t){this.Sb=t}},originalFromNode:{get:function(){return this.Ma},set:function(t){this.Ma=t}},originalFromPort:{get:function(){return this.Hb},set:function(t){this.Hb=t}},originalToNode:{get:function(){return this.sc},set:function(t){this.sc=t}},originalToPort:{get:function(){return this.Nd},set:function(t){this.Nd=t}},isForwards:{get:function(){return this.wa},set:function(t){this.wa=t}},validPortsCache:{get:function(){return this.tk}},targetPort:{get:function(){return this.Yi},set:function(t){this.Yi=t}},linkValidation:{get:function(){return this.ii},set:function(t){this.ii=t}},portTargeted:{get:function(){return this.ke},set:function(t){this.ke=t}}}),Bn.className="LinkingBaseTool",Wt(Gi,Bn),Gi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowLink||!t.model.Ds()||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},Gi.prototype.findLinkablePort=function(){var t=this.diagram,e=this.startObject;if(null===e&&(e=t.Zb(t.firstInput.documentPoint,null,null)),null===e||!((t=e.part)instanceof it))return null;var n=this.direction;if(n===Jg||n===G0){var s=this.findValidLinkablePort(e,!1);if(null!==s||this.startObject===t&&this.findValidLinkablePort(s=t.port,!1))return this.isForwards=!0,s}return n!==Jg&&n!==Ww||!(null!==(e=this.findValidLinkablePort(e,!0))||this.startObject===t&&this.findValidLinkablePort(e=t.port,!0))?null:(this.isForwards=!1,e)},Gi.prototype.doActivate=function(){var t=this.diagram,e=this.findLinkablePort();null===e?this.stopTool():(this.xa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.isForwards?(null===this.temporaryToNode||this.temporaryToNode.location.u()||(this.temporaryToNode.location=t.lastInput.documentPoint),this.originalFromPort=e,(e=this.originalFromPort.part)instanceof it&&(this.originalFromNode=e),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1)):(null===this.temporaryFromNode||this.temporaryFromNode.location.u()||(this.temporaryFromNode.location=t.lastInput.documentPoint),this.originalToPort=e,(e=this.originalToPort.part)instanceof it&&(this.originalToNode=e),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0)),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.temporaryLink.isTreeLink=this.isNewTreeLink(),this.temporaryLink.Va(),t.add(this.temporaryLink)),this.isActive=!0)},Gi.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},Gi.prototype.doStop=function(){Bn.prototype.doStop.call(this),this.startObject=null},Gi.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram,e=this.transactionResult=null,n=null,s=null,a=null,u=null;try{var c=this.targetPort=this.findTargetPort(this.isForwards);if(null!==c){var f=c.part;f instanceof it&&(this.isForwards?(null!==this.originalFromNode&&(e=this.originalFromNode,n=this.originalFromPort),s=f,a=c):(e=f,n=c,null!==this.originalToNode&&(s=this.originalToNode,a=this.originalToPort)))}else this.isForwards?null!==this.originalFromNode&&this.isUnconnectedLinkValid&&(e=this.originalFromNode,n=this.originalFromPort):null!==this.originalToNode&&this.isUnconnectedLinkValid&&(s=this.originalToNode,a=this.originalToPort);null!==e||null!==s?null!==(u=this.insertLink(e,n,s,a))?(null===c&&(this.isForwards?u.defaultToPoint=t.lastInput.documentPoint:u.defaultFromPoint=t.lastInput.documentPoint),t.allowSelect&&(t.S("ChangingSelection",t.selection),t.clearSelection(!0),u.isSelected=!0),this.transactionResult=this.name,t.S("LinkDrawn",u)):this.doNoLink(e,n,s,a):this.isForwards?this.doNoLink(this.originalFromNode,this.originalFromPort,null,null):this.doNoLink(null,null,this.originalToNode,this.originalToPort)}finally{this.stopTool(),u&&t.allowSelect&&t.S("ChangedSelection",t.selection)}}},Gi.prototype.isNewTreeLink=function(){var t=this.archetypeLinkData;if(null===t)return!0;if(t instanceof K)return t.isTreeLink;var e=this.diagram;return null===e||(t=e.partManager.getLinkCategoryForData(t),null===(e=e.partManager.findLinkTemplateForCategory(t))||e.isTreeLink)},Gi.prototype.insertLink=function(t,e,n,s){return this.diagram.partManager.insertLink(t,e,n,s)},Gi.prototype.doNoLink=function(){},kt.Object.defineProperties(Gi.prototype,{archetypeLinkData:{get:function(){return this.L},set:function(t){this.L=t}},archetypeLabelNodeData:{get:function(){return this.C},set:function(t){this.C=t}},direction:{get:function(){return this.K},set:function(t){this.K=t}},startObject:{get:function(){return this.Pd},set:function(t){this.Pd=t}}});var Jg=new Q(Gi,"Either",0),G0=new Q(Gi,"ForwardsOnly",0),Ww=new Q(Gi,"BackwardsOnly",0);function $r(){Bn.call(this),this.name="Relinking";var t=new bt;t.figure="Diamond",t.desiredSize=So,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=0,this.L=t,(t=new bt).figure="Diamond",t.desiredSize=So,t.fill="lightblue",t.stroke="dodgerblue",t.cursor=this.linkingCursor,t.segmentIndex=-1,this.Pd=t,this.C=null,this.gx=new z}function wt(t,e,n,s,a){null!==e?(t.copyPortProperties(e,n,t.temporaryFromNode,t.temporaryFromPort,!1),t.diagram.add(t.temporaryFromNode)):t.diagram.remove(t.temporaryFromNode),null!==s?(t.copyPortProperties(s,a,t.temporaryToNode,t.temporaryToPort,!0),t.diagram.add(t.temporaryToNode)):t.diagram.remove(t.temporaryToNode)}function Gt(){zt.call(this),this.name="LinkReshaping";var t=new bt;t.figure="Rectangle",t.desiredSize=Aw,t.fill="lightblue",t.stroke="dodgerblue",this.o=t,(t=new bt).figure="Diamond",t.desiredSize=So,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="move",this.C=t,this.L=3,this.ut=this.j=null,this.hx=new A,this.Fr=new st}function Eo(t,e,n,s,a,u){return u?Math.abs(e.y-n.y)<t.resegmentingDistance&&Math.abs(n.y-s.y)<t.resegmentingDistance&&Math.abs(s.y-a.y)<t.resegmentingDistance:Math.abs(e.x-n.x)<t.resegmentingDistance&&Math.abs(n.x-s.x)<t.resegmentingDistance&&Math.abs(s.x-a.x)<t.resegmentingDistance}Gi.className="LinkingTool",Gi.Either=Jg,Gi.ForwardsOnly=G0,Gi.BackwardsOnly=Ww,Wt($r,Bn),$r.prototype.updateAdornments=function(t){if(null!==t&&t instanceof K){var e="RelinkFrom",n=null;if(t.isSelected&&!this.diagram.isReadOnly){var s=t.selectionObject;null!==s&&t.canRelinkFrom()&&t.actualBounds.u()&&t.isVisible()&&s.actualBounds.u()&&s.Ff()&&null===(n=t.Yj(e))&&(n=this.makeAdornment(s,!1),t.xh(e,n))}null===n&&t.Gf(e),e="RelinkTo",n=null,t.isSelected&&!this.diagram.isReadOnly&&null!==(s=t.selectionObject)&&t.canRelinkTo()&&t.actualBounds.u()&&t.isVisible()&&s.actualBounds.u()&&s.Ff()&&(null===(n=t.Yj(e))?(n=this.makeAdornment(s,!0),t.xh(e,n)):n.s()),null===n&&t.Gf(e)}},$r.prototype.makeAdornment=function(t,e){var n=new Rt;return n.type=W.Link,null!==(e=e?this.toHandleArchetype:this.fromHandleArchetype)&&n.add(e.copy()),n.adornedObject=t,n},$r.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowRelink||!t.model.Ds()||!t.lastInput.left)return!1;var e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom");return null===e&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null!==e},$r.prototype.doActivate=function(){var t=this.diagram;if(null===this.originalLink){var e=this.handle;if(null===e&&null===(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkFrom"))&&(e=this.findToolHandleAt(t.firstInput.documentPoint,"RelinkTo")),null===e)return;var n=e.part;if(!(n instanceof Rt&&n.adornedPart instanceof K))return;this.handle=e,this.isForwards=null===n||"RelinkTo"===n.category,this.originalLink=n.adornedPart}this.xa(this.name),t.isMouseCaptured=!0,t.currentCursor=this.linkingCursor,this.originalFromPort=this.originalLink.fromPort,this.originalFromNode=this.originalLink.fromNode,this.originalToPort=this.originalLink.toPort,this.originalToNode=this.originalLink.toNode,this.gx.set(this.originalLink.actualBounds),null!==this.originalLink&&0<this.originalLink.pointsCount&&(null===this.originalLink.fromNode&&(null!==this.temporaryFromPort&&(this.temporaryFromPort.desiredSize=Xo),null!==this.temporaryFromNode&&(this.temporaryFromNode.location=this.originalLink.i(0))),null===this.originalLink.toNode&&(null!==this.temporaryToPort&&(this.temporaryToPort.desiredSize=Xo),null!==this.temporaryToNode&&(this.temporaryToNode.location=this.originalLink.i(this.originalLink.pointsCount-1)))),this.copyPortProperties(this.originalFromNode,this.originalFromPort,this.temporaryFromNode,this.temporaryFromPort,!1),this.copyPortProperties(this.originalToNode,this.originalToPort,this.temporaryToNode,this.temporaryToPort,!0),t.add(this.temporaryFromNode),t.add(this.temporaryToNode),null!==this.temporaryLink&&(null!==this.temporaryFromNode&&(this.temporaryLink.fromNode=this.temporaryFromNode),null!==this.temporaryToNode&&(this.temporaryLink.toNode=this.temporaryToNode),this.copyLinkProperties(this.originalLink,this.temporaryLink),this.temporaryLink.Va(),t.add(this.temporaryLink)),this.isActive=!0},$r.prototype.copyLinkProperties=function(t,e){if(null!==t&&null!==e){e.adjusting=t.adjusting,e.corner=t.corner;var n=t.curve;(n===Wh||n===Wa)&&(n=Ii),e.curve=n,e.curviness=t.curviness,e.isTreeLink=t.isTreeLink,e.points=t.points,e.routing=t.routing,e.smoothness=t.smoothness,e.fromSpot=t.fromSpot,e.fromEndSegmentLength=t.fromEndSegmentLength,e.fromShortLength=t.fromShortLength,e.toSpot=t.toSpot,e.toEndSegmentLength=t.toEndSegmentLength,e.toShortLength=t.toShortLength}},$r.prototype.doDeactivate=function(){this.isActive=!1;var t=this.diagram;t.remove(this.temporaryLink),t.remove(this.temporaryFromNode),t.remove(this.temporaryToNode),t.isMouseCaptured=!1,t.currentCursor="",this.stopTransaction()},$r.prototype.doStop=function(){Bn.prototype.doStop.call(this),this.handle=null},$r.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;this.transactionResult=null;var e=this.originalFromNode,n=this.originalFromPort,s=this.originalToNode,a=this.originalToPort,u=this.originalLink;try{if(this.targetPort=this.findTargetPort(this.isForwards),null!==this.targetPort){var c=this.targetPort.part;c instanceof it&&(this.isForwards?(s=c,a=this.targetPort):(e=c,n=this.targetPort))}else this.isUnconnectedLinkValid?this.isForwards?a=s=null:n=e=null:u=null;null!==u?(this.reconnectLink(u,this.isForwards?s:e,this.isForwards?a:n,this.isForwards),null===this.targetPort&&(this.isForwards?u.defaultToPoint=t.lastInput.documentPoint:u.defaultFromPoint=t.lastInput.documentPoint,u.Va()),this.transactionResult=this.name,t.S("LinkRelinked",u,this.isForwards?this.originalToPort:this.originalFromPort)):this.doNoRelink(this.originalLink,this.isForwards),this.originalLink.fq(this.gx)}finally{this.stopTool()}}},$r.prototype.reconnectLink=function(t,e,n,s){return n=null!==n&&null!==n.portId?n.portId:"",s?(t.toNode=e,t.toPortId=n):(t.fromNode=e,t.fromPortId=n),!0},$r.prototype.doNoRelink=function(){},kt.Object.defineProperties($r.prototype,{fromHandleArchetype:{get:function(){return this.L},set:function(t){this.L=t}},toHandleArchetype:{get:function(){return this.Pd},set:function(t){this.Pd=t}},handle:{get:function(){return this.C},set:function(t){if(null!==t&&!(t.part instanceof Rt))throw Error("new handle is not in an Adornment: "+t);this.C=t}}}),$r.className="RelinkingTool",pe("linkingTool",function(){return this.findTool("Linking")},function(t){this.Za("Linking",t,this.mouseMoveTools)}),pe("relinkingTool",function(){return this.findTool("Relinking")},function(t){this.Za("Relinking",t,this.mouseDownTools)}),Wt(Gt,zt),Gt.prototype.cv=function(t){return t&&t.Jr&&0!==t.Jr.value?t.Jr:Pi},Gt.prototype.Am=function(t,e){t.Jr=e},Gt.prototype.updateAdornments=function(t){if(null!==t&&t instanceof K){var e=null;if(t.isSelected&&!this.diagram.isReadOnly){var n=t.path;null!==n&&t.canReshape()&&t.actualBounds.u()&&t.isVisible()&&n.actualBounds.u()&&n.Ff()&&(null===(e=t.Yj(this.name))||e.$w!==t.pointsCount||e.vx!==t.resegmentable)&&null!==(e=this.makeAdornment(n))&&(e.$w=t.pointsCount,e.vx=t.resegmentable,t.xh(this.name,e))}null===e&&t.Gf(this.name)}},Gt.prototype.makeAdornment=function(t){var e=t.part,n=e.pointsCount,s=e.isOrthogonal,a=null;if(null!==e.points&&1<n){(a=new Rt).type=W.Link,n=e.firstPickIndex;var u=e.lastPickIndex,c=s?1:0;if(e.resegmentable&&e.computeCurve()!==pr)for(var f=n+c;f<u-c;f++){var p=this.makeResegmentHandle(t,f);null!==p&&(p.segmentIndex=f,p.segmentFraction=.5,p.fromMaxLinks=999,a.add(p))}for(c=n+1;c<u;c++)if(null!==(f=this.makeHandle(t,c))){if(f.segmentIndex=c,c!==n)if(c===n+1&&s){p=e.i(n);var g=e.i(n+1);V.w(p.x,g.x)&&V.w(p.y,g.y)&&(g=e.i(n-1)),V.w(p.x,g.x)?(this.Am(f,Ha),f.cursor="n-resize"):V.w(p.y,g.y)&&(this.Am(f,fh),f.cursor="w-resize")}else c===u-1&&s?(p=e.i(u-1),g=e.i(u),V.w(p.x,g.x)&&V.w(p.y,g.y)&&(p=e.i(u+1)),V.w(p.x,g.x)?(this.Am(f,Ha),f.cursor="n-resize"):V.w(p.y,g.y)&&(this.Am(f,fh),f.cursor="w-resize")):c!==u&&(this.Am(f,Is),f.cursor="move");a.add(f)}a.adornedObject=t}return a},Gt.prototype.makeHandle=function(){var t=this.handleArchetype;return null===t?null:t.copy()},Gt.prototype.makeResegmentHandle=function(){var t=this.midHandleArchetype;return null===t?null:t.copy()},Gt.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowReshape||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Gt.prototype.doActivate=function(){var t=this.diagram;if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle){var e=this.handle.part.adornedPart;if(e instanceof K){if(this.ut=e,t.isMouseCaptured=!0,this.xa(this.name),e.resegmentable&&999===this.handle.fromMaxLinks){var n=e.points.copy(),s=this.getResegmentingPoint();if(n.wb(this.handle.segmentIndex+1,s),e.isOrthogonal&&n.wb(this.handle.segmentIndex+1,s),e.points=n,e.Mb(),e.updateAdornments(),this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name),null===this.handle)return void this.doDeactivate()}this.hx=e.i(this.handle.segmentIndex),this.Fr=e.points.copy(),this.isActive=!0}}},Gt.prototype.doDeactivate=function(){this.stopTransaction(),this.ut=this.handle=null,this.isActive=this.diagram.isMouseCaptured=!1},Gt.prototype.doCancel=function(){var t=this.adornedLink;null!==t&&(t.points=this.Fr),this.stopTool()},Gt.prototype.getResegmentingPoint=function(){return this.handle.da(Ut)},Gt.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeReshape(t.lastInput.documentPoint),this.reshape(t))},Gt.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.computeReshape(t.lastInput.documentPoint);if(this.reshape(e),null!==(e=this.adornedLink)&&e.resegmentable){var n=this.handle.segmentIndex,s=e.i(n-1),a=e.i(n),u=e.i(n+1);if(e.isOrthogonal){if(n>e.firstPickIndex+1&&n<e.lastPickIndex-1){var c=e.i(n-2);if(Math.abs(s.x-a.x)<this.resegmentingDistance&&Math.abs(s.y-a.y)<this.resegmentingDistance&&(Eo(this,c,s,a,u,!0)||Eo(this,c,s,a,u,!1))){var f=e.points.copy();Eo(this,c,s,a,u,!0)?(f.Oc(n-2,new A(c.x,(u.y+c.y)/2)),f.Oc(n+1,new A(u.x,(u.y+c.y)/2))):(f.Oc(n-2,new A((u.x+c.x)/2,c.y)),f.Oc(n+1,new A((u.x+c.x)/2,u.y))),f.eb(n),f.eb(n-1),e.points=f,e.Mb()}else c=e.i(n+2),Math.abs(a.x-u.x)<this.resegmentingDistance&&Math.abs(a.y-u.y)<this.resegmentingDistance&&(Eo(this,s,a,u,c,!0)||Eo(this,s,a,u,c,!1))&&(f=e.points.copy(),Eo(this,s,a,u,c,!0)?(f.Oc(n-1,new A(s.x,(s.y+c.y)/2)),f.Oc(n+2,new A(c.x,(s.y+c.y)/2))):(f.Oc(n-1,new A((s.x+c.x)/2,s.y)),f.Oc(n+2,new A((s.x+c.x)/2,c.y))),f.eb(n+1),f.eb(n),e.points=f,e.Mb())}}else c=A.alloc(),V.Ih(s.x,s.y,u.x,u.y,a.x,a.y,c)&&c.xf(a)<this.resegmentingDistance*this.resegmentingDistance&&((s=e.points.copy()).eb(n),e.points=s,e.Mb()),A.free(c)}t.Qa(),this.transactionResult=this.name,t.S("LinkReshaped",this.adornedLink,this.Fr)}this.stopTool()},Gt.prototype.reshape=function(t){var e=this.adornedLink;e.Lh();var n=this.handle.segmentIndex,s=this.cv(this.handle);if(e.isOrthogonal)if(n===e.firstPickIndex+1)n=e.firstPickIndex+1,s===Ha?(e.M(n,e.i(n-1).x,t.y),e.M(n+1,e.i(n+2).x,t.y)):s===fh&&(e.M(n,t.x,e.i(n-1).y),e.M(n+1,t.x,e.i(n+2).y));else if(n===e.lastPickIndex-1)n=e.lastPickIndex-1,s===Ha?(e.M(n-1,e.i(n-2).x,t.y),e.M(n,e.i(n+1).x,t.y)):s===fh&&(e.M(n-1,t.x,e.i(n-2).y),e.M(n,t.x,e.i(n+1).y));else{var a=e.i(s=n),u=e.i(s-1),c=e.i(s+1);V.w(u.x,a.x)&&V.w(a.y,c.y)?(V.w(u.x,e.i(s-2).x)&&!V.w(u.y,e.i(s-2).y)?(e.l(s,t.x,u.y),n++,s++):e.M(s-1,t.x,u.y),V.w(c.y,e.i(s+2).y)&&!V.w(c.x,e.i(s+2).x)?e.l(s+1,c.x,t.y):e.M(s+1,c.x,t.y)):V.w(u.y,a.y)&&V.w(a.x,c.x)?(V.w(u.y,e.i(s-2).y)&&!V.w(u.x,e.i(s-2).x)?(e.l(s,u.x,t.y),n++,s++):e.M(s-1,u.x,t.y),V.w(c.x,e.i(s+2).x)&&!V.w(c.y,e.i(s+2).y)?e.l(s+1,t.x,c.y):e.M(s+1,t.x,c.y)):V.w(u.x,a.x)&&V.w(a.x,c.x)?(V.w(u.x,e.i(s-2).x)&&!V.w(u.y,e.i(s-2).y)?(e.l(s,t.x,u.y),n++,s++):e.M(s-1,t.x,u.y),V.w(c.x,e.i(s+2).x)&&!V.w(c.y,e.i(s+2).y)?e.l(s+1,t.x,c.y):e.M(s+1,t.x,c.y)):V.w(u.y,a.y)&&V.w(a.y,c.y)&&(V.w(u.y,e.i(s-2).y)&&!V.w(u.x,e.i(s-2).x)?(e.l(s,u.x,t.y),n++,s++):e.M(s-1,u.x,t.y),V.w(c.y,e.i(s+2).y)&&!V.w(c.x,e.i(s+2).x)?e.l(s+1,c.x,t.y):e.M(s+1,c.x,t.y)),e.M(n,t.x,t.y)}else e.M(n,t.x,t.y),a=e.fromPort,null!==(s=e.fromNode)&&null!==(u=s.findVisibleNode())&&u!==s&&(a=(s=u).port),1===n&&e.computeSpot(!0,a).Bc()&&(u=a.da(Ut,A.alloc()),s=e.getLinkPointFromPoint(s,a,u,t,!0,A.alloc()),e.M(0,s.x,s.y),A.free(u),A.free(s)),a=e.toPort,null!==(s=e.toNode)&&null!==(u=s.findVisibleNode())&&u!==s&&(a=(s=u).port),n===e.pointsCount-2&&e.computeSpot(!1,a).Bc()&&(n=a.da(Ut,A.alloc()),t=e.getLinkPointFromPoint(s,a,n,t,!1,A.alloc()),e.M(e.pointsCount-1,t.x,t.y),A.free(n),A.free(t));e.vf()},Gt.prototype.computeReshape=function(t){var e=this.adornedLink,n=this.handle.segmentIndex;switch(this.cv(this.handle)){case Is:return t;case Ha:return new A(e.i(n).x,t.y);case fh:return new A(t.x,e.i(n).y);default:return e.i(n)}},kt.Object.defineProperties(Gt.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},midHandleArchetype:{get:function(){return this.C},set:function(t){this.C=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof Rt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedLink:{get:function(){return this.ut}},resegmentingDistance:{get:function(){return this.L},set:function(t){this.L=t}},originalPoint:{get:function(){return this.hx}},originalPoints:{get:function(){return this.Fr}}}),Gt.prototype.setReshapingBehavior=Gt.prototype.Am,Gt.prototype.getReshapingBehavior=Gt.prototype.cv;var Pi=new Q(Gt,"None",0),fh=new Q(Gt,"Horizontal",1),Ha=new Q(Gt,"Vertical",2),Is=new Q(Gt,"All",3);function oi(){zt.call(this),this.name="Resizing",this.Zf=new Dt(1,1).freeze(),this.Yf=new Dt(9999,9999).freeze(),this.zg=new Dt(NaN,NaN).freeze(),this.C=!1,this.L=!0,this.le=null;var t=new bt;t.alignmentFocus=Ut,t.figure="Rectangle",t.desiredSize=Aw,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.o=t,this.j=null,this.Er=new A,this.ex=new Dt,this.Io=new A,this.Lt=new Dt(0,0),this.Kt=new Dt(1/0,1/0),this.Jt=new Dt(1,1)}function Xi(){zt.call(this),this.name="Rotating",this.Ba=45,this.wa=2,this.Io=new A,this.le=null;var t=new bt;t.figure="Ellipse",t.desiredSize=So,t.fill="lightblue",t.stroke="dodgerblue",t.strokeWidth=1,t.cursor="pointer",this.o=t,this.j=null,this.bx=0,this.Kr=new A(NaN,NaN),this.C=0,this.L=50}function Gf(){zt.call(this),this.name="ClickSelecting"}function Va(){zt.call(this),this.name="Action",this.uk=null}function ua(){zt.call(this),this.name="ClickCreating",this.dj=null,this.o=!0,this.j=!1,this.Pw=new A(0,0)}function co(){zt.call(this),this.name="DragSelecting",this.Qk=175,this.o=!1;var t=new ft;t.layerName="Tool",t.selectable=!1;var e=new bt;e.name="SHAPE",e.figure="Rectangle",e.fill=null,e.stroke="magenta",t.add(e),this.j=t}function Rn(){zt.call(this),this.name="Panning",this.eu=new A,this.Vy=new A,this.yg=!1;var t=this;this.lx=function(){var e=t.diagram;null!==e&&e.removeEventListener(gt.document,"scroll",t.lx,!1),t.stopTool()}}function sr(){this.L=this.C=this.j=this.o=null}function fo(t,e,n){this.text=t,this.Hx=e,this.visible=n}function si(){zt.call(this),this.name="ContextMenu",this.o=this.At=this.j=null,this.Yw=new A,this.Bt=null,this.St=!1;var t=this;this.uu=function(){t.stopTool()}}function U0(t){return t.preventDefault(),!1}function z0(t){var e=t.diagram;if(t.isActive){var n=t.currentContextMenu;if(null!==n){if(!(n instanceof sr)){var s=e.Zb(e.lastInput.documentPoint,null,null);null!==s&&s.sg(n)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(e.currentTool=t,t.doMouseUp())}}else t.canStart()&&(Kw(t,!0),t.isActive||t.stopTool())}function Kw(t,e,n){if(void 0===n&&(n=null),!t.St&&(t.St=!0,e&&t.standardMouseSelect(),e=t.standardMouseClick(),t.St=!1,!e)){if(t.isActive=!0,e=fu,null===n&&(n=t.findObjectWithContextMenu()),null!==n){var s=n.contextMenu;null!==s?(t.currentObject=n instanceof dt?n:null,t.showContextMenu(s,t.currentObject)):null!==e&&t.showContextMenu(e,t.currentObject)}else null!==e&&t.showContextMenu(e,null);t.currentContextMenu instanceof Rt&&!t.currentContextMenu.visible&&t.stopTool()}}Gt.className="LinkReshapingTool",Gt.None=Pi,Gt.Horizontal=fh,Gt.Vertical=Ha,Gt.All=Is,pe("linkReshapingTool",function(){return this.findTool("LinkReshaping")},function(t){this.Za("LinkReshaping",t,this.mouseDownTools)}),Wt(oi,zt),oi.prototype.updateAdornments=function(t){if(!(null===t||t instanceof K)){if(t.isSelected&&!this.diagram.isReadOnly){var e=t.resizeObject,n=t.Yj(this.name);if(null!==e&&t.canResize()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Ff()&&((null===n||n.adornedObject!==e)&&(n=this.makeAdornment(e)),null!==n))return e=e.Ki(),ku(t)&&this.updateResizeHandles(n,e),void t.xh(this.name,n)}t.Gf(this.name)}},oi.prototype.makeAdornment=function(t){var e=t.part.resizeAdornmentTemplate;if(null===e){(e=new Rt).type=W.Spot,e.locationSpot=Ut;var n=new Pn;n.isPanelMain=!0,e.add(n),e.add(this.makeHandle(t,St)),e.add(this.makeHandle(t,ki)),e.add(this.makeHandle(t,Ur)),e.add(this.makeHandle(t,vl)),e.add(this.makeHandle(t,yn)),e.add(this.makeHandle(t,Wn)),e.add(this.makeHandle(t,In)),e.add(this.makeHandle(t,Bi))}else if(yo(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},oi.prototype.makeHandle=function(t,e){return null===(t=this.handleArchetype)?null:((t=t.copy()).alignment=e,t)},oi.prototype.updateResizeHandles=function(t,e){if(null!==t)if(!t.alignment.Nb()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var n=t.alignment;if(n.Bc()&&(n=Ut),0>=n.x)e=0>=n.y?e+225:1<=n.y?e+135:e+180;else if(1<=n.x)0>=n.y?e+=315:1<=n.y&&(e+=45);else if(0>=n.y)e+=270;else{if(!(1<=n.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof W)for(t=t.elements;t.next();)this.updateResizeHandles(t.value,e)},oi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowResize||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},oi.prototype.doActivate=function(){var t=this.diagram;null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null!==this.handle&&(this.adornedObject=this.handle.part.adornedObject,null!==this.adornedObject&&(t.isMouseCaptured=!0,t.animationManager.rc(),this.xa(this.name),this.Er.set(this.adornedObject.da(this.handle.alignment.xv())),this.Io.set(this.adornedObject.part.location),this.ex.set(this.adornedObject.desiredSize),this.Jt=this.computeCellSize(),this.Lt=this.computeMinSize(),this.Kt=this.computeMaxSize(),this.isActive=!0))},oi.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.le=this.handle=null,this.isActive=t.isMouseCaptured=!1},oi.prototype.doCancel=function(){null!==this.adornedObject&&(this.adornedObject.desiredSize=this.originalDesiredSize,this.adornedObject.part.location=this.originalLocation),this.stopTool()},oi.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive){var e=this.Lt,n=this.Kt,s=this.Jt,a=this.adornedObject.vs(t.lastInput.documentPoint,A.alloc()),u=this.computeReshape();e=this.computeResize(a,this.handle.alignment,e,n,s,u),this.resize(e),t.gd(),A.free(a)}},oi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){var e=this.Lt,n=this.Kt,s=this.Jt,a=this.adornedObject.vs(t.lastInput.documentPoint,A.alloc()),u=this.computeReshape();e=this.computeResize(a,this.handle.alignment,e,n,s,u),this.resize(e),A.free(a),t.Qa(),this.transactionResult=this.name,t.S("PartResized",this.adornedObject,this.originalDesiredSize)}this.stopTool()},oi.prototype.resize=function(t){var e=this.diagram,n=this.adornedObject;if(null!==n){if(n.desiredSize=t.size,(t=n.part).Ta(),n=n.da(this.handle.alignment.xv()),t instanceof _t){var s=new st;if(s.add(t),!this.dragsMembers&&null===t.placeholder){var a=new _d;a.dragsMembers=!1}e.moveParts(s,this.oppositePoint.copy().ie(n),!0,a)}else t.location=t.location.copy().ie(n).add(this.oppositePoint);e.gd()}},oi.prototype.computeResize=function(t,e,n,s,a,u){e.Bc()&&(e=Ut);var c=this.adornedObject.naturalBounds,f=c.x,p=c.y,g=c.x+c.width,y=c.y+c.height,v=1;if(!u){var _=c.height;0>=(v=c.width)&&(v=1),0>=_&&(_=1),v=_/v}return _=A.alloc(),V.Xp(t.x,t.y,f,p,a.width,a.height,_),t=c.copy(),0>=e.x?0>=e.y?(t.x=Math.max(_.x,g-s.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.y=Math.max(_.y,y-s.height),t.y=Math.min(t.y,y-n.height),t.height=Math.max(y-t.y,n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,s.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,s.width),n.width),t.height=v*t.width),t.x=g-t.width,t.y=y-t.height)):1<=e.y?(t.x=Math.max(_.x,g-s.width),t.x=Math.min(t.x,g-n.width),t.width=Math.max(g-t.x,n.width),t.height=Math.max(Math.min(_.y-p,s.height),n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,s.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,s.width),n.width),t.height=v*t.width),t.x=g-t.width)):(t.x=Math.max(_.x,g-s.width),t.x=Math.min(t.x,g-n.width),t.width=g-t.x,u||(t.height=Math.max(Math.min(v*t.width,s.height),n.height),t.width=t.height/v,t.y=p+.5*(y-p-t.height))):1<=e.x?0>=e.y?(t.width=Math.max(Math.min(_.x-f,s.width),n.width),t.y=Math.max(_.y,y-s.height),t.y=Math.min(t.y,y-n.height),t.height=Math.max(y-t.y,n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,s.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,s.width),n.width),t.height=v*t.width),t.y=y-t.height)):1<=e.y?(t.width=Math.max(Math.min(_.x-f,s.width),n.width),t.height=Math.max(Math.min(_.y-p,s.height),n.height),u||(1<=t.height/t.width?(t.height=Math.max(Math.min(v*t.width,s.height),n.height),t.width=t.height/v):(t.width=Math.max(Math.min(t.height/v,s.width),n.width),t.height=v*t.width))):(t.width=Math.max(Math.min(_.x-f,s.width),n.width),u||(t.height=Math.max(Math.min(v*t.width,s.height),n.height),t.width=t.height/v,t.y=p+.5*(y-p-t.height))):0>=e.y?(t.y=Math.max(_.y,y-s.height),t.y=Math.min(t.y,y-n.height),t.height=y-t.y,u||(t.width=Math.max(Math.min(t.height/v,s.width),n.width),t.height=v*t.width,t.x=f+.5*(g-f-t.width))):1<=e.y&&(t.height=Math.max(Math.min(_.y-p,s.height),n.height),u||(t.width=Math.max(Math.min(t.height/v,s.width),n.width),t.height=v*t.width,t.x=f+.5*(g-f-t.width))),A.free(_),t},oi.prototype.computeReshape=function(){var t=ze;return this.adornedObject instanceof bt&&(t=Fl(this.adornedObject)),!(t===Oo||this.diagram.lastInput.shift)},oi.prototype.computeMinSize=function(){var t=this.adornedObject.minSize.copy(),e=this.minSize;return!isNaN(e.width)&&e.width>t.width&&(t.width=e.width),!isNaN(e.height)&&e.height>t.height&&(t.height=e.height),t},oi.prototype.computeMaxSize=function(){var t=this.adornedObject.maxSize.copy(),e=this.maxSize;return!isNaN(e.width)&&e.width<t.width&&(t.width=e.width),!isNaN(e.height)&&e.height<t.height&&(t.height=e.height),t},oi.prototype.computeCellSize=function(){var t=new Dt(NaN,NaN),e=this.adornedObject.part;return null!==e&&(e=e.resizeCellSize,!isNaN(e.width)&&0<e.width&&(t.width=e.width),!isNaN(e.height)&&0<e.height&&(t.height=e.height)),e=this.cellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height),e=this.diagram,(isNaN(t.width)||isNaN(t.height))&&e&&null!==(e=e.grid)&&e.visible&&this.isGridSnapEnabled&&(e=e.gridCellSize,isNaN(t.width)&&!isNaN(e.width)&&0<e.width&&(t.width=e.width),isNaN(t.height)&&!isNaN(e.height)&&0<e.height&&(t.height=e.height)),(isNaN(t.width)||0===t.width||t.width===1/0)&&(t.width=1),(isNaN(t.height)||0===t.height||t.height===1/0)&&(t.height=1),t},kt.Object.defineProperties(oi.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof Rt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.le},set:function(t){if(null!==t&&t.part instanceof Rt)throw Error("new handle must not be in an Adornment: "+t);this.le=t}},minSize:{get:function(){return this.Zf},set:function(t){if(!this.Zf.A(t)){var e=t.width;isNaN(e)&&(e=0),t=t.height,isNaN(t)&&(t=0),this.Zf.h(e,t)}}},maxSize:{get:function(){return this.Yf},set:function(t){if(!this.Yf.A(t)){var e=t.width;isNaN(e)&&(e=1/0),t=t.height,isNaN(t)&&(t=1/0),this.Yf.h(e,t)}}},cellSize:{get:function(){return this.zg},set:function(t){this.zg.A(t)||this.zg.assign(t)}},isGridSnapEnabled:{get:function(){return this.C},set:function(t){this.C=t}},dragsMembers:{get:function(){return this.L},set:function(t){this.L=t}},oppositePoint:{get:function(){return this.Er},set:function(t){this.Er.A(t)||this.Er.assign(t)}},originalDesiredSize:{get:function(){return this.ex}},originalLocation:{get:function(){return this.Io}}}),oi.className="ResizingTool",pe("resizingTool",function(){return this.findTool("Resizing")},function(t){this.Za("Resizing",t,this.mouseDownTools)}),Wt(Xi,zt),Xi.prototype.updateAdornments=function(t){if(null!==t){if(t.Hh()){var e=t.rotateObject;if(e===t||e===t.path||e.isPanelMain)return}if(t.isSelected&&!this.diagram.isReadOnly&&null!==(e=t.rotateObject)&&t.canRotate()&&t.actualBounds.u()&&t.isVisible()&&e.actualBounds.u()&&e.Ff()){var n=t.Yj(this.name);if((null===n||n.adornedObject!==e)&&(n=this.makeAdornment(e)),null!==n)return n.angle=e.Ki(),null===n.placeholder&&(n.location=this.computeAdornmentLocation(e)),void t.xh(this.name,n)}t.Gf(this.name)}},Xi.prototype.makeAdornment=function(t){var e=t.part.rotateAdornmentTemplate;if(null===e){(e=new Rt).type=W.Position,e.locationSpot=Ut;var n=this.handleArchetype;null!==n&&e.add(n.copy())}else if(yo(e),null===(e=e.copy()))return null;return e.adornedObject=t,e},Xi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(t.isReadOnly||!t.allowRotate||!t.lastInput.left)&&null!==this.findToolHandleAt(t.firstInput.documentPoint,this.name)},Xi.prototype.doActivate=function(){var t=this.diagram;if(null===this.adornedObject){if(null===this.handle&&(this.handle=this.findToolHandleAt(t.firstInput.documentPoint,this.name)),null===this.handle)return;this.adornedObject=this.handle.part.adornedObject}null!==this.adornedObject&&(t.isMouseCaptured=!0,t.delaysLayout=!0,this.xa(this.name),this.bx=this.adornedObject.angle,this.Kr=this.computeRotationPoint(this.adornedObject),this.Io=this.adornedObject.part.location.copy(),this.isActive=!0)},Xi.prototype.computeRotationPoint=function(t){var e=t.part,n=e.locationObject;return e.rotationSpot.hb()?t.da(e.rotationSpot):t===e||t===n?n.da(e.locationSpot):t.da(Ut)},Xi.prototype.computeAdornmentLocation=function(t){var e=this.rotationPoint;e.u()||(e=this.computeRotationPoint(t)),e=t.vs(e);var n=this.handleAngle;0>n?n+=360:360<=n&&(n-=360),n=Math.round(45*Math.round(n/45));var s=this.handleDistance;return 0===n?e.x=t.naturalBounds.width+s:45===n?(e.x=t.naturalBounds.width+s,e.y=t.naturalBounds.height+s):90===n?e.y=t.naturalBounds.height+s:135===n?(e.x=-s,e.y=t.naturalBounds.height+s):180===n?e.x=-s:225===n?(e.x=-s,e.y=-s):270===n?e.y=-s:315===n&&(e.x=t.naturalBounds.width+s,e.y=-s),t.da(e)},Xi.prototype.doDeactivate=function(){var t=this.diagram;this.stopTransaction(),this.le=this.handle=null,this.Kr=new A(NaN,NaN),this.isActive=t.isMouseCaptured=!1},Xi.prototype.doCancel=function(){this.diagram.delaysLayout=!1,this.rotate(this.originalAngle),this.stopTool()},Xi.prototype.doMouseMove=function(){var t=this.diagram;this.isActive&&(t=this.computeRotate(t.lastInput.documentPoint),this.rotate(t))},Xi.prototype.doMouseUp=function(){var t=this.diagram;if(this.isActive){t.delaysLayout=!1;var e=this.computeRotate(t.lastInput.documentPoint);this.rotate(e),t.Qa(),this.transactionResult=this.name,t.S("PartRotated",this.adornedObject,this.originalAngle)}this.stopTool()},Xi.prototype.rotate=function(t){var e=this.adornedObject;if(null!==e){e.angle=t,(e=e.part).Ta();var n=e.locationObject,s=e.rotateObject;(n===s||n.sg(s))&&(n=this.Io.copy(),e.location=n.ie(this.rotationPoint).rotate(t-this.originalAngle).add(this.rotationPoint)),this.diagram.gd()}},Xi.prototype.computeRotate=function(t){t=this.rotationPoint.Pa(t)-this.handleAngle;var e=this.adornedObject.panel;null!==e&&(t-=e.Ki()),360<=t?t-=360:0>t&&(t+=360),e=Math.min(Math.abs(this.snapAngleMultiple),180);var n=Math.min(Math.abs(this.snapAngleEpsilon),e/2);return!this.diagram.lastInput.shift&&0<e&&0<n&&(t%e<n?t=Math.floor(t/e)*e:t%e>e-n&&(t=(Math.floor(t/e)+1)*e)),360<=t?t-=360:0>t&&(t+=360),t},kt.Object.defineProperties(Xi.prototype,{handleArchetype:{get:function(){return this.o},set:function(t){this.o=t}},handle:{get:function(){return this.j},set:function(t){if(null!==t&&!(t.part instanceof Rt))throw Error("new handle is not in an Adornment: "+t);this.j=t}},adornedObject:{get:function(){return this.le},set:function(t){if(null!==t&&t.part instanceof Rt)throw Error("new handle must not be in an Adornment: "+t);this.le=t}},snapAngleMultiple:{get:function(){return this.Ba},set:function(t){this.Ba=t}},snapAngleEpsilon:{get:function(){return this.wa},set:function(t){this.wa=t}},originalAngle:{get:function(){return this.bx}},rotationPoint:{get:function(){return this.Kr},set:function(t){this.Kr=t.copy()}},handleAngle:{get:function(){return this.C},set:function(t){this.C=t}},handleDistance:{get:function(){return this.L},set:function(t){this.L=t}}}),Xi.className="RotatingTool",pe("rotatingTool",function(){return this.findTool("Rotating")},function(t){this.Za("Rotating",t,this.mouseDownTools)}),Wt(Gf,zt),Gf.prototype.canStart=function(){return!(!this.isEnabled||this.isBeyondDragSize())},Gf.prototype.doMouseUp=function(){this.isActive&&(this.standardMouseSelect(),!this.standardMouseClick()&&this.diagram.lastInput.isTouchEvent&&this.diagram.toolManager.doToolTip()),this.stopTool()},Gf.className="ClickSelectingTool",Wt(Va,zt),Va.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram,e=t.lastInput,n=t.Zb(e.documentPoint,function(s){for(;null!==s.panel&&!s.isActionable;)s=s.panel;return s});return!(null===n||!n.isActionable||(this.uk=n,t.Kk=t.Zb(e.documentPoint,null,null),0))},Va.prototype.doMouseDown=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.uk;null!==e&&(t.targetObject=e,null!==e.actionDown&&e.actionDown(t,e))}else this.canStart()&&this.doActivate()},Va.prototype.doMouseMove=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.uk;null!==e&&(t.targetObject=e,null!==e.actionMove&&e.actionMove(t,e))}},Va.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram.lastInput,e=this.uk;if(null===e)return;t.targetObject=e,null!==e.actionUp&&e.actionUp(t,e),this.standardMouseClick(function(n){for(;null!==n.panel&&(!n.isActionable||n!==e);)n=n.panel;return n},function(n){return n===e})}this.stopTool()},Va.prototype.doCancel=function(){var t=this.diagram.lastInput,e=this.uk;null!==e&&(t.targetObject=e,null!==e.actionCancel&&e.actionCancel(t,e),this.stopTool())},Va.prototype.doStop=function(){this.uk=null},Va.className="ActionTool",Wt(ua,zt),ua.prototype.canStart=function(){if(!this.isEnabled||null===this.archetypeNodeData)return!1;var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.lastInput.left||this.isBeyondDragSize())return!1;if(this.isDoubleClick){if(1===t.lastInput.clickCount&&(this.Pw=t.lastInput.viewPoint.copy()),2!==t.lastInput.clickCount||this.isBeyondDragSize(this.Pw))return!1}else if(1!==t.lastInput.clickCount)return!1;return!(t.currentTool!==this&&null!==t.am(t.lastInput.documentPoint,!0))},ua.prototype.doMouseUp=function(){this.isActive&&this.insertPart(this.diagram.lastInput.documentPoint),this.stopTool()},ua.prototype.insertPart=function(t){var e=this.diagram,n=this.archetypeNodeData;if(null===n)return null;var s=null;try{if(e.S("ChangingSelection",e.selection),this.xa(this.name),n instanceof ft)n.Mc()&&(yo(n),null!==(s=n.copy())&&e.add(s));else if(null!==n){var a=e.model.copyNodeData(n);Kt(a)&&(e.model.sf(a),s=e.Ac(a))}if(null!==s){var u=A.allocAt(t.x,t.y);this.isGridSnapEnabled&&js(this.diagram,s,t,u),s.location=u,e.allowSelect&&(e.clearSelection(!0),s.isSelected=!0),A.free(u)}e.Qa(),this.transactionResult=this.name,e.S("PartCreated",s)}finally{this.stopTransaction(),e.S("ChangedSelection",e.selection)}return s},kt.Object.defineProperties(ua.prototype,{archetypeNodeData:{get:function(){return this.dj},set:function(t){this.dj=t}},isDoubleClick:{get:function(){return this.o},set:function(t){this.o=t}},isGridSnapEnabled:{get:function(){return this.j},set:function(t){this.j=t}}}),ua.className="ClickCreatingTool",Wt(co,zt),co.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(!t.allowSelect)return!1;var e=t.lastInput;return!(!e.left||t.currentTool!==this&&(!this.isBeyondDragSize()||e.timestamp-t.firstInput.timestamp<this.delay||null!==t.am(e.documentPoint,!0)))},co.prototype.doActivate=function(){var t=this.diagram;this.isActive=!0,t.isMouseCaptured=!0,t.skipsUndoManager=!0,t.add(this.box),this.doMouseMove()},co.prototype.doDeactivate=function(){var t=this.diagram;t.ug(),t.remove(this.box),t.skipsUndoManager=!1,this.isActive=t.isMouseCaptured=!1},co.prototype.doMouseMove=function(){var t=this.diagram;if(this.isActive&&null!==this.box){var e=this.computeBoxBounds(),n=this.box.Ya("SHAPE");null===n&&(n=this.box.pb());var s=Dt.alloc().h(e.width,e.height);n.desiredSize=s,this.box.ym(e.x,e.y,!1),Dt.free(s),(t.allowHorizontalScroll||t.allowVerticalScroll)&&t.ns(t.lastInput.viewPoint)}},co.prototype.doMouseUp=function(){if(this.isActive){var t=this.diagram;t.remove(this.box);try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),this.selectInRect(this.computeBoxBounds()),t.S("ChangedSelection",t.selection)}finally{t.currentCursor=""}}this.stopTool()},co.prototype.computeBoxBounds=function(){var t=this.diagram;return new z(t.firstInput.documentPoint,t.lastInput.documentPoint)},co.prototype.selectInRect=function(t){var e=this.diagram,n=e.lastInput;if(t=e.Tx(t,this.isPartialInclusion),Se?n.meta:n.control)if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected&&(e.isSelected=!1);else for(t=t.iterator;t.next();)(e=t.value).isSelected=!e.isSelected;else if(n.shift)for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0);else{for(n=new st,e=e.selection.iterator;e.next();){var s=e.value;t.contains(s)||n.add(s)}for(e=n.iterator;e.next();)e.value.isSelected=!1;for(t=t.iterator;t.next();)(e=t.value).isSelected||(e.isSelected=!0)}},kt.Object.defineProperties(co.prototype,{delay:{get:function(){return this.Qk},set:function(t){this.Qk=t}},isPartialInclusion:{get:function(){return this.o},set:function(t){this.o=t}},box:{get:function(){return this.j},set:function(t){this.j=t}}}),co.className="DragSelectingTool",Wt(Rn,zt),Rn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(!t.allowHorizontalScroll&&!t.allowVerticalScroll||!t.lastInput.left||t.currentTool!==this&&!this.isBeyondDragSize())},Rn.prototype.doActivate=function(){var t=this.diagram;this.yg?(t.lastInput.bubbles=!0,t.addEventListener(gt.document,"scroll",this.lx,!1)):(t.currentCursor="move",t.isMouseCaptured=!0,this.eu.assign(t.position)),this.isActive=!0},Rn.prototype.doDeactivate=function(){var t=this.diagram;t.currentCursor="",this.isActive=t.isMouseCaptured=!1},Rn.prototype.doCancel=function(){var t=this.diagram;t.position=this.eu,t.isMouseCaptured=!1,this.stopTool()},Rn.prototype.doMouseMove=function(){this.move()},Rn.prototype.doMouseUp=function(){this.move(),this.stopTool()},Rn.prototype.move=function(){var t=this.diagram;if(this.isActive&&t)if(this.yg)t.lastInput.bubbles=!0;else{var e=t.position,n=t.firstInput.documentPoint,s=t.lastInput.documentPoint,a=e.x+n.x-s.x;n=e.y+n.y-s.y,t.allowHorizontalScroll||(a=e.x),t.allowVerticalScroll||(n=e.y),t.position=this.Vy.h(a,n)}},kt.Object.defineProperties(Rn.prototype,{bubbles:{get:function(){return this.yg},set:function(t){this.yg=t}},originalPosition:{get:function(){return this.eu}}}),Rn.className="PanningTool",pe("clickCreatingTool",function(){return this.findTool("ClickCreating")},function(t){this.Za("ClickCreating",t,this.mouseUpTools)}),pe("clickSelectingTool",function(){return this.findTool("ClickSelecting")},function(t){this.Za("ClickSelecting",t,this.mouseUpTools)}),pe("panningTool",function(){return this.findTool("Panning")},function(t){this.Za("Panning",t,this.mouseMoveTools)}),pe("dragSelectingTool",function(){return this.findTool("DragSelecting")},function(t){this.Za("DragSelecting",t,this.mouseMoveTools)}),pe("actionTool",function(){return this.findTool("Action")},function(t){this.Za("Action",t,this.mouseDownTools)}),kt.Object.defineProperties(sr.prototype,{mainElement:{get:function(){return this.C},set:function(t){this.C=t}},show:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},hide:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},valueFunction:{get:function(){return this.L},set:function(t){this.L=t}}}),sr.className="HTMLInfo",fo.className="ContextMenuButtonInfo",Wt(si,zt),si.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;return!(this.isBeyondDragSize()||!t.lastInput.right||1<t.lastInput.clickCount||!(t.lastInput.isTouchEvent&&null!==this.defaultTouchContextMenu||null!==this.findObjectWithContextMenu()))},si.prototype.doStart=function(){this.Yw.set(this.diagram.firstInput.documentPoint)},si.prototype.doStop=function(){this.hideContextMenu(),this.currentObject=null},si.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var e=this.diagram,s=null;if(t instanceof U||(s=t instanceof dt?t:e.Zb(e.lastInput.documentPoint,null,function(a){return!a.layer.isTemporary})),null!==s){for(t=s;null!==t;){if(null!==t.contextMenu)return t;t=t.panel}if(e.lastInput.isTouchEvent&&this.defaultTouchContextMenu)return s.part}else if(null!==e.contextMenu)return e;return null},si.prototype.doActivate=function(){},si.prototype.doMouseDown=function(){if(zt.prototype.doMouseDown.call(this),this.isActive&&this.currentContextMenu instanceof Rt){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doMouseDown(),t.doDeactivate())}this.diagram.toolManager.mouseDownTools.contains(this)&&z0(this)},si.prototype.doMouseUp=function(){if(this.isActive&&this.currentContextMenu instanceof Rt){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.canStart()&&(t.doActivate(),t.doCancel(),t.doDeactivate())}z0(this)},si.prototype.doMouseMove=function(){var t=this.diagram.toolManager.findTool("Action");null!==t&&t.doMouseMove(),this.isActive&&this.diagram.toolManager.doMouseMove()},si.prototype.showContextMenu=function(t,e){var n=this.diagram;if(t!==this.currentContextMenu&&this.hideContextMenu(),t instanceof Rt){t.layerName="Tool",t.selectable=!1,t.scale=1/n.scale,t.category=this.name,null!==t.placeholder&&(t.placeholder.scale=n.scale);var s=t.diagram;null!==s&&s!==n&&s.remove(t),n.add(t),null!==e?t.adornedObject=e:t.data=n.model,t.Ta(),this.positionContextMenu(t,e)}else t instanceof sr&&t.show(e,n,this);this.currentContextMenu=t},si.prototype.positionContextMenu=function(t){if(null===t.placeholder){var e=this.diagram,n=e.lastInput.documentPoint.copy(),s=t.measuredBounds,a=e.viewportBounds;e.lastInput.isTouchEvent&&(n.x-=s.width),n.x+s.width>a.right&&(n.x-=s.width+5/e.scale),n.x<a.x&&(n.x=a.x),n.y+s.height>a.bottom&&(n.y-=s.height+5/e.scale),n.y<a.y&&(n.y=a.y),t.position=n}},si.prototype.hideContextMenu=function(){var t=this.diagram,e=this.currentContextMenu;null!==e&&(e instanceof Rt?(t.remove(e),null!==this.At&&this.At.Gf(e.category),e.data=null,e.adornedObject=null):e instanceof sr&&(null!==e.hide?e.hide(t,this):null!==e.mainElement&&(e.mainElement.style.display="none")),this.currentContextMenu=null,this.standardMouseOver())},si.prototype.showDefaultContextMenu=function(){var t=this.diagram;null===this.Bt&&(this.Bt=function Ib(t){var e=new st;return e.add(new fo("Copy",function(n){n.commandHandler.copySelection()},function(n){return n.commandHandler.canCopySelection()})),e.add(new fo("Cut",function(n){n.commandHandler.cutSelection()},function(n){return n.commandHandler.canCutSelection()})),e.add(new fo("Delete",function(n){n.commandHandler.deleteSelection()},function(n){return n.commandHandler.canDeleteSelection()})),e.add(new fo("Paste",function(n){n.commandHandler.pasteSelection(t.mouseDownPoint)},function(n){return n.commandHandler.canPasteSelection(t.mouseDownPoint)})),e.add(new fo("Select All",function(n){n.commandHandler.selectAll()},function(n){return n.commandHandler.canSelectAll()})),e.add(new fo("Undo",function(n){n.commandHandler.undo()},function(n){return n.commandHandler.canUndo()})),e.add(new fo("Redo",function(n){n.commandHandler.redo()},function(n){return n.commandHandler.canRedo()})),e.add(new fo("Scroll To Part",function(n){n.commandHandler.scrollToPart()},function(n){return n.commandHandler.canScrollToPart()})),e.add(new fo("Zoom To Fit",function(n){n.commandHandler.zoomToFit()},function(n){return n.commandHandler.canZoomToFit()})),e.add(new fo("Reset Zoom",function(n){n.commandHandler.resetZoom()},function(n){return n.commandHandler.canResetZoom()})),e.add(new fo("Group Selection",function(n){n.commandHandler.groupSelection()},function(n){return n.commandHandler.canGroupSelection()})),e.add(new fo("Ungroup Selection",function(n){n.commandHandler.ungroupSelection()},function(n){return n.commandHandler.canUngroupSelection()})),e.add(new fo("Edit Text",function(n){n.commandHandler.editTextBlock()},function(n){return n.commandHandler.canEditTextBlock()})),e}(this)),ph.innerHTML="",nd.addEventListener("pointerdown",this.uu,!1);var e=this,n=Wo("ul");n.className="goCXul",ph.appendChild(n),n.innerHTML="";for(var s=this.Bt.iterator;s.next();){var a=s.value,u=a.visible;if("function"==typeof a.Hx&&("function"!=typeof u||u(t))){(u=Wo("li")).className="goCXli";var c=Wo("a");c.className="goCXa",c.href="#",c.Ny=a.Hx,c.addEventListener("pointerdown",function(f){return this.Ny(t),e.stopTool(),f.preventDefault(),!1},!1),c.textContent=a.text,u.appendChild(c),n.appendChild(u)}}ph.style.display="block",nd.style.display="block"},si.prototype.hideDefaultContextMenu=function(){if(null!==this.currentContextMenu&&this.currentContextMenu===fu){ph.style.display="none",nd.style.display="none";var t=this.diagram;null!==t&&t.removeEventListener(nd,"pointerdown",this.uu,!1),this.currentContextMenu=null}},kt.Object.defineProperties(si.prototype,{currentContextMenu:{get:function(){return this.j},set:function(t){this.j=t,this.At=t instanceof Rt?t.adornedPart:null}},defaultTouchContextMenu:{get:function(){return!1===Uf&&null===fu&&Wr&&function Cl(t){var e=new sr;e.show=function(a,u,c){c.showDefaultContextMenu()},e.hide=function(a,u){u.hideDefaultContextMenu()},fu=e,t.uu=function(){t.stopTool()},e=Wo("div");var n=Wo("div");e.style.cssText="top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",n.style.cssText="z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var s=Wo("style");gt.document.getElementsByTagName("head")[0].appendChild(s),s.sheet.insertRule(".goCXul { list-style: none; }",0),s.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),s.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),null!==(s=t.diagram)&&(s.addEventListener(e,"contextmenu",U0,!1),s.addEventListener(e,"selectstart",U0,!1),s.addEventListener(n,"contextmenu",U0,!1)),e.className="goCXforeground",n.className="goCXbackground",gt.document.body&&(gt.document.body.appendChild(e),gt.document.body.appendChild(n)),ph=e,nd=n,Uf=!0}(this),fu},set:function(t){null===t&&(Uf=!0),fu=t}},currentObject:{get:function(){return this.o},set:function(t){this.o=t}},mouseDownPoint:{get:function(){return this.Yw}}});var fu=null,Uf=!1,nd=null,ph=null;function le(){zt.call(this),this.name="TextEditing",this.qh=new Jt,this.Ba=null,this.wa=Y0,this.ui=null,this.ia=Zi,this.C=1,this.L=!0,this.o=null,this.j=new sr,this.Ct=null,function Xw(t,e){if(Wr){var n=Wo("textarea");t.Ct=n,n.addEventListener("input",function(){if(null!==t.textBlock){var s=t.my(this.value);this.style.width=20+s.measuredBounds.width*this.SA+"px",this.rows=s.lineCount}},!1),n.addEventListener("keydown",function(s){if(null!==t.textBlock){var a=s.key;"Enter"===a?(!1===t.textBlock.isMultiline&&s.preventDefault(),t.acceptText(Yf)):"Tab"===a?(t.acceptText(qg),s.preventDefault()):"Escape"===a&&(t.doCancel(),null!==t.diagram&&t.diagram.doFocus())}},!1),n.addEventListener("focus",function(){if(null!==t.currentTextEditor&&t.state!==Zi){var s=t.Ct;t.ia===Fs&&(t.ia=Gn),"function"==typeof s.select&&t.selectsTextOnActivate&&(s.select(),s.setSelectionRange(0,9999))}},!1),n.addEventListener("blur",function(){if(null!==t.currentTextEditor&&t.state!==Zi){var s=t.Ct;"function"==typeof s.focus&&s.focus(),"function"==typeof s.select&&t.selectsTextOnActivate&&(s.select(),s.setSelectionRange(0,9999))}},!1),e.valueFunction=function(){return n.value},e.mainElement=n,e.show=function(s,a,u){if(s instanceof Jt&&u instanceof le)if(u.state===Wf)n.style.border="3px solid red",n.focus();else{var c=s.da(Ut),f=a.position,p=a.scale,g=s.Af()*p;g<u.minimumEditorScale&&(g=u.minimumEditorScale);var y=s.naturalBounds.width*g+6,v=s.naturalBounds.height*g+2,_=(c.x-f.x)*p;c=(c.y-f.y)*p,v=(f=s.verticalAlignment).y*v-f.y*(p=(s.lineHeight+s.spacingAbove+s.spacingBelow)*s.lineCount*g)+f.offsetY-(.5*v-.5*p)-p/2,n.value=s.text,a.div.style.font=s.font,n.style.position="absolute",n.style.zIndex="100",n.style.font="inherit",n.style.fontSize=100*g+"%",n.style.lineHeight="normal",n.style.width=y+"px",n.style.left=(_-y/2|0)-1+"px",n.style.top=(c+v|0)-1+"px",n.style.textAlign=s.textAlign,n.style.margin="0",n.style.padding="1px",n.style.border="0",n.style.outline="none",n.style.whiteSpace="pre-wrap",n.style.overflow="hidden",n.rows=s.lineCount,n.SA=g,n.className="goTXarea",a.div.appendChild(n),n.focus(),u.selectsTextOnActivate&&(n.select(),n.setSelectionRange(0,9999))}},e.hide=function(s){s.div.removeChild(n)}}}(this,this.j)}function zf(t){var e=t.textBlock,n=t.diagram,s=t.currentTextEditor;if(null!==e&&null!==s){var a=e.text,u="";null!==s.valueFunction&&(u=s.valueFunction()),t.isValidText(e,a,u)?(t.xa(t.name),t.ia=K0,t.transactionResult=t.name,e.text=u,t.doSuccess(a,u),null!==n&&n.S("TextEdited",e,a),t.stopTransaction(),t.stopTool(),null!==n&&n.doFocus()):(t.ia=Wf,t.doError(a,u))}}si.className="ContextMenuTool",pe("contextMenuTool",function(){return this.findTool("ContextMenu")},function(t){this.Za("ContextMenu",t,this.mouseUpTools)}),Wt(le,zt),le.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||t.isReadOnly||gh&&gh!==this&&(gh.acceptText($f),gh&&gh!==this)||!t.lastInput.left||this.isBeyondDragSize())return!1;var e=t.Zb(t.lastInput.documentPoint);return!!(null!==e&&e instanceof Jt&&e.editable&&e.part.canEdit())&&!(null===(e=e.part)||this.starting===Y0&&!e.isSelected||this.starting===Zw&&2>t.lastInput.clickCount)},le.prototype.doStart=function(){gh=this,null!==this.textBlock&&this.doActivate()},le.prototype.doActivate=function(){if(!this.isActive){var t=this.diagram;if(null!==t){var e=this.textBlock;if(null===e&&(e=t.Zb(t.lastInput.documentPoint)),null!==e&&e instanceof Jt&&(this.textBlock=e,null!==e.part)){t.animationManager.rc(),this.isActive=!0,this.ia=Fs;var n=this.defaultTextEditor;null!==e.textEditor&&(n=e.textEditor),this.qh=this.textBlock.copy();var s=new z(this.textBlock.da(St),this.textBlock.da(Ur));t.Nv(s),n.show(e,t,this),this.currentTextEditor=n}}}},le.prototype.doCancel=function(){this.stopTool()},le.prototype.doMouseUp=function(){this.canStart()&&this.doActivate()},le.prototype.doMouseDown=function(){this.isActive&&this.acceptText($f)},le.prototype.acceptText=function(t){switch(t){case $f:this.ia===K0?this.currentTextEditor instanceof HTMLElement&&this.currentTextEditor.focus():(this.ia===Fs||this.ia===Wf||this.ia===Gn)&&(this.ia=W0,zf(this));break;case $0:case Yf:case qg:(Yf!==t||!0!==this.textBlock.isMultiline)&&(this.ia===Fs||this.ia===Wf||this.ia===Gn)&&(this.ia=W0,zf(this))}},le.prototype.doError=function(t,e){var n=this.textBlock;null!==n.errorFunction&&n.errorFunction(this,t,e),(t=this.currentTextEditor)&&t.show(n,this.diagram,this)},le.prototype.doSuccess=function(t,e){var n=this.textBlock;null!==n.textEdited&&n.textEdited(n,t,e)},le.prototype.doDeactivate=function(){var t=this.diagram;null!==t&&(this.ia=Zi,null!==this.currentTextEditor&&this.currentTextEditor.hide(t,this),this.textBlock=null,this.isActive=!1)},le.prototype.doStop=function(){gh=null},le.prototype.isValidText=function(t,e,n){var s=this.textValidation;return!(null!==s&&!s(t,e,n)||null!==(s=t.textValidation)&&!s(t,e,n))},le.prototype.my=function(t){var e=this.qh;return e.text=t,e.measure(this.textBlock.ei,1/0),e},kt.Object.defineProperties(le.prototype,{textBlock:{get:function(){return this.Ba},set:function(t){this.Ba=t}},currentTextEditor:{get:function(){return this.o},set:function(t){this.o=t}},defaultTextEditor:{get:function(){return this.j},set:function(t){this.j=t}},starting:{get:function(){return this.wa},set:function(t){this.wa=t}},textValidation:{get:function(){return this.ui},set:function(t){this.ui=t}},minimumEditorScale:{get:function(){return this.C},set:function(t){this.C=t}},selectsTextOnActivate:{get:function(){return this.L},set:function(t){this.L=t}},state:{get:function(){return this.ia},set:function(t){this.ia!==t&&(this.ia=t)}}}),le.prototype.measureTemporaryTextBlock=le.prototype.my;var $0=new Q(le,"LostFocus",0),$f=new Q(le,"MouseDown",1),qg=new Q(le,"Tab",2),Yf=new Q(le,"Enter",3),Qg=new Q(le,"SingleClick",0),Y0=new Q(le,"SingleClickSelected",1),Zw=new Q(le,"DoubleClick",2),Zi=new Q(le,"StateNone",0),Fs=new Q(le,"StateActive",1),Gn=new Q(le,"StateEditing",2),W0=new Q(le,"StateValidating",3),Wf=new Q(le,"StateInvalid",4),K0=new Q(le,"StateValidated",5),gh=null;function Mr(t){sd||(Jw(),sd=!0),this.D=fd,this.Yk=this.tb=this.rr=this.lc=!1,this.sx=!0,this.Zk=nm,this.Um=!1,this.$h=this.vd=!0,this.Lg=600,this.Ew=this.px=!1,this.Se=new nt,this.Td=new yi,this.Td.Qd=this,this.cj=new nt,this.qu=new nt,this.ds=new nt,this.Al=new nt,t&&Object.assign(this,t)}function Ba(t,e){t.vd&&t.canStart(e)&&(t.Se.add(e),t.defaultAnimation.isAnimating&&t.rc(),Ai(t.D),t.tb=!0)}function id(t){if(t.vd&&t.tb){var e=t.Td,n=t.D,s=t.Se.contains("Model");s&&(t.Yk=!0,t.Zk===nm?(e.isViewportUnconstrained=!0,e.nc.clear(),e.add(n,"position",n.position.copy().offset(0,-200),n.position),e.add(n,"opacity",0,1)):t.Zk===Fb&&e.nc.clear(),t.sx=!(t.Zk!==qw||!n.ku.A(n.ja)),n.S("InitialAnimationStarting",t)),s&&!t.$h||0===e.nc.count?(t.Se.clear(),t.tb=!1,e.nc.clear(),yh(e,n),t.Yk=!1,n.N()):(t.Se.clear(),n.kg=!1,s=e.nc.get(n),n.autoScale!==ar&&null!==s&&(delete s.start.scale,delete s.end.scale),gt.requestAnimationFrame(function(){!1===t.tb||e.lc||(n.Ie("temporaryPixelRatio")&&ld(n),sm(n),t.tb=!1,e.start(),mh(t),n.Qa(),Z0(e,0),ue(n,!0),rd(t),n.S("AnimationStarting",t))}))}}function Kf(t,e,n,s){t.isTicking||e instanceof K&&(null!==e.fromNode||null!==e.toNode)||t.Td.add(e,"position",n,s,!1)}function mh(t){if(!t.rr){var e=t.D;t.px=e.skipsUndoManager,t.Ew=e.skipsModelSourceBindings,e.skipsUndoManager=!0,e.skipsModelSourceBindings=!0,t.rr=!0}}function rd(t){var e=t.D;e.skipsUndoManager=t.px,e.skipsModelSourceBindings=t.Ew,t.rr=!1}function Tl(t,e,n){t.tb&&!e.A(n)&&(t.D.Oi||(e=n.copy()),im(t.Td,t.D,"position",e,n))}function od(t,e){for(e=e.findLinksConnected();e.next();){var n=e.value;n.gf=n.points.copy(),t.Al.add(n)}}function em(t,e,n,s,a){null===t&&(t=[0,0,0,0]),null===e&&(e=[0,0,0,0]);var u=t[0],c=t[1],f=t[2];t=t[3];var p=e[0],g=e[1],y=e[2];return e=e[3],0===f||100===f?(u=p,c=g):(0===y||100===y)&&(p=u,g=c),180<Math.abs(p-u)&&(p>u?u+=360:p+=360),"hsla("+(u=a(n,u,p-u,s)%360)+", "+(c=a(n,c,g-c,s))+"%, "+(f=a(n,f,y-f,s))+"%, "+(n=a(n,t,e-t,s))+")"}function Jw(){function t(n,s,a,u,c,f){n.position=new A(u(c,s.x,a.x-s.x,f),u(c,s.y,a.y-s.y,f))}var e=new xt;e.add("position:diagram",t),e.add("position",t),e.add("position:part",function(n,s,a,u,c,f){c<f?n.ym(u(c,s.x,a.x-s.x,f),u(c,s.y,a.y-s.y,f),!1):n.position=new A(u(c,s.x,a.x-s.x,f),u(c,s.y,a.y-s.y,f))}),e.add("location",function(n,s,a,u,c,f){c<f?n.ym(u(c,s.x,a.x-s.x,f),u(c,s.y,a.y-s.y,f),!0):n.location=new A(u(c,s.x,a.x-s.x,f),u(c,s.y,a.y-s.y,f))}),e.add("position:placeholder",function(n,s,a,u,c,f){c<f?n.ym(u(c,s.x,a.x-s.x,f),u(c,s.y,a.y-s.y,f),!1):n.position=new A(u(c,s.x,a.x-s.x,f),u(c,s.y,a.y-s.y,f))}),e.add("position:nodeCollapse",function(n,s,a,u,c,f){var p=n.actualBounds,g=a.actualBounds;a=g.x+g.width/2-p.width/2,p=g.y+g.height/2-p.height/2,c<f?n.ym(u(c,s.x,a-s.x,f),u(c,s.y,p-s.y,f),!1):n.position=new A(u(c,s.x,a-s.x,f),u(c,s.y,p-s.y,f))}),e.add("desiredSize",function(n,s,a,u,c,f){n.desiredSize=new z(u(c,s.width,a.width-s.width,f),u(c,s.height,a.height-s.height,f))}),e.add("width",function(n,s,a,u,c,f){n.width=u(c,s,a-s,f)}),e.add("height",function(n,s,a,u,c,f){n.height=u(c,s,a-s,f)}),e.add("fill",function(n,s,a,u,c,f){n.fill=em(s,a,c,f,u)}),e.add("stroke",function(n,s,a,u,c,f){n.stroke=em(s,a,c,f,u)}),e.add("strokeWidth",function(n,s,a,u,c,f){n.strokeWidth=u(c,s,a-s,f)}),e.add("strokeDashOffset",function(n,s,a,u,c,f){n.strokeDashOffset=u(c,s,a-s,f)}),e.add("background",function(n,s,a,u,c,f){n.background=em(s,a,c,f,u)}),e.add("areaBackground",function(n,s,a,u,c,f){n.areaBackground=em(s,a,c,f,u)}),e.add("opacity",function(n,s,a,u,c,f){n.opacity=u(c,s,a-s,f)}),e.add("scale",function(n,s,a,u,c,f){n.scale=u(c,s,a-s,f)}),e.add("angle",function(n,s,a,u,c,f){n.angle=u(c,s,a-s,f)}),pu=e}le.className="TextEditingTool",le.LostFocus=$0,le.MouseDown=$f,le.Tab=qg,le.Enter=Yf,le.SingleClick=Qg,le.SingleClickSelected=Y0,le.DoubleClick=Zw,le.StateNone=Zi,le.StateActive=Fs,le.StateEditing=Gn,le.StateValidating=W0,le.StateInvalid=Wf,le.StateValidated=K0,pe("textEditingTool",function(){return this.findTool("TextEditing")},function(t){this.Za("TextEditing",t,this.mouseUpTools)}),Mr.prototype.Ne=function(t){this.D=t},Mr.prototype.canStart=function(){return!0},(S=Mr.prototype).Ms=function(t){return this.Td.Ms(t)},S.kv=function(t){return this.Td.kv(t)},S.rc=function(t){var e=this.Td;if(!0===this.tb&&(this.Yk=this.tb=!1,this.Se.clear(),0<e.nc.count&&this.D.Gb()),this.lc){if(e.Zl(!0),e.nc.clear(),yh(e,null),!0===t)for(t=this.cj.ya(),e=0;e<t.length;e++)t[e].Zl(!0)}else e.nc.clear(),yh(e,this.D)},S.Zl=function(t){t===this.defaultAnimation&&this.defaultAnimation.nc.clear(),this.cj.remove(t),0===this.cj.count&&(this.lc=!1,this.D.Gb()),t===this.defaultAnimation&&(this.defaultAnimation.nc.clear(),this.D.S("AnimationFinished",this))},S.Oj=function(t,e){this.tb&&(this.Se.contains("Expand Tree")||this.Se.contains("Expand SubGraph"))&&(this.Td.Oj(t,e),od(this,t))},S.Mj=function(t,e){this.tb&&(this.Se.contains("Collapse Tree")||this.Se.contains("Collapse SubGraph"))&&(this.Td.Mj(t,e),im(this.Td,e,"position",e.position,e.position),od(this,t))},kt.Object.defineProperties(Mr.prototype,{animationReasons:{get:function(){return this.Se}},isEnabled:{get:function(){return this.vd},set:function(t){(this.vd=t)&&this.cj.each(function(e){e.isAnimating||e.runCount!==1/0||e.start()})}},duration:{get:function(){return this.Lg},set:function(t){1>t&&ae(t,">= 1",Mr,"duration"),this.Lg=t}},isAnimating:{get:function(){return this.lc}},isTicking:{get:function(){return this.rr}},isInitial:{get:function(){return this.$h},set:function(t){this.$h=t}},defaultAnimation:{get:function(){return this.Td}},activeAnimations:{get:function(){return this.cj}},initialAnimationStyle:{get:function(){return this.Zk},set:function(t){this.Zk=t}}}),Mr.prototype.stopAnimation=Mr.prototype.rc;var pu=null,sd=!1,nm=new Q(Mr,"Default",1),qw=new Q(Mr,"AnimateLocations",2),Fb=new Q(Mr,"None",3);function yi(t){this.vu=this.ox=this.Qd=this.D=null,this.gl=this.lc=this.j=!1,this.yn=this.Cd=0,this.Pq=this.It=J0,this.fl=this.Xo=!1,this.ju=1,this.hu=0,this.ud=this.Lg=NaN,this.Iw=0,this.zn=null,this.o=Ko,this.nc=new xt,this.cu=new xt,this.Rl=new nt,this.du=new nt,this.Fw=kl,t&&Object.assign(this,t)}function yh(t,e){if(t.cu.clear(),t.fl=!1,t.hu=0,t.ud=NaN,0<t.Rl.count&&t.Rl.clear(),0<t.du.count&&t.du.clear(),null!==e)for(t=e.links;t.next();)t.value.gf=null}function im(t,e,n,s,a,u){var c=t.nc;if(e instanceof U&&"position"===n&&(n="position:diagram"),("fill"===n||"stroke"===n||"background"===n||"areaBackground"===n)&&(pa(s),x_(),s=[Ji.j,Ji.C,Ji.o,Ji.L],pa(a),x_(),a=[Ji.j,Ji.C,Ji.o,Ji.L]),c.contains(e)){var f=c.H(e),p=f.start,g=f.end;void 0===p[n]&&(p[n]=gu(s)),g[n]=gu(a)}else g={},(p={})[n]=gu(s),g[n]=gu(a),f=p.position,e instanceof dt&&f instanceof A&&!f.u()&&e.diagram.animationManager.Se.contains("Expand SubGraph")&&f.assign(g.position),f=new Qw(p,g,u),c.add(e,f);(c=p[n])instanceof A&&!c.u()&&c.assign(t.o),u&&0===n.indexOf("position:")&&e instanceof ft?f.Tu.location=gu(e.location):u&&(f.Tu[n]=gu(s))}function gu(t){return t instanceof A||t instanceof Dt?t.copy():t}function Xf(t,e){if(!t.gl||e){var n=t.Qd;if(!1!==t.lc){var s=+new Date,a=s>t.yn?t.ud:s-t.Cd;e&&((a=t.Iw)<t.ud?(t.Cd=+new Date-a,t.yn=t.Cd+t.ud):a=t.ud),mh(n),Z0(t,a),ue(t.D,!0),rd(n),s>t.yn&&(t.Xo&&!t.fl?(t.Cd=+new Date,t.yn=t.Cd+t.ud,t.fl=!0):t.Zl(!1))}}}function Z0(t,e){for(var n=t.ud,s=t.nc.iterator,a=t.fl;s.next();){var u=s.key;if(!(u instanceof dt&&null===u.diagram)){var c=s.value,f=a?c.end:c.start;c=a?c.start:c.end;var g,p=pu;for(g in c)"position"===g&&(c["position:placeholder"]||c["position:nodeCollapse"])||null===p.get(g)||p.get(g)(u,f[g],c[g],t.Pq,e,n,t)}}}function J0(t,e,n,s){return 1>(t/=s/2)?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}function vh(t,e,n,s){return t===s?e+n:n*(1-Math.pow(2,-10*t/s))+e}function Qw(t,e,n){this.start=t,this.end=e,this.Tu={},this.Lu=n,this.Gv=!1}function Cr(t,e,n){this.od=null,this.ff=t,this.wp=n||Zf,this.zk=null,void 0!==e&&(this.zk=e,void 0===n&&(this.wp=t_))}Mr.className="AnimationManager",Mr.defineAnimationEffect=function(t,e){sd||(Jw(),sd=!0),pu.add(t,e)},Mr.Default=nm,Mr.AnimateLocations=qw,Mr.None=Fb,yi.prototype.suspend=function(){this.gl=!0},yi.prototype.advanceTo=function(t,e){e&&(this.gl=!1),this.Xo&&t>=this.ud&&(this.fl=!0,t-=this.ud),this.Iw=t,Xf(this,!0),mh(this.Qd),ue(this.D),rd(this.Qd),this.D.redraw()},(S=yi.prototype).start=function(){if(0===this.nc.count||this.lc)return this;for(var t=this.D,e=this.nc.iterator;e.next();){var n=e.value.end,s=e.key;if(n["position:placeholder"]){var a=s.findVisibleNode();if(a instanceof _t&&null!==a.placeholder){var u=a.placeholder;(a=u.da(St)).x+=(u=u.padding).left,a.y+=u.top,n["position:placeholder"]=a}}null===t&&(s instanceof U?t=s:s instanceof dt&&(t=s.diagram))}return null===t||(this.D=t,this.Qd=t.animationManager,!1===(e=this.Qd).isEnabled||(this.ud=isNaN(this.Lg)?e.duration:this.Lg,this.Pq=this.It,e.Yk&&e.Zk===nm&&this===e.defaultAnimation&&(this.Pq=vh,this.ud=isNaN(this.Lg)?600===e.duration?900:e.duration:this.Lg),this.Fw=t.scrollMode,this.isViewportUnconstrained&&(t.Ij=xu),mh(e),this.Rl.each(function(c){c.data=null,t.add(c)}),rd(e),this.lc=!0,this.Cd=+new Date,this.yn=this.Cd+this.ud,function tm(t,e){function n(){if(0<a.ds.count&&(s.addAll(a.ds),a.ds.clear(),a.lc=!0),!1!==a.lc&&0!==s.count){a.qu.addAll(s);for(var u=a.qu.iterator;u.next();){var c=u.value;if(!1!==c.lc){t:if(0<c.Rl.count)var f=!0;else{for(f=c.nc.iterator;f.next();){var p=f.key;if(p instanceof dt&&null!==p.diagram||p instanceof U){f=!0;break t}}f=!1}f?Xf(c,!1):c.gl=!0}}a.qu.clear(),mh(a),ue(a.D),rd(a),gt.requestAnimationFrame(n)}}var s=t.cj,a=t;t.lc?t.ds.add(e):(t.lc=!0,s.add(e),gt.requestAnimationFrame(function(){n()}))}(e,this))),this},S.dz=function(t,e){return t.Mc()?(this.Rl.add(t),this.D=e,this):this},S.add=function(t,e,n,s,a){if("position"===e&&n.A(s))return this;if(null===this.D&&(t instanceof U?this.D=t:t instanceof dt&&null!==t.diagram&&(this.D=t.diagram)),t instanceof ft){if(!t.isAnimated)return this;"position"===e&&(e="position:part")}return im(this,t,e,n,s,a),this},S.Ms=function(t){return!!this.lc&&null!==(t=this.nc.H(t))&&t.Gv},S.kv=function(t){return!!this.lc&&null!==(t=this.nc.H(t))&&(t.start.position||t.start.location)},S.stop=function(){return this.lc?(this.Zl(!0),this):this},S.Zl=function(t){if(null!==this.vu&&this.vu.ep.remove(this.ox),this.lc){var e=this.D,n=this.Qd;this.gl=this.lc=n.Yk=!1,mh(n);for(var s=this.nc,a=this.Rl.iterator;a.next();)e.remove(a.value);for(a=this.du.iterator;a.next();)a.value.s();a=this.Xo,s=s.iterator;for(var u=pu;s.next();){var v,c=s.key,f=s.value,p=a?f.end:f.start,g=a?f.start:f.end,y=f.Tu;for(v in g)if(null!==u.get(v)){var _=v;!f.Lu||"position:nodeCollapse"!==_&&"position:placeholder"!==_||(_="position"),u.get(_)(c,p[v],void 0!==y[v]?y[v]:f.Lu?p[v]:g[v],this.Pq,this.ud,this.ud,this)}f.Lu&&void 0!==y.location&&c instanceof ft&&(c.location=y.location),f.Gv&&c instanceof ft&&c.Pb(!1)}if(e.Hs.clear(),tp(e,!1),e.Qa(),e.N(),ue(e,!0),n.defaultAnimation===this){for(v=n.Al.iterator;v.next();)null!==(a=v.value).gf&&(a.points=a.gf,a.gf=null);n.Al.clear()}this.isViewportUnconstrained&&(e.scrollMode=this.Fw),rd(n),this.hu++,!t&&this.ju>this.hu?(this.fl=!1,this.start()):(this.zn&&this.zn(this),yh(this,null),n.Zl(this),e.Gb())}},S.Oj=function(t,e){var n=e.actualBounds,s=null;if(e instanceof _t&&(s=e.placeholder),null!==s?((n=s.da(St)).x+=(s=s.padding).left,n.y+=s.top,this.add(t,"position",n,t.position,!1)):this.add(t,"position",new A(n.x+n.width/2,n.y+n.height/2),t.position,!1),this.add(t,"scale",.01,t.scale,!1),t instanceof _t)for(t=t.memberParts;t.next();)(s=t.value)instanceof it&&this.Oj(s,e)},S.Mj=function(t,e){if(t.isVisible()){var n=null;if(e instanceof _t&&(n=e.placeholder),null!==n?this.add(t,"position:placeholder",t.position,n,!0):this.add(t,"position:nodeCollapse",t.position,e,!0),this.add(t,"scale",t.scale,.01,!0),(n=this.nc).contains(t)&&(n.H(t).Gv=!0),t instanceof _t)for(t=t.memberParts;t.next();)(n=t.value)instanceof it&&this.Mj(n,e)}},S.bA=function(t){var e=this.cu.get(t);return null===e&&this.cu.add(t,e={}),e},kt.Object.defineProperties(yi.prototype,{duration:{get:function(){return this.Lg},set:function(t){1>t&&ae(t,">= 1",yi,"duration"),this.Lg=t}},reversible:{get:function(){return this.Xo},set:function(t){this.Xo=t}},runCount:{get:function(){return this.ju},set:function(t){0<t?this.ju=t:q("Animation.runCount value must be a positive integer.")}},finished:{get:function(){return this.zn},set:function(t){this.zn!==t&&(this.zn=t)}},easing:{get:function(){return this.It},set:function(t){this.It=t}},isViewportUnconstrained:{get:function(){return this.j},set:function(t){this.j=t}},isAnimating:{get:function(){return this.lc}}}),yi.prototype.getTemporaryState=yi.prototype.bA,yi.prototype.stop=yi.prototype.stop,yi.prototype.add=yi.prototype.add,yi.prototype.addTemporaryPart=yi.prototype.dz,yi.className="Animation",yi.EaseLinear=function(t,e,n,s){return n*t/s+e},yi.EaseInOutQuad=J0,yi.EaseInQuad=function(t,e,n,s){return n*(t/=s)*t+e},yi.EaseOutQuad=function(t,e,n,s){return-n*(t/=s)*(t-2)+e},yi.EaseInExpo=function(t,e,n,s){return 0===t?e:n*Math.pow(2,10*(t/s-1))+e},yi.EaseOutExpo=vh,Qw.className="AnimationState",Cr.prototype.copy=function(){var t=new Cr(this.ff);t.wp=this.wp;var e=this.zk;if(null!==e){var n={};void 0!==e.duration&&(n.duration=e.duration),void 0!==e.finished&&(n.finished=e.finished),void 0!==e.easing&&(n.easing=e.easing),t.zk=n}return t},kt.Object.defineProperties(Cr.prototype,{propertyName:{get:function(){return this.ff},set:function(t){this.ff=t}},animationSettings:{get:function(){return this.zk},set:function(t){this.zk=t}},startCondition:{get:function(){return this.wp},set:function(t){this.wp=t}}});var Zf=new Q(Cr,"Default",1),t_=new Q(Cr,"Immediate",2),Q0=new Q(Cr,"Bundled",3);function Kn(t){bn(this),this.D=null,this.Ha=new st,this.na="",this.mb=1,this.o=!1,this.j=this.oi=this.C=this.Od=this.Nd=this.sc=this.Sb=this.Rb=this.Hb=this.Ma=this.Pd=this.Ba=this.ke=this.wa=this.L=!0,this.Jo=[],t&&Object.assign(this,t)}function ad(t,e){var n=1;return 1!==t.mb&&(e.globalAlpha=(n=e.globalAlpha)*t.mb),n}function rm(t,e,n){if(e=function Jf(t,e,n){var s=n.zOrder;if(isNaN(s))return e;var a=(t=t.Ha).count;if(1>=a)return e;if(0>e&&(e=t.indexOf(n)),0>e)return-1;for(var u=e-1,c=NaN;0<=u&&(c=t.J(u).zOrder,isNaN(c));)u--;for(var f=e+1,p=NaN;f<a&&(p=t.J(f).zOrder,isNaN(p));)f++;if(!isNaN(c)&&c>s)for(;;){if(-1===u||c<=s){if(++u===e)break;return t.eb(e),t.wb(u,n),u}for(c=NaN;0<=--u&&(c=t.J(u).zOrder,isNaN(c)););}else if(!isNaN(p)&&p<s)for(;;){if(f===a||p>=s){if(--f===e)break;return t.eb(e),t.wb(f,n),f}for(p=NaN;++f<a&&(p=t.J(f).zOrder,isNaN(p)););}return e}(t,e,n),n instanceof _t&&null!==n&&isNaN(n.zOrder)){if(0!==n.memberParts.count){for(var s=-1,a=t.Ha.m,u=a.length,c=0;c<u;c++){var f=a[c];if(f===n&&(e=c,0<=s)||0>s&&f.containingGroup===n&&(s=c,0<=e))break}!(0>s)&&s<e&&((a=t.Ha).eb(e),a.wb(s,n))}null!==(n=n.containingGroup)&&rm(t,-1,n)}}function U(t,e){if(Sh||(function hp(){if(Wr){var t=gt.document.createElement("canvas"),e=t.getContext("2d"),n=Tt("7ca11abfd022028846");e[n]=Tt("398c3597c01238");for(var s=["5da73c80a36455d6038e4972187c3cae51fd22",au.Dx+"4ae6247590da4bb21c324ba3a84e385776",Et.xF+"fb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387",V.za],a=1;5>a;a++)e[Tt("7ca11abfd7330390")](Tt(s[a-1]),10,15*a);for(e[n]=Tt("39f046ebb36e4b"),n=1;5>n;n++)e[Tt("7ca11abfd7330390")](Tt(s[n-1]),10,15*n);(4!==s.length||"5"!==s[0][0]||"7"!==s[3][0])&&(Et.prototype.Hd=Et.prototype.Cx),m_=t}}(),Sh=!0),bn(this),fd=this,this.qb=!0,this.Ga=null,this.ta=this.ua=0,this.Ca=null,Wr){var n=this,s=function(){n.removeEventListener(gt.document,"DOMContentLoaded",s,!1),n.setRTL()};null!==gt.document.body?this.setRTL():n.addEventListener(gt.document,"DOMContentLoaded",s,!1)}this.at=this.Ab=this.zl=null,ap.add("Model",$t),this.dc=null;var a=this;return this.rw=function(u){var c=a.partManager;if(u.model===c.diagram.model&&c.diagram.Z){c.diagram.Z=!1;try{""===u.modelChange&&u.change===De&&c.updateDataBindings(u.object,u.propertyName)}finally{c.diagram.Z=!0}}},this.sw=function(u){a.partManager.doModelChanged(u)},this.Wq=this.gp=this.Or=null,om(this),this.model=Lu(),this.kh=!0,tv(this),this.layout=new Ht,this.kh=!1,this.nk=this.pk=this.mk=this.lk=this.xA=this.ik=this.gw=this.Mw=this.Ht=null,this.oq=function(){},this.preventDefault=null,this.Tn=!1,this.Zh=new y_,void 0!==t&&("string"==typeof t||gt.Element&&t instanceof Element?mm(this,t):e=t),this.qb=!1,e&&this.zm(e),this}function om(t){t.Qd=new Mr,t.Qd.Ne(t),t.ub=17,t.ix=!1,t.Vn=!1,t.iu="default",t.Oa=new st,t.Qy=new xt,t.dg=null,t.wy(),t.bl=null,t.vy(),t.mb=1,t.ja=new A(NaN,NaN).freeze(),t.ku=new A(NaN,NaN),t.sa=1,t.Sq=1,t.uv=new A(NaN,NaN).freeze(),t.wv=NaN,t.$v=1e-4,t.Lv=100,t.vb=new Et,t.lt=new A(NaN,NaN).freeze(),t.ov=new z(NaN,NaN,NaN,NaN).freeze(),t.Hj=new Ct(0,0,0,0).freeze(),t.Ij=kl,t.ft=!1,t.bt=null,t.ct=null,t.Ph=ar,t.Hk=Xt,t.Rg=ar,t.ir=Xt,t.qv=St,t.zv=St,t.Vc=!0,t.Qn=!1,t.te=new nt,t.Xh=new xt,t.rn=!0,t.Cq=250,t.Ak=-1,t.Eq=new Ct(16,16,16,16).freeze(),t.kg=!1,t.Rk=!1,t.An=!0,t.cr=new or,t.cr.diagram=t,t.hh=new or,t.hh.diagram=t,t.tj=new or,t.tj.diagram=t,t.Ag=null,t.df=null,t.ru=!1,t.Ft=null,t.Et=null,function Vb(t){function e(a){var u=a.toLowerCase(),c=new st;n.add(a,c),n.add(u,c),s.add(a,a),s.add(u,a)}var n=new xt,s=new xt;e("InitialAnimationStarting"),e("AnimationStarting"),e("AnimationFinished"),e("BackgroundSingleClicked"),e("BackgroundDoubleClicked"),e("BackgroundContextClicked"),e("ClipboardChanged"),e("ClipboardPasted"),e("DocumentBoundsChanged"),e("ExternalObjectsDropped"),e("GainedFocus"),e("InitialLayoutCompleted"),e("LayoutCompleted"),e("LinkDrawn"),e("LinkRelinked"),e("LinkReshaped"),e("LostFocus"),e("Modified"),e("ObjectSingleClicked"),e("ObjectDoubleClicked"),e("ObjectContextClicked"),e("PartCreated"),e("PartResized"),e("PartRotated"),e("SelectionMoved"),e("SelectionCopied"),e("SelectionDeleting"),e("SelectionDeleted"),e("SelectionGrouped"),e("SelectionUngrouped"),e("ChangingSelection"),e("ChangedSelection"),e("SubGraphCollapsed"),e("SubGraphExpanded"),e("TextEdited"),e("TreeCollapsed"),e("TreeExpanded"),e("ViewportBoundsChanged"),e("InvalidateDraw"),t.Ft=n,t.Et=s}(t),t.wi=new nt,t.Av=!0,t.it=Th,t.ow=!1,t.kt=Ch,t.gt=null,t.$u=null,t.Su=null,t.Nu="auto",t.Zi="auto",t.Bg=null,t.Jg=null,t.Dg=null,t.bh=null,t.$g=null,t.Zg=null,t.fw=null,t.Xg=null,t.pv=!1,t.Yg=null,t.ah=null,t.uh=null,t.Eg=null,t.bu=!1,t.fu={},t.wl=[null,null],t.Gu=null,t.kh=!1,t.tw=!1,t.pu=!1,t.Dt=!1,t.qw=!0,t.Wc=!1,t.pj=!1,t.ux=!0,t.se=-2,t.fh=new xt,t.Oo=new st,t.Sg=!1,t.vd=!0,t.ot=!0,t.L=!0,t.wa=!0,t.pt=!1,t.qt=!0,t.ke=!0,t.Ba=!0,t.Pd=!0,t.tt=!0,t.Ma=!0,t.Hb=!0,t.Rb=!0,t.Sb=!0,t.sc=!0,t.Nd=!0,t.Od=!0,t.Zs=!0,t.Fu=!0,t.pw=!1,t.el=!1,t.Nn=!0,t.On=!0,t.st=!0,t.zu=!0,t.dt=16,t.et=16,t.Nr=!1,t.mu=!1,t.ou=0,t.nu=0,t.nb=new Ct(5).freeze(),t.jx=(new nt).freeze(),t.Wv=999999999,t.Rw=(new nt).freeze(),t.lj=!0,t.mj=!0,t.nj=!0,t.Ye=!1,t.Sf=!1,t.uc=null,t.Oh=!0,t.Uf=!1,t.Ky=new nt,t.Sw=new nt,t.Zc=null,t.ax=1,t.kx=0,t.dd={scale:1,position:new A,bounds:new z,Ex:new Dt,ny:new Dt,iy:!1},t.tx=new z(NaN,NaN,NaN,NaN).freeze(),t.Gp=new Dt(NaN,NaN).freeze(),t.Uq=new z(NaN,NaN,NaN,NaN).freeze(),t.Dv=!1,t.j=null,t.C=null,t.o=null,t.Lw=null,t.Jw=null,t.Kw=null,t.tk=null,t.$i=null,t.bj=null,t.j=new xt;var e=new it,n=new Jt;n.bind(new Ae("text","",xr)),e.add(n),t.Lw=e,t.j.add("",e),e=new it,(n=new Jt).stroke="brown",n.bind(new Ae("text","",xr)),e.add(n),t.j.add("Comment",e),(e=new it).selectable=!1,e.avoidable=!1,(n=new bt).figure="Ellipse",n.fill="black",n.stroke=null,n.desiredSize=new Dt(3,3).ca(),e.add(n),t.j.add("LinkLabel",e),t.C=new xt,(e=new _t).selectionObjectName="GROUPPANEL",e.type=W.Vertical,(n=new Jt).font="bold 12pt sans-serif",n.bind(new Ae("text","",xr)),e.add(n),(n=new W(W.Auto)).name="GROUPPANEL";var s=new bt;s.figure="Rectangle",s.fill="rgba(128,128,128,0.2)",s.stroke="black",n.add(s),(s=new Pn).padding=new Ct(5,5,5,5).ca(),n.add(s),e.add(n),t.Jw=e,t.C.add("",e),t.o=new xt,e=new K,(n=new bt).isPanelMain=!0,e.add(n),(n=new bt).toArrow="Standard",n.fill="black",n.stroke=null,n.strokeWidth=0,e.add(n),t.Kw=e,t.o.add("",e),e=new K,(n=new bt).isPanelMain=!0,n.stroke="brown",e.add(n),t.o.add("Comment",e),(e=new Rt).type=W.Auto,(n=new bt).fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),(n=new Pn).margin=new Ct(1.5,1.5,1.5,1.5).ca(),e.add(n),t.tk=e,t.$i=e,(e=new Rt).type=W.Link,(n=new bt).isPanelMain=!0,n.fill=null,n.stroke="dodgerblue",n.strokeWidth=3,e.add(n),t.bj=e,t.Wb=null,t.gr=!1,t.Kk=null,t.partManager=new $t,t.toolManager=new be,t.toolManager.initializeStandardTools(),t.defaultTool=t.toolManager,t.currentTool=t.defaultTool,t.ev=null,t.pn=new _d,t.lw=null,t.$s=null,t.Zr=!1,t.commandHandler=Qf(),t.$r=!1,t.er=null,t.fr=fe,t.qx=!1,t.ec=1,t.si=null,t.wr=1,t.zr=0,t.Zw=[0,0,0,0,0],t.Ar=0,t.sr=1,t.Uw=0,t.Vw=new A,t.Xy=500,t.Dq=new A,t.Vt=!1}function qf(t,e){t.animationManager.rc(!0),t.jx=(new nt).freeze(),t.Rw=(new nt).freeze();var n=t.skipsUndoManager;null!==t.model&&(t.skipsUndoManager=!0);var s=null;null!==t.Wb&&null!==(s=t.Wb.part)&&t.remove(s);var a=[],u=t.Oa.length;if(e){for(e=0;e<u;e++)for(var c=t.Oa.m[e].parts;c.next();){var f=c.value;f!==s&&null===f.data&&a.push(f)}for(e=0;e<a.length;e++)t.remove(a[e])}for(e=0;e<u;e++)t.Oa.m[e].clear();return t.partManager.clear(),t.te.clear(),t.Xh.clear(),t.wi.clear(),t.Kk=null,t.Oo.clear(),Ad(),t.fh.clear(),ce=[],null!==s&&(t.add(s),t.partManager.parts.remove(s)),null!==t.model&&(t.skipsUndoManager=n),a}function Qf(){return null}function ld(t){30<t.zr&&(t.si=1)}function tp(t,e){null!==t.si&&(t.si=null,e&&t.oq(),sh&&sh.Ox||(t.zr=0,t.Zw=[0,0,0,0,0],t.Ar=0))}function sm(t){if(null!==t.Ca){var e=t.Ga;if(0!==e.clientWidth&&0!==e.clientHeight){t.ix||t.setScrollWidth();var n=t.Sf?t.ub:0,s=t.Ye?t.ub:0,a=t.ec;t.ec=t.computePixelRatio(),t.ec!==a&&(t.Qn=!0,t.Gb()),(e.clientWidth!==t.ua+n||e.clientHeight!==t.ta+s)&&(t.mj=!0,t.Vc=!0,null!==(e=t.layout)&&e.isViewportSized&&t.autoScale===ar&&(t.Rk=!0,e.B()),t.Wc||t.Gb())}}}function tv(t){var e=new Kn;e.name="Background",t.Ul(e),(e=new Kn).name="",t.Ul(e),(e=new Kn).name="Foreground",t.Ul(e),(e=new Kn).name="Adornment",e.isTemporary=!0,e.isInDocumentBounds=!1,t.Ul(e),(e=new Kn).name="Tool",e.isTemporary=!0,e.isInDocumentBounds=!0,t.Ul(e),(e=new Kn).name="Grid",e.allowSelect=!1,e.pickable=!1,e.isTemporary=!0,e.isInDocumentBounds=!1,t.xx(e,t.Zj("Background"))}function e_(t){t.Wb=new W(W.Grid),t.Wb.name="GRID";var e=new bt;e.figure="LineH",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Wb.add(e),(e=new bt).figure="LineH",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Wb.add(e),(e=new bt).figure="LineH",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Wb.add(e),(e=new bt).figure="LineV",e.stroke="lightgray",e.strokeWidth=.5,e.interval=1,t.Wb.add(e),(e=new bt).figure="LineV",e.stroke="gray",e.strokeWidth=.5,e.interval=5,t.Wb.add(e),(e=new bt).figure="LineV",e.stroke="gray",e.strokeWidth=1,e.interval=10,t.Wb.add(e),(e=new ft).add(t.Wb),e.layerName="Grid",e.zOrder=0,e.isInDocumentBounds=!1,e.isAnimated=!1,e.pickable=!1,e.locationObjectName="GRID",t.add(e),t.partManager.parts.remove(e),t.Wb.visible=!1}function Lb(){this.D.mu?this.D.mu=!1:this.D.isEnabled?this.D.Kx(this):ep(this.D)}function am(t){this.D.isEnabled?(this.D.ou=t.target.scrollTop,this.D.nu=t.target.scrollLeft):ep(this.D)}function ud(t,e){if(t.fixedBounds.u())return e.assign(t.fixedBounds),e.Mp(t.nb),e;for(var n=!0,s=t.Oa.m,a=s.length,u=0;u<a;u++){var c=s[u];if(c.visible&&c.isInDocumentBounds)for(var f=(c=c.Ha.m).length,p=0;p<f;p++){var g=c[p];g.isInDocumentBounds&&g.isVisible()&&(g=g.actualBounds).u()&&(n?(n=!1,e.assign(g)):e.Qc(g))}}return n&&e.h(0,0,0,0),e.Mp(t.nb),e}function Po(t,e){if((e||t.Uf)&&!t.qb&&null!==t.Ca&&t.documentBounds.u()){if(e){var n=t.initialPosition;if(n.u())return void(t.position=n);(n=A.alloc()).Ti(t.documentBounds,t.initialDocumentSpot);var s=t.viewportBounds;s=z.allocAt(0,0,s.width,s.height);var a=A.alloc();a.Ti(s,t.initialViewportSpot),a.h(n.x-a.x,n.y-a.y),t.position=a,z.free(s),A.free(a),A.free(n)}t.qb=!0,n=t.Ph,e&&t.Rg!==ar&&(n=t.Rg);var u=n!==ar?wh(t,n):t.scale;n=t.ja.x,s=t.ja.y,a=t.ua/u;var c=t.ta/u,f=t.Hk,p=t.ir;e&&!f.hb()&&(p.hb()||p.Nb())&&(f=p.Nb()?Ut:p),lm(t,t.documentBounds,a,c,f,e),e=t.scale,t.scale=u,t.qb=!1,wu(t),hd(t,!0,!1),V.w((u=t.viewportBounds).x,n)&&V.w(u.y,s)&&V.w(u.width,a)&&V.w(u.height,c)||t.onViewportBoundsChanged(new z(n,s,a,c),u,e,!1)}}function wh(t,e){var n=t.Sq;if(null===t.Ca)return n;t.Ta();var s=t.documentBounds;if(!s.u())return n;var a=s.width,u=t.ua+(t.Sf?t.ub:0),c=t.ta+(t.Ye?t.ub:0),f=u/a,p=c/(s=s.height);return e===lp?((e=Math.min(p,f))>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):e===md?((e=p>f?(c-t.ub)/s:(u-t.ub)/a)>n&&(e=n),e<t.minScale&&(e=t.minScale),e>t.maxScale&&(e=t.maxScale),e):t.scale}function lm(t,e,n,s,a,u){var c=A.allocAt(t.ja.x,t.ja.y),f=c.x,p=c.y;if(null!==t.er){var g=A.alloc();f=(g=t.er.da(St,g)).x-t.fr.x/t.scale,p=g.y-t.fr.y/t.scale,a=Vn,A.free(g)}(u||t.scrollMode===kl)&&(a.hb()&&(n>e.width&&(f=e.x+(a.x*e.width+a.offsetX)-(a.x*n-a.offsetX)),s>e.height&&(p=e.y+(a.y*e.height+a.offsetY)-(a.y*s-a.offsetY))),u=n-e.width,n<e.width+(a=t.Hj).left+a.right?(f=Math.min(f+n/2,e.right+Math.max(u,a.right)-n/2),f=Math.max(f,e.left-Math.max(u,a.left)+n/2),f-=n/2):f>e.left?f=e.left:f<e.right-n&&(f=e.right-n),n=s-e.height,s<e.height+a.top+a.bottom?(p=Math.min(p+s/2,e.bottom+Math.max(n,a.bottom)-s/2),p=Math.max(p,e.top-Math.max(n,a.top)+s/2),p-=s/2):p>e.top?p=e.top:p<e.bottom-s&&(p=e.bottom-s)),c.x=isFinite(f)?f:-t.nb.left,c.y=isFinite(p)?p:-t.nb.top,null!==t.positionComputation&&(e=t.positionComputation(t,c),c.x=e.x,c.y=e.y),Tl(t.Qd,t.ja,c),t.ja.h(c.x,c.y),go(t),A.free(c)}function mu(t,e,n,s){for(void 0===n&&(n=null),void 0===s&&(s=null),Ai(t),t=t.Oa.iteratorBackwards;t.next();){var a=t.value;if(a.visible&&!a.isTemporary&&null!==(a=a.Zb(e,n,s)))return a}return null}function Rs(t,e,n){var s=t.hh;return t.hh=t.tj,t.tj=s,s.diagram=t,s.event=e,n?xh(t,e,s):(s.viewPoint=t.hh.viewPoint,s.documentPoint=t.hh.documentPoint),t=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),s.modifiers=t,s.button=e.button,void 0!==e.buttons&&(s.buttons=e.buttons),Se&&0===e.button&&e.ctrlKey&&(s.button=2),s.down=!1,s.up=!1,s.clickCount=1,s.delta=0,s.handled=!1,s.bubbles=!1,s.timestamp=e.timeStamp,s.isMultiTouch=!1,s.targetDiagram=yu(e),s.targetObject=null,s}function yu(t){var e=t.target.D;return e||((e=t.path)||"function"!=typeof t.composedPath||(e=t.composedPath()),e&&e[0]?e[0].D:null)}function vu(t,e,n,s,a,u){var c=t.hh;return t.hh=t.tj,t.tj=c,c.diagram=t,c.clickCount=1,t=c.delta=0,e.ctrlKey&&(t+=1),e.altKey&&(t+=2),e.shiftKey&&(t+=4),e.metaKey&&(t+=8),c.modifiers=t,c.event=e,c.timestamp=e.timeStamp,c.button=e.button,c.buttons=e.buttons,Se&&0===e.button&&e.ctrlKey&&(c.button=2),c.down=n,c.up=s,c.handled=!1,c.bubbles=a,c.isMultiTouch=u,c}function Sl(t,e){return!!t.bubbles||(void 0!==e.stopPropagation&&e.stopPropagation(),!1!==e.cancelable&&e.preventDefault(),e.cancelBubble=!0,!1)}function xh(t,e,n){var s=t.Ca,a=t.ua,u=t.ta,c=0,f=0;null!==s&&(s=s.getBoundingClientRect(),c=e.clientX-a/s.width*s.left,f=e.clientY-u/s.height*s.top),n.viewPoint.h(c,f),null!==t.vb?(e=A.allocAt(c,f),t.vb.Hd(e),n.documentPoint.assign(e),A.free(e)):n.documentPoint.h(c,f)}function Dh(t,e,n,s){if(void 0!==e.targetTouches){if(2>e.targetTouches.length)return;e=e.targetTouches[n]}else{if(null===t.wl[0])return;e=t.wl[n]}null!==(n=t.Ca)&&(n=n.getBoundingClientRect(),s.h(e.clientX-t.ua/n.width*n.left,e.clientY-t.ta/n.height*n.top))}function hd(t,e,n){t.animationManager.defaultAnimation.isAnimating||t.qb||!t.mj||ep(t)||(e&&Ai(t),n&&Po(t,!1))}function ue(t,e){if(!t.Wc&&(t.kg=!1,null!==t.Ga||t.Gp.u())){t.Wc=!0;var n=t.animationManager,s=t.Oo;if(!n.isAnimating&&0!==s.length){for(var a=s.m,u=a.length,c=0;c<u;c++){var f=a[c];hr(f,!1),f.s()}s.clear()}0<(s=t.Sw).count&&(s.each(function(p){p.ew()}),s.clear()),a=s=!1,n.defaultAnimation.isAnimating&&(a=!0,s=t.skipsUndoManager,t.skipsUndoManager=!0),n.tb||sm(t),hd(t,!1,!0),null!==t.Wb&&(t.Wb.visible&&!t.gr&&(Ga(t),t.gr=!0),!t.Wb.visible&&t.gr&&(t.gr=!1)),Ai(t),u=!1,(!t.Uf||t.Oh)&&(t.Uf?ov(t,!t.Rk):(t.xa("Initial Layout"),!1===n.isEnabled&&n.rc(),ov(t,!1)),u=!0),t.Rk=!1,Ai(t),t.pu||function fS(t){t.Wc||Ai(t),t.Ta()}(t),hd(t,!0,!1),c=!1,u?((n=z.alloc()).assign(t.viewportBounds),t.Uf||(c=t.Uf=!0,t.skipsUndoManager||(t.undoManager.isPendingClear=!0),t.undoManager.isPendingUnmodified=!0,function jb(t){var e=t.sa;if(t.Rg!==ar)t.scale=wh(t,t.Rg);else if(t.Ph!==ar)t.scale=wh(t,t.Ph);else{var n=t.initialScale;isFinite(n)&&0<n&&(t.scale=n)}t.sa!==e&&(wu(t),hd(t,!0,!1)),Po(t,!0),t.Md(e=t.Oa.m,e.length,t,t.viewportBounds),t.S("InitialLayoutCompleted"),t.ku.assign(t.ja),Ga(t)}(t)),t.S("LayoutCompleted"),n.A(t.viewportBounds)||hd(t,!0,!1),z.free(n)):n.Yk&&n.sx&&(t.Rg!==ar?t.scale=wh(t,t.Rg):t.Ph!==ar?t.scale=wh(t,t.Ph):(n=t.initialScale,isFinite(n)&&0<n&&(t.scale=n)),Po(t,!0)),Ai(t),u&&c&&t.Xa("Initial Layout"),t.Iu(),e||t.pc(t.Ab),a&&(t.skipsUndoManager=s),t.Wc=!1}}function Ai(t){if(0!==t.te.count&&(t.Wc||!t.animationManager.isTicking)){for(var e=0;23>e;e++){var n=t.te.iterator;if(null===n||0===t.te.count)break;t.te=new nt,t.ew(n,t.te)}t.nodes.each(function(s){s instanceof _t&&0!=(65536&s.R)&&(s.R=65536^s.R)})}}function n_(t,e){for(var n=Lt(),s=Lt(),a=e.memberParts;a.next();){var u=a.value;u.isVisible()&&(u instanceof _t?(mo(u)||Sr(u)||ya(u))&&n_(t,u):u instanceof K?u.fromNode===e||u.toNode===e?s.push(u):n.push(u):(u.measure(1/0,1/0),u.arrange()))}for(t=n.length,a=0;a<t;a++)(u=n[a]).measure(1/0,1/0),u.arrange();for(ee(n),e.measure(1/0,1/0),e.arrange(),t=s.length,e=0;e<t;e++)(n=s[e]).measure(1/0,1/0),n.arrange();ee(s)}function nv(t,e,n,s,a,u,c,f,p,g){if(null!==t.Ga){null===t.Ca&&q("No canvas specified"),void 0===c&&(c=null),void 0===f&&(f=null),void 0===p&&(p=!1),void 0===g&&(g=!1),hm(t),t.Ab.Hc(!0),Ls(t),t.pj=!0;var y=t.sa;t.sa=a;var v=t.Oa.m,_=v.length;try{var b=new z(u.x,u.y,s.width/a,s.height/a),D=b.copy();D.Mp(n),Ga(t,D),Ai(t),t.Md(v,_,t,b),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,s.width,s.height),null!==f&&""!==f&&(e.fillStyle=f,e.fillRect(0,0,s.width,s.height));var k=t.ec;e.scale(k,k);var O=Et.alloc();O.reset(),O.translate(n.left,n.top),O.scale(a),0===u.x&&0===u.y||O.translate(-u.x,-u.y),e.setTransform(O.m11,O.m12,O.m21,O.m22,O.dx,O.dy),Et.free(O),i_(t,e),e.globalAlpha=t.mb;var E=t.Zj("Grid");if(c){var R=new nt,F=c.iterator;for(F.reset();F.next();){var j=F.value;j instanceof ft&&(g||j.layer!==E)&&R.add(j)}for(g=0;g<_;g++){var L=v[g];E=e;var G=t;if(L.visible&&0!==L.mb&&(p||!L.isTemporary)){var ot=L.Ha.m,Z=ot.length;if(0!==Z){var ut=ad(L,E),et=L.Jo;et.length=0;var Y=G.scale,At=z.alloc();for(n=0;n<Z;n++){var Mt=ot[n];R.contains(Mt)&&L.Di(E,Mt,G,et,Y,At,!1)}z.free(At),E.globalAlpha=ut}}}}else for(R=0;R<_;R++)(G=v[R])===E?g&&G.pc(e,t,!0):G.pc(e,t,p);t.pj=!1,t.Zh&&gm(t.Zh,t)&&t.Wq()}finally{t.sa=y,t.Ab.Hc(!0),Ls(t),t.Md(v,_,t,t.viewportBounds),Ga(t)}}}function i_(t,e){null!==(t=t.dg)&&(void 0!==t.imageSmoothingEnabled&&e.zy(!!t.imageSmoothingEnabled),null!=(t=t.defaultFont)&&(e.font=t))}function um(t,e){var a,n=t instanceof W,s=t instanceof U;for(a in e){""===a&&q("Setting properties requires non-empty property names");var u=t,c=a;if(n||s){var f=a.indexOf(".");if(0<f){var p=a.substring(0,f);n?u=t.Ya(p):null==(u=t[p])&&(u=t.toolManager[p]),Kt(u)?c=a.substr(f+1):q("Unable to find object named: "+p+" in "+t.toString()+" when trying to set property: "+a)}}if("_"!==c[0]&&!Ew(u,c)){if(s&&"ModelChanged"===c){t.zx(e[c]);continue}if(s&&"Changed"===c){t.yh(e[c]);continue}if(s&&Ew(t.toolManager,c))u=t.toolManager;else{if(s&&l_(t,c)){t.Nj(c,e[c]);continue}if(t instanceof ct&&"Changed"===c){t.yh(e[c]);continue}q('Trying to set undefined property "'+c+'" on object: '+u.toString())}}u[c]=e[a],"_"===c[0]&&u instanceof dt&&u.wx(c)}}function wu(t){!1===t.mj&&(t.mj=!0)}function Ls(t){!1===t.nj&&(t.nj=!0)}function hm(t){!1!==t.Qn&&(t.Qn=!1,Ui(t,t.ua,t.ta))}function Ui(t,e,n){go(t);var s=t.ec;t.Ca.resize(e*s,n*s,e,n)&&(t.Vc=!0,t.Ab.Hc(!0))}function ep(t){var e=t.Ca;if(null===e||t.Gp.u())return!0;var n=t.Ga,s=t.ua,a=t.ta,u=t.viewportBounds;if(!t.viewportBounds.u())return!0;var c=u.x,f=u.y,p=u.width,g=u.height,y=!1,v=t.Sf?t.ub:0,_=t.Ye?t.ub:0,b=n.clientWidth||s+v,D=n.clientHeight||a+_;if((b!==s+v||D!==a+_)&&(t.Sf=!1,t.Ye=!1,_=v=0,t.ua=b,t.ta=D,y=t.Qn=!0,go(t)),!(y||t.Sf||t.Ye||t.Nn||t.On))return!0;t.mj=!1;var k=t.documentBounds,O=0,E=0,R=0,F=0;n=u.width;var j=u.height,L=t.Hj;t.contentAlignment.hb()?(k.width>n&&(O=L.left,E=L.right),k.height>j&&(R=L.top,F=L.bottom)):(O=L.left,E=L.right,R=L.top,F=L.bottom),L=k.width+O+E;var G=k.height+R+F;O=k.x-O;var ot=u.x;E=k.right+E;var Z=u.right+v;R=k.y-R;var ut=u.y;k=k.bottom+F,F=u.bottom+_;var et="1px",Y="1px";if(b=L>b/(u=t.scale),D=G>D/u,t.scrollMode===kl&&(b||D)&&(b&&t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(b=1,O+1<ot&&(b=Math.max((ot-O)*u+t.ua,b)),E>Z+1&&(b=Math.max((E-Z)*u+t.ua,b)),n+v+1<L&&(b=Math.max((L-n)*u+t.ua,b)),et=b.toString()+"px"),D&&t.hasVerticalScrollbar&&t.allowVerticalScroll&&(b=1,R+1<ut&&(b=Math.max((ut-R)*u+t.ta,b)),k>F+1&&(b=Math.max((k-F)*u+t.ta,b)),j+_+1<G&&(b=Math.max((G-j)*u+t.ta,b)),Y=b.toString()+"px")),D="1px"!==Y,(b="1px"!==et)&&D||!b&&!D||(D&&(Z-=t.ub),b&&(F-=t.ub),L<n+v||!t.hasHorizontalScrollbar||!t.allowHorizontalScroll||(v=1,O+1<ot&&(v=Math.max((ot-O)*u+t.ua,v)),E>Z+1&&(v=Math.max((E-Z)*u+t.ua,v)),n+1<L&&(v=Math.max((L-n)*u+t.ua,v)),et=v.toString()+"px"),v=t.ta,(b="1px"!==et)!==t.Ye&&(v=b?t.ta-t.ub:t.ta+t.ub),G<j+_||!t.hasVerticalScrollbar||!t.allowVerticalScroll||(_=1,R+1<ut&&(_=Math.max((ut-R)*u+v,_)),k>F+1&&(_=Math.max((k-F)*u+v,_)),j+1<G&&(_=Math.max((G-j)*u+v,_)),Y=_.toString()+"px"),D="1px"!==Y),t.Nr&&b===t.Ye&&D===t.Sf)return s===t.ua&&a===t.ta||t.gd(),!1;if(b!==t.Ye&&(t.ta="1px"===et?t.ta+t.ub:Math.max(t.ta-t.ub,1),y=!0),t.Ye=b,t.gp.style.width=et,D!==t.Sf&&(t.ua="1px"===Y?t.ua+t.ub:Math.max(t.ua-t.ub,1),y=!0,t.Vn&&(_=A.alloc(),D?(e.style.left=t.ub+"px",t.position=_.h(t.ja.x+t.ub/t.scale,t.ja.y)):(e.style.left="0px",t.position=_.h(t.ja.x-t.ub/t.scale,t.ja.y)),A.free(_))),y&&go(t),t.Sf=D,t.gp.style.height=Y,t.mu=!0,y&&(t.Qn=!0),_=(e=t.Or).scrollLeft,t.hasHorizontalScrollbar&&t.allowHorizontalScroll&&(n+1<L?_=(t.position.x-O)*u:O+1<ot?_=e.scrollWidth-e.clientWidth:E>Z+1&&(_=t.position.x*u)),t.Vn)switch(t.iu){case"negative":_=-(e.scrollWidth-_-e.clientWidth);break;case"reverse":_=e.scrollWidth-_-e.clientWidth}return e.scrollLeft=_,t.hasVerticalScrollbar&&t.allowVerticalScroll&&(j+1<G?e.scrollTop=(t.position.y-R)*u:R+1<ut?e.scrollTop=e.scrollHeight-e.clientHeight:k>F+1&&(e.scrollTop=t.position.y*u)),D=t.ta,e.style.width=(b=t.ua)+(t.Sf?t.ub:0)+"px",e.style.height=D+(t.Ye?t.ub:0)+"px",s===b&&a===D&&!t.animationManager.tb||(s=z.allocAt(c,f,p,g),t.onViewportBoundsChanged(s,t.viewportBounds,u,y),z.free(s),!1)}function bh(t,e,n){var s=e.layer;null!==s&&s.diagram===t&&(e.isSelected=!1,e.isHighlighted=!1,e.B(2),n&&e.Wj(),0<=(n=s.fc(-1,e,!1))&&t.Wa(dn,"parts",s,e,null,n,null),null!==(t=e.layerChanged)&&t(e,s,null))}function Nl(t,e,n,s,a,u){if(!e.contains(n)&&(void 0===u&&(u=!1),!s||u||n.canMove()||n.canCopy()))if(void 0===a&&(a=Ao(t)),n instanceof it){if(e.add(n,t.Ad(a,n,n.location)),n instanceof _t&&(null!==n.placeholder||a.dragsMembers))for(u=n.memberParts;u.next();)Nl(t,e,u.value,s,a,a.groupsAlwaysMove);for(u=n.linksConnected;u.next();){var c=u.value;if(!e.contains(c)){var f=c.fromNode,p=c.toNode;null!==f&&e.contains(f)&&null!==p&&e.contains(p)&&Nl(t,e,c,s,a)}}if(a.dragsTree)for(n=n.Zu();n.next();)Nl(t,e,n.value,s,a)}else if(n instanceof K)for(e.add(n,t.Ad(a,n)),n=n.labelNodes;n.next();)Nl(t,e,n.value,s,a);else n instanceof Rt||e.add(n,t.Ad(a,n,n.location))}function iv(t,e,n,s,a){if(null!==e&&0!==e.count){var u=A.alloc(),c=A.alloc();c.assign(n),isNaN(c.x)&&(c.x=0),isNaN(c.y)&&(c.y=0),(n=t.Zr)||np(t,e);for(var f=Lt(),p=Lt(),g=e.iterator,y=A.alloc();g.next();){var v=g.key,_=g.value;if(v.Mc()){var b=cd(t,v,e);null!==b?f.push(new v_(v,_,b)):(!a||v.canMove())&&(u.assign(b=_.point),t.computeMove(v,u.add(c),s,y),v.location=y,void 0===_.shifted&&(_.shifted=new A),_.shifted.assign(y.ie(b)))}else g.key instanceof K&&p.push(g.ka)}for(A.free(y),a=f.length,g=0;g<a;g++)u.assign((v=f[g]).info.point),void 0===v.dv.shifted&&(v.dv.shifted=new A),v.node.location=u.add(v.dv.shifted);for(a=A.alloc(),g=A.alloc(),v=p.length,_=0;_<v;_++){var D=p[_];if((b=D.key)instanceof K)if(b.suspendsRouting){b.gf=null,y=b.fromNode;var k=b.toNode;if(null!==t.draggedLink&&s.dragsLink)if(k=D.value.point,null===b.dragComputation)e.add(b,t.Ad(s,b,c)),wa(b,c.x-k.x,c.y-k.y);else{D=A.allocAt(0,0),(y=b.i(0))&&y.u()&&D.assign(y);var O=y=A.alloc().assign(D).add(c);s.isGridSnapEnabled&&(s.isGridSnapRealtime||t.lastInput.up)&&js(t,b,y,O=A.alloc(),s),y.assign(b.dragComputation(b,y,O)).ie(D),e.add(b,t.Ad(s,b,y)),wa(b,y.x-k.x,y.y-k.y),A.free(D),A.free(y),O!==y&&A.free(O)}else null!==y&&(a.assign(y.location),null!==(O=e.H(y))&&a.ie(O.point)),null!==k&&(g.assign(k.location),null!==(O=e.H(k))&&g.ie(O.point)),null!==y&&null!==k?a.Ua(g)?(y=D.value.point,(k=u).assign(a),k.ie(y),e.add(b,t.Ad(s,b,a)),wa(b,k.x,k.y)):(b.suspendsRouting=!1,b.Va()):(D=D.value.point,e.add(b,t.Ad(s,b,y=null!==y?a:null!==k?g:c)),wa(b,y.x-D.x,y.y-D.y))}else(null===b.fromNode||null===b.toNode)&&(y=D.value.point,e.add(b,t.Ad(s,b,c)),wa(b,c.x-y.x,c.y-y.y))}A.free(u),A.free(c),A.free(a),A.free(g),ee(f),ee(p),n||(Ai(t),_u(t,e))}}function Ao(t){var e=t.toolManager.findTool("Dragging");return null!==e?e.dragOptions:t.pn}function js(t,e,n,s,a){if(void 0===a&&(a=Ao(t)),s.assign(n),null!==e){var u=t.grid;t=(e=a.gridSnapCellSize).width,e=e.height;var c=a.gridSnapOrigin,f=c.x;if(c=c.y,a=a.gridSnapCellSpot,null!==u){var p=u.gridCellSize;isNaN(t)&&(t=p.width),isNaN(e)&&(e=p.height),u=u.gridOrigin,isNaN(f)&&(f=u.x),isNaN(c)&&(c=u.y)}(u=A.allocAt(0,0)).Ui(0,0,t,e,a),V.Xp(n.x,n.y,f+u.x,c+u.y,t,e,s),A.free(u)}}function np(t,e){if(null!==e)for(t.Zr=!0,t=e.iterator;t.next();)(e=t.key)instanceof K&&(e.suspendsRouting=!0)}function _u(t,e){if(null!==e){for(e=e.iterator;e.next();){var n=e.key;n instanceof K&&(n.suspendsRouting=!1,Pv(n)&&n.Va())}t.Zr=!1}}function cd(t,e,n){return null===(e=e.containingGroup)||null===(t=cd(t,e,n))&&null===(t=n.H(e))?null:t}function cm(t,e,n){if(null!==e.diagram&&e.diagram!==t&&q("Cannot share a Layer with another Diagram: "+e+" of "+e.diagram),null===n?null!==e.diagram&&q("Cannot add an existing Layer to this Diagram again: "+e):(n.diagram!==t&&q("Existing Layer must be in this Diagram: "+n+" not in "+n.diagram),e===n&&q("Cannot move a Layer before or after itself: "+e)),e.diagram!==t){e=e.name,n=(t=t.Oa).count;for(var s=0;s<n;s++)t.J(s).name===e&&q("Cannot add Layer with the name '"+e+"'; a Layer with the same name is already present in this Diagram.")}}function r_(t,e,n){var s=t.animationManager;if(t.qb||t.Wc)t.sa=n,go(t),s.tb&&s.Td.add(s.D,"scale",e,t.sa);else if(null===t.Ca)t.sa=n,go(t);else{t.qb=!0;var a=t.viewportBounds.copy(),u=t.ua,c=t.ta;a.width=t.ua/e,a.height=t.ta/e;var f=t.zoomPoint.x,p=t.zoomPoint.y,g=t.contentAlignment;isNaN(f)&&(g.Nc()?g.Df(ks)?f=0:g.Df(Ei)&&(f=u-1):f=g.hb()?g.x*(u-1):u/2),isNaN(p)&&(g.Nc()?g.Df(_l)?p=0:g.Df(td)&&(p=c-1):p=g.hb()?g.y*(c-1):c/2),null===t.scaleComputation||t.animationManager.defaultAnimation.isAnimating||(n=t.scaleComputation(t,n)),n<t.minScale&&(n=t.minScale),n>t.maxScale&&(n=t.maxScale),u=A.allocAt(t.ja.x+f/e-f/n,t.ja.y+p/e-p/n),t.position=u,A.free(u),t.sa=n,go(t),t.onViewportBoundsChanged(a,t.viewportBounds,e,!1),t.qb=!1,Po(t,!1),s.tb&&s.Td.add(s.D,"scale",e,t.sa),t.N(),wu(t)}}function Ga(t,e){void 0===e&&(e=null);var n=t.Wb;if(null!==n&&n.visible){for(var s=Dt.alloc(),a=1,u=1,c=n.T.m,f=c.length,p=0;p<f;p++){var g=c[p],y=Math.abs(g.interval);2>y||(C_(g.figure)?u=u*y/V.Ux(u,y):a=a*y/V.Ux(a,y))}if(s.h(u*(c=n.gridCellSize).width,a*c.height),null!==e)a=e.width,u=e.height,t=e.x,c=e.y;else{if((e=z.alloc()).h((t=t.viewportBounds).x,t.y,t.width,t.height),!e.u())return void z.free(e);a=e.width,u=e.height,t=e.x,c=e.y,z.free(e)}n.width=a+2*s.width,n.height=u+2*s.height,e=A.alloc(),V.Xp(t,c,0,0,s.width,s.height,e),e.offset(-s.width,-s.height),Dt.free(s),n.part.location=e,A.free(e)}}function Hb(t){var e=t.isModified;t.ux!==e&&(t.ux=e,t.S("Modified"))}function rv(t,e){for(var n=(e=e.T.m).length,s=0;s<n;s++)po(t,e[s])}function po(t,e){if(e instanceof zi){var n=e.element;if(null!==n&&n instanceof HTMLImageElement){n.Ig instanceof nt&&n.Ig.add(t);var s=e.Mg;if(null!==s&&!0===s.mr&&null!==e.diagram&&e.diagram.Oo.add(e),n.Fn)if(n=n.getAttribute("src"),null===(s=t.fh.H(n)))(s=[]).push(e),t.fh.add(n,s);else{for(t=0;t<s.length;t++)if(s[t]===e)return;s.push(e)}}}}function ip(t,e){if(e instanceof zi){var n=e.element;if(null!==n&&n instanceof HTMLImageElement&&(n.Ig instanceof nt&&n.Ig.remove(t),F_(n),n.Fn)){n=n.getAttribute("src");var s=t.fh.H(n);if(null!==s)for(var a=0;a<s.length;a++)if(s[a]===e){s.splice(a,1),0===s.length&&(t.fh.remove(n),Ad(n));break}}}}function go(t){var e=t.ja,n=t.sa;t.tx.h(e.x,e.y,Math.max(t.ua,0)/n,Math.max(t.ta,0)/n)}function o_(t,e){t.lj=!1;var n=t.Uq;n.A(e)||(n=n.copy(),t.Uq.assign(e),Po(t,!1),t.S("DocumentBoundsChanged",null,n),wu(t))}function rp(t,e){for(var n=t.wi.iterator;n.next();)s_(t,n.value,e);null!==t.layout&&(e?t.layout.isValidLayout=!1:t.layout.B())}function s_(t,e,n){if(null!==e){for(var s=e.rl.iterator;s.next();)s_(t,s.value,n);null!==e.layout&&(n?e.layout.isValidLayout=!1:e.layout.B())}}function ov(t,e){if(t.Oh&&!t.Dt){var n=t.Z;t.Z=!0;var s=t.undoManager.transactionLevel,a=t.layout,u=t.animationManager;try{0===s&&(t.undoManager.isInternalTransaction=!0,t.xa("Layout")),1>=s&&!u.defaultAnimation.isAnimating&&!u.tb&&(e||Ba(u,"Layout")),t.Oh=!1;for(var c=t.wi.iterator;c.next();)a_(t,c.value,e,s);a.isValidLayout||(!e||a.isRealtime||null===a.isRealtime||0===s?(a.doLayout(t),Ai(t),a.isValidLayout=!0):t.Oh=!0)}finally{e=t.undoManager.isInternalTransaction,0===s&&(t.Xa("Layout"),t.undoManager.isInternalTransaction=!1),!e||0!==s&&1!==s||id(u),t.Z=n}}}function a_(t,e,n,s){if(null!==e){for(var a=e.rl.iterator;a.next();)a_(t,a.value,n,s);null===(a=e.layout)||a.isValidLayout||(!n||a.isRealtime||0===s?(e.Jh=!e.location.u(),a.doLayout(e),e.B(32),n_(t,e),a.isValidLayout=!0):t.Oh=!0)}}function l_(t,e){var n=t.Et.H(e);return null!==n?n:t.Et.H(e.toLowerCase())}function dm(t,e){var n=t.Ft.H(e);if(null!==n||null!==(n=t.Ft.H(e.toLowerCase())))return n;q("Unknown DiagramEvent name: "+e)}function fm(t){if(t.animationManager.isTicking)return!1;var e=t.currentTool;return e!==t.toolManager.findTool("Dragging")||!t.Zr||e.isComplexRoutingRealtime}function dd(t,e,n,s){if(null===t.Zc&&(t.Zc=new Kp),t.Zc.As||t.Zc.group!==n||t.Zc.Cy!==s){if(null!==n&&(n=Bb(t,n)),null===n){e=z.alloc(),t.computeOccupiedArea(e),e.Jc(100,100),t.Zc.initialize(e);for(var a=t.nodes;a.next();){var u=a.value,c=u.layer;null!==c&&c.visible&&!c.isTemporary&&Mh(t,u,s,e)}z.free(e)}else{for(0<n.memberParts.count&&((e=t.computePartsBounds(n.memberParts,!1)).Jc(20,20),t.Zc.initialize(e)),e=z.alloc(),a=n.memberParts;a.next();)(u=a.value)instanceof it&&Mh(t,u,s,e);z.free(e)}t.Zc.group=n,t.Zc.Cy=s,t.Zc.As=!1}else e&&K_(t.Zc);return t.Zc}function Bb(t,e){return e.avoidable&&!e.isLinkLabel?e:null!==e.containingGroup?Bb(t,e.containingGroup):null}function Mh(t,e,n,s){if(e!==n&&e.isVisible())if(e.avoidable&&!e.isLinkLabel){var a=(e=e.getAvoidableRect(s)).x,u=e.y;if(Iu(t=t.Zc,a,u))for(n=(u-t.zd)/t.ic|0,s=Math.min((a+e.width-t.yd)/t.hc|0,t.yi),e=Math.min((u+e.height-t.zd)/t.ic|0,t.zi),a=(a-t.yd)/t.hc|0;a<=s;a++)if((u=t.Ub[a]).fill)u.fill(_a,n,e+1);else for(var c=n;c<=e;c++)u[c]=_a}else if(e instanceof _t)for(e=e.memberParts;e.next();)(a=e.value)instanceof it&&Mh(t,a,n,s)}function op(t,e){null!==t.Zc&&!t.Zc.As&&(void 0===e&&(e=null),null===e||e.avoidable&&!e.isLinkLabel)&&(t.Zc.As=!0)}function sp(t){-1===t.Ak&&(t.Ak=lu(function(){if(-1!==t.Ak&&(t.ug(),null!==t.lastInput.event)){var e=t.computeAutoScrollPosition(t.Dq);e.Ua(t.position)||(t.position=e,t.lastInput.documentPoint=t.Ys(t.Dq),t.doMouseMove(),t.lj=!0,e=z.alloc(),t.computeBounds(e),e.Qc(t.documentBounds),o_(t,e),z.free(e),t.Vc=!0,t.gd(),sp(t))}},t.Cq))}function u_(t,e,n){function s(){var y=+new Date;for(u=!0,c.reset();c.next();)if(!c.value[0].ml){u=!1;break}u||y-g>p?e(n,a,f):gt.requestAnimationFrame(s)}for(var a=n.callback,u=!0,c=t.fh.iterator;c.next();)if(!c.value[0].ml){u=!1;break}if("function"!=typeof a||u)return e(n,a,t);var f=t,p=n.callbackTimeout||300,g=+new Date;return gt.requestAnimationFrame(function(){s()}),null}function h_(t,e,n,s){if(t.animationManager.rc(),t.gd(),null===t.Ca)return null;"object"!=typeof e&&q("properties argument must be an Object.");var a=e.size||null,u=e.scale||null;void 0!==e.scale&&isNaN(e.scale)&&(u="NaN");var c=e.maxSize;void 0===e.maxSize&&(c="SVG"===n?new Dt(1/0,1/0):new Dt(2e3,2e3));var f=e.position||null,p=e.parts||null,g=void 0===e.padding?1:e.padding,y=e.background||null,v=e.omitTemporary;void 0===v&&(v=!0);var _=e.document||document,b=e.elementFinished||null,D=e.showTemporary;void 0===D&&(D=!v),void 0===(e=e.showGrid)&&(e=D),null!==a&&isNaN(a.width)&&isNaN(a.height)&&(a=null),"number"==typeof g?g=new Ct(g):g instanceof Ct||q("MakeImage padding must be a Margin or a number."),g.left=Math.max(g.left,0),g.right=Math.max(g.right,0),g.top=Math.max(g.top,0),g.bottom=Math.max(g.bottom,0),t.Ab.Hc(!0);var k=(v=new Xr(null,_)).context;if(!(a||u||p||f))return v.width=t.ua+Math.ceil(g.left+g.right),v.height=t.ta+Math.ceil(g.top+g.bottom),"SVG"===n?null===s?null:(s.resize(v.width,v.height,v.width,v.height),s.ownerDocument=_,s.Up=b,nv(t,s.context,g,new Dt(v.width,v.height),t.sa,t.ja,p,y,D,e),s.context):(t.rn=!1,nv(t,k,g,new Dt(v.width,v.height),t.sa,t.ja,p,y,D,e),t.rn=!0,v.context);var O=t.Sq,E=t.documentBounds.copy();if(E.Vv(t.nb),D)for(var R=t.Oa.m,F=R.length,j=0;j<F;j++){var L=R[j];if(L.visible&&L.isTemporary)for(var G=(L=L.Ha.m).length,ot=0;ot<G;ot++){var Z=L[ot];Z.isInDocumentBounds&&Z.isVisible()&&(Z=Z.actualBounds).u()&&E.Qc(Z)}}if(R=new A(E.x,E.y),null!==p){for(F=!0,(j=p.iterator).reset();j.next();)if((L=j.value)instanceof ft&&(null===(G=L.layer)||G.visible)&&(null===G||D||!G.isTemporary)&&L.isVisible()&&(L=L.actualBounds).u())if(F){F=!1;var ut=L.copy()}else ut.Qc(L);F&&(ut=new z(0,0,0,0)),E.width=ut.width,E.height=ut.height,R.x=ut.x,R.y=ut.y}return null!==f&&f.u()&&(R=f,u||(u=O)),ut=f=0,null!==g&&(f=g.left+g.right,ut=g.top+g.bottom),F=j=0,null!==a&&(j=a.width,F=a.height,isFinite(j)&&(j=Math.max(0,j-f)),isFinite(F)&&(F=Math.max(0,F-ut))),null!==a&&null!==u?("NaN"===u&&(u=O),a.u()?(a=j,E=F):isNaN(F)?(a=j,E=E.height*u):(a=E.width*u,E=F)):null!==a?a.u()?(u=Math.min(j/E.width,F/E.height),a=j,E=F):isNaN(F)?(a=j,E=E.height*(u=j/E.width)):(a=E.width*(u=F/E.height),E=F):null!==u?"NaN"===u&&c.u()?(u=Math.min((c.width-f)/E.width,(c.height-ut)/E.height))>O?(u=O,a=E.width,E=E.height):(a=c.width,E=c.height):(a=E.width*u,E=E.height*u):(u=O,a=E.width,E=E.height),null!==g?(a+=f,E+=ut):g=new Ct(0),null!==c&&(O=c.width,c=c.height,isNaN(O)&&(O=2e3),isNaN(c)&&(c=2e3),isFinite(O)&&(a=Math.min(a,O)),isFinite(c)&&(E=Math.min(E,c))),v.width=Math.ceil(a),v.height=Math.ceil(E),"SVG"===n?null===s?null:(s.resize(v.width,v.height,v.width,v.height),s.ownerDocument=_,s.Up=b,nv(t,s.context,g,new Dt(Math.ceil(a),Math.ceil(E)),u,R,p,y,D,e),s.context):(t.rn=!1,nv(t,k,g,new Dt(Math.ceil(a),Math.ceil(E)),u,R,p,y,D,e),t.rn=!0,v.context)}Cr.className="AnimationTrigger",Cr.Default=Zf,Cr.Immediate=t_,Cr.Bundled=Q0,(S=Kn.prototype).clear=function(){this.Ha.clear(),this.Jo.length=0},S.Ne=function(t){this.D=t},S.toString=function(t){void 0===t&&(t=0);var e='Layer "'+this.name+'"';if(0>=t)return e;for(var n=0,s=0,a=0,u=0,c=0,f=this.Ha.iterator;f.next();){var p=f.value;p instanceof _t?a++:p instanceof it?s++:p instanceof K?u++:p instanceof Rt?c++:n++}if(f="",0<n&&(f+=n+" Parts "),0<s&&(f+=s+" Nodes "),0<a&&(f+=a+" Groups "),0<u&&(f+=u+" Links "),0<c&&(f+=c+" Adornments "),1<t)for(t=this.Ha.iterator;t.next();)f+="\n    "+(n=t.value).toString(),null!==(s=n.data)&&pn(s)&&(f+=" #"+pn(s)),n instanceof it?f+=" "+xr(s):n instanceof K&&(f+=" "+xr(n.fromNode)+" "+xr(n.toNode));return e+" "+this.Ha.count+": "+f},S.Zb=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),!1===this.oi)return null;var s=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(s=!0);for(var a=A.alloc(),u=this.Ha.m,c=u.length;c--;){var f=u[c];if((!0!==s||!1!==ku(f))&&f.isVisible()&&(a.assign(t),ei(a,f.fe),null!==(f=f.Zb(a,e,n))&&(null!==e&&(f=e(f)),null!==f&&(null===n||n(f)))))return A.free(a),f}return A.free(a),null},S.Hi=function(t,e,n,s){if(void 0===e&&(e=null),void 0===n&&(n=null),s instanceof st||s instanceof nt||(s=new nt),!1===this.oi)return s;var a=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(a=!0);for(var u=A.alloc(),c=this.Ha.m,f=c.length;f--;){var p=c[f];if((!0!==a||!1!==ku(p))&&p.isVisible()){u.assign(t),ei(u,p.fe);var g=p;p.Hi(u,e,n,s)&&(null!==e&&(g=e(g)),null===g||null!==n&&!n(g)||s.add(g))}}return A.free(u),s},S.zf=function(t,e,n,s,a){if(void 0===e&&(e=null),void 0===n&&(n=null),void 0===s&&(s=!1),a instanceof st||a instanceof nt||(a=new nt),!1===this.oi)return a;var u=!1;null!==this.diagram&&this.diagram.viewportBounds.Ge(t)&&(u=!0);for(var c=this.Ha.m,f=c.length;f--;){var p=c[f];if((!0!==u||!1!==ku(p))&&p.isVisible()){var g=p;p.zf(t,e,n,s,a)&&(null!==e&&(g=e(g)),null===g||null!==n&&!n(g)||a.add(g))}}return a},S.Yu=function(t,e,n,s,a,u,c){if(!1===this.oi)return a;for(var f=this.Ha.m,p=f.length;p--;){var g=f[p];if((!0!==c||!1!==ku(g))&&u(g)&&g.isVisible()){var y=g;g.zf(t,e,n,s,a)&&(null!==e&&(y=e(y)),null===y||null!==n&&!n(y)||a.add(y))}}return a},S.qg=function(t,e,n,s,a,u){if(void 0===n&&(n=null),void 0===s&&(s=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof st||a instanceof nt)&&(u=a),a=!0),u instanceof st||u instanceof nt||(u=new nt),!1===this.oi)return u;var c=!1;null!==this.diagram&&this.diagram.viewportBounds.$(t)&&(c=!0);for(var f=A.alloc(),p=A.alloc(),g=this.Ha.m,y=g.length;y--;){var v=g[y];if((!0!==c||!1!==ku(v))&&v.isVisible()){f.assign(t),ei(f,v.fe),p.h(t.x+e,t.y),ei(p,v.fe);var _=v;v.qg(f,p,n,s,a,u)&&(null!==n&&(_=n(_)),null===_||null!==s&&!s(_)||u.add(_))}}return A.free(f),A.free(p),u},S.Md=function(t,e){if(this.visible){var n=this.Ha.m,s=n.length;if(0!==s){t=Lt();for(var a=Lt(),u=0;u<s;u++){var c=n[u];if(c.Ww=u,c instanceof K){if(!1===c.td)continue}else if(c instanceof Rt&&null!==c.adornedPart)continue;var f=c.actualBounds;c.isVisible()&&Af(f,e)?(c.Md(!0),t.push(c)):(c.Md(!1),null!==c.adornments&&0<c.adornments.count&&a.push(c))}for(e=0;e<t.length;e++)for(Xm(n=t[e]),n=n.adornments;n.next();)(s=n.value).measure(1/0,1/0),s.arrange(),s.Md(!0);for(e=0;e<a.length;e++)Xm(a[e]);ee(t),ee(a)}}},S.pc=function(t,e,n){if(this.visible&&0!==this.mb&&(void 0===n&&(n=!0),n||!this.isTemporary)){var s=(n=this.Ha.m).length;if(0!==s){var a=ad(this,t),u=this.Jo;u.length=0;for(var c=e.scale,f=z.alloc(),p=0;p<s;p++)this.Di(t,n[p],e,u,c,f,!0);z.free(f),t.globalAlpha=a}}},S.Di=function(t,e,n,s,a,u,c){if(!c||ku(e)){if(null!==s&&e instanceof K&&(e.isOrthogonal&&s.push(e),!1===e.td))return;for(c=!1,s=e.containingGroup;null!==s;)c?null!==s.$a&&u.ey(s.$a):null!==s.$a&&(c=!0,u.assign(s.$a)),s=s.containingGroup;var f=e.actualBounds;if(s=!1,c&&e.isVisible()){if(!u.Lc(f))return;s=!u.Ge(f)}s&&(t.save(),t.beginPath(),t.rect(u.x,u.y,u.width,u.height),t.clip()),f.width*a>n.wr||f.height*a>n.wr?e.pc(t,n):(u=e.naturalBounds,0===(a=e.actualBounds).width||0===a.height||isNaN(a.x)||isNaN(a.y)||!e.isVisible()||(n=e.transform,null!==e.areaBackground&&(Tr(e,t,e.areaBackground,!0,!0,u,a),t.fillRect(a.x,a.y,a.width,a.height)),null===e.areaBackground&&null===e.background&&(Tr(e,t,"rgba(0,0,0,0.3)",!0,!1,u,a),t.fillRect(a.x,a.y,a.width,a.height)),null!==e.background&&(t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),Tr(e,t,e.background,!0,!1,u,a),t.fillRect(0,0,u.width/2,u.height/2),n.Cs()||t.transform(n.m22*(e=1/(n.m11*n.m22-n.m12*n.m21)),-n.m12*e,-n.m21*e,n.m11*e,e*(n.m21*n.dy-n.m22*n.dx),e*(n.m12*n.dx-n.m11*n.dy))))),s&&(t.restore(),t.Hc(!0))}},S.g=function(t,e,n,s,a){var u=this.diagram;null!==u&&u.Wa(De,t,this,e,n,s,a)},S.Ni=function(t,e,n){var s=this.Ha;if(e.fi=this,t>=s.count)t=s.count;else if(s.J(t)===e)return-1;return s.wb(t,e),e.cq(n),null!==(s=this.diagram)&&(n?s.N():s.Ni(e)),rm(this,t,e),t},S.fc=function(t,e,n){if(!n&&e.layer!==this&&null!==e.layer)return e.layer.fc(t,e,n);var s=this.Ha;if(0>t||t>=s.length){if(0>(t=s.indexOf(e)))return-1}else if(s.J(t)!==e&&0>(t=s.indexOf(e)))return-1;return e.eq(n),s.eb(t),null!==(s=this.diagram)&&(n?s.N():s.fc(e)),e.fi=null,t},kt.Object.defineProperties(Kn.prototype,{parts:{get:function(){return this.Ha.iterator}},partsBackwards:{get:function(){return this.Ha.iteratorBackwards}},diagram:{get:function(){return this.D}},name:{get:function(){return this.na},set:function(t){var e=this.na;if(e!==t){var n=this.diagram;if(null!==n)for(""===e&&q("Cannot rename default Layer to: "+t),n=n.layers;n.next();)n.value.name===t&&q("Layer.name is already present in this diagram: "+t);for(this.na=t,this.g("name",e,t),t=this.Ha.iterator;t.next();)t.value.layerName=this.na}}},opacity:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&((0>t||1<t)&&ae(t,"0 <= value <= 1",Kn,"opacity"),this.mb=t,this.g("opacity",e,t),null!==(t=this.diagram)&&t.N())}},isTemporary:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&((this.o=t)&&(this.isInDocumentBounds=!1),this.g("isTemporary",e,t))}},visible:{get:function(){return this.C},set:function(t){var e=this.C;if(e!==t){for(this.C=t,this.g("visible",e,t),e=this.Ha.iterator;e.next();)e.value.Pb(t);null!==(t=this.diagram)&&t.N()}}},pickable:{get:function(){return this.oi},set:function(t){var e=this.oi;e!==t&&(this.oi=t,this.g("pickable",e,t))}},isInDocumentBounds:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==this.diagram&&this.diagram.Qa())}},allowCopy:{get:function(){return this.L},set:function(t){var e=this.L;e!==t&&(this.L=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.wa},set:function(t){var e=this.wa;e!==t&&(this.wa=t,this.g("allowDelete",e,t))}},allowTextEdit:{get:function(){return this.ke},set:function(t){var e=this.ke;e!==t&&(this.ke=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Ba},set:function(t){var e=this.Ba;e!==t&&(this.Ba=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Pd},set:function(t){var e=this.Pd;e!==t&&(this.Pd=t,this.g("allowUngroup",e,t))}},allowLink:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(this.Ma=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Hb},set:function(t){var e=this.Hb;e!==t&&(this.Hb=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Rb},set:function(t){var e=this.Rb;e!==t&&(this.Rb=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Sb},set:function(t){var e=this.Sb;e!==t&&(this.Sb=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.sc},set:function(t){var e=this.sc;e!==t&&(this.sc=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Nd},set:function(t){var e=this.Nd;e!==t&&(this.Nd=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Od},set:function(t){var e=this.Od;e!==t&&(this.Od=t,this.g("allowSelect",e,t))}}}),Kn.prototype.findObjectsNear=Kn.prototype.qg,Kn.prototype.findObjectsIn=Kn.prototype.zf,Kn.prototype.findObjectsAt=Kn.prototype.Hi,Kn.prototype.findObjectAt=Kn.prototype.Zb,Kn.className="Layer",U.prototype.clear=function(){this.animationManager.rc(),this.model.clear(),gd=null,Bt="",qf(this,!1),this.Oo.clear(),Ad(),this.fh.clear(),this.Qa(),this.Ta(),this.N()},U.prototype.reset=function(){this.clear(),this.qb=!0,om(this),go(this),this.kh=!0,tv(this),this.layout=new Ht,this.kh=!1,this.model=Lu(),this.model.undoManager=new Re,this.qb=this.Tn=!1,this.N()},U.prototype.setRTL=function(t){null===(t=void 0===t?this.div:t)&&(t=gt.document.body);var e=Wo("div");e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",t.appendChild(e);var n="reverse";0<e.scrollLeft?n="default":(e.scrollLeft=1,0===e.scrollLeft&&(n="negative")),t.removeChild(e),this.iu=n},U.prototype.setScrollWidth=function(t){null===(t=void 0===t?this.div:t)&&(t=gt.document.body);var e=0;if(Wr){var n=pd;e=c_,null===n&&((n=pd=Wo("p")).style.width="100%",n.style.height="200px",n.style.boxSizing="content-box",(e=c_=Wo("div")).style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.boxSizing="content-box",e.appendChild(n)),e.style.overflow="hidden",t.appendChild(e);var s=n.offsetWidth;e.style.overflow="scroll",s===(n=n.offsetWidth)&&(n=e.clientWidth),t.removeChild(e),0!=(e=s-n)||kf||(e=11)}this.ub=e,this.ix=!0},U.prototype.gb=function(t){t.classType===U&&(this.autoScale=t)},U.prototype.toString=function(t){void 0===t&&(t=0);var e="";if(this.div&&this.div.id&&(e=this.div.id),e='Diagram "'+e+'"',0>=t)return e;for(var n=this.Oa.iterator;n.next();)e+="\n  "+n.value.toString(t-1);return e},U.prototype.addEventListener=function(t,e,n,s){t.addEventListener(e,n,{capture:s,passive:!1})},U.prototype.removeEventListener=function(t,e,n,s){t.removeEventListener(e,n,{capture:s})},U.prototype.computePixelRatio=function(){return null!==this.si?this.si:gt.devicePixelRatio||1},U.prototype.doMouseMove=function(){this.currentTool.doMouseMove()},U.prototype.doMouseDown=function(){this.currentTool.doMouseDown()},U.prototype.doMouseUp=function(){this.currentTool.doMouseUp()},U.prototype.doMouseWheel=function(){this.currentTool.doMouseWheel()},U.prototype.doKeyDown=function(){this.currentTool.doKeyDown()},U.prototype.doKeyUp=function(){this.currentTool.doKeyUp()},U.prototype.doFocus=function(){this.focus()},U.prototype.focus=function(){if(this.Ca)if(this.scrollsPageOnFocus)this.Ca.focus();else{var t=gt.scrollX||gt.pageXOffset,e=gt.scrollY||gt.pageYOffset;this.Ca.focus(),gt.scrollTo(t,e)}},U.prototype.lz=function(){this.D.S("GainedFocus")},U.prototype.kz=function(){this.D.S("LostFocus")},U.prototype.Kx=function(t){if(null!==this.Ca){this.Nr=!0;var e=this.documentBounds,n=this.viewportBounds,s=this.Hj,a=e.x-s.left,u=e.y-s.top,c=e.width+s.left+s.right,f=e.height+s.top+s.bottom,p=e.right+s.right;s=e.bottom+s.bottom;var g=n.x;e=n.y;var y=n.width,v=n.height,_=n.right,b=n.bottom;n=this.scale;var D=t.scrollLeft;if(this.Vn)switch(this.iu){case"negative":D=D+t.scrollWidth-t.clientWidth;break;case"reverse":D=t.scrollWidth-D-t.clientWidth}var k=D;y<c||v<f?(D=A.allocAt(this.position.x,this.position.y),this.allowHorizontalScroll&&this.nu!==k&&(D.x=k/n+a,this.nu=k),this.allowVerticalScroll&&this.ou!==t.scrollTop&&(D.y=t.scrollTop/n+u,this.ou=t.scrollTop),this.position=D,A.free(D),this.mj=this.Nr=!1):(D=A.alloc(),t.Sy&&this.allowHorizontalScroll&&(a<g&&(this.position=D.h(k+a,this.position.y)),p>_&&(this.position=D.h(-(this.Or.scrollWidth-this.ua)+k-this.ua/n+p,this.position.y))),t.Ty&&this.allowVerticalScroll&&(u<e&&(this.position=D.h(this.position.x,t.scrollTop+u)),s>b&&(this.position=D.h(this.position.x,-(this.Or.scrollHeight-this.ta)+t.scrollTop-this.ta/n+s))),A.free(D),Ls(this),this.mj=this.Nr=!1,p=(e=this.documentBounds).right,_=(n=this.viewportBounds).right,s=e.bottom,b=n.bottom,a=e.x,g=n.x,u=e.y,e=n.y,y>=c&&a>=g&&p<=_&&(this.gp.style.width="1px"),v>=f&&u>=e&&s<=b&&(this.gp.style.height="1px"))}},U.prototype.computeBounds=function(t){return void 0===t&&(t=new z),Ai(this),ud(this,t)},U.prototype.computePartsBounds=function(t,e){void 0===e&&(e=!1);var n=null;if(Dn(t))for(var s=0;s<t.length;s++){var a=t[s];!e&&a instanceof K||(a.Ta(),null===n?n=a.actualBounds.copy():n.Qc(a.actualBounds))}else for(t=t.iterator;t.next();)s=t.value,!e&&s instanceof K||(s.Ta(),null===n?n=s.actualBounds.copy():n.Qc(s.actualBounds));return null===n?new z(NaN,NaN,0,0):n},U.prototype.zoomToFit=function(){var t=this.Ij;this.Ij=kl,this.scale=wh(this,lp),t!==kl&&(Po(this,!1),lm(this,this.documentBounds,this.ua/this.sa,this.ta/this.sa,this.Hk,!1)),this.Ij=t},(S=U.prototype).$A=function(t,e){void 0===e&&(e=lp);var n=t.width,s=t.height;if(!(0===n||0===s||isNaN(n)&&isNaN(s))){var a=1;if(e===lp||e===md)if(isNaN(n))a=this.viewportBounds.height*this.scale/s;else if(isNaN(s))a=this.viewportBounds.width*this.scale/n;else{a=this.ua;var u=this.ta;a=e===md?u/s>a/n?(u-(this.Ye?this.ub:0))/s:(a-(this.Sf?this.ub:0))/n:Math.min(u/s,a/n)}this.scale=a,this.position=new A(t.x,t.y)}},S.ez=function(t,e){this.Ta();var n=this.documentBounds,s=this.viewportBounds;this.position=new A(n.x+(t.x*n.width+t.offsetX)-(e.x*s.width-e.offsetX),n.y+(t.y*n.height+t.offsetY)-(e.y*s.height-e.offsetY))},S.Xz=function(t){if(t instanceof dt){this.er=t;var e=A.alloc();this.fr=this.wq(t.da(St,e)),A.free(e)}else this.er=null,this.fr=fe},S.am=function(t,e){if(void 0===e&&(e=!0),e){if((t=mu(this,t,function(n){return n.part},function(n){return n.canSelect()}))instanceof ft)return t}else if((t=mu(this,t,function(n){return n.part}))instanceof ft)return t;return null},S.Zb=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),Ai(this);for(var s=this.Oa.iteratorBackwards;s.next();){var a=s.value;if(a.visible&&null!==(a=a.Zb(t,e,n)))return a}return null},S.Kz=function(t,e,n){return void 0===e&&(e=!0),function Yr(t,e,n,s,a){for(void 0===n&&(n=null),void 0===s&&(s=null),a instanceof st||a instanceof nt||(a=new nt),Ai(t),t=t.Oa.iteratorBackwards;t.next();){var u=t.value;u.visible&&!u.isTemporary&&u.Hi(e,n,s,a)}return a}(this,t,function(s){return s.part},e?function(s){return s instanceof ft&&s.canSelect()}:null,n)},S.Hi=function(t,e,n,s){void 0===e&&(e=null),void 0===n&&(n=null),s instanceof st||s instanceof nt||(s=new nt),Ai(this);for(var a=this.Oa.iteratorBackwards;a.next();){var u=a.value;u.visible&&u.Hi(t,e,n,s)}return s},S.Tx=function(t,e,n,s){return void 0===e&&(e=!1),void 0===n&&(n=!0),function ev(t,e,n,s,a){var u=null;for(void 0===u&&(u=null),void 0===n&&(n=null),void 0===s&&(s=!1),a instanceof st||a instanceof nt||(a=new nt),Ai(t),t=t.Oa.iteratorBackwards;t.next();){var c=t.value;c.visible&&!c.isTemporary&&c.zf(e,u,n,s,a)}return a}(this,t,function(a){return a instanceof ft&&(!n||a.canSelect())},e,s)},S.zf=function(t,e,n,s,a){void 0===e&&(e=null),void 0===n&&(n=null),void 0===s&&(s=!1),a instanceof st||a instanceof nt||(a=new nt),Ai(this);for(var u=this.Oa.iteratorBackwards;u.next();){var c=u.value;c.visible&&c.zf(t,e,n,s,a)}return a},S.Yu=function(t,e,n,s,a,u){var c=new nt;Ai(this);for(var f=this.Oa.iteratorBackwards;f.next();){var p=f.value;p.visible&&p.Yu(t,e,n,s,c,a,u)}return c},S.Lz=function(t,e,n,s,a){return void 0===n&&(n=!0),void 0===s&&(s=!0),function _h(t,e,n,s,a,u){var c=null;for(void 0===c&&(c=null),void 0===s&&(s=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof st||a instanceof nt)&&(u=a),a=!0),u instanceof st||u instanceof nt||(u=new nt),Ai(t),t=t.Oa.iteratorBackwards;t.next();){var f=t.value;f.visible&&!f.isTemporary&&f.qg(e,n,c,s,a,u)}return u}(this,t,e,function(u){return u instanceof ft&&(!s||u.canSelect())},n,a)},S.qg=function(t,e,n,s,a,u){void 0===n&&(n=null),void 0===s&&(s=null),void 0===a&&(a=!0),!1!==a&&!0!==a&&((a instanceof st||a instanceof nt)&&(u=a),a=!0),u instanceof st||u instanceof nt||(u=new nt),Ai(this);for(var c=this.Oa.iteratorBackwards;c.next();){var f=c.value;f.visible&&f.qg(t,e,n,s,a,u)}return u},U.prototype.acceptEvent=function(t){return Rs(this,t,t instanceof MouseEvent)},U.prototype.nA=function(t){var e=this.D;if(!this.D.isEnabled)return!1;var n=Rs(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.down=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return e.doKeyDown(),Sl(n,t)},U.prototype.oA=function(t){var e=this.D;if(!e.isEnabled)return!1;var n=Rs(e,t,!1);switch(n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del"}return e.doKeyUp(),Sl(n,t)},U.prototype.zz=function(t){var e=this.D;if(!e.isEnabled)return!1;var n=Rs(e,t,!0);return null!==e.mouseEnter&&e.mouseEnter(n),Sl(n,t)},U.prototype.Az=function(t){var e=this.D;if(!e.isEnabled)return!1;var n=Rs(e,t,!0);return null!==e.mouseLeave&&e.mouseLeave(n),Sl(n,t)},U.prototype.getMouse=function(t){var e=this.Ca;if(null===e)return new A(0,0);var n=e.getBoundingClientRect();return e=t.clientX-this.ua/n.width*n.left,t=t.clientY-this.ta/n.height*n.top,null!==this.vb?ei(new A(e,t),this.vb):new A(e,t)},U.prototype.Qa=function(){this.lj||(this.lj=!0,this.Gb(!0))},U.prototype.redraw=function(){this.qb||this.Wc||(this.N(),wu(this),this.gd())},(S=U.prototype).mA=function(){return this.kg},S.uz=function(t){void 0===t&&(t=null);var e=this.animationManager,n=e.isEnabled;e.rc(),e.isEnabled=!1,ue(this),this.Uf=!1,this.ku=new A(NaN,NaN),e.isEnabled=n,this.Wc=!0;var s=this;null!==t&&lu(function(){s.Wc=!1,Ba(e,"Model"),t(s)},1)},S.Gb=function(t){if(void 0===t&&(t=!1),!0!==this.kg&&!(this.qb||!1===t&&this.Wc)){this.kg=!0;var e=this;gt.requestAnimationFrame(function(){e.kg&&e.gd()})}},S.gd=function(){(!this.An||this.kg)&&(this.An&&(this.An=!1),ue(this))},S.ew=function(t,e){for(t.reset();t.next();){var n=t.value;!n.Mc()||n instanceof _t||(n.Ri()?(n.measure(1/0,1/0),n.arrange()):e.add(n))}for(t.reset();t.next();)(n=t.value)instanceof _t&&n.isVisible()&&n_(this,n);for(t.reset();t.next();)(n=t.value)instanceof K&&n.isVisible()&&(n.Ri()?(n.measure(1/0,1/0),n.arrange()):e.add(n));for(t.reset();t.next();)(n=t.value)instanceof Rt&&n.isVisible()&&(n.Ri()?(n.measure(1/0,1/0),n.arrange()):e.add(n))},S.Md=function(t,e,n,s){if(this.nj||this.animationManager.isAnimating)for(var a=0;a<e;a++)t[a].Md(n,s)},S.pc=function(t,e){if(void 0===e&&(e=null),null!==this.Ga){null===this.Ca&&q("No canvas specified");var n=this.animationManager;if(!n.tb&&(!n.isAnimating||n.isTicking)){var s=new Date;if(hm(this),"0"!==this.Ga.style.opacity){var a=t!==this.Ab,u=this.Oa.m,c=u.length,f=this;if(this.Md(u,c,f,f.viewportBounds),a)t.Hc(!0),Ls(this);else if(!this.Vc&&null===e&&!n.isAnimating)return;c=this.ja;var p=this.sa,g=Math.round(c.x*p)/p,y=Math.round(c.y*p)/p;for((n=this.vb).reset(),1!==p&&n.scale(p),0===c.x&&0===c.y||n.translate(-g,-y),t.setTransform(p=this.ec,0,0,p,0,0),t.clearRect(0,0,this.ua,this.ta),1!==this.mb&&(t.globalAlpha=this.mb),i_(this,t),g=null!==e?function(v){var _=e;if(v.visible&&0!==v.mb){var b=v.Ha.m,D=b.length;if(0!==D){var k=ad(v,t),O=v.Jo;O.length=0;for(var E=f.scale,R=z.alloc(),F=0;F<D;F++){var j=b[F];_.contains(j)||v.Di(t,j,f,O,E,R,!0)}z.free(R),t.globalAlpha=k}}}:function(v){v.pc(t,f)},c=u.length,y=0;y<c;y++)t.setTransform(p,0,0,p,0,0),t.transform(n.m11,n.m12,n.m21,n.m22,n.dx,n.dy),g(u[y]);if(u=!1,this.Zh?gm(this.Zh,this)&&(u=this.Wq()):u=!0,u&&(Et.prototype.Hd=Et.prototype.Cx),a?(this.Ab.Hc(!0),Ls(this)):this.Vc=this.nj=!1,u=+new Date-+s,s=this.Zw,(a=sh&&sh.Ox)||null===this.si){for(s[this.Ar]=u,this.Ar=(this.Ar+1)%s.length,n=u=0;n<s.length;n++)u+=s[n];this.zr=u/s.length}if(1!==this.mb&&(t.globalAlpha=1),a)for(t.setTransform(1,0,0,1,0,0),a=0;a<s.length;a++)t.fillText(s[a].toString(),20,150+20*a)}}}},S.Ie=function(t){return this.dg[t]},S.Ay=function(t,e){"minDrawingLength"===t&&(this.wr=e),this.dg[t]=e,this.redraw()},S.wy=function(){this.dg=new Dr,this.dg.drawShadows=!0,this.dg.textGreeking=!0,this.dg.viewportOptimizations=!(kf||N0),this.dg.temporaryPixelRatio=!0,this.dg.pictureRatioOptimization=!0,this.wr=this.dg.minDrawingLength=1},S.cm=function(t){return this.bl[t]},S.OA=function(t,e){this.bl[t]=e},S.vy=function(){this.bl=new Dr,this.bl.extraTouchArea=10,this.bl.extraTouchThreshold=10,this.bl.hasGestureZoom=!0},S.set=function(t){return Object.assign(this,t),this},S.Eu=function(t){return this.zm(t)},S.zm=function(t){return um(this,t),this},S.Iu=function(){if(0===this.undoManager.transactionLevel&&0!==this.Xh.count){for(;0<this.Xh.count;){var t=this.Xh;for(this.Xh=new xt,t=t.iterator;t.next();){var e=t.key;e.fq(t.value),e.gc(!1)}}this.N()}},S.N=function(t){if(void 0===t&&(t=null),null===t)this.Vc=!0,this.Gb();else{var e=this.viewportBounds;null!==t&&t.u()&&e.Lc(t)&&(this.Vc=!0,this.Gb())}this.S("InvalidateDraw")},U.prototype.invalidateViewport=function(t,e){if(!0!==this.Vc){this.Vc=!0;var n=!0===this.Ie("temporaryPixelRatio");if(!0===this.Ie("viewportOptimizations")&&this.scrollMode!==xu&&this.Hj.Fi(0,0,0,0)&&e.width===t.width&&e.height===t.height){var s=this.scale,a=Math.max(t.x,e.x),u=Math.max(t.y,e.y);if(s=z.allocAt(a,u,Math.max(0,Math.min(t.x+t.width,e.x+e.width)-a)*s,Math.max(0,Math.min(t.y+t.height,e.y+e.height)-u)*s),!this.$r&&0<s.width&&0<s.height){if(!(this.Wc||(this.kg=!1,null===this.Ga||(this.Wc=!0,this.Iu(),this.documentBounds.u()||(a=z.alloc(),o_(this,this.computeBounds(a)),z.free(a)),a=this.Ca,null===a||a instanceof da)))){var c=this.ec;u=this.ua*c;var f=this.ta*c,p=this.scale*c,g=Math.round(Math.round(e.x*p)-Math.round(t.x*p));e=Math.round(Math.round(e.y*p)-Math.round(t.y*p)),t=this.Mw,(p=this.Ht).width!==u&&(p.width=u),p.height!==f&&(p.height=f),t.clearRect(0,0,u,f),p=190*c;var y=70*c,v=Math.max(g,0),_=Math.max(e,0),b=Math.floor(u-v),D=Math.floor(f-_);t.drawImage(a.La,v,_,b,D,0,0,b,D),gm(this.Zh,this)&&t.clearRect(0,0,p,y),a=Lt(),t=Lt(),D=Math.abs(g),b=Math.abs(e);var k=0===v?0:u-D;v=A.allocAt(k,0),D=A.allocAt(D+k,f),t.push(new z(Math.min(v.x,D.x),Math.min(v.y,D.y),Math.abs(v.x-D.x),Math.abs(v.y-D.y)));var O=this.vb;if(O.reset(),O.scale(c,c),1!==this.sa&&O.scale(this.sa),(0!==(c=this.ja).x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&O.translate(-c.x,-c.y),ei(v,O),ei(D,O),a.push(new z(Math.min(v.x,D.x),Math.min(v.y,D.y),Math.abs(v.x-D.x),Math.abs(v.y-D.y))),v.h(0,k=0===_?0:f-b),D.h(u,b+k),t.push(new z(Math.min(v.x,D.x),Math.min(v.y,D.y),Math.abs(v.x-D.x),Math.abs(v.y-D.y))),ei(v,O),ei(D,O),a.push(new z(Math.min(v.x,D.x),Math.min(v.y,D.y),Math.abs(v.x-D.x),Math.abs(v.y-D.y))),gm(this.Zh,this)&&(v.h(u=0<g?0:-g,f=0<e?0:-e),D.h(p+u,y+f),t.push(new z(Math.min(v.x,D.x),Math.min(v.y,D.y),Math.abs(v.x-D.x),Math.abs(v.y-D.y))),ei(v,O),ei(D,O),a.push(new z(Math.min(v.x,D.x),Math.min(v.y,D.y),Math.abs(v.x-D.x),Math.abs(v.y-D.y)))),A.free(v),A.free(D),hd(this,!1,!0),null===this.Ga&&q("No div specified"),null===this.Ca&&q("No canvas specified"),!this.animationManager.tb&&(u=this.Ab,this.Vc)){for(hm(this),f=this.ec,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,this.ua*f,this.ta*f),u.drawImage(this.Ht.La,0<g?0:Math.round(-g),0<e?0:Math.round(-e)),g=this.ja,c=this.sa,p=Math.round(g.x*c)/c,y=Math.round(g.y*c)/c,(e=this.vb).reset(),1!==c&&e.scale(c),0===g.x&&0===g.y||e.translate(-p,-y),u.save(),u.beginPath(),g=t.length,c=0;c<g;c++)0!==(p=t[c]).width&&0!==p.height&&u.rect(Math.floor(p.x),Math.floor(p.y),Math.ceil(p.width),Math.ceil(p.height));for(u.clip(),u.setTransform(1,0,0,1,0,0),u.scale(f,f),u.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),this.Md(e=this.Oa.m,g=e.length,this,this.viewportBounds),i_(this,u),u.globalAlpha=this.mb,f=0;f<g;f++)if(p=a,(c=e[f]).visible&&0!==c.mb){y=ad(c,u),(_=c.Jo).length=0,v=this.scale,b=z.alloc(),O=(D=c.Ha.m).length,k=p.length;for(var E=0;E<O;E++){var R=D[E],F=jl(R,R.actualBounds);t:{for(var j=2/v,L=4/v,G=0;G<k;G++){var ot=p[G];if(0!==ot.width&&0!==ot.height&&F.iv(ot.x-j,ot.y-j,ot.width+L,ot.height+L)){F=!0;break t}}F=!1}F&&c.Di(u,R,this,_,v,b,!0)}z.free(b),u.globalAlpha=y}u.restore(),u.Hc(!0),this.Zh&&gm(this.Zh,this)&&this.Wq(),this.Vc=this.nj=!1,this.oq()}ee(a),ee(t),this.Wc=!1}}else this.gd();z.free(s),n&&(ld(this),this.gd(),tp(this,!0))}else n?(ld(this),this.gd(),tp(this,!0)):this.gd()}},(S=U.prototype).add=function(t){var e=t.diagram;if(e!==this&&(null!==e&&q("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+e.toString()),null===(e=this.Zj(t.layerName))&&(e=this.Zj("")),null===e&&q('Cannot add a Part when unable find a Layer named "'+t.layerName+'" and there is no default Layer'),t.layer!==e)){var n=e.Ni(99999999,t,t.diagram===this);0<=n&&this.Wa(Ve,"parts",e,null,t,null,n),e.isTemporary||this.Qa(),t.B(1),null!==(n=t.layerChanged)&&n(t,null,e)}},S.Ni=function(t){this.partManager.Ni(t);var e=this;Il(t,function(n){rv(e,n)}),(t instanceof Rt||t instanceof _t&&null!==t.placeholder)&&t.s(),null!==t.data&&Il(t,function(n){zv(e.partManager,n)}),!0!==Sr(t)&&!0!==ya(t)||this.te.add(t),H_(t,!0,this),Zb(t)?(t.actualBounds.u()&&this.N(jl(t,t.actualBounds)),this.Qa()):t.isVisible()&&t.actualBounds.u()&&this.N(jl(t,t.actualBounds)),this.Gb()},S.fc=function(t){t.Qj(),this.partManager.fc(t);var e=this;null!==t.data&&Il(t,function(n){wy(e.partManager,n,e)}),this.te.remove(t),Zb(t)?(t.actualBounds.u()&&this.N(jl(t,t.actualBounds)),this.Qa()):t.isVisible()&&t.actualBounds.u()&&this.N(jl(t,t.actualBounds)),this.Gb()},S.remove=function(t){bh(this,t,!0)},S.Qs=function(t,e){if(void 0===e&&(e=!1),Dn(t))for(var n=t.length,s=0;s<n;s++){var a=t[s];e&&!a.canDelete()||this.remove(a)}else for((n=new nt).addAll(t),t=n.iterator;t.next();)n=t.value,e&&!n.canDelete()||this.remove(n)},S.Vj=function(t,e,n){return void 0===n&&(n=!1),this.partManager.Vj(t,e,n)},U.prototype.moveParts=function(t,e,n,s){if(void 0===n&&(n=!1),void 0===s&&(s=Ao(this)),null!==this.toolManager){var a=new xt;if(null!==t)if(Dn(t))for(var u=0;u<t.length;u++)Nl(this,a,t[u],n,s);else for(t=t.iterator;t.next();)Nl(this,a,t.value,n,s);else{for(t=this.parts;t.next();)Nl(this,a,t.value,n,s);for(t=this.nodes;t.next();)Nl(this,a,t.value,n,s);for(t=this.links;t.next();)Nl(this,a,t.value,n,s)}iv(this,a,e,s,n)}},U.prototype.computeMove=function(t,e,n,s){if(void 0===s&&(s=new A),s.assign(e),null===t)return s;var a=e,u=n.isGridSnapEnabled;u&&(n.isGridSnapRealtime||this.lastInput.up)&&js(this,t,e,a=A.alloc(),n),n=null!==t.dragComputation?t.dragComputation(t,e,a):a;var c=t.minLocation,f=c.x;isNaN(f)&&(f=u?Math.round(1e3*t.location.x)/1e3:t.location.x),c=c.y,isNaN(c)&&(c=u?Math.round(1e3*t.location.y)/1e3:t.location.y);var p=t.maxLocation,g=p.x;return isNaN(g)&&(g=u?Math.round(1e3*t.location.x)/1e3:t.location.x),p=p.y,isNaN(p)&&(p=u?Math.round(1e3*t.location.y)/1e3:t.location.y),s.h(Math.max(f,Math.min(n.x,g)),Math.max(c,Math.min(n.y,p))),a!==e&&A.free(a),s},(S=U.prototype).Ad=function(t,e,n){if(void 0===n)return new El(Ko);var s=t.isGridSnapEnabled;return t.groupsSnapMembers||null===e.containingGroup||(s=!1),new El(s?new A(Math.round(1e3*n.x)/1e3,Math.round(1e3*n.y)/1e3):n.copy())},S.Ul=function(t){cm(this,t,null),t.Ne(this);var e=this.Oa,n=e.count-1;if(!t.isTemporary)for(;0<=n&&e.J(n).isTemporary;)n--;return e.wb(n+1,t),null!==this.dc&&this.Wa(Ve,"layers",this,null,t,null,n+1),this.N(),this.Qa(),this},S.xx=function(t,e){cm(this,t,e),t.Ne(this);var n=this.Oa,s=n.indexOf(t);0<=s&&(n.remove(t),null!==this.dc&&this.Wa(dn,"layers",this,t,null,s,null));var u,a=n.count;for(u=0;u<a;u++)if(n.J(u)===e){n.wb(u,t);break}return null!==this.dc&&this.Wa(Ve,"layers",this,null,t,null,u),this.N(),0>s&&this.Qa(),this},S.Zy=function(t,e){cm(this,t,e),t.Ne(this);var n=this.Oa,s=n.indexOf(t);0<=s&&(n.remove(t),null!==this.dc&&this.Wa(dn,"layers",this,t,null,s,null));var u,a=n.count;for(u=0;u<a;u++)if(n.J(u)===e){n.wb(u+1,t);break}return null!==this.dc&&this.Wa(Ve,"layers",this,null,t,null,u+1),this.N(),0>s&&this.Qa(),this},S.GA=function(t){if(t.diagram!==this&&q("Cannot remove a Layer from another Diagram: "+t+" of "+t.diagram),""!==t.name){var e=this.Oa,n=e.indexOf(t);if(e.remove(t)){for(e=t.Ha.copy().iterator;e.next();){var s=e.value,a=s.layerName;s.layerName=a!==t.name?a:""}null!==this.dc&&this.Wa(dn,"layers",this,t,null,n,null),this.N(),this.Qa()}}},S.Zj=function(t){for(var e=this.layers;e.next();){var n=e.value;if(n.name===t)return n}return null},S.zx=function(t){return null===this.df&&(this.df=new st),this.df.add(t),this.model.yh(t),this},S.IA=function(t){null!==this.df&&(this.df.remove(t),0===this.df.count&&(this.df=null)),this.model.rk(t)},S.yh=function(t){return null===this.Ag&&(this.Ag=new st),this.Ag.add(t),this},S.rk=function(t){null!==this.Ag&&(this.Ag.remove(t),0===this.Ag.count&&(this.Ag=null))},S.ks=function(t){if(this.skipsUndoManager||this.model.skipsUndoManager||this.model.undoManager.fv(t),t.change!==Jo&&(this.isModified=!0),null!==this.Ag)for(var e=this.Ag,n=e.length,s=0;s<n;s++)e.J(s)(t)},S.Wa=function(t,e,n,s,a,u,c){void 0===u&&(u=null),void 0===c&&(c=null);var f=new Ne;f.diagram=this,f.change=t,f.propertyName=e,f.object=n,f.oldValue=s,f.oldParam=u,f.newValue=a,f.newParam=c,this.ks(f)},S.g=function(t,e,n,s,a){this.Wa(De,t,this,e,n,s,a)},U.prototype.changeState=function(t,e){if(null!==t&&t.diagram===this){var n=this.skipsModelSourceBindings;try{this.skipsModelSourceBindings=!0;var s=t.change;if(s===De){var a=t.object;if(oe(a,t.propertyName,t.H(e)),a instanceof dt){var u=a.part;null!==u&&u.Mb()}this.isModified=!0}else if(s===Ve){var c=t.object,f=t.newParam,p=t.newValue;if(c instanceof W)if("number"==typeof f&&p instanceof dt){e?c.fc(f):c.wb(f,p);var g=c.part;null!==g&&g.Mb()}else"number"==typeof f&&p instanceof en&&(p.isRow?Im(c,f,e?void 0:p):Fm(c,f,e?void 0:p));else if(c instanceof Kn){var y=!0===t.oldParam;"number"==typeof f&&p instanceof ft&&(e?(p.isSelected=!1,p.isHighlighted=!1,p.Mb(),c.fc(y?f:-1,p,y)):c.Ni(f,p,y))}else c instanceof U?"number"==typeof f&&p instanceof Kn&&(e?this.Oa.eb(f):(p.Ne(this),this.Oa.wb(f,p))):q("unknown ChangedEvent.Insert object: "+t.toString());this.isModified=!0}else if(s===dn){var v=t.object,_=t.oldParam,b=t.oldValue;if(v instanceof W)"number"==typeof _&&b instanceof dt?e?v.wb(_,b):v.fc(_):"number"==typeof _&&b instanceof en&&(b.isRow?Im(v,_,e?b:void 0):Fm(v,_,e?b:void 0));else if(v instanceof Kn){var D=!0===t.newParam;"number"==typeof _&&b instanceof ft&&(e?0>v.Ha.indexOf(b)&&v.Ni(_,b,D):(b.isSelected=!1,b.isHighlighted=!1,b.Mb(),v.fc(D?_:-1,b,D)))}else v instanceof U?"number"==typeof _&&b instanceof Kn&&(e?(b.Ne(this),this.Oa.wb(_,b)):this.Oa.eb(_)):q("unknown ChangedEvent.Remove object: "+t.toString());this.isModified=!0}else s!==Jo&&q("unknown ChangedEvent: "+t.toString())}finally{this.skipsModelSourceBindings=n}}},U.prototype.xa=function(t){return this.undoManager.xa(t)},U.prototype.Xa=function(t){return this.undoManager.Xa(t)},U.prototype.Hf=function(){return this.undoManager.Hf()},U.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.xa(e);var s=!1;try{t(this),s=!0}finally{s?this.undoManager.Xa(e):this.undoManager.Hf(),this.skipsUndoManager=n}},U.prototype.updateAllTargetBindings=function(t){this.partManager.updateAllTargetBindings(t)},U.prototype.zq=function(){this.partManager.zq()},U.prototype.onViewportBoundsChanged=function(t,e,n,s){if(!t.A(e)){void 0===s&&(s=!1),s||wu(this),Ls(this);var a=this.layout;null===a||!a.isViewportSized||this.autoScale!==ar||s||t.width===e.width&&t.height===e.height||a.B(),a=this.currentTool,!0===this.el&&a instanceof be&&(this.lastInput.documentPoint=this.Ys(this.lastInput.viewPoint),Gw(a,this)),this.qb||this.invalidateViewport(t,e),Ga(this),this.dd.scale=n,this.dd.position.x=t.x,this.dd.position.y=t.y,this.dd.bounds.assign(t),this.dd.Ex.width=Math.round(t.width*n),this.dd.Ex.height=Math.round(t.height*n),this.dd.ny.width=this.ua,this.dd.ny.height=this.ta,this.dd.iy=s,this.S("ViewportBoundsChanged",this.dd,t),this.isVirtualized&&this.links.each(function(u){u.isAvoiding&&u.actualBounds.Lc(e)&&u.Va()})}},U.prototype.clearSelection=function(t){void 0===t&&(t=!1);var e=this.selection;if(0!==e.count){t||this.S("ChangingSelection",e);for(var n=e.ya(),s=n.length,a=0;a<s;a++)n[a].isSelected=!1;e.ea(),e.clear(),e.freeze(),t||this.S("ChangedSelection",e)}},U.prototype.select=function(t){null!==t&&t.layer.diagram===this&&(!t.isSelected||1<this.selection.count)&&(this.S("ChangingSelection",this.selection),this.clearSelection(!0),t.isSelected=!0,this.S("ChangedSelection",this.selection))},U.prototype.NA=function(t){if(this.S("ChangingSelection",this.selection),this.clearSelection(!0),Dn(t))for(var e=t.length,n=0;n<e;n++){var s=t[n];s instanceof ft||q("Diagram.selectCollection given something that is not a Part: "+s),s.isSelected=!0}else for(t=t.iterator;t.next();)(e=t.value)instanceof ft||q("Diagram.selectCollection given something that is not a Part: "+e),e.isSelected=!0;this.S("ChangedSelection",this.selection)},U.prototype.clearHighlighteds=function(){var t=this.highlighteds;if(0<t.count){for(var e=t.ya(),n=e.length,s=0;s<n;s++)e[s].isHighlighted=!1;t.ea(),t.clear(),t.freeze()}},(S=U.prototype).gA=function(t){null!==t&&t.layer.diagram===this&&(!t.isHighlighted||1<this.highlighteds.count)&&(this.clearHighlighteds(),t.isHighlighted=!0)},S.hA=function(t){t=(new nt).addAll(t);for(var e=this.highlighteds.copy().pq(t).iterator;e.next();)e.value.isHighlighted=!1;for(t=t.iterator;t.next();)(e=t.value)instanceof ft||q("Diagram.highlightCollection given something that is not a Part: "+e),e.isHighlighted=!0},S.scroll=function(t,e,n){void 0===n&&(n=1);var s="up"===e||"down"===e,a=0;if("pixel"===t)a=n;else if("line"===t)a=n*(s?this.scrollVerticalLineChange:this.scrollHorizontalLineChange);else if("page"===t)t=s?this.viewportBounds.height:this.viewportBounds.width,0!=(t*=this.scale)&&(a=n*Math.max(t-(s?this.scrollVerticalLineChange:this.scrollHorizontalLineChange),0));else{if("document"===t)return a=this.documentBounds,n=this.viewportBounds,s=A.alloc(),"up"===e?this.position=s.h(n.x,a.y):"left"===e?this.position=s.h(a.x,n.y):"down"===e?this.position=s.h(n.x,a.bottom-n.height):"right"===e&&(this.position=s.h(a.right-n.width,n.y)),void A.free(s);q("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}a/=this.scale,n=this.position.copy(),"up"===e?n.y=this.position.y-a:"down"===e?n.y=this.position.y+a:"left"===e?n.x=this.position.x-a:"right"===e?n.x=this.position.x+a:q("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+e),this.position=n},S.Nv=function(t){var e=this.viewportBounds;e.Ge(t)||((t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t)},S.ls=function(t){var e=this.viewportBounds;(t=t.center).x-=e.width/2,t.y-=e.height/2,this.position=t},S.wq=function(t){var e=this.vb;e.reset(),1!==this.sa&&e.scale(this.sa);var n=this.ja;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),t.copy().transform(this.vb)},S.WA=function(t){var e=this.vb,n=t.x,s=t.y,a=n+t.width,u=s+t.height,c=e.m11,f=e.m12,p=e.m21,g=e.m22,y=e.dx,v=e.dy,_=n*c+s*p+y;e=n*f+s*g+v;var b=a*c+s*p+y;return t=a*f+s*g+v,s=n*c+u*p+y,n=n*f+u*g+v,c=a*c+u*p+y,a=a*f+u*g+v,u=Math.min(_,b),_=Math.max(_,b),b=Math.min(e,t),e=Math.max(e,t),u=Math.min(u,s),_=Math.max(_,s),b=Math.min(b,n),e=Math.max(e,n),u=Math.min(u,c),_=Math.max(_,c),new z(u,b=Math.min(b,a),_-u,(e=Math.max(e,a))-b)},S.Ys=function(t){var e=this.vb;e.reset(),1!==this.sa&&e.scale(this.sa);var n=this.ja;return(0!==n.x||0!==n.y)&&isFinite(n.x)&&isFinite(n.y)&&e.translate(-n.x,-n.y),ei(t.copy(),this.vb)},U.prototype.doModelChanged=function(t){var e=this;if(t.model===this.model){var n=t.change,s=t.propertyName;if(n===Jo&&"S"===s[0])if("StartingFirstTransaction"===s){var a=this;(t=this.toolManager).mouseDownTools.each(function(p){p.diagram=a}),t.mouseMoveTools.each(function(p){p.diagram=a}),t.mouseUpTools.each(function(p){p.diagram=a}),this.Wc||this.Uf||(this.Rk=!0,this.An&&(this.kg=!0))}else"StartingUndo"===s||"StartingRedo"===s?((t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.rc(),this.S("ChangingSelection",this.selection)):"StartedTransaction"===s&&(t=this.animationManager).defaultAnimation.isAnimating&&!this.skipsUndoManager&&t.rc();else if(this.Z){this.Z=!1;try{if(""===t.modelChange&&n===Jo){("FinishedUndo"===s||"FinishedRedo"===s)&&(this.S("ChangedSelection",this.selection),Ai(this));var u=this.animationManager;"RolledBackTransaction"===s&&u.rc(),this.Rk=!0,this.gd(),0!==this.undoManager.transactionLevel&&1!==this.undoManager.transactionLevel||id(u),"CommittedTransaction"===s&&this.undoManager.isJustDiscarded&&(this.se=Math.min(this.se,this.undoManager.historyIndex-1)),"CommittedTransaction"!==s&&"RolledBackTransaction"!==s||!this.undoManager.isPendingUnmodified||setTimeout(function(){e.isModified=!1},1);var c=t.isTransactionFinished;if(c&&(Hb(this),this.Hs.clear(),function X0(t){for(t=t.cj.iterator;t.next();)t.value.gl=!1}(this.animationManager)),!this.bu&&c&&this.lastInput.targetDiagram){this.bu=!0;var f=this;lu(function(){f.currentTool.standardMouseOver(),f.bu=!1},10)}}}finally{this.Z=!0}}}},U.prototype.Ld=function(){this.partManager.Ld()},U.prototype.Mj=function(t,e){this.Qd.Mj(t,e)},U.prototype.Oj=function(t,e){this.Qd.Oj(t,e)},U.prototype.findPartForKey=function(t){return this.partManager.findPartForKey(t)},U.prototype.Fb=function(t){return this.partManager.Fb(t)},U.prototype.findLinkForKey=function(t){return this.partManager.findLinkForKey(t)},(S=U.prototype).Ac=function(t){return this.partManager.Ac(t)},S.Gi=function(t){return this.partManager.Gi(t)},S.zc=function(t){return this.partManager.zc(t)},S.rs=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.rs.apply(this.partManager,e instanceof Array?e:Ra(Sw(e)))},S.qs=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];return this.partManager.qs.apply(this.partManager,e instanceof Array?e:Ra(Sw(e)))},S.Ta=function(){if(this.lj){var t=z.alloc();o_(this,this.computeBounds(t)),z.free(t)}},S.Qz=function(){for(var t=new nt,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&t.add(n)}for(e=this.links;e.next();)(n=e.value).isTopLevel&&t.add(n);return t.iterator},S.Pz=function(){return this.wi.iterator},S.qA=function(t){Ai(this),t&&rp(this,!0),this.Wc?ov(this,!1):(this.Rk=!0,ue(this))},S.Wz=function(){for(var t=new st,e=this.nodes;e.next();){var n=e.value;n.isTopLevel&&null===n.Ii()&&t.add(n)}return t.iterator},S.Nj=function(t,e){return null!==(t=dm(this,t))&&t.add(e),this},S.mm=function(t,e){null!==(t=dm(this,t))&&t.remove(e)},S.S=function(t,e,n){var s=dm(this,t),a=new bl;if(a.diagram=this,null!==(t=l_(this,t))&&(a.name=t),void 0!==e&&(a.subject=e),void 0!==n&&(a.parameter=n),1===(e=s.length))s.J(0)(a);else if(0!==e)for(s=s.ya(),n=0;n<e;n++)(0,s[n])(a)},S.fk=function(t,e){return void 0===e&&(e=null),dd(this,!1,null,e).fk(t.x,t.y,t.width,t.height)},U.prototype.computeOccupiedArea=function(t){return this.isVirtualized?this.viewportBounds.copy():this.lj?ud(this,t):t.assign(this.documentBounds)},U.prototype.ns=function(t){this.Dq.assign(t),this.computeAutoScrollPosition(this.Dq).Ua(this.position)?this.ug():sp(this)},U.prototype.ug=function(){-1!==this.Ak&&(gt.clearTimeout(this.Ak),this.Ak=-1)},U.prototype.computeAutoScrollPosition=function(t){var e=this.position,n=this.Eq;if(0>=n.top&&0>=n.left&&0>=n.right&&0>=n.bottom)return e;var s=this.viewportBounds,a=this.scale;s=z.allocAt(0,0,s.width*a,s.height*a);var u=A.allocAt(0,0);if(t.x>=s.x&&t.x<s.x+n.left&&this.allowHorizontalScroll){var c=Math.max(this.scrollHorizontalLineChange,1);u.x-=c|=0,t.x<s.x+n.left/2&&(u.x-=c),t.x<s.x+n.left/4&&(u.x-=4*c)}else t.x<=s.x+s.width&&t.x>s.x+s.width-n.right&&this.allowHorizontalScroll&&(c=Math.max(this.scrollHorizontalLineChange,1),u.x+=c|=0,t.x>s.x+s.width-n.right/2&&(u.x+=c),t.x>s.x+s.width-n.right/4&&(u.x+=4*c));return t.y>=s.y&&t.y<s.y+n.top&&this.allowVerticalScroll?(c=Math.max(this.scrollVerticalLineChange,1),u.y-=c|=0,t.y<s.y+n.top/2&&(u.y-=c),t.y<s.y+n.top/4&&(u.y-=4*c)):t.y<=s.y+s.height&&t.y>s.y+s.height-n.bottom&&this.allowVerticalScroll&&(c=Math.max(this.scrollVerticalLineChange,1),u.y+=c|=0,t.y>s.y+s.height-n.bottom/2&&(u.y+=c),t.y>s.y+s.height-n.bottom/4&&(u.y+=4*c)),u.Ua(Ko)||(e=new A(e.x+u.x/a,e.y+u.y/a)),z.free(s),A.free(u),e},(S=U.prototype).Js=function(){return null},S.sv=function(){return null},S.cz=function(t,e){this.Qy.add(t,e)},S.Hu=function(t){(this.qx=t)||this.nodes.each(function(e){e instanceof _t&&(e.$q=null)})},S.sA=function(t){return Wr?(void 0===t&&(t=new Dr),t.returnType="Image",this.ky(t)):null},S.ky=function(t){return void 0===t&&(t=new Dr),u_(this,this.tA,t)},S.tA=function(t,e,n){var s=h_(n,t,"canvas",null);if(null===s)return null;var a=null;if(null!==(n=s.Y.canvas))switch(a=t.returnType,a=void 0===a?"string":a.toLowerCase(),a){case wd+"data":a=s.getImageData(0,0,n.width,n.height);break;case wd:(s=(t.document||document).createElement("img")).src=n.toDataURL(t.type,t.details),a=s;break;case"blob":return"function"!=typeof e&&q('Error: Diagram.makeImageData called with "returnType: toBlob", but no required "callback" function property defined.'),"function"==typeof n.toBlob?(n.toBlob(e,t.type,t.details),"toBlob"):"function"==typeof n.msToBlob?(e(n.msToBlob()),"msToBlob"):(e(null),null);default:a=n.toDataURL(t.type,t.details)}return"function"==typeof e?(e(a),null):a},kt.Object.defineProperties(U.prototype,{div:{get:function(){return this.Ga},set:function(t){if(this.Ga!==t){var e=this.Ga;null!==e?(e.D=void 0,e.goDiagram=void 0,e.go=void 0,e.innerHTML="",null!==this.Ca&&(this.removeEventListener(e=this.Ca.La,"pointermove",this.mk,!1),this.removeEventListener(e,"pointerdown",this.lk,!1),this.removeEventListener(e,"pointerup",this.pk,!1),this.removeEventListener(e,"pointerout",this.nk,!1),this.Ca.Mx()),this.zl&&(this.zl.disconnect(),this.zl=null),null!==(e=this.toolManager)&&(e.mouseDownTools.each(function(n){n.cancelWaitAfter()}),e.mouseMoveTools.each(function(n){n.cancelWaitAfter()}),e.mouseUpTools.each(function(n){n.cancelWaitAfter()})),e.cancelWaitAfter(),this.currentTool.doCancel(),this.Ab=this.Ca=null,this.removeEventListener(gt,"resize",this.gw,!1),this.removeEventListener(gt,"wheel",this.ik,!0),fd===this&&(fd=null)):this.Uf=!1,this.Ga=null,null!==t&&((e=t.D)&&(e.div=null),mm(this,t),this.redraw())}}},Bx:{get:function(){return this.zr}},Oi:{get:function(){return this.Uf}},draggedLink:{get:function(){return this.ev},set:function(t){this.ev!==t&&(this.ev=t,null!==t&&(this.lw=t.fromPort,this.$s=t.toPort))}},oy:{get:function(){return this.lw},set:function(t){this.lw=t}},py:{get:function(){return this.$s},set:function(t){this.$s=t}},animationManager:{get:function(){return this.Qd}},undoManager:{get:function(){return this.dc.undoManager}},skipsUndoManager:{get:function(){return this.kh},set:function(t){this.kh=t,this.dc.skipsUndoManager=t}},delaysLayout:{get:function(){return this.Dt},set:function(t){this.Dt=t}},opacity:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&((0>t||1<t)&&ae(t,"0 <= value <= 1",U,"opacity"),this.mb=t,this.g("opacity",e,t),this.N())}},validCycle:{get:function(){return this.kt},set:function(t){var e=this.kt;e!==t&&(this.kt=t,this.g("validCycle",e,t))}},layers:{get:function(){return this.Oa.iterator}},isModelReadOnly:{get:function(){var t=this.dc;return null!==t&&t.isReadOnly},set:function(t){var e=this.dc;null!==e&&(e.isReadOnly=t)}},isReadOnly:{get:function(){return this.Sg},set:function(t){var e=this.Sg;e!==t&&(this.Sg=t,this.g("isReadOnly",e,t))}},isEnabled:{get:function(){return this.vd},set:function(t){var e=this.vd;e!==t&&(this.vd=t,this.g("isEnabled",e,t))}},allowClipboard:{get:function(){return this.ot},set:function(t){var e=this.ot;e!==t&&(this.ot=t,this.g("allowClipboard",e,t))}},allowCopy:{get:function(){return this.L},set:function(t){var e=this.L;e!==t&&(this.L=t,this.g("allowCopy",e,t))}},allowDelete:{get:function(){return this.wa},set:function(t){var e=this.wa;e!==t&&(this.wa=t,this.g("allowDelete",e,t))}},allowDragOut:{get:function(){return this.pt},set:function(t){var e=this.pt;e!==t&&(this.pt=t,this.g("allowDragOut",e,t))}},allowDrop:{get:function(){return this.qt},set:function(t){var e=this.qt;e!==t&&(this.qt=t,this.g("allowDrop",e,t))}},allowTextEdit:{get:function(){return this.ke},set:function(t){var e=this.ke;e!==t&&(this.ke=t,this.g("allowTextEdit",e,t))}},allowGroup:{get:function(){return this.Ba},set:function(t){var e=this.Ba;e!==t&&(this.Ba=t,this.g("allowGroup",e,t))}},allowUngroup:{get:function(){return this.Pd},set:function(t){var e=this.Pd;e!==t&&(this.Pd=t,this.g("allowUngroup",e,t))}},allowInsert:{get:function(){return this.tt},set:function(t){var e=this.tt;e!==t&&(this.tt=t,this.g("allowInsert",e,t))}},allowLink:{get:function(){return this.Ma},set:function(t){var e=this.Ma;e!==t&&(this.Ma=t,this.g("allowLink",e,t))}},allowRelink:{get:function(){return this.Hb},set:function(t){var e=this.Hb;e!==t&&(this.Hb=t,this.g("allowRelink",e,t))}},allowMove:{get:function(){return this.Rb},set:function(t){var e=this.Rb;e!==t&&(this.Rb=t,this.g("allowMove",e,t))}},allowReshape:{get:function(){return this.Sb},set:function(t){var e=this.Sb;e!==t&&(this.Sb=t,this.g("allowReshape",e,t))}},allowResize:{get:function(){return this.sc},set:function(t){var e=this.sc;e!==t&&(this.sc=t,this.g("allowResize",e,t))}},allowRotate:{get:function(){return this.Nd},set:function(t){var e=this.Nd;e!==t&&(this.Nd=t,this.g("allowRotate",e,t))}},allowSelect:{get:function(){return this.Od},set:function(t){var e=this.Od;e!==t&&(this.Od=t,this.g("allowSelect",e,t))}},allowUndo:{get:function(){return this.Zs},set:function(t){var e=this.Zs;e!==t&&(this.Zs=t,this.g("allowUndo",e,t))}},allowZoom:{get:function(){return this.Fu},set:function(t){var e=this.Fu;e!==t&&(this.Fu=t,this.g("allowZoom",e,t))}},hasVerticalScrollbar:{get:function(){return this.On},set:function(t){var e=this.On;e!==t&&(this.On=t,wu(this),this.N(),this.g("hasVerticalScrollbar",e,t),Po(this,!1))}},hasHorizontalScrollbar:{get:function(){return this.Nn},set:function(t){var e=this.Nn;e!==t&&(this.Nn=t,wu(this),this.N(),this.g("hasHorizontalScrollbar",e,t),Po(this,!1))}},allowHorizontalScroll:{get:function(){return this.st},set:function(t){var e=this.st;e!==t&&(this.st=t,this.g("allowHorizontalScroll",e,t),Po(this,!1))}},allowVerticalScroll:{get:function(){return this.zu},set:function(t){var e=this.zu;e!==t&&(this.zu=t,this.g("allowVerticalScroll",e,t),Po(this,!1))}},scrollHorizontalLineChange:{get:function(){return this.dt},set:function(t){var e=this.dt;e!==t&&(0>t&&ae(t,">= 0",U,"scrollHorizontalLineChange"),this.dt=t,this.g("scrollHorizontalLineChange",e,t))}},scrollVerticalLineChange:{get:function(){return this.et},set:function(t){var e=this.et;e!==t&&(0>t&&ae(t,">= 0",U,"scrollVerticalLineChange"),this.et=t,this.g("scrollVerticalLineChange",e,t))}},lastInput:{get:function(){return this.tj},set:function(t){this.tj=t}},previousInput:{get:function(){return this.hh},set:function(t){this.hh=t}},firstInput:{get:function(){return this.cr},set:function(t){this.cr=t}},currentCursor:{get:function(){return this.Nu},set:function(t){if(""===t&&(t=this.Zi),this.Nu!==t){var e=this.Ca,n=this.Ga;if(null!==e){this.Nu=t;var s=e.style.cursor;e.style.cursor=t,n.style.cursor=t,e.style.cursor===s&&(e.style.cursor="-webkit-"+t,n.style.cursor="-webkit-"+t,e.style.cursor===s&&(e.style.cursor="-moz-"+t,n.style.cursor="-moz-"+t,e.style.cursor===s&&(e.style.cursor=t,n.style.cursor=t)))}}}},defaultCursor:{get:function(){return this.Zi},set:function(t){""===t&&(t="auto");var e=this.Zi;e!==t&&(this.Zi=t,this.g("defaultCursor",e,t))}},click:{get:function(){return this.Bg},set:function(t){var e=this.Bg;e!==t&&(this.Bg=t,this.g("click",e,t))}},doubleClick:{get:function(){return this.Jg},set:function(t){var e=this.Jg;e!==t&&(this.Jg=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return this.Dg},set:function(t){var e=this.Dg;e!==t&&(this.Dg=t,this.g("contextClick",e,t))}},mouseOver:{get:function(){return this.bh},set:function(t){var e=this.bh;e!==t&&(this.bh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return this.$g},set:function(t){var e=this.$g;e!==t&&(this.$g=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return this.Zg},set:function(t){var e=this.Zg;e!==t&&(this.Zg=t,this.g("mouseHold",e,t))}},mouseDragOver:{get:function(){return this.fw},set:function(t){var e=this.fw;e!==t&&(this.fw=t,this.g("mouseDragOver",e,t))}},mouseDrop:{get:function(){return this.Xg},set:function(t){var e=this.Xg;e!==t&&(this.Xg=t,this.g("mouseDrop",e,t))}},handlesDragDropForTopLevelParts:{get:function(){return this.pv},set:function(t){var e=this.pv;e!==t&&(this.pv=t,this.g("handlesDragDropForTopLevelParts",e,t))}},mouseEnter:{get:function(){return this.Yg},set:function(t){var e=this.Yg;e!==t&&(this.Yg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return this.ah},set:function(t){var e=this.ah;e!==t&&(this.ah=t,this.g("mouseLeave",e,t))}},toolTip:{get:function(){return this.uh},set:function(t){var e=this.uh;e!==t&&(this.uh=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return this.Eg},set:function(t){var e=this.Eg;e!==t&&(this.Eg=t,this.g("contextMenu",e,t))}},commandHandler:{get:function(){return this.Gu},set:function(t){this.Gu!==t&&(this.Gu=t,t.Ne(this))}},toolManager:{get:function(){return this.gt},set:function(t){this.gt!==t&&(this.gt=t,t.diagram=this)}},defaultTool:{get:function(){return this.$u},set:function(t){var e=this.$u;e!==t&&(this.$u=t,t.diagram=this,this.currentTool===e&&(this.currentTool=t))}},currentTool:{get:function(){return this.Su},set:function(t){var e=this.Su;null!==e&&(e.isActive&&e.doDeactivate(),e.cancelWaitAfter(),e.doStop()),null===t&&(t=this.defaultTool),null!==t&&(this.Su=t,t.diagram=this,t.doStart())}},selection:{get:function(){return this.jx}},maxSelectionCount:{get:function(){return this.Wv},set:function(t){var e=this.Wv;if(e!==t)if(0<=t&&!isNaN(t)){if(this.Wv=t,this.g("maxSelectionCount",e,t),!this.undoManager.isUndoingRedoing&&0<(t=this.selection.count-t)){this.S("ChangingSelection",this.selection),e=this.selection.ya();for(var n=0;n<t;n++)e[n].isSelected=!1;this.S("ChangedSelection",this.selection)}}else ae(t,">= 0",U,"maxSelectionCount")}},nodeSelectionAdornmentTemplate:{get:function(){return this.tk},set:function(t){var e=this.tk;e!==t&&(this.tk=t,this.g("nodeSelectionAdornmentTemplate",e,t))}},groupSelectionAdornmentTemplate:{get:function(){return this.$i},set:function(t){var e=this.$i;e!==t&&(this.$i=t,this.g("groupSelectionAdornmentTemplate",e,t))}},linkSelectionAdornmentTemplate:{get:function(){return this.bj},set:function(t){var e=this.bj;e!==t&&(this.bj=t,this.g("linkSelectionAdornmentTemplate",e,t))}},highlighteds:{get:function(){return this.Rw}},isModified:{get:function(){var t=this.undoManager;return t.isEnabled?null!==t.currentTransaction||this.Tn&&this.se!==t.historyIndex:this.Tn},set:function(t){if(this.Tn!==t){this.Tn=t;var e=this.undoManager;!t&&e.isEnabled&&(this.se=e.historyIndex),t||Hb(this)}}},model:{get:function(){return this.dc},set:function(t){var e=this.dc;if(e!==t){this.currentTool.doCancel(),null!==e&&e.undoManager!==t.undoManager&&e.undoManager.isInTransaction&&q("Do not replace a Diagram.model while a transaction is in progress."),this.animationManager.rc(!0);var n=qf(this,!0);this.Uf=!1,this.An=!0,this.se=-2,this.kg=!1;var s=this.qb;this.qb=!0,Ba(this.animationManager,"Model"),null!==e&&(null!==this.df&&this.df.each(function(u){e.rk(u)}),e.rk(this.sw)),this.dc=t,this.partManager=function pS(t){return null!==(t=ap.get(t))?new t:new $t}(this.dc.type);for(var a=0;a<n.length;a++)this.add(n[a]);t.yh(this.rw),this.partManager.addAllModeledParts(),t.rk(this.rw),t.yh(this.sw),null!==this.df&&this.df.each(function(u){t.yh(u)}),this.qb=s,this.Qa(),this.qb||this.N(),null!==e&&t.undoManager.copyProperties(e.undoManager)}}},Z:{get:function(){return this.qw},set:function(t){this.qw=t}},Hs:{get:function(){return this.Ky}},skipsModelSourceBindings:{get:function(){return this.tw},set:function(t){this.tw=t}},Ws:{get:function(){return this.pu},set:function(t){this.pu=t}},nodeTemplate:{get:function(){return this.j.H("")},set:function(t){var e=this.j.H("");e!==t&&(this.j.add("",t),this.g("nodeTemplate",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},nodeTemplateMap:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("nodeTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},groupTemplate:{get:function(){return this.C.H("")},set:function(t){var e=this.C.H("");e!==t&&(this.C.add("",t),this.g("groupTemplate",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},groupTemplateMap:{get:function(){return this.C},set:function(t){var e=this.C;e!==t&&(this.C=t,this.g("groupTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},linkTemplate:{get:function(){return this.o.H("")},set:function(t){var e=this.o.H("");e!==t&&(this.o.add("",t),this.g("linkTemplate",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},linkTemplateMap:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&(this.o=t,this.g("linkTemplateMap",e,t),this.undoManager.isUndoingRedoing||this.Ld())}},isMouseCaptured:{get:function(){return this.pw},set:function(t){var e=this.Ca;null!==e&&((e=e.La)instanceof SVGElement||(t?(this.lastInput.bubbles=!1,this.removeEventListener(e,"pointermove",this.mk,!1),this.removeEventListener(e,"pointerdown",this.lk,!1),this.removeEventListener(e,"pointerup",this.pk,!1),this.removeEventListener(e,"pointerout",this.nk,!1),this.addEventListener(gt,"pointermove",this.mk,!0),this.addEventListener(gt,"pointerdown",this.lk,!0),this.addEventListener(gt,"pointerup",this.pk,!0),this.addEventListener(gt,"pointerout",this.nk,!0),this.removeEventListener(e,"wheel",this.ik,!1),this.addEventListener(gt,"wheel",this.ik,!0),this.addEventListener(gt,"selectstart",this.preventDefault,!1)):(this.removeEventListener(gt,"pointermove",this.mk,!0),this.removeEventListener(gt,"pointerdown",this.lk,!0),this.removeEventListener(gt,"pointerup",this.pk,!0),this.removeEventListener(gt,"pointerout",this.nk,!0),this.addEventListener(e,"pointermove",this.mk,!1),this.addEventListener(e,"pointerdown",this.lk,!1),this.addEventListener(e,"pointerup",this.pk,!1),this.addEventListener(e,"pointerout",this.nk,!1),this.removeEventListener(gt,"wheel",this.ik,!0),this.removeEventListener(gt,"selectstart",this.preventDefault,!1),this.addEventListener(e,"wheel",this.ik,!1)),this.pw=t))}},position:{get:function(){return this.ja},set:function(t){var e=A.alloc().assign(this.ja);if(!e.A(t)){var n=this.viewportBounds.copy();this.ja.assign(t),Tl(this.animationManager,e,this.ja),this.qb||null===this.Ca&&!this.Gp.u()?go(this):(this.qb=!0,lm(this,this.Uq,this.ua/(t=this.scale),this.ta/t,this.Hk,!1),this.qb=!1),this.qb||this.onViewportBoundsChanged(n,this.viewportBounds,this.sa,!1)}A.free(e)}},initialPosition:{get:function(){return this.uv},set:function(t){this.uv.A(t)||(this.uv=t.I())}},initialScale:{get:function(){return this.wv},set:function(t){this.wv!==t&&(this.wv=t)}},grid:{get:function(){return null===this.Wb&&e_(this),this.Wb},set:function(t){var e=this.Wb;if(e!==t){null===e&&(e_(this),e=this.Wb),t.type!==W.Grid&&q("Diagram.grid must be a Panel of type Panel.Grid");var n=e.panel;null!==n&&n.remove(e),this.Wb=t,t.name="GRID",null!==n&&n.add(t),Ga(this),this.N(),this.g("grid",e,t)}}},viewportBounds:{get:function(){return this.tx}},viewSize:{get:function(){return this.Gp},set:function(t){var e=this.viewSize;e.A(t)||(this.Gp=t=t.I(),this.ta=this.ua=0,t.u()?(this.ua=t.width,this.ta=t.height):null!==this.Ga&&(this.ua=this.Ga.clientWidth||1,this.ta=this.Ga.clientHeight||1),go(this),this.Qa(),this.g("viewSize",e,t),this.redraw())}},fixedBounds:{get:function(){return this.ov},set:function(t){var e=this.ov;e.A(t)||(t.width!==-1/0&&t.height!==1/0&&t.height!==-1/0||q("fixedBounds width/height must not be Infinity"),this.ov=t=t.I(),this.Qa(),this.g("fixedBounds",e,t))}},scrollMargin:{get:function(){return this.Hj},set:function(t){"number"==typeof t&&(t=new Ct(t));var e=this.Hj;e.A(t)||(this.Hj=t=t.I(),this.g("scrollMargin",e,t),this.oq())}},scrollMode:{get:function(){return this.Ij},set:function(t){var e=this.Ij;e!==t&&(this.Ij=t,t===kl&&Po(this,!1),this.g("scrollMode",e,t),this.N())}},scrollsPageOnFocus:{get:function(){return this.ft},set:function(t){var e=this.ft;e!==t&&(this.ft=t,this.g("scrollsPageOnFocus",e,t))}},positionComputation:{get:function(){return this.bt},set:function(t){var e=this.bt;e!==t&&(this.bt=t,Po(this,!1),this.g("positionComputation",e,t))}},scaleComputation:{get:function(){return this.ct},set:function(t){var e=this.ct;e!==t&&(this.ct=t,r_(this,this.scale,this.scale),this.g("scaleComputation",e,t))}},documentBounds:{get:function(){return this.Uq}},isVirtualized:{get:function(){return this.Dv},set:function(t){var e=this.Dv;e!==t&&(this.Dv=t,this.g("isVirtualized",e,t))}},scale:{get:function(){return this.sa},set:function(t){var e=this.sa;e!==t&&r_(this,e,t)}},defaultScale:{get:function(){return this.Sq},set:function(t){this.Sq=t}},autoScale:{get:function(){return this.Ph},set:function(t){var e=this.Ph;e!==t&&(this.Ph=t,this.g("autoScale",e,t),t!==ar&&Po(this,!1))}},initialAutoScale:{get:function(){return this.Rg},set:function(t){var e=this.Rg;e!==t&&(this.Rg=t,this.g("initialAutoScale",e,t))}},initialViewportSpot:{get:function(){return this.zv},set:function(t){var e=this.zv;e!==t&&(t.hb()||q("initialViewportSpot must be a specific Spot: "+t),this.zv=t,this.g("initialViewportSpot",e,t))}},initialDocumentSpot:{get:function(){return this.qv},set:function(t){var e=this.qv;e!==t&&(t.hb()||q("initialViewportSpot must be a specific Spot: "+t),this.qv=t,this.g("initialDocumentSpot",e,t))}},minScale:{get:function(){return this.$v},set:function(t){var e=this.$v;e!==t&&(0<t?(this.$v=t,this.g("minScale",e,t),t>this.scale&&(this.scale=t)):ae(t,"> 0",U,"minScale"))}},maxScale:{get:function(){return this.Lv},set:function(t){var e=this.Lv;e!==t&&(0<t?(this.Lv=t,this.g("maxScale",e,t),t<this.scale&&(this.scale=t)):ae(t,"> 0",U,"maxScale"))}},zoomPoint:{get:function(){return this.lt},set:function(t){this.lt.A(t)||(this.lt=t=t.I())}},contentAlignment:{get:function(){return this.Hk},set:function(t){var e=this.Hk;e.A(t)||(this.Hk=t=t.I(),this.g("contentAlignment",e,t),Po(this,!1))}},initialContentAlignment:{get:function(){return this.ir},set:function(t){var e=this.ir;e.A(t)||(this.ir=t=t.I(),this.g("initialContentAlignment",e,t))}},padding:{get:function(){return this.nb},set:function(t){"number"==typeof t&&(t=new Ct(t));var e=this.nb;e.A(t)||(this.nb=t=t.I(),this.Qa(),this.g("padding",e,t))}},partManager:{get:function(){return this.at},set:function(t){var e=this.at;e!==t&&(null!==t.diagram&&q("Cannot share PartManagers between Diagrams: "+t.toString()),null!==e&&e.Ne(null),this.at=t,t.Ne(this))}},nodes:{get:function(){return this.partManager.nodes.iterator}},links:{get:function(){return this.partManager.links.iterator}},parts:{get:function(){return this.partManager.parts.iterator}},layout:{get:function(){return this.uc},set:function(t){var e=this.uc;e!==t&&(this.uc=t,t.diagram=this,t.group=null,this.Oh=!0,this.g("layout",e,t),this.Gb())}},isTreePathToChildren:{get:function(){return this.Av},set:function(t){var e=this.Av;if(e!==t&&(this.Av=t,this.g("isTreePathToChildren",e,t),!this.undoManager.isUndoingRedoing))for(t=this.nodes;t.next();)Rd(t.value)}},treeCollapsePolicy:{get:function(){return this.it},set:function(t){var e=this.it;e!==t&&(t!==Th&&t!==pm&&t!==up&&q("Unknown Diagram.treeCollapsePolicy: "+t),this.it=t,this.g("treeCollapsePolicy",e,t))}},Ke:{get:function(){return this.ow},set:function(t){this.ow=t}},autoScrollInterval:{get:function(){return this.Cq},set:function(t){var e=this.Cq;e!==t&&(this.Cq=t,this.g("autoScrollInterval",e,t))}},autoScrollRegion:{get:function(){return this.Eq},set:function(t){"number"==typeof t&&(t=new Ct(t));var e=this.Eq;e.A(t)||(this.Eq=t=t.I(),this.Qa(),this.g("autoScrollRegion",e,t))}}}),kt.Object.defineProperties(U,{licenseKey:{get:function(){return vd.$b()},set:function(t){vd.add(t)}},version:{get:function(){return g_}}}),U.prototype.makeImageData=U.prototype.ky,U.prototype.makeImage=U.prototype.sA,U.prototype.cacheGroupExternalLinks=U.prototype.Hu,U.prototype.addRenderer=U.prototype.cz,U.prototype.makeSVG=U.prototype.sv,U.prototype.makeSvg=U.prototype.Js,U.prototype.stopAutoScroll=U.prototype.ug,U.prototype.doAutoScroll=U.prototype.ns,U.prototype.isUnoccupied=U.prototype.fk,U.prototype.raiseDiagramEvent=U.prototype.S,U.prototype.removeDiagramListener=U.prototype.mm,U.prototype.addDiagramListener=U.prototype.Nj,U.prototype.findTreeRoots=U.prototype.Wz,U.prototype.layoutDiagram=U.prototype.qA,U.prototype.findTopLevelGroups=U.prototype.Pz,U.prototype.findTopLevelNodesAndLinks=U.prototype.Qz,U.prototype.ensureBounds=U.prototype.Ta,U.prototype.findLinksByExample=U.prototype.qs,U.prototype.findNodesByExample=U.prototype.rs,U.prototype.findLinkForData=U.prototype.zc,U.prototype.findNodeForData=U.prototype.Gi,U.prototype.findPartForData=U.prototype.Ac,U.prototype.findLinkForKey=U.prototype.findLinkForKey,U.prototype.findNodeForKey=U.prototype.Fb,U.prototype.findPartForKey=U.prototype.findPartForKey,U.prototype.rebuildParts=U.prototype.Ld,U.prototype.transformViewToDoc=U.prototype.Ys,U.prototype.transformRectDocToView=U.prototype.WA,U.prototype.transformDocToView=U.prototype.wq,U.prototype.centerRect=U.prototype.ls,U.prototype.scrollToRect=U.prototype.Nv,U.prototype.scroll=U.prototype.scroll,U.prototype.highlightCollection=U.prototype.hA,U.prototype.highlight=U.prototype.gA,U.prototype.selectCollection=U.prototype.NA,U.prototype.select=U.prototype.select,U.prototype.updateAllRelationshipsFromData=U.prototype.zq,U.prototype.updateAllTargetBindings=U.prototype.updateAllTargetBindings,U.prototype.commit=U.prototype.commit,U.prototype.rollbackTransaction=U.prototype.Hf,U.prototype.commitTransaction=U.prototype.Xa,U.prototype.startTransaction=U.prototype.xa,U.prototype.raiseChanged=U.prototype.g,U.prototype.raiseChangedEvent=U.prototype.Wa,U.prototype.removeChangedListener=U.prototype.rk,U.prototype.addChangedListener=U.prototype.yh,U.prototype.removeModelChangedListener=U.prototype.IA,U.prototype.addModelChangedListener=U.prototype.zx,U.prototype.findLayer=U.prototype.Zj,U.prototype.removeLayer=U.prototype.GA,U.prototype.addLayerAfter=U.prototype.Zy,U.prototype.addLayerBefore=U.prototype.xx,U.prototype.addLayer=U.prototype.Ul,U.prototype.moveParts=U.prototype.moveParts,U.prototype.copyParts=U.prototype.Vj,U.prototype.removeParts=U.prototype.Qs,U.prototype.remove=U.prototype.remove,U.prototype.add=U.prototype.add,U.prototype.clearDelayedGeometries=U.prototype.Iu,U.prototype.setProperties=U.prototype.zm,U.prototype.attach=U.prototype.Eu,U.prototype.set=U.prototype.set,U.prototype.resetInputOptions=U.prototype.vy,U.prototype.setInputOption=U.prototype.OA,U.prototype.getInputOption=U.prototype.cm,U.prototype.resetRenderingHints=U.prototype.wy,U.prototype.setRenderingHint=U.prototype.Ay,U.prototype.getRenderingHint=U.prototype.Ie,U.prototype.maybeUpdate=U.prototype.gd,U.prototype.requestUpdate=U.prototype.Gb,U.prototype.delayInitialization=U.prototype.uz,U.prototype.isUpdateRequested=U.prototype.mA,U.prototype.invalidateDocumentBounds=U.prototype.Qa,U.prototype.findObjectsNear=U.prototype.qg,U.prototype.findPartsNear=U.prototype.Lz,U.prototype.findObjectsIn=U.prototype.zf,U.prototype.findPartsIn=U.prototype.Tx,U.prototype.findObjectsAt=U.prototype.Hi,U.prototype.findPartsAt=U.prototype.Kz,U.prototype.findObjectAt=U.prototype.Zb,U.prototype.findPartAt=U.prototype.am,U.prototype.focusObject=U.prototype.Xz,U.prototype.alignDocument=U.prototype.ez,U.prototype.zoomToRect=U.prototype.$A,U.prototype.zoomToFit=U.prototype.zoomToFit,U.prototype.diagramScroll=U.prototype.Kx,U.prototype.focus=U.prototype.focus;var fd=null,ap=new xt,c_=null,pd=null,Wr=void 0!==gt.document,gd=null,Bt="",ar=new Q(U,"None",0),lp=new Q(U,"Uniform",1),md=new Q(U,"UniformToFill",2),Ch=new Q(U,"CycleAll",10),d_=new Q(U,"CycleNotDirected",11),f_=new Q(U,"CycleNotDirectedFast",12),p_=new Q(U,"CycleNotUndirected",13),yd=new Q(U,"CycleDestinationTree",14),ha=new Q(U,"CycleSourceTree",15),kl=new Q(U,"DocumentScroll",1),xu=new Q(U,"InfiniteScroll",2),Th=new Q(U,"TreeParentCollapsed",21),pm=new Q(U,"AllParentsCollapsed",22),up=new Q(U,"AnyParentsCollapsed",23),vd=new st,g_="2.2.4",wd="image",m_=null,Sh=!1;function y_(){this.Uy=null,this.j="zz@orderNum",this.kd="63ad05bbe23a1786468a4c741b6d2"===this._tk?this.j=!0:null}function gm(t,e){if(e.Ab.setTransform(e.ec,0,0,e.ec,0,0),e.Ab.Ed(),null===t.kd)t:{e="f";var n=gt[Tt("76a715b2f73f148a")][Tt("72ba13b5")];if(t.kd=!0,Wr){var s=U[Tt("76a115b6ed251eaf4692")];if(s)for(var a=vd.iterator;a.next()&&!(6>(s=Tt(s=a.value).split(Tt("39e9"))).length);){var u=Tt(s[1]).split(".");if("7da71ca0"!==s[4])break;var c=Tt(au[Tt("6cae19")]).split(".");if(u[0]>c[0]||u[0]===c[0]&&u[1]>=c[1]){var f=gt[Tt("74a900bae4370f8b51")][Tt("6fbb13a1c2311e8a57")].toLowerCase();if(c=f[Tt("73a612b6fb191d")](Tt("3aad1ab6e022098b4dc4")),u=Tt(s[2]),-1<c&&(f=f[Tt("73a612b6fb191d")](u.toLowerCase()+"/"),t.kd=!(-1<f&&f<c),!t.kd))break;for(c=n[Tt("76ad18b4f73e")],f=n[Tt("73a612b6fb191d")](Tt("35e7"))+2;f<c;f++)e+=n[f];if(0>(c=e[Tt("73a612b6fb191d")](u))&&u!==Tt("7da71ca0ad381e90")&&(c=e[Tt("73a612b6fb191d")](Tt("76a715b2ef3e149757"))),0>c&&(c=e[Tt("73a612b6fb191d")](Tt("76a715b2ef3e149757"))),0>c&&(c=n[Tt("73a612b6fb191d")](Tt("7baa19a6f76c1988428554"))),t.kd=!(0<=c&&c<e[Tt("73a612b6fb191d")](Tt("35"))||-1===e[Tt("73a612b6fb191d")](Tt("35"))),!t.kd||n[Tt("73a612b6fb191d")](Tt("7fb002b6ed25128b4da25b2e"))&&n[Tt("73a612b6fb191d")](Tt("75ba1beee63a1e875799507d"))&&(t.kd=!(-1<n[Tt("73a612b6fb191d")](u)),!t.kd))break;if("#"===u[0]){for(c=gt.document.createElement("div"),f=s[0].replace(/[A-Za-z]/g,"");4>f.length;)f+="9";if(f=f.substr(f.length-4),s="",s+=["gsh","gsf"][parseInt(f.substr(0,1),10)%2],s+=["Header","Background","Display","Feedback"][parseInt(f.substr(0,1),10)%4],c[Tt("79a417a0f0181a8946")]=s,gt.document[Tt("78a712aa")]){if(gt.document[Tt("78a712aa")][Tt("7bb806b6ed32388c4a875b")](c),f=gt.getComputedStyle(c).getPropertyValue(Tt("78a704b7e62456904c9b12701b6532a8")),gt.document[Tt("78a712aa")][Tt("68ad1bbcf533388c4a875b")](c),f){if(c=gt[Tt("77a902b0eb1b1e804a8a")],-1!==f.indexOf(parseInt(u[1]+u[2],16))&&-1!==f.indexOf(parseInt(u[3]+u[4],16))){t.kd=!1;break}if(c&&c(Tt("32ae19a1e0331fc94084537c067a67fa59f1386b89d006")).matches)for(s="."+s,u=0;u<document.styleSheets.length;u++)for(var p in c=document.styleSheets[u].rules||document.styleSheets[u].cssRules)if(s===c[p].selectorText){t.kd=!1;break t}}}else t.kd=null,t.kd=!1}}}else{for(p=n[Tt("76ad18b4f73e")],a=n[Tt("73a612b6fb191d")](Tt("35e7"))+2;a<p;a++)e+=n[a];n=e[Tt("73a612b6fb191d")](Tt("7da71ca0ad381e90")),t.kd=!(0<=n&&n<e[Tt("73a612b6fb191d")](Tt("35")))}}}return 0<t.kd&&t!==t.Uy}function mm(t,e){if(Wr){if(null!=e||q("Diagram setup requires an argument DIV."),null!==t.Ga&&q("Diagram has already completed setup."),"string"==typeof e?t.Ga=gt.document.getElementById(e):e instanceof HTMLDivElement?t.Ga=e:q("No DIV or DIV id supplied: "+e),null===t.Ga&&q("Invalid DIV id; could not get element with id: "+e),void 0!==t.Ga.D&&q("Invalid div id; div already has a Diagram associated with it."),!t.zl&&gt.ResizeObserver){var n=S0(function(){t.Gb()},250);t.zl=new gt.ResizeObserver(function(){n()}),t.zl.observe(t.Ga)}"static"===gt.getComputedStyle(t.Ga,null).position&&(t.Ga.style.position="relative");var s="rgba(2"+(e=5)+"5, 255, 255, 0)";e--,t.Ga.style["-webkit-tap-highlight-color"]=s,t.Ga.innerHTML="",t.Ga.D=t,t.Ga.goDiagram=t,t.Ga.go=gt.go;var a=t.$r?new da(t):new Xr(t);if(void 0!==a.style&&(a.style.position="absolute",a.style.top="0px",a.style.left="0px","rtl"===gt.getComputedStyle(t.Ga,null).getPropertyValue("direction")&&(t.Vn=!0),a.style.zIndex="2",a.style.userSelect="none",a.style.MozUserSelect="none",a.style.touchAction="none"),t.Ca=a,t.Ab=a.context,s=t.Ab,t.ec=t.computePixelRatio(),t.viewSize.u()||(t.ua=t.Ga.clientWidth||1,t.ta=t.Ga.clientHeight||1),Ui(t,t.ua,t.ta),t.Ga.insertBefore(a.La,t.Ga.firstChild),(a=new Xr(null)).width=1,a.height=1,t.Ht=a,t.Mw=a.context,Wr){a=Wo("div");var u=Wo("div");a.style.position="absolute",a.style.overflow="auto",a.style.width=t.ua+"px",a.style.height=t.ta+"px",a.style.zIndex="1",u.style.position="absolute",u.style.width="1px",u.style.height="1px",t.Ga.appendChild(a),a.appendChild(u),a.onscroll=Lb,a.addEventListener("pointerdown",am),a.D=t,a.Sy=!0,a.Ty=!0,t.Or=a,t.gp=u}t.oq=S0(function(){t.si=null,t.N()},300),t.gw=S0(function(){sm(t)},250),t.preventDefault=function(c){return c.preventDefault(),!1},t.ik=function(c){if(t.isEnabled){var f=Rs(t,c,!0);f.bubbles=!0;var p=0,g=0;f.delta=0,void 0!==c.deltaX?(0!==c.deltaX&&(p=0<c.deltaX?1:-1),0!==c.deltaY&&(g=0<c.deltaY?1:-1),f.delta=Math.abs(c.deltaX)>Math.abs(c.deltaY)?-p:-g):void 0!==c.wheelDeltaX?(0!==c.wheelDeltaX&&(p=0<c.wheelDeltaX?-1:1),0!==c.wheelDeltaY&&(g=0<c.wheelDeltaY?-1:1),f.delta=Math.abs(c.wheelDeltaX)>Math.abs(c.wheelDeltaY)?-p:-g):void 0!==c.wheelDelta&&0!==c.wheelDelta&&(f.delta=0<c.wheelDelta?1:-1),t.doMouseWheel(),Sl(f,c)}},t.xA=function(c){t.isEnabled&&(t.el=!1,Rs(t,c,!0),(c=t.currentTool).cancelWaitAfter(),c.standardMouseOver())},t.lk=function(c){if(t.isEnabled){t.el=!0;var f=t.fu;void 0===f[c.pointerId]&&(f[c.pointerId]=c);var p=!1;if(null!==(f=t.wl)[0]&&f[0].pointerId===c.pointerId)f[0]=c;else if(null!==f[1]&&f[1].pointerId===c.pointerId)f[1]=c,p=!0;else if(null===f[0])f[0]=c;else{if(null!==f[1])return void c.preventDefault();f[1]=c,p=!0}(f="touch"===c.pointerType||"pen"===c.pointerType)&&(t.ru=!1,t.Vt=!0);var g=p;p=vu(t,c,!0,!1,!0,g),xh(t,c,p),p.targetDiagram=yu(c),p.targetObject=null,g||p.clone(t.cr),g=t.Vw,f=f?25:10,c.timeStamp-t.Uw<t.Xy&&!(Math.abs(g.x-c.screenX)>f||Math.abs(g.y-c.screenY)>f)?t.sr++:t.sr=1,p.clickCount=t.sr,t.Uw=c.timeStamp,t.Vw.tg(c.screenX,c.screenY),t.doMouseDown(),1===c.button?c.preventDefault():Sl(p,c)}},t.mk=function(c){if(t.isEnabled){t.el=!0;var f=t.wl;if(null!==f[0]&&f[0].pointerId===c.pointerId)f[0]=c;else{if(null!==f[1]&&f[1].pointerId===c.pointerId)return void(f[1]=c);if(null!==f[0])return;f[0]=c}if(f[0].pointerId===c.pointerId){f=vu(t,c,!1,!1,!1,null!==f[1]);var p=gt.document.elementFromPoint(c.clientX,c.clientY);null!==p&&null!=p.shadowRoot&&(p=p.shadowRoot.elementFromPoint(c.clientX,c.clientY));var g=t,y=c;p&&p.D&&(y=c,g=p.D),f.targetDiagram=g,xh(t,y,f),f.targetObject=null,t.doMouseMove(),Sl(f,c)}}},t.pk=function(c){if(t.isEnabled){t.el=!0;var f="touch"===c.pointerType||"pen"===c.pointerType,p=t.fu;if(f&&t.ru)delete p[c.pointerId],c.preventDefault();else if(null!==(p=t.wl)[0]&&p[0].pointerId===c.pointerId){p[0]=null,p=vu(t,c,!1,!0,!0,!1);var g=gt.document.elementFromPoint(c.clientX,c.clientY);null!==g&&g.D instanceof U&&g.D!==t&&xh(g.D,c,p),xh(t,c,p),p.clickCount=t.sr,p.targetDiagram=yu(c),p.targetObject=null,t.doMouseUp(),Sl(p,c),f&&(t.Vt=!1)}else null!==p[1]&&p[1].pointerId===c.pointerId&&(p[1]=null)}},t.nk=function(c){if(t.isEnabled){t.el=!1;var f=t.fu;f[c.pointerId]&&delete f[c.pointerId],null!==(f=t.wl)[0]&&f[0].pointerId===c.pointerId&&(f[0]=null),null!==f[1]&&f[1].pointerId===c.pointerId&&(f[1]=null),"touch"!==c.pointerType&&"pen"!==c.pointerType&&((c=t.currentTool).cancelWaitAfter(),c.standardMouseOver())}},t.Wq=s.Y["d"+Gb[1]+Gb[2]+"wI"+wd.slice(1,5)]["b"+tc.slice(1,e)](s.Y,m_,e,e),s.Hc(!0),function Rb(t){var e=t.Ca.La;e instanceof HTMLCanvasElement&&(t.addEventListener(e,"pointerdown",t.lk,!1),t.addEventListener(e,"pointermove",t.mk,!1),t.addEventListener(e,"pointerup",t.pk,!1),t.addEventListener(e,"pointerout",t.nk,!1),t.addEventListener(e,"pointerenter",t.zz,!1),t.addEventListener(e,"pointerleave",t.Az,!1),t.addEventListener(e,"wheel",t.ik,!1),t.addEventListener(e,"keydown",t.nA,!1),t.addEventListener(e,"keyup",t.oA,!1),t.addEventListener(e,"blur",t.kz,!1),t.addEventListener(e,"focus",t.lz,!1),t.addEventListener(e,"selectstart",function(n){return n.preventDefault(),!1},!1),t.addEventListener(e,"contextmenu",function(n){return n.preventDefault(),!1},!1),t.addEventListener(gt,"resize",t.gw,!1),kf&&t.addEventListener(e,"touchstart",function(n){n.preventDefault()},!1))}(t)}}function El(t){this.j=void 0===t?new A:t,this.o=new A}U.className="Diagram",U.fromDiv=function(t){var e=t;return"string"==typeof t&&(e=gt.document.getElementById(t)),e instanceof HTMLDivElement&&e.D instanceof U?e.D:null},U.inherit=function(t,e){function n(){}if(Object.getPrototypeOf(t).prototype)throw Error("Used go.Diagram.inherit defining already defined class \n"+t);n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},U.useDOM=function(t){Wr=!!t&&void 0!==gt.document},U.isUsingDOM=function(){return Wr},U.None=ar,U.Uniform=lp,U.UniformToFill=md,U.CycleAll=Ch,U.CycleNotDirected=d_,U.CycleNotDirectedFast=f_,U.CycleNotUndirected=p_,U.CycleDestinationTree=yd,U.CycleSourceTree=ha,U.DocumentScroll=kl,U.InfiniteScroll=xu,U.TreeParentCollapsed=Th,U.AllParentsCollapsed=pm,U.AnyParentsCollapsed=up,y_.className="DiagramHelper",kt.Object.defineProperties(El.prototype,{point:{get:function(){return this.j},set:function(t){this.j=t}},shifted:{get:function(){return this.o},set:function(t){this.o=t}}});var Ge,ze,Oo,es,Un,Xn,pp,gp,Hs,Pl,Gb="DraggingInfo";function v_(t,e,n){this.node=t,this.info=e,this.dv=n}function _d(){this.reset()}function ym(t,e){if("string"==typeof t||gt.Element&&t instanceof Element)var n=U.call(this,t)||this;else n=U.call(this)||this,e=t;return cp(n),e&&n.zm(e),n}function cp(t){t.allowDragOut=!0,t.allowMove=!1,t.isReadOnly=!0,t.contentAlignment=Yn,t.layout=new Tn}function ts(t,e){if("string"==typeof t||gt.Element&&t instanceof Element)var n=U.call(this,t)||this;else n=U.call(this)||this,e=t;var s=n;n.animationManager.isEnabled=!1,n.qb=!0,n.kw=null,n.Nn=!1,n.On=!1,n.nv=!0,n.gv=!0,n.jt=0,n.aj=!1,n.Gl=null,n.Ay("drawShadows",!1),t=new ft;var a=new bt;return a.stroke="magenta",a.strokeWidth=2,a.fill="transparent",a.name="BOXSHAPE",t.selectable=!0,t.selectionAdorned=!1,t.selectionObjectName="BOXSHAPE",t.locationObjectName="BOXSHAPE",t.resizeObjectName="BOXSHAPE",t.cursor="move",t.add(a),n.Yi=t,n.allowCopy=!1,n.allowDelete=!1,n.allowSelect=!0,n.autoScrollRegion=new Ct(0,0,0,0),n.ja.h(0,0),n.toolManager.Za("Dragging",new kh,n.toolManager.mouseMoveTools),n.click=function(){var u=s.observed;if(null!==u){var c=u.viewportBounds,f=s.lastInput.documentPoint;u.position=new A(f.x-c.width/2,f.y-c.height/2)}},n.xw=function(){s.Qa(),dp(s)},n.ww=function(){null!==s.observed&&(s.Qa(),s.N())},n.mt=function(){1>s.updateDelay?s.N():s.aj||(s.aj=!0,setTimeout(function(){return s.redraw()},s.updateDelay))},n.vw=function(){null!==s.observed&&dp(s)},n.autoScale=lp,n.qb=!1,e&&Object.assign(n,e),n}function Nh(t){var e=t.observed;if(null!==e){var n=t.drawsTemporaryLayers,s=t.drawsGrid&&n,a=e.grid;s&&null!==a&&a.visible&&!isNaN(a.width)&&!isNaN(a.height)&&(Ga(e,a=z.alloc().assign(t.viewportBounds).Qc(e.viewportBounds)),z.free(a),Ai(e));var u=t.vb;u.reset(),1!==t.scale&&u.scale(t.scale),0===t.position.x&&0===t.position.y||u.translate(-t.position.x,-t.position.y),(a=t.Ab).scale(t.ec,t.ec),a.transform(u.m11,u.m12,u.m21,u.m22,u.dx,u.dy),u=(e=e.Oa.m).length;for(var c=0;c<u;c++){var f=e[c],p=t;if(f.visible&&0!==f.opacity){var g=f.diagram.grid.part;if(!n&&f.isTemporary)s&&g.layer===f&&(f=ad(f,a),g.pc(a,p),a.globalAlpha=f);else{for(var y=ad(f,a),v=p.scale,_=z.alloc(),b=f.Ha.m,D=b.length,k=0;k<D;k++){var O=b[k];(s||O!==g)&&f.Di(a,O,p,null,v,_,!1)}z.free(_),a.globalAlpha=y}}}}}function dp(t){var e=t.box;if(null!==e){var n=t.observed;if(null!==n){t.Vc=!0,n=n.viewportBounds;var s=e.selectionObject,a=Dt.alloc();a.h(n.width,n.height),s.desiredSize=a,Dt.free(a),t=2/t.scale,s instanceof bt&&(s.strokeWidth=t),e.location=new A(n.x-t/2,n.y-t/2),e.isSelected=!0}}}function kh(){Me.call(this),this.j=null}function Qt(){bn(this),this.D=fd,this.Ma=this.C=this.o=!0,this.L=this.wa=this.Rb=this.Ba=!1,this.ki=this.j=null,this.sc=1.05,this.Wt=NaN,this.Tw=null,this.yu=NaN,this.xu=Ss,this.Hb=!0,this.eg=null,this.Sb=200}function Ua(t,e,n){if(e.isVisible())return n;if(e instanceof Rt)Ua(t,e.adornedPart,n);else if(e instanceof K){var s=e.fromNode;null!==s&&Ua(t,s,n),null!==(e=e.toNode)&&Ua(t,e,n)}else e instanceof it&&(null!==(s=e.labeledLink)&&Ua(t,s,n),null!==(s=e.rg())&&(s.isTreeExpanded||s.wasTreeExpanded||n.push(s),Ua(t,s,n))),null!==(e=e.containingGroup)&&(e.isSubGraphExpanded||e.wasSubGraphExpanded||n.push(e),Ua(t,e,n));return n}function fp(t){var e=Lt();for(t=t.iterator;t.next();){var n=t.value;n instanceof K||e.push(n)}t=new nt,n=e.length;for(var s=0;s<n;s++){for(var a=e[s],u=!0,c=0;c<n;c++)if(a.Jd(e[c])){u=!1;break}u&&t.add(a)}return ee(e),t}function dt(){bn(this),this.G=4225027,this.mb=1,this.bg=null,this.na="",this.hd=this.Vb=null,this.ja=new A(NaN,NaN).freeze(),this.Tc=Ow,this.Zf=Xo,this.Yf=Sb,this.vb=new Et,this.Nh=new Et,this.Cb=null,this.sa=this.Sk=1,this.zb=0,this.Ee=es,this.Vg=lh,this.mc=new z(NaN,NaN,NaN,NaN).freeze(),this.xb=new z(NaN,NaN,NaN,NaN).freeze(),this.wc=new z(0,0,NaN,NaN).freeze(),this.P=this.Po=this.Qo=null,this.xk=this.yb=Xt,this.ap=0,this.bp=1,this.Cg=0,this.Zm=1,this.tp=null,this.hp=-1/0,this.Bl=0,this.Cl=Ko,this.Dl=Ii,this.Th="",this.fb=this.O=null,this.Dk=-1,this.Fl=this.$a=this.Sh=this.Jl=null,this.Jr=ze,this.ep=this.xg=this.Dj=null}function lr(t){null===t.O&&(t.O=new av)}function Eh(t,e,n){var s=t.Ch();if(null!==s)for(var a=t.fb.iterator;a.next();){var u=a.value,c=null;if(null!==u.sourceName){if(null===(c=Er(u,s,t)))continue;u.Aq(t,c,n,null)}else if(u.isToModel){var f=e.diagram;null===f||f.skipsModelSourceBindings||u.Aq(t,f.model.modelData,n,s)}else{if(null===(f=s.data))continue;var p=e.diagram;null===p||p.skipsModelSourceBindings||u.Aq(t,f,n,s)}c===t&&null!==(f=s.ps(u.Xi))&&u.cw(f,c,n)}}function Ub(t,e,n,s){return!1!==t.pickable&&(s.multiply(t.transform),n?t.Lc(e,s):t.Ah(e,s))}function w_(t,e,n,s,a){if(t.xb.h(e,n,s,a),!t.desiredSize.u()){var u=t.mc,c=(n=t.Vg).top+n.bottom;switch(n=u.width+(e=n.right+n.left),u=u.height+c,s+=e,a+=c,e=Io(t,!0),n===s&&u===a&&(e=ze),e){case ze:(n>s||u>a)&&(hr(t,!0),t.measure(n>s?s:n,u>a?a:u,0,0));break;case Ge:hr(t,!0),t.measure(s,a,0,0);break;case Un:hr(t,!0),t.measure(s,u,0,0);break;case Xn:hr(t,!0),t.measure(n,a,0,0)}}}function zb(t,e,n,s){var a=t.naturalBounds,u=0,c=0,f=a.width;a=a.height;var p=t.Qw();t instanceof bt&&(u=(a=t.ma.bounds).x,c=a.y,f=a.width,a=a.height),Tr(t,e,t.Vb,!0,!1,n,s),t.Vb instanceof jt&&t.Vb.type===dr?(e.beginPath(),e.rect(u-p/2,c-p/2,f+p,a+p),e.yf(t.Vb)):e.fillRect(u-p/2,c-p/2,f+p,a+p)}function Tr(t,e,n,s,a,u,c){if(null!==n){var f=1,p=1;if("string"==typeof n)s?e.fillStyle=n:e.strokeStyle=n;else if(n.type===ga)s?e.fillStyle=n.color:e.strokeStyle=n.color;else{var g=0;if(t instanceof bt&&(g=t.strokeWidth),f=u.width,p=u.height,a?(f=c.width,p=c.height):s||(f+=g,p+=g),(u=e instanceof En)&&n.ne&&(n.type===Tu||n.Gk===f&&n.yt===p))var y=n.ne;else{var v=0,_=0,b=0,D=0,k=0,O=0;if(O=k=0,a?(k=c.x,O=c.y):s||(k-=g/2,O-=g/2),v=n.start.x*f+n.start.offsetX,_=n.start.y*p+n.start.offsetY,b=n.end.x*f+n.end.offsetX,D=n.end.y*p+n.end.offsetY,v+=k,b+=k,_+=O,D+=O,n.type===ma)y=e.createLinearGradient(v,_,b,D);else if(n.type===dr)O=isNaN(n.endRadius)?Math.max(f,p)/2:n.endRadius,isNaN(n.startRadius)?(k=0,O=Math.max(f,p)/2):k=n.startRadius,y=e.createRadialGradient(v,_,k,b,D,O);else if(n.type===Tu)try{y=e.createPattern(n.pattern,"repeat")}catch(R){y=null}if(n.type!==Tu&&null!==(a=n.colorStops))for(a=a.iterator;a.next();)y.addColorStop(a.key,a.value);if(u&&(n.ne=y,null!==y&&(n.Gk=f,n.yt=p),null===y&&n.type===Tu&&-1!==n.Gk)){n.Gk=-1;var E=t.diagram;null!==E&&-1===n.Gk&&lu(function(){E.redraw()},600)}}s?e.fillStyle=y:e.strokeStyle=y}}}function mp(t){if(0!=(2048&t.G)){var e=t.vb;if(e.reset(),!t.xb.u()||!t.mc.u())return void Ah(t,!1);if(e.translate(t.xb.x-t.mc.x,t.xb.y-t.mc.y),1!==t.scale||0!==t.angle){var n=t.naturalBounds;t.np(e,n.x,n.y,n.width,n.height)}Ah(t,!1),ur(t,!0)}0!=(4096&t.G)&&(null===(e=t.panel)?(t.Nh.set(t.vb),t.Sk=t.scale,ur(t,!1)):null!==e.fe&&((n=t.Nh).reset(),e.je()?n.multiply(e.Nh):null!==e.panel&&n.multiply(e.panel.Nh),n.multiply(t.vb),t.Sk=t.scale*e.Sk,ur(t,!1)))}function xd(t){if(!Sr(t)){var e=t.panel;null!==e?e.s():t.Qi()&&null!==(e=t.diagram)&&(e.te.add(t),t instanceof it&&t.rd(),e.Gb()),Al(t,!0)}}function Io(t,e){var n=t.stretch,s=t.panel;return null!==s&&s.type===W.Table?yp(t,s.getRowDefinition(t.row),s.getColumnDefinition(t.column),e):null!==s&&s.type===W.Auto&&s.pb()===t?ca(t,Ge,e):n===es?null!==s?s.type===W.Spot&&s.pb()===t?ca(t,Ge,e):ca(t,(n=s.defaultStretch)===es?ze:n,e):ca(t,ze,e):ca(t,n,e)}function yp(t,e,n,s){var a=t.stretch;if(a!==es)return ca(t,a,s);var u=a=null;switch(e.stretch){case Xn:case Ge:u=!0}switch(n.stretch){case Un:case Ge:a=!0}return e=t.panel.defaultStretch,null===a&&(a=e===Un||e===Ge),null===u&&(u=e===Xn||e===Ge),ca(t,!0===a&&!0===u?Ge:!0===a?Un:!0===u?Xn:ze,s)}function ca(t,e,n){if(n)return e;if(e===ze||(n=t.desiredSize).u())return ze;if(t=t.angle,!isNaN(n.width))if(90!==t&&270!==t){if(e===Un)return ze;if(e===Ge)return Xn}else{if(e===Xn)return ze;if(e===Ge)return Un}if(!isNaN(n.height))if(90!==t&&270!==t){if(e===Xn)return ze;if(e===Ge)return Un}else{if(e===Un)return ze;if(e===Ge)return Xn}return e}function sv(t,e){t.G=e?512|t.G:-513&t.G}function Ph(t){return 0!=(1024&t.G)}function Dd(t,e){t.G=e?1024|t.G:-1025&t.G}function Ah(t,e){t.G=e?2048|t.G:-2049&t.G}function ur(t,e){t.G=e?4096|t.G:-4097&t.G}function mo(t){return 0!=(8192&t.G)}function hr(t,e){t.G=e?8192|t.G:-8193&t.G}function Sr(t){return 0!=(16384&t.G)}function Al(t,e){t.G=e?16384|t.G:-16385&t.G}function Oh(t){var e=t.part;if(e instanceof it&&(null!==t.portId||t===e.port)){var n=e.diagram;null===n||n.undoManager.isUndoingRedoing||tM(e,t)}}function $b(t){var e=t.diagram;null===e||e.undoManager.isUndoingRedoing||(t instanceof W?t instanceof it?t.rd():t.Em(t,function(n){Oh(n)}):Oh(t))}function Kr(t,e){for(var n=1;n<arguments.length;++n);n=arguments;var s=null,a=null;if("function"==typeof t)a=t;else if("string"==typeof t){var u=vm.H(t);"function"==typeof u?Kt(s=u(n=Ti(arguments)))||q('GraphObject.make invoked object builder "'+t+'", but it did not return an Object'):a=gt.go[t]}if(null===s&&(null!=a&&a.constructor||q("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),s=new a),a=1,s instanceof U&&1<n.length){u=s;var c=n[1];("string"==typeof c||c instanceof HTMLDivElement)&&(mm(u,c),a++)}for(;a<n.length;a++)void 0===(u=n[a])?q("Undefined value at argument "+a+" for object being constructed by GraphObject.make: "+s):vp(s,u);return s}function vp(t,e){if("string"==typeof e)if(t instanceof Jt)t.text=e;else if(t instanceof bt)t.figure=e;else if(t instanceof zi)t.source=e;else if(t instanceof W)null!==(e=Zr.H(e))&&(t.type=e);else if(t instanceof jt){var n=sa(jt,e);null!==n?t.type=n:q("Unknown Brush type as an argument to GraphObject.make: "+e)}else t instanceof rt?null!==(e=sa(rt,e))&&(t.type=e):t instanceof Zt&&null!==(e=sa(Zt,e))&&(t.type=e);else if(e instanceof dt)t instanceof W||q("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(e instanceof en){var s;e.isRow&&"function"==typeof t.getRowDefinition?s=t.getRowDefinition(e.index):e.isRow||"function"!=typeof t.getColumnDefinition||(s=t.getColumnDefinition(e.index)),s instanceof en?(t=s,e.isRow?t.height=e.height:t.width=e.width,t.minimum=e.minimum,t.maximum=e.maximum,t.alignment=e.alignment,t.stretch=e.stretch,t.sizing=e.sizing,t.fg=null===e.separatorPadding?null:e.separatorPadding.I(),t.separatorStroke=e.separatorStroke,t.separatorStrokeWidth=e.separatorStrokeWidth,t.Jj=null,e.separatorDashArray&&(t.Jj=Ti(e.separatorDashArray)),t.background=e.background,t.coversSeparators=e.coversSeparators,t.fb=e.fb):q("A RowColumnDefinition can only be added to an object that implements getRowDefinition/getColumnDefinition, not to: "+t)}else if(e instanceof Q)"function"==typeof t.gb&&t.gb(e);else if(e instanceof Ke)t.type=e;else if(e instanceof Ae)t instanceof dt||t instanceof en?t.bind(e):q("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(e instanceof Cr)t instanceof dt?t.Zv(e):q("An AnimationTrigger can only be applied to a GraphObject, not to: "+t);else if(e instanceof ii)t instanceof rt?t.figures.add(e):q("A PathFigure can only be added to a Geometry, not to: "+t);else if(e instanceof Zt)t instanceof ii?t.segments.add(e):q("A PathSegment can only be added to a PathFigure, not to: "+t);else if(e instanceof Ht)t instanceof U||t instanceof _t?t.layout=e:q("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(e))for(n=0;n<e.length;n++)vp(t,e[n]);else if("object"==typeof e&&null!==e)if(t instanceof jt){for(var a in n=new Dr,e)s=parseFloat(a),isNaN(s)?n[a]=e[a]:t.addColorStop(s,e[a]);um(t,n)}else if(t instanceof en){for(n in void 0!==e.row?((null==(a=e.row)||a===1/0||isNaN(a)||0>a)&&q("Must specify non-negative integer row for RowColumnDefinition "+e+", not: "+a),t.isRow=!0,t.index=a):void 0!==e.column&&((null==(a=e.column)||a===1/0||isNaN(a)||0>a)&&q("Must specify non-negative integer column for RowColumnDefinition "+e+", not: "+a),t.isRow=!1,t.index=a),a=new Dr,e)"row"!==n&&"column"!==n&&(a[n]=e[n]);um(t,a)}else um(t,e);else q('Unknown initializer "'+e+'" for object being constructed by GraphObject.make: '+t)}function Vs(t,e){vm.add(t,e)}function bd(t,e,n){void 0===n&&(n=null);var s=t[1];if("function"==typeof n?n(s):"string"==typeof s)return t.splice(1,1),s;if(void 0===e)throw Error("no "+("function"==typeof n?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return e}El.className="DraggingInfo",v_.className="DraggingNodeInfoPair",_d.prototype.reset=function(){this.isGridSnapEnabled=!1,this.isGridSnapRealtime=!0,this.gridSnapCellSize=new Dt(NaN,NaN).freeze(),this.gridSnapCellSpot=St,this.gridSnapOrigin=new A(NaN,NaN).freeze(),this.groupsSnapMembers=this.dragsTree=this.dragsLink=!1,this.dragsMembers=this.groupsAlwaysMove=!0},_d.className="DraggingOptions",Wt(ym,U),ym.prototype.reset=function(){U.prototype.reset.call(this),cp(this)},ym.className="Palette",Wt(ts,U),ts.prototype.computePixelRatio=function(){return 1},ts.prototype.redraw=function(){if(this.aj&&1<=this.updateDelay){this.aj=!1;var t=this.Ca,e=this.Ab;if(null!==t&&null!==e){if(hm(this),null===this.Gl){var n=new Xr(null);n.width=t.width,n.height=t.height,this.Gl=n}try{this.Ca=this.Gl,this.Ab=this.Ca.context,this.Ab.Hc(!0),this.Ab.setTransform(1,0,0,1,0,0),this.Ab.clearRect(0,0,this.Ca.width,this.Ca.height),Nh(this)}finally{this.Ca=t,this.Ab=e}}}U.prototype.redraw.call(this)},ts.prototype.pc=function(){if(null===this.Ga&&q("No div specified"),null===this.Ca&&q("No canvas specified"),!(this.Ca instanceof da)&&(Xm(this.box),this.Vc)){var t=this.observed;if(null!==t&&!t.animationManager.defaultAnimation.isAnimating&&t.Oi){hm(this);var e=this.Ca;(t=this.Ab).Hc(!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),1>this.updateDelay?Nh(this):null!==this.Gl&&(t.drawImage(this.Gl.La,0,0),(e=this.vb).reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),t.scale(this.ec,this.ec),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy));for(var n=(e=this.Oa.m).length,s=0;s<n;s++)e[s].pc(t,this);this.Vc=this.nj=!1}}},ts.prototype.computeBounds=function(){var t=this.observed;if(null===t)return Ss;var e=t.documentBounds.copy();return e.Qc(t.viewportBounds),e},ts.prototype.invalidateViewport=function(){!0!==this.Vc&&(this.Vc=!0,this.Gb())},ts.prototype.onViewportBoundsChanged=function(t,e,n,s){this.qb||(Ls(this),this.N(),wu(this),this.Qa(),dp(this),this.dd.scale=n,this.dd.position.x=t.x,this.dd.position.y=t.y,this.dd.bounds.assign(t),this.dd.iy=s,this.S("ViewportBoundsChanged",this.dd,t))},kt.Object.defineProperties(ts.prototype,{observed:{get:function(){return this.kw},set:function(t){var e=this.kw;if(t instanceof ts&&q("Overview.observed Diagram may not be an Overview itself: "+t),e!==t){if(null!==e&&(this.remove(this.box),e.mm("ViewportBoundsChanged",this.xw),e.mm("DocumentBoundsChanged",this.ww),e.mm("InvalidateDraw",this.mt),e.mm("AnimationFinished",this.vw)),this.kw=t,null!==t&&(t.Nj("ViewportBoundsChanged",this.xw),t.Nj("DocumentBoundsChanged",this.ww),t.Nj("InvalidateDraw",this.mt),t.Nj("AnimationFinished",this.vw),this.add(this.box)),this.Qa(),null===t){this.Gl=null;var n=this.Ca,s=this.Ab;n&&s&&(s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,n.width,n.height))}else this.mt(null),dp(this),this.N();this.g("observed",e,t)}}},box:{get:function(){return this.Yi},set:function(t){var e=this.Yi;e!==t&&(this.Yi=t,this.remove(e),this.add(this.Yi),dp(this),this.g("box",e,t))}},drawsTemporaryLayers:{get:function(){return this.nv},set:function(t){this.nv!==t&&(this.nv=t,this.redraw())}},drawsGrid:{get:function(){return this.gv},set:function(t){this.gv!==t&&(this.gv=t,this.redraw())}},updateDelay:{get:function(){return this.jt},set:function(t){0>t&&(t=0),this.jt!==t&&(this.jt=t)}}}),ts.className="Overview",Wt(kh,Me),kh.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.diagram;if(null===t||!t.allowMove||!t.allowSelect)return!1;var e=t.observed;if(null===e)return!1;var n=t.lastInput;return!(!n.left||t.currentTool!==this&&(!this.isBeyondDragSize()||n.isTouchEvent&&n.timestamp-t.firstInput.timestamp<this.delay)||(null===this.findDraggablePart()&&(this.j=new A((n=e.viewportBounds).width/2,n.height/2),e.position=new A((t=t.firstInput.documentPoint).x-this.j.x,t.y-this.j.y)),0))},kh.prototype.doActivate=function(){this.j=null,Me.prototype.doActivate.call(this)},kh.prototype.doUpdateCursor=function(){var t=this.diagram,e=t.box;null!==e&&e.cursor&&(t.currentCursor=e.cursor)},kh.prototype.moveParts=function(){var t=this.diagram,e=t.observed;if(null!==e){var n=t.box;if(null!==n){if(null===this.j){var s=t.firstInput.documentPoint;this.j=new A(s.x-(n=n.location).x,s.y-n.y)}e.position=new A((t=t.lastInput.documentPoint).x-this.j.x,t.y-this.j.y)}}},kh.className="OverviewDraggingTool",Qt.prototype.toString=function(){return"CommandHandler"},Qt.prototype.Ne=function(t){this.D=t},Qt.prototype.doKeyDown=function(){var t=this.diagram,e=t.lastInput,n=Se?e.meta:e.control,s=e.shift,a=e.alt,u=e.key;!n||"C"!==u&&"Insert"!==u?n&&"X"===u||s&&"Del"===u?this.canCutSelection()&&this.cutSelection():n&&"V"===u||s&&"Insert"===u?this.canPasteSelection()&&this.pasteSelection():n&&"Y"===u||a&&s&&"Backspace"===u?this.canRedo()&&this.redo():n&&"Z"===u||a&&"Backspace"===u?this.canUndo()&&this.undo():"Del"===u||"Backspace"===u?this.canDeleteSelection()&&this.deleteSelection():n&&"A"===u?this.canSelectAll()&&this.selectAll():"Esc"===u?this.canStopCommand()&&this.stopCommand():"Up"===u?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","up"):"Down"===u?t.allowVerticalScroll&&t.scroll(n?"pixel":"line","down"):"Left"===u?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","left"):"Right"===u?t.allowHorizontalScroll&&t.scroll(n?"pixel":"line","right"):"PageUp"===u?s&&t.allowHorizontalScroll?t.scroll("page","left"):t.allowVerticalScroll&&t.scroll("page","up"):"PageDown"===u?s&&t.allowHorizontalScroll?t.scroll("page","right"):t.allowVerticalScroll&&t.scroll("page","down"):"Home"===u?n&&t.allowVerticalScroll?t.scroll("document","up"):!n&&t.allowHorizontalScroll&&t.scroll("document","left"):"End"===u?n&&t.allowVerticalScroll?t.scroll("document","down"):!n&&t.allowHorizontalScroll&&t.scroll("document","right"):" "===u?this.canScrollToPart()&&this.scrollToPart():"Subtract"===u?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===u?this.canIncreaseZoom()&&this.increaseZoom():n&&"0"===u?this.canResetZoom()&&this.resetZoom():s&&"Z"===u?this.canZoomToFit()&&this.zoomToFit():n&&!s&&"G"===u?this.canGroupSelection()&&this.groupSelection():n&&s&&"G"===u?this.canUngroupSelection()&&this.ungroupSelection():"F2"===u||e.event&&"F2"===e.event.key?this.canEditTextBlock()&&this.editTextBlock():"ContextMenu"===u||e.event&&"ContextMenu"===e.event.key?this.canShowContextMenu()&&this.showContextMenu():e.bubbles=!0:this.canCopySelection()&&this.copySelection()},Qt.prototype.doKeyUp=function(){this.diagram.lastInput.bubbles=!0},Qt.prototype.stopCommand=function(){var t=this.diagram,e=t.currentTool;e instanceof be&&t.allowSelect&&t.clearSelection(),null!==e&&e.doCancel()},Qt.prototype.canStopCommand=function(){return!0},Qt.prototype.selectAll=function(){var t=this.diagram;t.N();try{t.currentCursor="wait",t.S("ChangingSelection",t.selection);for(var e=t.parts;e.next();)e.value.isSelected=!0;for(var n=t.nodes;n.next();)n.value.isSelected=!0;for(var s=t.links;s.next();)s.value.isSelected=!0}finally{t.S("ChangedSelection",t.selection),t.currentCursor=""}},Qt.prototype.canSelectAll=function(){return this.diagram.allowSelect},Qt.prototype.deleteSelection=function(){var t=this.diagram;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.xa("Delete"),t.S("SelectionDeleting",t.selection);for(var e=new nt,n=t.selection.iterator;n.next();)Eu(e,n.value,!0,this.deletesTree?1/0:0,!!this.deletesConnectedLinks&&null,function(s){return s.canDelete()});t.Qs(e,!0),t.S("SelectionDeleted",e)}finally{t.Xa("Delete"),t.S("ChangedSelection",t.selection),t.currentCursor=""}},Qt.prototype.canDeleteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowDelete||0===t.selection.count)},Qt.prototype.copySelection=function(){var t=this.diagram,e=new nt;for(t=t.selection.iterator;t.next();)Eu(e,t.value,!0,this.copiesTree?1/0:0,this.copiesConnectedLinks,function(n){return n.canCopy()});this.copyToClipboard(e)},Qt.prototype.canCopySelection=function(){var t=this.diagram;return!(!t.allowCopy||!t.allowClipboard||0===t.selection.count)},Qt.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},Qt.prototype.canCutSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowCopy||!t.allowDelete||!t.allowClipboard||0===t.selection.count)},Qt.prototype.copyToClipboard=function(t){var e=this.diagram,n=null;if(null===t)gd=null,Bt="";else{n=e.model;var s=!1,a=!1,u=null;try{n.fm()&&(s=n.Uj,n.Uj=this.copiesParentKey),n.dk()&&(a=n.Tj,n.Tj=this.copiesGroupKey),u=e.Vj(t,null,!0)}finally{n.fm()&&(n.Uj=s),n.dk()&&(n.Tj=a),(n=new st).addAll(u),gd=n,Bt=e.model.dataFormat}}e.S("ClipboardChanged",n)},Qt.prototype.pasteFromClipboard=function(){var t=new nt,e=gd;if(null===e)return t;var n=this.diagram;if(Bt!==n.model.dataFormat)return t;var s=n.model,a=!1,u=!1,c=null;try{s.fm()&&(a=s.Uj,s.Uj=this.copiesParentKey),s.dk()&&(u=s.Tj,s.Tj=this.copiesGroupKey),c=n.Vj(e,n,!1)}finally{for(s.fm()&&(s.Uj=a),s.dk()&&(s.Tj=u),e=c.iterator;e.next();)s=e.key,(n=e.value).location.u()||(s.location.u()?n.location=s.location:!n.position.u()&&s.position.u()&&(n.position=s.position)),t.add(n)}return t},Qt.prototype.pasteSelection=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.xa("Paste");var n=this.pasteFromClipboard();0<n.count&&e.clearSelection(!0);for(var s=n.iterator;s.next();)s.value.isSelected=!0;if(null!==t){var a=e.computePartsBounds(e.selection);a.u()&&iv(e,this.computeEffectiveCollection(e.selection,e.pn),new A(t.x-a.centerX,t.y-a.centerY),e.pn,!1)}e.S("ClipboardPasted",n)}finally{e.Xa("Paste"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},Qt.prototype.canPasteSelection=function(){var t=this.diagram;return!(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowClipboard||null===gd||0===gd.count||Bt!==t.model.dataFormat)},Qt.prototype.undo=function(){this.diagram.undoManager.undo()},Qt.prototype.canUndo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canUndo()},Qt.prototype.redo=function(){this.diagram.undoManager.redo()},Qt.prototype.canRedo=function(){var t=this.diagram;return!t.isReadOnly&&!t.isModelReadOnly&&t.allowUndo&&t.undoManager.canRedo()},Qt.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;e.autoScale===ar&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},Qt.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.zoomFactor);var e=this.diagram;return e.autoScale===ar&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},Qt.prototype.increaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;e.autoScale===ar&&((t*=e.scale)<e.minScale||t>e.maxScale||(e.scale=t))},Qt.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.zoomFactor);var e=this.diagram;return e.autoScale===ar&&!((t*=e.scale)<e.minScale||t>e.maxScale)&&e.allowZoom},Qt.prototype.resetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;t<e.minScale||t>e.maxScale||(e.scale=t)},Qt.prototype.canResetZoom=function(t){void 0===t&&(t=this.defaultScale);var e=this.diagram;return!(t<e.minScale||t>e.maxScale)&&e.allowZoom},Qt.prototype.zoomToFit=function(){var t=this.diagram,e=t.animationManager;e.rc(),t.redraw();var n=t.position,s=t.scale;Ba(e,"Zoom To Fit"),this.isZoomToFitRestoreEnabled&&s===this.yu&&!isNaN(this.Wt)&&t.documentBounds.A(this.xu)?(t.scale=this.Wt,t.position=this.Tw,this.yu=NaN,this.xu=Ss):(this.Wt=s,this.Tw=n.copy(),t.zoomToFit(),this.yu=t.scale,this.xu=t.documentBounds.copy()),id(e)},Qt.prototype.canZoomToFit=function(){return this.diagram.allowZoom},Qt.prototype.scrollToPart=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.Ta(),null===t){try{null!==this.eg&&(this.eg.next()?t=this.eg.value:this.eg=null)}catch(p){this.eg=null}null===t&&(0<e.highlighteds.count?this.eg=e.highlighteds.iterator:0<e.selection.count&&(this.eg=e.selection.iterator),null!==this.eg&&this.eg.next()&&(t=this.eg.value))}if(null!==t){var n=e.animationManager;Ba(n,"Scroll To Part");var s=this.scrollToPartPause;if(0<s){var a=Ua(this,t,[t]);if(1===a.length)e.xa(),e.ls(t.actualBounds),e.Xa("Scroll To Part");else{var u=function(){e.xa();for(var p=a.pop();0<a.length&&p instanceof it&&p.isTreeExpanded&&(!(p instanceof _t)||p.isSubGraphExpanded);)p=a.pop();0<a.length?(p instanceof ft&&e.Nv(p.actualBounds),p instanceof it&&!p.isTreeExpanded&&(p.isTreeExpanded=!0),p instanceof _t&&!p.isSubGraphExpanded&&(p.isSubGraphExpanded=!0)):(p instanceof ft&&e.ls(p.actualBounds),e.mm("LayoutCompleted",c)),e.Xa("Scroll To Part")},c=function(){lu(u,(n.isEnabled?n.duration:0)+s)};e.Nj("LayoutCompleted",c),u()}}else{var f=e.position.copy();e.ls(t.actualBounds),f.Ua(e.position)&&n.rc()}}},Qt.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof ft)&&(0!==(t=this.diagram).selection.count||0!==t.highlighteds.count)&&t.allowHorizontalScroll&&t.allowVerticalScroll},Qt.prototype.collapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa("Collapse Tree"),Ba(e.animationManager,"Collapse Tree");var n=new st;if(null!==t&&t.isTreeExpanded)t.collapseTree(),n.add(t);else if(null===t)for(var s=e.selection.iterator;s.next();){var a=s.value;a instanceof it&&a.isTreeExpanded&&(a.collapseTree(),n.add(a))}e.S("TreeCollapsed",n)}finally{e.Xa("Collapse Tree")}},Qt.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof it&&t.isTreeExpanded))return!1;if(0<t.Yp().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof it&&e.isTreeExpanded&&0<e.Yp().count)return!0;return!1},Qt.prototype.expandTree=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa("Expand Tree"),Ba(e.animationManager,"Expand Tree");var n=new st;if(null===t||t.isTreeExpanded){if(null===t)for(var s=e.selection.iterator;s.next();){var a=s.value;a instanceof it&&!a.isTreeExpanded&&(a.expandTree(),n.add(a))}}else t.expandTree(),n.add(t);e.S("TreeExpanded",n)}finally{e.Xa("Expand Tree")}},Qt.prototype.canExpandTree=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t){if(!(t instanceof it)||t.isTreeExpanded)return!1;if(0<t.Yp().count)return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof it&&!e.isTreeExpanded&&0<e.Yp().count)return!0;return!1},Qt.prototype.groupSelection=function(){var t=this.diagram,e=t.model;if(e.ek()){var n=this.archetypeGroupData;if(null!==n){var s=null;try{t.currentCursor="wait",t.S("ChangingSelection",t.selection),t.xa("Group");for(var a=new st,u=t.selection.iterator;u.next();){var c=u.value;c.Mc()&&c.canGroup()&&a.add(c)}for(var f=new st,p=a.iterator;p.next();){var g=p.value;u=!1;for(var y=a.iterator;y.next();)if(g.Jd(y.value)){u=!0;break}u||f.add(g)}if(0<f.count){var v=f.first().containingGroup;if(null!==v)for(;null!==v;){a=!1;for(var _=f.iterator;_.next();)if(!_.value.Jd(v)){a=!0;break}if(!a)break;v=v.containingGroup}if(n instanceof _t)yo(n),null!==(s=n.copy())&&t.add(s);else if(e.lv(n)){var b=e.copyNodeData(n);Kt(b)&&(e.sf(b),s=t.Gi(b))}if(null!==s){null!==v&&this.isValidMember(v,s)&&(s.containingGroup=v);for(var D=f.iterator;D.next();){var k=D.value;this.isValidMember(s,k)&&(k.containingGroup=s)}t.clearSelection(!0),s.isSelected=!0}}t.S("SelectionGrouped",s)}finally{t.Xa("Group"),t.S("ChangedSelection",t.selection),t.currentCursor=""}}}},Qt.prototype.canGroupSelection=function(){var t=this.diagram;if(t.isReadOnly||t.isModelReadOnly||!t.allowInsert||!t.allowGroup||!t.model.ek()||null===this.archetypeGroupData)return!1;for(t=t.selection.iterator;t.next();){var e=t.value;if(e.Mc()&&e.canGroup())return!0}return!1},Qt.prototype.isValidMember=function(t,e){if(null===e||t===e||e instanceof K)return!1;if(null!==t){if(t===e||t.Jd(e))return!1;var n=t.memberValidation;if(null!==n&&!n(t,e)||null===t.data&&null!==e.data||null!==t.data&&null===e.data)return!1}return null===(n=this.memberValidation)||n(t,e)},Qt.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.model;if(n.ek())try{e.currentCursor="wait",e.S("ChangingSelection",e.selection),e.xa("Ungroup");var s=new st;if(null!==t)s.add(t);else for(var a=e.selection.iterator;a.next();){var u=a.value;u instanceof _t&&u.canUngroup()&&s.add(u)}var c=new st;if(0<s.count){e.clearSelection(!0);for(var f=s.iterator;f.next();){var p=f.value;p.expandSubGraph();var g=p.containingGroup,y=null!==g&&null!==g.data?n.pa(g.data):void 0;c.addAll(p.memberParts);for(var v=c.iterator;v.next();){var _=v.value;if(_.isSelected=!0,!(_ instanceof K)){var b=_.data;null!==b?n.uq(b,y):_.containingGroup=g}}e.remove(p)}}e.S("SelectionUngrouped",s,c)}finally{e.Xa("Ungroup"),e.S("ChangedSelection",e.selection),e.currentCursor=""}},Qt.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowDelete||!e.allowUngroup||!e.model.ek())return!1;if(null!==t){if(!(t instanceof _t))return!1;if(t.canUngroup())return!0}else for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof _t&&e.canUngroup())return!0;return!1},Qt.prototype.addTopLevelParts=function(t,e){var n=!0;for(t=fp(t).iterator;t.next();){var s=t.value;null!==s.containingGroup&&(!e||this.isValidMember(null,s)?s.containingGroup=null:n=!1)}return n},Qt.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa("Collapse SubGraph"),Ba(e.animationManager,"Collapse SubGraph");var n=new st;if(null!==t&&t.isSubGraphExpanded)t.collapseSubGraph(),n.add(t);else if(null===t)for(var s=e.selection.iterator;s.next();){var a=s.value;a instanceof _t&&a.isSubGraphExpanded&&(a.collapseSubGraph(),n.add(a))}e.S("SubGraphCollapsed",n)}finally{e.Xa("Collapse SubGraph")}},Qt.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return!!(t instanceof _t&&t.isSubGraphExpanded);for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof _t&&e.isSubGraphExpanded)return!0;return!1},Qt.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;try{e.xa("Expand SubGraph"),Ba(e.animationManager,"Expand SubGraph");var n=new st;if(null===t||t.isSubGraphExpanded){if(null===t)for(var s=e.selection.iterator;s.next();){var a=s.value;a instanceof _t&&!a.isSubGraphExpanded&&(a.expandSubGraph(),n.add(a))}}else t.expandSubGraph(),n.add(t);e.S("SubGraphExpanded",n)}finally{e.Xa("Expand SubGraph")}},Qt.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly)return!1;if(null!==t)return t instanceof _t&&!t.isSubGraphExpanded;for(t=e.selection.iterator;t.next();)if((e=t.value)instanceof _t&&!e.isSubGraphExpanded)return!0;return!1},Qt.prototype.editTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram,n=e.toolManager.findTool("TextEditing");if(null!==n){if(null===t){t=null;for(var s=e.selection.iterator;s.next();){var a=s.value;if(a.canEdit()){t=a;break}}if(null===t)return;t=t.$l(function(u){return u instanceof Jt&&u.editable})}null!==t&&(e.currentTool=null,n.textBlock=t,e.currentTool=n)}},Qt.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var e=this.diagram;if(e.isReadOnly||e.isModelReadOnly||!e.allowTextEdit||null===e.toolManager.findTool("TextEditing"))return!1;if(null!==t){if(!(t instanceof Jt))return!1;if(null!==(t=t.part)&&t.canEdit())return!0}else for(e=e.selection.iterator;e.next();)if((t=e.value).canEdit()&&null!==(t=t.$l(function(n){return n instanceof Jt&&n.editable})))return!0;return!1},Qt.prototype.showContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");if(null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==(t=n.findObjectWithContextMenu(t)))){var s=e.lastInput,a=null;t instanceof dt?a=t.da(Ut):e.viewportBounds.$(s.documentPoint)||(a=new A((a=e.viewportBounds).x+a.width/2,a.y+a.height/2)),null!==a&&(s.viewPoint=e.wq(a),s.documentPoint=a,s.left=!1,s.right=!0,s.up=!0),e.currentTool=n,Kw(n,!1,t)}},Qt.prototype.canShowContextMenu=function(t){var e=this.diagram,n=e.toolManager.findTool("ContextMenu");return null!==n&&(void 0===t&&(t=0<e.selection.count?e.selection.first():e),null!==n.findObjectWithContextMenu(t))},Qt.prototype.computeEffectiveCollection=function(t,e){var n=this.diagram,s=n.toolManager.findTool("Dragging"),a=n.currentTool===s;if(void 0===e&&(e=a?s.dragOptions:n.pn),s=new xt,null===t)return s;for(var u=t.iterator;u.next();)Nl(n,s,u.value,a,e);if(null!==n.draggedLink&&e.dragsLink)return s;for(u=t.iterator;u.next();)(t=u.value)instanceof K&&((null===(e=t.fromNode)||s.contains(e))&&(null===(e=t.toNode)||s.contains(e))||s.remove(t));return s},kt.Object.defineProperties(Qt.prototype,{diagram:{get:function(){return this.D}},copiesClipboardData:{get:function(){return this.o},set:function(t){this.o=t}},copiesConnectedLinks:{get:function(){return this.C},set:function(t){this.C=t}},deletesConnectedLinks:{get:function(){return this.Ma},set:function(t){this.Ma=t}},copiesTree:{get:function(){return this.Ba},set:function(t){this.Ba=t}},deletesTree:{get:function(){return this.Rb},set:function(t){this.Rb=t}},copiesParentKey:{get:function(){return this.wa},set:function(t){this.wa=t}},copiesGroupKey:{get:function(){return this.L},set:function(t){this.L=t}},archetypeGroupData:{get:function(){return this.j},set:function(t){this.j=t}},memberValidation:{get:function(){return this.ki},set:function(t){this.ki=t}},defaultScale:{get:function(){return this.diagram.defaultScale},set:function(t){this.diagram.defaultScale=t}},zoomFactor:{get:function(){return this.sc},set:function(t){1<t||q("zoomFactor must be larger than 1.0, not: "+t),this.sc=t}},isZoomToFitRestoreEnabled:{get:function(){return this.Hb},set:function(t){this.Hb=t}},scrollToPartPause:{get:function(){return this.Sb},set:function(t){this.Sb=t}}}),Qt.className="CommandHandler",Qf=function(){return new Qt},dt.prototype.cloneProtected=function(t){t.G=6144|this.G,t.mb=this.mb,t.na=this.na,t.Vb=this.Vb,t.hd=this.hd,t.xg=this.xg,t.ja.assign(this.ja),t.Tc=this.Tc.I(),t.Zf=this.Zf.I(),t.Yf=this.Yf.I(),t.Cb=null!==this.Cb?this.Cb.copy():null,t.sa=this.sa,t.zb=this.zb,t.Ee=this.Ee,t.Vg=this.Vg.I(),t.mc.assign(this.mc),t.xb.assign(this.xb),t.wc.assign(this.wc),t.Po=this.Po,null!==this.P&&(t.P=this.P.copy()),t.yb=this.yb.I(),t.xk=this.xk.I(),t.ap=this.ap,t.bp=this.bp,t.Cg=this.Cg,t.Zm=this.Zm,t.tp=this.tp,t.hp=this.hp,t.Bl=this.Bl,t.Cl=this.Cl.I(),t.Dl=this.Dl,t.Th=this.Th,null!==this.O&&(t.O=this.O.copy()),t.fb=this.fb,t.Dk=this.Dk,null!==this.Sh&&(t.Sh=Ti(this.Sh)),null!==this.$a&&(t.$a=this.$a.copy()),t.Fl=this.Fl},dt.prototype.wx=function(t){var e=this.Sh;if(Dn(e)){for(var n=0;n<e.length;n++)if(e[n]===t)return}else this.Sh=e=[];e.push(t)},dt.prototype.wf=function(t){t.Qo=null,t.Dj=null,t.s()},dt.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.Sh)for(var e=0;e<this.Sh.length;e++){var n=this.Sh[e];t[n]=this[n]}return t},dt.prototype.copy=function(){return this.clone()},(S=dt.prototype).gb=function(t){t.classType===K?0===t.name.indexOf("Orient")?this.segmentOrientation=t:q("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.classType===dt&&(this.stretch=t)},S.toString=function(){return Be(this.constructor)+"#"+pn(this)},S.Kc=function(){if(null===this.P){var t=new Ud;t.Pg=Vn,t.th=Vn,t.Ng=10,t.rh=10,t.Og=0,t.sh=0,this.P=t}},S.Wa=function(t,e,n,s,a,u,c){var f=this.part;if(null!==f&&(f.qk(t,e,n,s,a,u,c),n===this&&t===De&&Ph(this)&&Eh(this,f,e),u=this.diagram,null===this.xg||null===u||!u.Oi||u.undoManager.isUndoingRedoing||u.animationManager.Um||null!==(t=this.xg.get(e))&&u.animationManager.isEnabled&&!u.animationManager.isTicking&&(null===this.ep&&(this.ep=new xt),c=0===u.undoManager.transactionLevel,t.startCondition===t_?c=!0:t.startCondition===Q0&&(c=!1),c?(function q0(t,e){null!==(t=t.zk)&&(t.duration&&(e.duration=t.duration),t.finished&&(e.finished=t.finished),t.easing&&(e.easing=t.easing))}(t,u=new yi),null!==(c=this.ep.get(t))&&c.stop(),this.ep.add(t,u),u.vu=this,u.ox=t,u.add(this,e,s,a),u.start()):(Ba(u.animationManager,"Trigger"),u.animationManager.defaultAnimation.add(this,e,s,a))),this instanceof W&&n===f&&0!=(16777216&f.G)&&null!==f.data))for(s=(n=this.T.m).length,a=0;a<s;a++)(f=n[a])instanceof W&&Il(f,function(p){null!==p.data&&0!=(16777216&p.G)&&p.Fa(e)})},S.ps=function(t){return this.Dk===t?this:null},S.g=function(t,e,n){this.Wa(De,t,this,e,n)},S.xe=function(t,e,n,s){var a=this.mc;if(a.h(t,e,n,s),1!==this.sa||0!==this.zb){null===this.Cb&&(this.Cb=new Et);var u=this.Cb;u.reset(),this.np(u,t,e,n,s),u.xq(a)}},S.Sx=function(t,e,n){if(!1===this.pickable)return!1;var s=this.naturalBounds;return e=t.xf(e),n?gi(t.x,t.y,0,0,0,s.height)<=e||gi(t.x,t.y,0,s.height,s.width,s.height)<=e||gi(t.x,t.y,s.width,s.height,s.width,0)<=e||gi(t.x,t.y,s.width,0,0,0)<=e:t.pd(0,0)<=e&&t.pd(0,s.height)<=e&&t.pd(s.width,0)<=e&&t.pd(s.width,s.height)<=e},S.je=function(){return!0},S.$=function(t){var e=A.alloc();e.assign(t),this.transform.Aa(e);var n=this.actualBounds;if(!n.u())return A.free(e),!1;var s=this.diagram;if(null!==s&&s.Vt){var a=s.cm("extraTouchThreshold"),u=s.cm("extraTouchArea"),c=u/2,f=this.naturalBounds,p=1/(s=this.Af()*s.scale);if(f.width*s<a&&f.height*s<a)return t=Br(n.x-c*p,n.y-c*p,n.width+u*p,n.height+u*p,e.x,e.y),A.free(e),t}return a=!1,(this instanceof Rt||this instanceof bt?Br(n.x-5,n.y-5,n.width+10,n.height+10,e.x,e.y):n.$(e))&&(a=!(this.$a&&!this.$a.$(e))&&(!!(null!==this.hd&&n.$(e)||null!==this.Vb&&this.wc.$(t))||this.Bh(t))),A.free(e),a},S.Bh=function(t){var e=this.naturalBounds;return Br(0,0,e.width,e.height,t.x,t.y)},S.Ge=function(t){if(0===this.angle)return this.actualBounds.Ge(t);var e=this.naturalBounds;e=z.allocAt(0,0,e.width,e.height);var n=this.transform,s=!1,a=A.allocAt(t.x,t.y);return e.$(n.Hd(a))&&(a.h(t.x,t.bottom),e.$(n.Hd(a))&&(a.h(t.right,t.bottom),e.$(n.Hd(a))&&(a.h(t.right,t.y),e.$(n.Hd(a))&&(s=!0)))),A.free(a),z.free(e),s},S.Ah=function(t,e){if(void 0===e)return t.Ge(this.actualBounds);var n=this.naturalBounds,s=!1,a=A.allocAt(0,0);return t.$(e.Aa(a))&&(a.h(0,n.height),t.$(e.Aa(a))&&(a.h(n.width,n.height),t.$(e.Aa(a))&&(a.h(n.width,0),t.$(e.Aa(a))&&(s=!0)))),A.free(a),s},S.Lc=function(t,e){if(void 0===e&&(e=this.transform,0===this.angle))return t.Lc(this.actualBounds);var n=this.naturalBounds,s=A.allocAt(0,0),a=A.allocAt(0,n.height),u=A.allocAt(n.width,n.height),c=A.allocAt(n.width,0),f=!1;if(t.$(e.Aa(s))||t.$(e.Aa(a))||t.$(e.Aa(u))||t.$(e.Aa(c)))f=!0;else{n=z.allocAt(0,0,n.width,n.height);var p=A.allocAt(t.x,t.y);n.$(e.Hd(p))?f=!0:(p.h(t.x,t.bottom),n.$(e.Hd(p))?f=!0:(p.h(t.right,t.bottom),n.$(e.Hd(p))?f=!0:(p.h(t.right,t.y),n.$(e.Hd(p))&&(f=!0)))),A.free(p),z.free(n),!f&&(V.zs(t,s,a)||V.zs(t,a,u)||V.zs(t,u,c)||V.zs(t,c,s))&&(f=!0)}return A.free(s),A.free(a),A.free(u),A.free(c),f},S.da=function(t,e){if(void 0===e&&(e=new A),t instanceof pt){var n=this.naturalBounds;e.h(t.x*n.width+t.offsetX,t.y*n.height+t.offsetY)}else e.set(t);return this.fe.Aa(e),e},S.Li=function(t){void 0===t&&(t=new z);var e=this.naturalBounds,n=this.fe,s=A.allocAt(0,0).transform(n);return t.h(s.x,s.y,0,0),s.h(e.width,0).transform(n),mn(t,s.x,s.y,0,0),s.h(e.width,e.height).transform(n),mn(t,s.x,s.y,0,0),s.h(0,e.height).transform(n),mn(t,s.x,s.y,0,0),A.free(s),t},S.Ki=function(){var t=this.fe;return 1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},S.Af=function(){if(0==(4096&this.G))return this.Sk;var t=this.sa;return null!==this.panel?t*this.panel.Af():t},S.vs=function(t,e){return void 0===e&&(e=new A),e.assign(t),this.fe.Hd(e),e},S.ws=function(t,e,n){return this.ak(t.x,t.y,e.x,e.y,n)},S.ak=function(t,e,n,s,a){var u=this.transform,c=1/(u.m11*u.m22-u.m12*u.m21),f=u.m22*c,p=-u.m12*c,g=-u.m21*c,y=u.m11*c,v=c*(u.m21*u.dy-u.m22*u.dx),_=c*(u.m12*u.dx-u.m11*u.dy);return null!==this.areaBackground?V.Cf((u=this.actualBounds).left,u.top,u.right,u.bottom,t,e,n,s,a):(c=t*f+e*g+v,t=t*p+e*y+_,e=n*f+s*g+v,n=n*p+s*y+_,a.h(0,0),n=V.Cf(0,0,(s=this.naturalBounds).width,s.height,c,t,e,n,a),a.transform(u),n)},dt.prototype.measure=function(t,e,n,s){if(!1!==mo(this)){var a=this.Vg,u=a.right+a.left;a=a.top+a.bottom,t=Math.max(t-u,0),e=Math.max(e-a,0),n=Math.max((n||0)-u,0),s=Math.max((s||0)-a,0),a=this.desiredSize;var c=0;this instanceof bt&&(c=this.strokeWidth),90===(u=this.angle)||270===u?(t=isFinite(a.height)?a.height+c:t,e=isFinite(a.width)?a.width+c:e):(t=isFinite(a.width)?a.width+c:t,e=isFinite(a.height)?a.height+c:e),a=n||0,c=s||0;var f=this instanceof W;switch(Io(this,!0)){case ze:c=a=0,f&&(e=t=1/0);break;case Ge:isFinite(t)&&t>n&&(a=t),isFinite(e)&&e>s&&(c=e);break;case Un:isFinite(t)&&t>n&&(a=t),c=0,f&&(e=1/0);break;case Xn:isFinite(e)&&e>s&&(c=e),a=0,f&&(t=1/0)}var p=this.minSize;a>(f=this.maxSize).width&&p.width<f.width&&(a=f.width),c>f.height&&p.height<f.height&&(c=f.height),n=Math.max(a/this.scale,p.width),s=Math.max(c/this.scale,p.height),f.width<n&&(n=Math.min(p.width,n)),f.height<s&&(s=Math.min(p.height,s)),t=Math.min(f.width,t),e=Math.min(f.height,e),t=Math.max(n,t),e=Math.max(s,e),(90===u||270===u)&&(u=t,t=e,e=u,u=n,n=s,s=u),this.mc.ea(),this.im(t,e,n,s),this.mc.freeze(),this.mc.u()||q("Non-real measuredBounds has been set. Object "+this+", measuredBounds: "+this.mc.toString()),hr(this,!1)}},dt.prototype.im=function(){},dt.prototype.Qi=function(){return!1},dt.prototype.arrange=function(t,e,n,s,a){this.dl();var u=z.alloc();u.assign(this.xb),this.xb.ea(),!1===Sr(this)?this.xb.h(t,e,n,s):this.zh(t,e,n,s),this.xb.freeze(),this.$a=void 0===a?null:a,n=!1,void 0!==a?n=!0:(null===(a=this.panel)||a.type!==W.TableRow&&a.type!==W.TableColumn||(a=a.panel),null!==a&&(a=a.wc,s=this.measuredBounds,null!==this.areaBackground&&(s=this.xb),n=e+s.height,s=t+s.width,n=!(0<=t+.05&&s<=a.width+.05&&0<=e+.05&&n<=a.height+.05),this instanceof Jt&&(this.vr>(t=this.naturalBounds).height||this.sb>t.width))&&(n=!0)),this.G=n?256|this.G:-257&this.G,this.xb.u()||q("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.xb.toString()),this.jm(u,this.xb),Al(this,!1),z.free(u)},(S=dt.prototype).zh=function(){},S.jm=function(t,e){var n=this.part;null!==n&&null!==n.diagram&&(n.selectionObject!==this&&n.resizeObject!==this&&n.rotateObject!==this||Cv(n,!0),this.N(),Rw(t,e)||(n.Gh(),this.Eo(n)))},S.Eo=function(t){null!==this.portId&&(Cv(t,!0),t instanceof it&&tM(t,this))},S.pc=function(t,e){if(this.visible){var n=this.opacity;if(0!==n){var s=this instanceof W&&(this.type===W.TableRow||this.type===W.TableColumn),a=this.xb;if(s||0!==a.width&&0!==a.height&&!isNaN(a.x)&&!isNaN(a.y)){var u=1;if(1!==n&&(t.globalAlpha=(u=t.globalAlpha)*n),s){a=this.xb,s=this.wc;var c=this.hd,f=this.Vb;null===c&&null===f||t.Ed(),null!==c&&(Tr(this,t,c,!0,!0,s,a),c instanceof jt&&c.type===dr?(t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.yf(c)):t.fillRect(a.x,a.y,a.width,a.height)),null!==f&&(Tr(this,t,f,!0,!1,s,a),f instanceof jt&&f.type===dr?(t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.yf(f)):t.fillRect(a.x,a.y,a.width,a.height)),this.Ei(t,e)}else if(!this.Nx(t,e)){this instanceof K&&this.hk(!1),s=this.transform,c=this.panel,0!=(4096&this.G)&&mp(this);var p=this.part;f=!1;var v,g=0;if(p&&e.Ie("drawShadows")&&(f=p.isShadowed)){var y=p.shadowOffset;g=Math.max(y.y,y.x)*e.scale*e.ec}if(y=this.Qi(),!(v=e.pj||!y)){var F,_=this.naturalBounds,b=(v=this.Nh).m11,D=v.m21,k=v.dx,O=v.m12,E=v.m22,R=v.dy,j=F=0;v=F*b+j*D+k;var L=F*O+j*E+R,G=(F=_.width+g)*b+(j=0)*D+k;F=F*O+j*E+R,j=Math.min(v,G);var ot=Math.min(L,F),Z=Math.max(v+0,G)-j,ut=Math.max(L+0,F)-ot;v=j,L=ot,G=(F=_.width+g)*b+(j=_.height+g)*D+k,F=F*O+j*E+R,j=Math.min(v,G),ot=Math.min(L,F),Z=Math.max(v+Z,G)-j,ut=Math.max(L+ut,F)-ot,v=j,L=ot,G=(F=0)*b+(j=_.height+g)*D+k,F=F*O+j*E+R,j=Math.min(v,G),ot=Math.min(L,F),Z=Math.max(v+Z,G)-j,ut=Math.max(L+ut,F)-ot,L=ot,b=(g=e.viewportBounds).y,v=!((v=j)>g.width+(_=g.x)||_>Z+v||L>g.height+b||b>ut+L)}if(v){if(v=0!=(256&this.G),t.clipInsteadOfFill&&(v=!1),this instanceof Jt&&(t.font=this.font),v){if(L=c.je()?c.naturalBounds:c.actualBounds,null!==this.$a?(Z=(_=this.$a).x,ut=_.y,g=_.width,_=_.height):(Z=Math.max(a.x,L.x),ut=Math.max(a.y,L.y),g=Math.min(a.right,L.right)-Z,_=Math.min(a.bottom,L.bottom)-ut),Z>a.width+a.x||a.x>L.width+L.x)return void(1!==n&&(t.globalAlpha=u));t.save(),t.beginPath(),t.rect(Z,ut,g,_),t.clip()}if(y){if(!p.isVisible())return void(1!==n&&(t.globalAlpha=u));f&&(t.Uv((L=p.shadowOffset).x*e.scale*e.ec,L.y*e.scale*e.ec,p.shadowBlur),Bs(t),t.shadowColor=p.shadowColor)}f&&!0===this.shadowVisible?Bs(t):f&&!1===this.shadowVisible&&fa(t),p=this.naturalBounds,null!==this.hd&&(t.Ed(),Tr(this,t,this.hd,!0,!0,p,a),this.hd instanceof jt&&this.hd.type===dr?(t.beginPath(),t.rect(a.x,a.y,a.width,a.height),t.yf(this.hd)):t.fillRect(a.x,a.y,a.width,a.height)),t.transform(s.m11,s.m12,s.m21,s.m22,s.dx,s.dy),f&&(null!==c&&0!=(512&c.G)||null!==c&&(c.type===W.Auto||c.type===W.Spot)&&c.pb()!==this)&&null===this.shadowVisible&&fa(t),null!==this.Vb&&(t.Ed(),zb(this,t,p,a)),f&&(null!==this.Vb||null!==this.hd||null!==c&&0!=(512&c.G)||null!==c&&(c.type===W.Auto||c.type===W.Spot)&&c.pb()!==this)?(sv(this,!0),null===this.shadowVisible&&fa(t)):sv(this,!1),this.Ei(t,e),f&&0!=(512&this.G)&&Bs(t),y&&f&&fa(t),v&&(t.restore(),t.Hc(this instanceof W)),s.Cs()||t.transform(s.m22*(e=1/(s.m11*s.m22-s.m12*s.m21)),-s.m12*e,-s.m21*e,s.m11*e,e*(s.m21*s.dy-s.m22*s.dx),e*(s.m12*s.dx-s.m11*s.dy))}}1!==n&&(t.globalAlpha=u)}}}},S.Nx=function(){return!1},S.Ei=function(){},S.sg=function(t){if(t instanceof W)t:{if(this!==t&&null!==t)for(var e=this.panel;null!==e;){if(e===t){t=!0;break t}e=e.panel}t=!1}else t=!1;return t},S.Ff=function(){if(!this.visible)return!1;var t=this.panel;return null===t||t.Ff()},S.Ef=function(){for(var t=this instanceof W?this:this.panel;null!==t&&t.isEnabled;)t=t.panel;return null===t},S.np=function(t,e,n,s,a){if(1!==this.sa&&t.scale(this.sa),0!==this.zb){var u=A.alloc();u.Ui(e,n,s,a,Ut),t.rotate(this.zb,u.x,u.y),A.free(u)}},S.s=function(t){if(!mo(this)){void 0===t&&(t=!1),hr(this,!0),Al(this,!0);var e=this.panel;null===e||t||e.s()}},S.ck=function(){mo(this)||(hr(this,!0),Al(this,!0))},S.dl=function(){0==(2048&this.G)&&(Ah(this,!0),ur(this,!0))},S.jv=function(){ur(this,!0)},S.N=function(){var t=this.part;null!==t&&t.N()},S.Si=function(t){this.bg=t},S.Vs=function(){},S.Rv=function(t){return this.ja=t,xd(this),!0},S.ym=function(t,e){(this.ja.x!==t||this.ja.y!==e)&&(this.ja.h(t,e),this.dl())},S.Qw=function(){return 0},S.bind=function(t,e,n,s){var a=null;return(a="string"==typeof t?new Ae(t,e,n,s):t).od=this,null!==(t=this.Ch())&&pv(t)&&q("Cannot add a Binding to a template that has already been copied: "+a),null===this.fb&&(this.fb=new st),this.fb.add(a),this},S.set=function(t){return Object.assign(this,t),this},S.Eu=function(t){return vp(this,t),this},S.apply=function(t){return t(this),this},S.zm=function(t){return um(this,t),this},S.Oz=function(){return this.Ch()},S.Ch=function(){for(var t=this instanceof W?this:this.panel;null!==t;){if(null!==t.Qh)return t;t=t.panel}return null},S.Zv=function(t){return t.od=this,null===this.xg&&(this.xg=new xt),this.xg.add(t.propertyName,t),this},kt.Object.defineProperties(dt.prototype,{shadowVisible:{get:function(){return this.Fl},set:function(t){var e=this.Fl;e!==t&&(this.Fl=t,this.N(),this.g("shadowVisible",e,t))}},enabledChanged:{get:function(){return null!==this.O?this.O.vn:null},set:function(t){lr(this);var e=this.O.vn;e!==t&&(this.O.vn=t,this.g("enabledChanged",e,t))}},segmentOrientation:{get:function(){return this.Dl},set:function(t){var e=this.Dl;e!==t&&(this.Dl=t,this.s(),this.g("segmentOrientation",e,t),t===Ii&&(this.angle=0))}},segmentIndex:{get:function(){return this.hp},set:function(t){t=Math.round(t);var e=this.hp;e!==t&&(this.hp=t,this.s(),this.g("segmentIndex",e,t))}},segmentFraction:{get:function(){return this.Bl},set:function(t){isNaN(t)||0>t?t=0:1<t&&(t=1);var e=this.Bl;e!==t&&(this.Bl=t,this.s(),this.g("segmentFraction",e,t))}},segmentOffset:{get:function(){return this.Cl},set:function(t){var e=this.Cl;e.A(t)||(this.Cl=t=t.I(),this.s(),this.g("segmentOffset",e,t))}},stretch:{get:function(){return this.Ee},set:function(t){var e=this.Ee;e!==t&&(this.Ee=t,this.s(),this.g("stretch",e,t))}},name:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,null!==this.part&&(this.part.li=null),this.g("name",e,t))}},opacity:{get:function(){return this.mb},set:function(t){var e=this.mb;e!==t&&((0>t||1<t)&&ae(t,"0 <= value <= 1",dt,"opacity"),this.mb=t,this.g("opacity",e,t),e=this.part,null!==(t=this.diagram)&&null!==e&&t.N(jl(e,e.actualBounds)))}},visible:{get:function(){return 0!=(1&this.G)},set:function(t){var e=0!=(1&this.G);e!==t&&(this.G^=1,this.g("visible",e,t),null!==(e=this.panel)?e.s():this.Qi()&&this.Pb(t),this.N(),$b(this))}},pickable:{get:function(){return 0!=(2&this.G)},set:function(t){var e=0!=(2&this.G);e!==t&&(this.G^=2,this.g("pickable",e,t))}},fromLinkableDuplicates:{get:function(){return 0!=(4&this.G)},set:function(t){var e=0!=(4&this.G);e!==t&&(this.G^=4,this.g("fromLinkableDuplicates",e,t))}},fromLinkableSelfNode:{get:function(){return 0!=(8&this.G)},set:function(t){var e=0!=(8&this.G);e!==t&&(this.G^=8,this.g("fromLinkableSelfNode",e,t))}},toLinkableDuplicates:{get:function(){return 0!=(16&this.G)},set:function(t){var e=0!=(16&this.G);e!==t&&(this.G^=16,this.g("toLinkableDuplicates",e,t))}},toLinkableSelfNode:{get:function(){return 0!=(32&this.G)},set:function(t){var e=0!=(32&this.G);e!==t&&(this.G^=32,this.g("toLinkableSelfNode",e,t))}},isPanelMain:{get:function(){return 0!=(64&this.G)},set:function(t){var e=0!=(64&this.G);e!==t&&(this.G^=64,this.s(),this.g("isPanelMain",e,t))}},isActionable:{get:function(){return 0!=(128&this.G)},set:function(t){var e=0!=(128&this.G);e!==t&&(this.G^=128,this.g("isActionable",e,t))}},areaBackground:{get:function(){return this.hd},set:function(t){var e=this.hd;e!==t&&(null!==t&&bu(t,"GraphObject.areaBackground"),t instanceof jt&&t.freeze(),this.hd=t,this.N(),this.g("areaBackground",e,t))}},background:{get:function(){return this.Vb},set:function(t){var e=this.Vb;e!==t&&(null!==t&&bu(t,"GraphObject.background"),t instanceof jt&&t.freeze(),this.Vb=t,this.N(),this.g("background",e,t))}},part:{get:function(){if(this.Qi())return this;if(null!==this.Dj)return this.Dj;var t;for(t=this.panel;t;){if(t instanceof ft)return this.Dj=t;t=t.panel}return null}},svg:{get:function(){return this.$r},set:function(t){this.$r=t}},panel:{get:function(){return this.bg}},layer:{get:function(){var t=this.part;return null!==t?t.layer:null}},diagram:{get:function(){var t=this.part;return null!==t?t.diagram:null}},position:{get:function(){return this.ja},set:function(t){var e=t.x,n=t.y,s=this.ja,a=s.x;s=s.y,(a===e||isNaN(a)&&isNaN(e))&&(s===n||isNaN(s)&&isNaN(n))?this.Vs():(t=t.copy(),this.Rv(t,a,s)&&this.g("position",new A(a,s),t))}},actualBounds:{get:function(){return this.xb}},scale:{get:function(){return this.sa},set:function(t){var e=this.sa;e!==t&&(0>=t&&q("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.sa=t,this.s(),this.g("scale",e,t))}},angle:{get:function(){return this.zb},set:function(t){var e=this.zb;e!==t&&(0>(t%=360)&&(t+=360),e!==t&&(this.zb=t,$b(this),this.s(),this.g("angle",e,t)))}},desiredSize:{get:function(){return this.Tc},set:function(t){var e=t.width,n=t.height,s=this.Tc,a=s.width,u=s.height;(a===e||isNaN(a)&&isNaN(e))&&(u===n||isNaN(u)&&isNaN(n))||(this.Tc=t=t.I(),this.s(),this instanceof bt&&this.gc(),this.g("desiredSize",s,t),Ph(this)&&null!==(t=this.part)&&(Eh(this,t,"width"),Eh(this,t,"height")))}},width:{get:function(){return this.Tc.width},set:function(t){var e=this.Tc.width;e===t||isNaN(e)&&isNaN(t)||(e=this.Tc,this.Tc=t=new Dt(t,this.Tc.height).freeze(),this.s(),this instanceof bt&&this.gc(),this.g("desiredSize",e,t),Ph(this)&&null!==(t=this.part)&&Eh(this,t,"width"))}},height:{get:function(){return this.Tc.height},set:function(t){var e=this.Tc.height;e===t||isNaN(e)&&isNaN(t)||(e=this.Tc,this.Tc=t=new Dt(this.Tc.width,t).freeze(),this.s(),this instanceof bt&&this.gc(),this.g("desiredSize",e,t),Ph(this)&&null!==(t=this.part)&&Eh(this,t,"height"))}},minSize:{get:function(){return this.Zf},set:function(t){var e=this.Zf;e.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.Zf=t,this.s(),this.g("minSize",e,t))}},maxSize:{get:function(){return this.Yf},set:function(t){var e=this.Yf;e.A(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.Yf=t,this.s(),this.g("maxSize",e,t))}},measuredBounds:{get:function(){return this.mc}},naturalBounds:{get:function(){return this.wc}},margin:{get:function(){return this.Vg},set:function(t){"number"==typeof t&&(t=new Ct(t));var e=this.Vg;e.A(t)||(this.Vg=t=t.I(),this.s(),this.g("margin",e,t))}},transform:{get:function(){return 0!=(2048&this.G)&&mp(this),this.vb}},fe:{get:function(){return 0!=(4096&this.G)&&mp(this),this.Nh}},alignment:{get:function(){return this.yb},set:function(t){var e=this.yb;e.A(t)||(t.Bc()&&!t.Nb()&&q("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.yb=t=t.I(),xd(this),this.g("alignment",e,t))}},column:{get:function(){return this.Cg},set:function(t){t=Math.round(t);var e=this.Cg;e!==t&&(0>t&&ae(t,">= 0",dt,"column"),this.Cg=t,this.s(),this.g("column",e,t))}},columnSpan:{get:function(){return this.Zm},set:function(t){t=Math.round(t);var e=this.Zm;e!==t&&(1>t&&ae(t,">= 1",dt,"columnSpan"),this.Zm=t,this.s(),this.g("columnSpan",e,t))}},row:{get:function(){return this.ap},set:function(t){t=Math.round(t);var e=this.ap;e!==t&&(0>t&&ae(t,">= 0",dt,"row"),this.ap=t,this.s(),this.g("row",e,t))}},rowSpan:{get:function(){return this.bp},set:function(t){t=Math.round(t);var e=this.bp;e!==t&&(1>t&&ae(t,">= 1",dt,"rowSpan"),this.bp=t,this.s(),this.g("rowSpan",e,t))}},spanAllocation:{get:function(){return this.tp},set:function(t){var e=this.tp;e!==t&&(this.tp=t,this.s(),this.g("spanAllocation",e,t))}},alignmentFocus:{get:function(){return this.xk},set:function(t){var e=this.xk;e.A(t)||(this.xk=t=t.I(),this.s(),this.g("alignmentFocus",e,t))}},portId:{get:function(){return this.Po},set:function(t){var e=this.Po;if(e!==t){var n=this.part;null===n||n instanceof it||q("Cannot set portID on a Link: "+t),null!==e&&null!==n&&Hp(n,this),this.Po=t,null!==t&&null!==n&&(n.Je=!0,Tv(n,this)),this.g("portId",e,t)}}},toSpot:{get:function(){return null!==this.P?this.P.th:Vn},set:function(t){this.Kc();var e=this.P.th;e.A(t)||(t=t.I(),this.P.th=t,this.g("toSpot",e,t),Oh(this))}},toEndSegmentLength:{get:function(){return null!==this.P?this.P.rh:10},set:function(t){this.Kc();var e=this.P.rh;e!==t&&(0>t&&ae(t,">= 0",dt,"toEndSegmentLength"),this.P.rh=t,this.g("toEndSegmentLength",e,t),Oh(this))}},toShortLength:{get:function(){return null!==this.P?this.P.sh:0},set:function(t){this.Kc();var e=this.P.sh;e!==t&&(this.P.sh=t,this.g("toShortLength",e,t),Oh(this))}},toLinkable:{get:function(){return null!==this.P?this.P.Bp:null},set:function(t){this.Kc();var e=this.P.Bp;e!==t&&(this.P.Bp=t,this.g("toLinkable",e,t))}},toMaxLinks:{get:function(){return null!==this.P?this.P.Cp:1/0},set:function(t){this.Kc();var e=this.P.Cp;e!==t&&(0>t&&ae(t,">= 0",dt,"toMaxLinks"),this.P.Cp=t,this.g("toMaxLinks",e,t))}},fromSpot:{get:function(){return null!==this.P?this.P.Pg:Vn},set:function(t){this.Kc();var e=this.P.Pg;e.A(t)||(t=t.I(),this.P.Pg=t,this.g("fromSpot",e,t),Oh(this))}},fromEndSegmentLength:{get:function(){return null!==this.P?this.P.Ng:10},set:function(t){this.Kc();var e=this.P.Ng;e!==t&&(0>t&&ae(t,">= 0",dt,"fromEndSegmentLength"),this.P.Ng=t,this.g("fromEndSegmentLength",e,t),Oh(this))}},fromShortLength:{get:function(){return null!==this.P?this.P.Og:0},set:function(t){this.Kc();var e=this.P.Og;e!==t&&(this.P.Og=t,this.g("fromShortLength",e,t),Oh(this))}},fromLinkable:{get:function(){return null!==this.P?this.P.Bn:null},set:function(t){this.Kc();var e=this.P.Bn;e!==t&&(this.P.Bn=t,this.g("fromLinkable",e,t))}},fromMaxLinks:{get:function(){return null!==this.P?this.P.Cn:1/0},set:function(t){this.Kc();var e=this.P.Cn;e!==t&&(0>t&&ae(t,">= 0",dt,"fromMaxLinks"),this.P.Cn=t,this.g("fromMaxLinks",e,t))}},cursor:{get:function(){return this.Th},set:function(t){var e=this.Th;e!==t&&(this.Th=t,this.g("cursor",e,t))}},click:{get:function(){return null!==this.O?this.O.Bg:null},set:function(t){lr(this);var e=this.O.Bg;e!==t&&(this.O.Bg=t,this.g("click",e,t))}},doubleClick:{get:function(){return null!==this.O?this.O.Jg:null},set:function(t){lr(this);var e=this.O.Jg;e!==t&&(this.O.Jg=t,this.g("doubleClick",e,t))}},contextClick:{get:function(){return null!==this.O?this.O.Dg:null},set:function(t){lr(this);var e=this.O.Dg;e!==t&&(this.O.Dg=t,this.g("contextClick",e,t))}},mouseEnter:{get:function(){return null!==this.O?this.O.Yg:null},set:function(t){lr(this);var e=this.O.Yg;e!==t&&(this.O.Yg=t,this.g("mouseEnter",e,t))}},mouseLeave:{get:function(){return null!==this.O?this.O.ah:null},set:function(t){lr(this);var e=this.O.ah;e!==t&&(this.O.ah=t,this.g("mouseLeave",e,t))}},mouseOver:{get:function(){return null!==this.O?this.O.bh:null},set:function(t){lr(this);var e=this.O.bh;e!==t&&(this.O.bh=t,this.g("mouseOver",e,t))}},mouseHover:{get:function(){return null!==this.O?this.O.$g:null},set:function(t){lr(this);var e=this.O.$g;e!==t&&(this.O.$g=t,this.g("mouseHover",e,t))}},mouseHold:{get:function(){return null!==this.O?this.O.Zg:null},set:function(t){lr(this);var e=this.O.Zg;e!==t&&(this.O.Zg=t,this.g("mouseHold",e,t))}},mouseDragEnter:{get:function(){return null!==this.O?this.O.vo:null},set:function(t){lr(this);var e=this.O.vo;e!==t&&(this.O.vo=t,this.g("mouseDragEnter",e,t))}},mouseDragLeave:{get:function(){return null!==this.O?this.O.wo:null},set:function(t){lr(this);var e=this.O.wo;e!==t&&(this.O.wo=t,this.g("mouseDragLeave",e,t))}},mouseDrop:{get:function(){return null!==this.O?this.O.Xg:null},set:function(t){lr(this);var e=this.O.Xg;e!==t&&(this.O.Xg=t,this.g("mouseDrop",e,t))}},actionDown:{get:function(){return null!==this.O?this.O.Lm:null},set:function(t){lr(this);var e=this.O.Lm;e!==t&&(this.O.Lm=t,this.g("actionDown",e,t))}},actionMove:{get:function(){return null!==this.O?this.O.Mm:null},set:function(t){lr(this);var e=this.O.Mm;e!==t&&(this.O.Mm=t,this.g("actionMove",e,t))}},actionUp:{get:function(){return null!==this.O?this.O.Nm:null},set:function(t){lr(this);var e=this.O.Nm;e!==t&&(this.O.Nm=t,this.g("actionUp",e,t))}},actionCancel:{get:function(){return null!==this.O?this.O.Km:null},set:function(t){lr(this);var e=this.O.Km;e!==t&&(this.O.Km=t,this.g("actionCancel",e,t))}},toolTip:{get:function(){return null!==this.O?this.O.uh:null},set:function(t){lr(this);var e=this.O.uh;e!==t&&(this.O.uh=t,this.g("toolTip",e,t))}},contextMenu:{get:function(){return null!==this.O?this.O.Eg:null},set:function(t){lr(this);var e=this.O.Eg;e!==t&&(this.O.Eg=t,this.g("contextMenu",e,t))}}}),dt.prototype.trigger=dt.prototype.Zv,dt.prototype.findBindingPanel=dt.prototype.Ch,dt.prototype.findTemplateBinder=dt.prototype.Oz,dt.prototype.setProperties=dt.prototype.zm,dt.prototype.apply=dt.prototype.apply,dt.prototype.attach=dt.prototype.Eu,dt.prototype.set=dt.prototype.set,dt.prototype.isEnabledObject=dt.prototype.Ef,dt.prototype.isVisibleObject=dt.prototype.Ff,dt.prototype.isContainedBy=dt.prototype.sg,dt.prototype.getNearestIntersectionPoint=dt.prototype.ws,dt.prototype.getLocalPoint=dt.prototype.vs,dt.prototype.getDocumentScale=dt.prototype.Af,dt.prototype.getDocumentAngle=dt.prototype.Ki,dt.prototype.getDocumentBounds=dt.prototype.Li,dt.prototype.getDocumentPoint=dt.prototype.da,dt.prototype.intersectsRect=dt.prototype.Lc,dt.prototype.containedInRect=dt.prototype.Ah,dt.prototype.containsRect=dt.prototype.Ge,dt.prototype.containsPoint=dt.prototype.$,dt.prototype.raiseChanged=dt.prototype.g,dt.prototype.raiseChangedEvent=dt.prototype.Wa,dt.prototype.addCopyProperty=dt.prototype.wx;var vm=null;function av(){this.vn=this.Eg=this.uh=this.Km=this.Nm=this.Mm=this.Lm=this.Xg=this.wo=this.vo=this.Zg=this.$g=this.bh=this.ah=this.Yg=this.Dg=this.Jg=this.Bg=null}function Du(){this.Na=[1,0,0,1,0,0]}function Md(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.Gx=[],this.pattern=null}function da(t,e){this.ownerDocument=t=void 0===e?gt.document:e,this.yA="http://www.w3.org/2000/svg",void 0!==t&&(this.La=this.Qb("svg",{width:"1px",height:"1px",viewBox:"0 0 1 1"}),this.La.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.La.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")),this.Up=null,this.context=new Ih(this)}function Ih(t){this.Xs=t,this.svg=t.La,this.stack=[],this.fd=[],this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.lineDashOffset=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.clipInsteadOfFill=!1,this.hg=this.Tr=this.Sr=0,this.Fs=null,this.path=[],this.Qt=!1,this.mh=null,this.nh=0,this.He=new Du,ns(this,1,0,0,1,0,0);var e=ml++,n=this.Qb("clipPath",{id:"mainClip"+e});n.appendChild(this.Qb("rect",{x:0,y:0,width:t.width,height:t.height})),this.Xw=n,this.Xs.La.appendChild(n),this.fd[0].setAttributeNS(null,"clip-path","url(#mainClip"+e+")"),this.AA={}}function wp(t,e,n,s,a){1!==t.globalAlpha&&(n.opacity=t.globalAlpha),"fill"===e?(t.fillStyle instanceof Md?n.fill=lv(t,t.fillStyle):/^rgba\(/.test(t.fillStyle)?(t=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),n.fill="rgb("+t[1]+","+t[2]+","+t[3]+")",n["fill-opacity"]=t[4]):n.fill=t.fillStyle,n.stroke="none"):"stroke"===e&&(n.fill="none",t.strokeStyle instanceof Md?n.stroke=lv(t,t.strokeStyle):/^rgba\(/.test(t.strokeStyle)?(e=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),n.stroke="rgb("+e[1]+","+e[2]+","+e[3]+")",n["stroke-opacity"]=e[4]):n.stroke=t.strokeStyle,n["stroke-width"]=t.lineWidth,n["stroke-linecap"]=t.lineCap,n["stroke-linejoin"]=t.lineJoin,n["stroke-miterlimit"]=t.miterLimit),s="matrix("+(s=s.Na)[0]+", "+s[1]+", "+s[2]+", "+s[3]+", "+s[4]+", "+s[5]+")",void 0!==a&&(s+=a),n.transform=s}function lv(t,e){var n="GRAD"+ml++;if("linear"===e.type)var s=t.Qb("linearGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,id:n,gradientUnits:"userSpaceOnUse"});else{if("radial"!==e.type)throw Error("invalid gradient");s=t.Qb("radialGradient",{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,r1:e.r1,r2:e.r2,id:n})}var a=e.Gx;e=a.length;for(var u=[],c=0;c<e;c++){var f=a[c],p=f.color;f={offset:f.offset,"stop-color":p},/^rgba\(/.test(p)&&(p=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(p),f["stop-color"]="rgb("+p[1]+","+p[2]+","+p[3]+")",f["stop-opacity"]=p[4]),u.push(f)}for(u.sort(function(g,y){return g.offset>y.offset?1:-1}),a=0;a<e;a++)s.appendChild(t.Qb("stop",u[a]));return t.svg.appendChild(s),"url(#"+n+")"}function ns(t,e,n,s,a,u,c){var f=new Du;f.Na=[e,n,s,a,u,c],wp(t,"g",e={},f),f=t.addElement("g",e),t.fd.push(f)}function fa(t){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0}function Bs(t){t.shadowOffsetX=t.Sr,t.shadowOffsetY=t.Tr,t.shadowBlur=t.hg}function Xr(t,e){this.ownerDocument=e=void 0===e?gt.document:e,this.Up=null,(e=e.createElement("canvas")).tabIndex=0,this.La=e,this.La.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",this.context=new En(e),e.D=t}function En(t){t.getContext&&t.getContext("2d")||q("Browser does not support HTML Canvas Element"),this.Y=t.getContext("2d"),this.vt=this.xt=this.wt="",this.Ym=!1,this.hg=this.Tr=this.Sr=0,this.Wl=new Et}dt.className="GraphObject",vm=new xt,Vs("Button",function(){function t(n,s){return null!==n.diagram.Zb(n.documentPoint,function(a){for(;null!==a.panel&&!a.isActionable;)a=a.panel;return a},function(a){return a===s})}var e=Kr(W,W.Auto,{isActionable:!0,enabledChanged:function(n,s){if(n instanceof W){var a=n.Ya("ButtonBorder");null!==a&&(a.fill=s?n._buttonFillNormal:n._buttonFillDisabled)}},cursor:"pointer",_buttonFillNormal:"#F5F5F5",_buttonStrokeNormal:"#BDBDBD",_buttonFillOver:"#E0E0E0",_buttonStrokeOver:"#9E9E9E",_buttonFillPressed:"#BDBDBD",_buttonStrokePressed:"#9E9E9E",_buttonFillDisabled:"#E5E5E5"},Kr(bt,{name:"ButtonBorder",figure:"RoundedRectangle",spot1:new pt(0,0,2.76142374915397,2.761423749153969),spot2:new pt(1,1,-2.76142374915397,-2.761423749153969),parameter1:2,parameter2:2,fill:"#F5F5F5",stroke:"#BDBDBD"}));return e.mouseEnter=function(n,s){if(s.Ef()&&s instanceof W&&(n=s.Ya("ButtonBorder"))instanceof bt){var a=s._buttonFillOver;s._buttonFillNormal=n.fill,n.fill=a,a=s._buttonStrokeOver,s._buttonStrokeNormal=n.stroke,n.stroke=a}},e.mouseLeave=function(n,s){s.Ef()&&s instanceof W&&(n=s.Ya("ButtonBorder"))instanceof bt&&(n.fill=s._buttonFillNormal,n.stroke=s._buttonStrokeNormal)},e.actionDown=function(n,s){if(s.Ef()&&s instanceof W&&null!==s._buttonFillPressed&&0===n.button){var a=s.Ya("ButtonBorder");if(a instanceof bt){var u=(n=n.diagram).skipsUndoManager;n.skipsUndoManager=!0;var c=s._buttonFillPressed;s._buttonFillOver=a.fill,a.fill=c,c=s._buttonStrokePressed,s._buttonStrokeOver=a.stroke,a.stroke=c,n.skipsUndoManager=u}}},e.actionUp=function(n,s){if(s.Ef()&&s instanceof W&&null!==s._buttonFillPressed&&0===n.button){var a=s.Ya("ButtonBorder");if(a instanceof bt){var u=n.diagram,c=u.skipsUndoManager;u.skipsUndoManager=!0,t(n,s)?(a.fill=s._buttonFillOver,a.stroke=s._buttonStrokeOver):(a.fill=s._buttonFillNormal,a.stroke=s._buttonStrokeNormal),u.skipsUndoManager=c}}},e.actionCancel=function(n,s){if(s.Ef()&&s instanceof W&&null!==s._buttonFillPressed){var a=s.Ya("ButtonBorder");if(a instanceof bt){var u=n.diagram,c=u.skipsUndoManager;u.skipsUndoManager=!0,t(n,s)?(a.fill=s._buttonFillOver,a.stroke=s._buttonStrokeOver):(a.fill=s._buttonFillNormal,a.stroke=s._buttonStrokeNormal),u.skipsUndoManager=c}}},e.actionMove=function(n,s){if(s.Ef()&&s instanceof W&&null!==s._buttonFillPressed){var a=n.diagram;if(0===a.firstInput.button&&(a.currentTool.standardMouseOver(),t(n,s)&&(n=s.Ya("ButtonBorder"))instanceof bt)){var u=a.skipsUndoManager;a.skipsUndoManager=!0;var c=s._buttonFillPressed;n.fill!==c&&(n.fill=c),n.stroke!==(c=s._buttonStrokePressed)&&(n.stroke=c),a.skipsUndoManager=u}}},e}),Vs("TreeExpanderButton",function(){var t=Kr("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},Kr(bt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:So},new Ae("figure","isTreeExpanded",function(e,n){return n=n.panel,e?n._treeExpandedFigure:n._treeCollapsedFigure}).kq()),{visible:!1},new Ae("visible","isTreeLeaf",function(e){return!e}).kq());return t.click=function(e,n){if((n=n.part)instanceof Rt&&(n=n.adornedPart),n instanceof it){var s=n.diagram;if(null!==s){if(s=s.commandHandler,n.isTreeExpanded){if(!s.canCollapseTree(n))return}else if(!s.canExpandTree(n))return;e.handled=!0,n.isTreeExpanded?s.collapseTree(n):s.expandTree(n)}}},t}),Vs("SubGraphExpanderButton",function(){var t=Kr("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},Kr(bt,{name:"ButtonIcon",figure:"MinusLine",stroke:"#424242",strokeWidth:2,desiredSize:So},new Ae("figure","isSubGraphExpanded",function(e,n){return n=n.panel,e?n._subGraphExpandedFigure:n._subGraphCollapsedFigure}).kq()));return t.click=function(e,n){if((n=n.part)instanceof Rt&&(n=n.adornedPart),n instanceof _t){var s=n.diagram;if(null!==s){if(s=s.commandHandler,n.isSubGraphExpanded){if(!s.canCollapseSubGraph(n))return}else if(!s.canExpandSubGraph(n))return;e.handled=!0,n.isSubGraphExpanded?s.collapseSubGraph(n):s.expandSubGraph(n)}}},t}),Vs("ToolTip",function(){return Kr(Rt,W.Auto,{isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new A(0,3),shadowBlur:5},Kr(bt,{name:"Border",figure:"RoundedRectangle",parameter1:1,parameter2:1,fill:"#F5F5F5",stroke:"#F0F0F0",spot1:new pt(0,0,4,6),spot2:new pt(1,1,-4,-4)}))}),Vs("ContextMenu",function(){return Kr(Rt,W.Vertical,{background:"#F5F5F5",isShadowed:!0,shadowColor:"rgba(0, 0, 0, .4)",shadowOffset:new A(0,3),shadowBlur:5},new Ae("background","",function(t){return null!==t.adornedPart&&null!==t.placeholder?null:"#F5F5F5"}))}),Vs("ContextMenuButton",function(){var t=Kr("Button");t.stretch=Un;var e=t.Ya("ButtonBorder");return e instanceof bt&&(e.figure="Rectangle",e.strokeWidth=0,e.spot1=new pt(0,0,2,3),e.spot2=new pt(1,1,-2,-2)),t}),Vs("PanelExpanderButton",function(t){var e=bd(t,"COLLAPSIBLE"),n=Kr("Button",{_buttonExpandedFigure:"M0 0 M0 6 L4 2 8 6 M8 8",_buttonCollapsedFigure:"M0 0 M0 2 L4 6 8 2 M8 8",_buttonFillNormal:"rgba(0, 0, 0, 0)",_buttonStrokeNormal:null,_buttonFillOver:"rgba(0, 0, 0, .2)",_buttonStrokeOver:null,_buttonFillPressed:"rgba(0, 0, 0, .4)",_buttonStrokePressed:null},Kr(bt,{name:"ButtonIcon",strokeWidth:2},new Ae("geometryString","visible",function(s){return s?n._buttonExpandedFigure:n._buttonCollapsedFigure}).kq(e)));return(t=n.Ya("ButtonBorder"))instanceof bt&&(t.stroke=null,t.fill="rgba(0, 0, 0, 0)"),n.click=function(s,a){var u=a.diagram;if(null!==u&&!u.isReadOnly){var c=a.Ch();null===c&&(c=a.part),null!==c&&null!==(a=c.Ya(e))&&(s.handled=!0,u.xa("Collapse/Expand Panel"),a.visible=!a.visible,u.Xa("Collapse/Expand Panel"))}},n}),Vs("CheckBoxButton",function(t){var e=bd(t);return(t=Kr("Button",{desiredSize:new Dt(14,14)},Kr(bt,{name:"ButtonIcon",geometryString:"M0 0 M0 8.85 L4.9 13.75 16.2 2.45 M16.2 16.2",strokeWidth:2,stretch:Ge,geometryStretch:Oo,visible:!1},""!==e?new Ae("visible",e).ly():[]))).click=function(n,s){if(s instanceof W){var a=n.diagram;if(!(null===a||a.isReadOnly||""!==e&&a.model.isReadOnly)){n.handled=!0;var u=s.Ya("ButtonIcon");a.xa("checkbox"),u.visible=!u.visible,"function"==typeof s._doClick&&s._doClick(n,s),a.Xa("checkbox")}}},t}),Vs("CheckBox",function(t){t=Kr("CheckBoxButton",t=bd(t),{name:"Button",isActionable:!1,margin:new Ct(0,1,0,0)});var e=Kr(W,"Horizontal",t,{isActionable:!0,cursor:t.cursor,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillPressed:t._buttonFillPressed,_buttonStrokePressed:t._buttonStrokePressed,_buttonFillDisabled:t._buttonFillDisabled,mouseEnter:t.mouseEnter,mouseLeave:t.mouseLeave,actionDown:t.actionDown,actionUp:t.actionUp,actionCancel:t.actionCancel,actionMove:t.actionMove,click:t.click,_buttonClick:t.click});return t.mouseEnter=null,t.mouseLeave=null,t.actionDown=null,t.actionUp=null,t.actionCancel=null,t.actionMove=null,t.click=null,e}),dt.None=ze=new Q(dt,"None",0),dt.Default=es=new Q(dt,"Default",0),dt.Vertical=Xn=new Q(dt,"Vertical",4),dt.Horizontal=Un=new Q(dt,"Horizontal",5),dt.Fill=Ge=new Q(dt,"Fill",3),dt.Uniform=Oo=new Q(dt,"Uniform",1),dt.UniformToFill=pp=new Q(dt,"UniformToFill",2),dt.FlipVertical=gp=new Q(dt,"FlipVertical",1),dt.FlipHorizontal=Hs=new Q(dt,"FlipHorizontal",2),dt.FlipBoth=Pl=new Q(dt,"FlipBoth",3),dt.make=Kr,dt.getBuilders=function(){var e,t=new xt;for(e in vm)if(e!==e.toLowerCase()){var n=vm.H(e);"function"==typeof n&&t.add(e,n)}return t.freeze(),t},dt.defineBuilder=Vs,dt.takeBuilderArgument=bd,av.prototype.copy=function(){var t=new av;return t.Bg=this.Bg,t.Jg=this.Jg,t.Dg=this.Dg,t.Yg=this.Yg,t.ah=this.ah,t.bh=this.bh,t.$g=this.$g,t.Zg=this.Zg,t.vo=this.vo,t.wo=this.wo,t.Xg=this.Xg,t.Lm=this.Lm,t.Mm=this.Mm,t.Nm=this.Nm,t.Km=this.Km,t.uh=this.uh,t.Eg=this.Eg,t.vn=this.vn,t},av.className="GraphObjectEventHandlers",Du.prototype.copy=function(){var t=new Du;return t.Na[0]=this.Na[0],t.Na[1]=this.Na[1],t.Na[2]=this.Na[2],t.Na[3]=this.Na[3],t.Na[4]=this.Na[4],t.Na[5]=this.Na[5],t},Du.prototype.translate=function(t,e){this.Na[4]+=this.Na[0]*t+this.Na[2]*e,this.Na[5]+=this.Na[1]*t+this.Na[3]*e},Du.prototype.scale=function(t,e){this.Na[0]*=t,this.Na[1]*=t,this.Na[2]*=e,this.Na[3]*=e},Du.className="STransform",Md.prototype.addColorStop=function(t,e){this.Gx.push({offset:t,color:e})},Md.className="SGradient",da.prototype.resize=function(t,e,n,s){return(this.width!==t||this.height!==e)&&(this.style.width=n+"px",this.style.height=s+"px",this.La.setAttributeNS(null,"width",n+"px"),this.La.setAttributeNS(null,"height",s+"px"),this.La.setAttributeNS(null,"viewBox","0 0 "+n+" "+s),this.context.Xw.firstElementChild.setAttributeNS(null,"width",n+"px"),this.context.Xw.firstElementChild.setAttributeNS(null,"height",s+"px"),!0)},da.prototype.Qb=function(t,e,n){if(t=this.ownerDocument.createElementNS(this.yA,t),Kt(e))for(var s in e)t.setAttributeNS("href"===s?"http://www.w3.org/1999/xlink":"",s,e[s]);return void 0!==n&&(t.textContent=n),t},da.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},da.prototype.focus=function(){this.La.focus()},da.prototype.Mx=function(){this.ownerDocument=null},kt.Object.defineProperties(da.prototype,{width:{get:function(){return this.La.width.baseVal.value},set:function(t){this.La.width=t}},height:{get:function(){return this.La.height.baseVal.value},set:function(t){this.La.height=t}},style:{get:function(){return this.La.style}}}),da.className="SVGSurface",(S=Ih.prototype).arc=function(t,e,n,s,a,u,c,f){var p=2*Math.PI,g=p-1e-6,y=n*Math.cos(s),v=n*Math.sin(s),_=t+y,b=e+v,D=u?0:1;s=u?s-a:a-s,(1e-6<Math.abs(c-_)||1e-6<Math.abs(f-b))&&this.path.push(["L",_,+b]),0>s&&(s=s%p+p),s>g?(this.path.push(["A",n,n,0,1,D,t-y,e-v]),this.path.push(["A",n,n,0,1,D,_,b])):1e-6<s&&this.path.push(["A",n,n,0,+(s>=Math.PI),D,t+n*Math.cos(a),e+n*Math.sin(a)])},S.beginPath=function(){this.path=[]},S.bezierCurveTo=function(t,e,n,s,a,u){this.path.push(["C",t,e,n,s,a,u])},S.clearRect=function(){},S.clip=function(){this.addPath("clipPath",this.path,this.He)},S.closePath=function(){this.path.push(["z"])},S.createLinearGradient=function(t,e,n,s){var a=new Md("linear");return a.x1=t,a.y1=e,a.x2=n,a.y2=s,a},S.createPattern=function(t){var e="";t instanceof HTMLCanvasElement&&(e=t.toDataURL()),t instanceof HTMLImageElement&&(e=t.getAttribute("src"));var n=this.AA;if(n[e])return"url(#"+n[e]+")";var s="PATTERN"+ml++,a={x:0,y:0,width:t.width,height:t.height,href:e};return(t=this.Qb("pattern",{width:t.width,height:t.height,id:s,patternUnits:"userSpaceOnUse"})).appendChild(this.Qb(wd,a)),this.svg.appendChild(t),n[e]=s,"url(#"+s+")"},S.createRadialGradient=function(t,e,n,s,a,u){var c=new Md("radial");return c.x1=t,c.y1=e,c.r1=n,c.x2=s,c.y2=a,c.r2=u,c},S.drawImage=function(t,e,n,s,a,u,c,f,p){var g="";t instanceof HTMLCanvasElement&&(g=t.toDataURL()),t instanceof HTMLImageElement&&(g=t.getAttribute("src"));var y=t instanceof HTMLImageElement?t.naturalWidth:t.width,v=t instanceof HTMLImageElement?t.naturalHeight:t.height;void 0===s&&(u=e,c=n,f=s=y,p=a=v),s=s||0,a=a||0,u=u||0,c=c||0,p=p||0,t={x:0,y:0,width:y||s,height:v||a,href:g},V.aa(s,f=f||0)&&V.aa(a,p)?-1===g.toLowerCase().indexOf(".svg")&&-1===g.toLowerCase().indexOf("data:image/svg")&&(t.preserveAspectRatio="xMidYMid slice"):t.preserveAspectRatio="none",g="",p/=a,(0!==u||0!==c)&&(g+=" translate("+u+", "+c+")"),(1!=(f/=s)||1!==p)&&(g+=" scale("+f+", "+p+")"),(0!==e||0!==n)&&(g+=" translate("+-e+", "+-n+")"),(0!==e||0!==n||s!==y||a!==v)&&(u="CLIP"+ml++,(c=this.Qb("clipPath",{id:u})).appendChild(this.Qb("rect",{x:e,y:n,width:s,height:a})),this.svg.appendChild(c),t["clip-path"]="url(#"+u+")"),wp(this,wd,t,this.He,g),this.addElement(wd,t)},S.fill=function(){this.addPath("fill",this.path,this.He)},S.yf=function(){this.clipInsteadOfFill?this.clip():this.fill()},S.fillRect=function(t,e,n,s){wp(this,"fill",t={x:(t=[t,e,n,s])[0],y:t[1],width:t[2],height:t[3]},this.He),this.addElement("rect",t)},S.fillText=function(t,e,n){t=[t,e,n],"left"===(e=this.textAlign)?e="start":"right"===e?e="end":"center"===e&&(e="middle"),wp(this,"fill",e={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":e},this.He),this.addElement("text",e,t[0])},S.lineTo=function(t,e){this.path.push(["L",t,e])},S.moveTo=function(t,e){this.path.push(["M",t,e])},S.quadraticCurveTo=function(t,e,n,s){this.path.push(["Q",t,e,n,s])},S.rect=function(t,e,n,s){this.path.push(["M",t,e],["L",t+n,e],["L",t+n,e+s],["L",t,e+s],["z"])},S.restore=function(){this.He=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.lineDashOffset=t.lineDashOffset,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},S.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,lineDashOffset:this.lineDashOffset,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],e=0;e<this.path.length;e++)t.push(this.path[e]);this.stack.push(t),this.stack.push(this.He.copy())},S.setTransform=function(t,e,n,s,a,u){1===t&&0===e&&0===n&&1===s&&0===a&&0===u||ns(this,t,e,n,s,a,u)},S.scale=function(t,e){this.He.scale(t,e)},S.translate=function(t,e){this.He.translate(t,e)},S.transform=function(){},S.Ed=function(){},S.stroke=function(){this.addPath("stroke",this.path,this.He)},S.Wi=function(){this.clipInsteadOfFill||this.stroke()},S.Qb=function(t,e,n){return this.Xs.Qb(t,e,n)},S.addElement=function(t,e,n){return t=this.Qb(t,e,n),0<this.fd.length?this.fd[this.fd.length-1].appendChild(t):this.svg.appendChild(t),this.Fs=t},S.addPath=function(t,e,n){for(var s=[],a=0;a<e.length;a++){var u=Ti(e[a]),c=[u.shift()];if("A"===c[0])c.push(u.shift()+","+u.shift(),u.shift(),u.shift()+","+u.shift(),u.shift()+","+u.shift());else for(;u.length;)c.push(u.shift()+","+u.shift());s.push(c.join(" "))}e={d:s.join(" ")},"stroke"===t&&this.Qt&&(e["stroke-dasharray"]=this.mh.toString(),e["stroke-dashoffset"]=this.nh),wp(this,t,e,n),"clipPath"===t?(t="CLIP"+ml++,(n=this.Qb("clipPath",{id:t})).appendChild(this.Qb("path",e)),this.svg.appendChild(n),0<this.fd.length&&this.fd[this.fd.length-1].setAttributeNS(null,"clip-path","url(#"+t+")")):this.addElement("path",e)},S.Bm=function(t){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var e="SHADOW"+ml++,n=this.addElement("filter",{id:e,x:"-100%",y:"-100%",width:"300%",height:"300%"},null),s=t.computePixelRatio();t=this.Qb("feGaussianBlur",{in:"SourceAlpha",result:"blur",stdDeviation:this.shadowBlur/2/s});var a=this.Qb("feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),u=this.Qb("feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"});s=this.Qb("feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX/s,dy:this.shadowOffsetY/s});var c=this.Qb("feMerge",{});c.appendChild(this.Qb("feMergeNode",{in:"offsetBlur"})),c.appendChild(this.Qb("feMergeNode",{in:"SourceGraphic"})),n.appendChild(t),n.appendChild(a),n.appendChild(u),n.appendChild(s),n.appendChild(c),0<this.fd.length&&this.fd[this.fd.length-1].setAttributeNS(null,"filter","url(#"+e+")")}},S.Uv=function(t,e,n){this.Sr=t,this.Tr=e,this.hg=n},S.os=function(t,e){this.Qt=!0,this.mh=t,this.nh=e},S.ms=function(){this.Qt=!1},S.Hc=function(){},S.zy=function(){},Ih.prototype.rotate=function(){},Ih.prototype.getImageData=function(){return null},Ih.prototype.measureText=function(){return null},Ih.className="SVGContext",U.prototype.makeSvg=U.prototype.Js=function(t){var e=new da(this,gt.document);void 0===t&&(t=new Dr);var n=this;return u_(this,function(s,a){return s=null!==(s=h_(n,s,"SVG",e))?s.svg:null,"function"==typeof a?(a(s),null):s},t)},U.prototype.makeSVG=U.prototype.sv=function(t){return this.Js(t)},dt.prototype.Nx=function(t,e){if(!(t instanceof Ih))return!1;var n=null,s=t.Fs,a=this.transform,u=this.panel;0!=(4096&this.G)&&mp(this);var c=this.xb,f=0!=(256&this.G);t.clipInsteadOfFill&&(f=!1);var p=!1;if(this instanceof Jt&&(t.font=this.font),f){if(p=u.je()?u.naturalBounds:u.actualBounds,null!==this.$a){var g=this.$a,y=g.x,v=g.y,_=g.width;g=g.height}else y=Math.max(c.x,p.x),v=Math.max(c.y,p.y),_=Math.min(c.right,p.right)-y,g=Math.min(c.bottom,p.bottom)-v;if(y>c.width+c.x||c.x>p.width+p.x||v>c.height+c.y||c.y>p.height+p.y)return!0;p=!0,ns(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(y,v,_,g),t.clip()}return this.Qi()&&!this.isVisible()||(t.He.Na=[1,0,0,1,0,0],(this instanceof Jt&&1<this.lineCount||this instanceof bt&&1<this.geometry.figures.length)&&ns(t,1,0,0,1,0,0),y=!1,this.Qi()&&this.isShadowed&&e.Ie("drawShadows")&&(t.Uv((v=this.shadowOffset).x*e.scale*e.ec,v.y*e.scale*e.ec,this.shadowBlur),Bs(t),t.shadowColor=this.shadowColor),v=!1,this.part&&e.Ie("drawShadows")&&(v=this.part.isShadowed),t.clipInsteadOfFill&&(v=!1),!0===this.shadowVisible?(Bs(t),!1===y&&v&&(ns(t,1,0,0,1,0,0),t.Bm(e),y=!0)):!1===this.shadowVisible&&fa(t),_=this.naturalBounds,null!==this.areaBackground&&(Tr(this,t,this.areaBackground,!0,!0,_,c),!1===y&&v&&(ns(t,1,0,0,1,0,0),t.Bm(e),y=!0),this.areaBackground instanceof jt&&this.areaBackground.type===dr?(t.beginPath(),t.rect(c.x,c.y,c.width,c.height),t.yf(this.areaBackground)):t.fillRect(c.x,c.y,c.width,c.height)),g=!1,this instanceof W?ns(t,a.m11,a.m12,a.m21,a.m22,a.dx,a.dy):(t.He.Na=[a.m11,a.m12,a.m21,a.m22,a.dx,a.dy],!1===y&&v&&(g=!0)),null!==this.background&&(!1===y&&v&&(ns(t,1,0,0,1,0,0),t.Bm(e),y=!0),zb(this,t,_,c)),v&&(null!==this.background||null!==this.areaBackground||null!==u&&0!=(512&u.G)||null!==u&&(u.type===W.Auto||u.type===W.Spot)&&u.pb()!==this)?(sv(this,!0),null===this.shadowVisible&&fa(t),g=!1):sv(this,!1),g&&!1===y&&(ns(t,1,0,0,1,0,0),t.Bm(e),y=!0),this.Ei(t,e),v&&0!=(512&this.G)&&Bs(t),this.Qi()&&v&&fa(t),f&&(t.restore(),p&&t.fd.pop()),this instanceof W&&(n=t.fd.pop()),!0===y&&t.fd.pop(),(this instanceof Jt&&1<this.lineCount||this instanceof bt&&1<this.geometry.figures.length)&&(n=t.fd.pop()),null!==t.Xs.Up&&(null===n&&(s===t.Fs?(ns(t,1,0,0,1,0,0),n=t.fd.pop()):n=t.Fs),t.Xs.Up(this,n)),this.svg=n),!0},Xr.prototype.resize=function(t,e,n,s){return(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.style.width=n+"px",this.style.height=s+"px",!0)},Xr.prototype.toDataURL=function(t,e){return this.La.toDataURL(t,e)},Xr.prototype.getBoundingClientRect=function(){return this.La.getBoundingClientRect()},Xr.prototype.focus=function(){this.La.focus()},Xr.prototype.Mx=function(){this.ownerDocument=this.La.D=null},kt.Object.defineProperties(Xr.prototype,{width:{get:function(){return this.La.width},set:function(t){this.La.width=t}},height:{get:function(){return this.La.height},set:function(t){this.La.height=t}},style:{get:function(){return this.La.style}}}),Xr.className="CanvasSurface",(S=En.prototype).zy=function(t){this.Y.imageSmoothingEnabled=t},S.arc=function(t,e,n,s,a,u){this.Y.arc(t,e,n,s,a,u)},S.beginPath=function(){this.Y.beginPath()},S.bezierCurveTo=function(t,e,n,s,a,u){this.Y.bezierCurveTo(t,e,n,s,a,u)},S.clearRect=function(t,e,n,s){this.Ed(),this.Y.clearRect(t,e,n,s)},S.clip=function(){this.Y.clip()},S.closePath=function(){this.Y.closePath()},S.createLinearGradient=function(t,e,n,s){return this.Y.createLinearGradient(t,e,n,s)},S.createPattern=function(t,e){return this.Y.createPattern(t,e)},S.createRadialGradient=function(t,e,n,s,a,u){return this.Y.createRadialGradient(t,e,n,s,a,u)},S.drawImage=function(t,e,n,s,a,u,c,f,p){void 0===s?this.Y.drawImage(t,e,n):this.Y.drawImage(t,e,n,s,a,u,c,f,p)},S.fill=function(){this.Y.fill()},S.fillRect=function(t,e,n,s){this.Y.fillRect(t,e,n,s)},S.fillText=function(t,e,n){this.Y.fillText(t,e,n)},S.getImageData=function(t,e,n,s){return this.Y.getImageData(t,e,n,s)},S.lineTo=function(t,e){this.Y.lineTo(t,e)},S.measureText=function(t){return this.Y.measureText(t)},S.moveTo=function(t,e){this.Y.moveTo(t,e)},S.quadraticCurveTo=function(t,e,n,s){this.Y.quadraticCurveTo(t,e,n,s)},S.rect=function(t,e,n,s){this.Y.rect(t,e,n,s)},S.restore=function(){this.Y.restore()},S.save=function(){this.Ed(),this.Y.save()},En.prototype.rotate=function(t){this.Wl.rotate(57.2958*t,0,0)},(S=En.prototype).setTransform=function(t,e,n,s,a,u){this.Wl.setTransform(t,e,n,s,a,u)},S.scale=function(t,e){this.Wl.scale(t,e)},S.translate=function(t,e){this.Wl.translate(t,e)},S.stroke=function(){this.Y.stroke()},S.transform=function(t,e,n,s,a,u){if(1!==t||0!==e||0!==n||1!==s||0!==a||0!==u){var c=this.Wl,f=c.m11*t+c.m21*e;t=c.m12*t+c.m22*e,e=c.m11*n+c.m21*s,n=c.m12*n+c.m22*s,c.dx=c.m11*a+c.m21*u+c.dx,c.dy=c.m12*a+c.m22*u+c.dy,c.m11=f,c.m12=t,c.m21=e,c.m22=n}},S.Ed=function(){var t=this.Wl;this.Y.setTransform(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy)},S.yf=function(t){if(t instanceof jt&&t.type===dr){var e=t.Gk;(t=t.yt)>e?(this.scale(e/t,1),this.translate((t-e)/2,0)):e>t&&(this.scale(1,t/e),this.translate(0,(e-t)/2)),this.Ym?this.clip():this.fill(),t>e?(this.translate(-(t-e)/2,0),this.scale(1/(e/t),1)):e>t&&(this.translate(0,-(e-t)/2),this.scale(1,1/(t/e)))}else this.Ym?this.clip():this.fill()},S.Wi=function(){this.Ym||this.stroke()},S.Uv=function(t,e,n){this.Sr=t,this.Tr=e,this.hg=n},S.os=function(t,e){var n=this.Y;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)},S.ms=function(){var t=this.Y;void 0!==t.setLineDash&&(t.setLineDash(Yb),t.lineDashOffset=0)},S.Hc=function(t){t&&(this.wt=""),this.vt=this.xt=""},kt.Object.defineProperties(En.prototype,{fillStyle:{get:function(){return this.Y.fillStyle},set:function(t){this.vt!==t&&(this.vt=this.Y.fillStyle=t)}},font:{get:function(){return this.Y.font},set:function(t){this.wt!==t&&(this.wt=this.Y.font=t)}},globalAlpha:{get:function(){return this.Y.globalAlpha},set:function(t){this.Y.globalAlpha=t}},lineCap:{get:function(){return this.Y.lineCap},set:function(t){this.Y.lineCap=t}},lineDashOffset:{get:function(){return this.Y.lineDashOffset},set:function(t){this.Y.lineDashOffset=t}},lineJoin:{get:function(){return this.Y.lineJoin},set:function(t){this.Y.lineJoin=t}},lineWidth:{get:function(){return this.Y.lineWidth},set:function(t){this.Y.lineWidth=t}},miterLimit:{get:function(){return this.Y.miterLimit},set:function(t){this.Y.miterLimit=t}},shadowBlur:{get:function(){return this.Y.shadowBlur},set:function(t){this.Y.shadowBlur=t}},shadowColor:{get:function(){return this.Y.shadowColor},set:function(t){this.Y.shadowColor=t}},shadowOffsetX:{get:function(){return this.Y.shadowOffsetX},set:function(t){this.Y.shadowOffsetX=t}},shadowOffsetY:{get:function(){return this.Y.shadowOffsetY},set:function(t){this.Y.shadowOffsetY=t}},strokeStyle:{get:function(){return this.Y.strokeStyle},set:function(t){this.xt!==t&&(this.xt=this.Y.strokeStyle=t)}},textAlign:{get:function(){return this.Y.textAlign},set:function(t){this.Y.textAlign=t}},imageSmoothingEnabled:{get:function(){return this.Y.imageSmoothingEnabled},set:function(t){this.Y.imageSmoothingEnabled=t}},clipInsteadOfFill:{get:function(){return this.Ym},set:function(t){this.Ym=t}}});var Yb=Object.freeze([]);function _p(){this.L=this.o=this.C=this.j=0}function jt(t,e){Sd||(_m(),Sd=!0),bn(this),this.v=!1,void 0===t?(this.ha=ga,this.Fk="black"):"string"==typeof t?(this.ha=ga,this.Fk=t):(this.ha=t,this.Fk="black"),(t=this.ha)===ma?(this.Cd=Yn,this.Tk=wl):this.Tk=this.Cd=t===dr?Ut:Vn,this.Wr=0,this.Yq=NaN,this.ne=this.Hr=this.me=null,this.yt=this.Gk=0,e&&Object.assign(this,e)}function uv(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?Nd:n,pa(t),Td(e,n)}function __(t,e,n){return e=void 0===e||"number"!=typeof e?.2:e,n=void 0===n?Nd:n,pa(t),Td(-e,n)}function hv(t,e,n){pa(t),t=te.j;var s=te.C,a=te.o,u=te.L;return pa(e),void 0===n&&(n=.5),"rgba("+Math.round((te.j-t)*n+t)+", "+Math.round((te.C-s)*n+s)+", "+Math.round((te.o-a)*n+a)+", "+Math.round((te.L-u)*n+u)+")"}function Cd(t){return!!t&&(t instanceof jt?t.hy():(pa(t),128>(299*te.j+587*te.C+114*te.o)/1e3))}function Td(t,e){switch(e){case Nd:e=100*D_(te.j);var n=100*D_(te.C),s=100*D_(te.o);return vi.j=.4124564*e+.3575761*n+.1804375*s,vi.C=.2126729*e+.7151522*n+.072175*s,vi.o=.0193339*e+.119192*n+.9503041*s,vi.L=te.L,e=Nr(vi.j/Cu[0]),n=Nr(vi.C/Cu[1]),s=Nr(vi.o/Cu[2]),is.j=116*n-16,is.C=500*(e-n),is.o=200*(n-s),is.L=vi.L,is.j=Math.min(100,Math.max(0,is.j+100*t)),e=(t=(is.j+16)/116)-is.o/200,vi.j=Cu[0]*wm(is.C/500+t),vi.C=Cu[1]*(is.j>Mu*cr?Math.pow(t,3):is.j/Mu),vi.o=Cu[2]*wm(e),vi.L=is.L,t=-.969266*vi.j+1.8760108*vi.C+.041556*vi.o,e=.0556434*vi.j+-.2040259*vi.C+1.0572252*vi.o,te.j=255*Fh((3.2404542*vi.j+-1.5371385*vi.C+-.4985314*vi.o)/100),te.C=255*Fh(t/100),te.o=255*Fh(e/100),te.L=vi.L,te.j=Math.round(te.j),255<te.j?te.j=255:0>te.j&&(te.j=0),te.C=Math.round(te.C),255<te.C?te.C=255:0>te.C&&(te.C=0),te.o=Math.round(te.o),255<te.o?te.o=255:0>te.o&&(te.o=0),"rgba("+te.j+", "+te.C+", "+te.o+", "+te.L+")";case b_:return x_(),Ji.o=Math.min(100,Math.max(0,Ji.o+100*t)),"hsla("+Ji.j+", "+Ji.C+"%, "+Ji.o+"%, "+Ji.L+")";default:q("Unknown color space: "+e)}}function pa(t){Sd||(_m(),Sd=!0);var e=cv;if(null!==e){e.clearRect(0,0,1,1),e.fillStyle="#000000";var n=e.fillStyle;e.fillStyle=t,e.fillStyle!==n?(e.fillRect(0,0,1,1),t=e.getImageData(0,0,1,1).data,te.j=t[0],te.C=t[1],te.o=t[2],te.L=t[3]/255):(e.fillStyle="#FFFFFF",e.fillStyle=t,te.j=0,te.C=0,te.o=0,te.L=1)}}function x_(){var t=te.j/255,e=te.C/255,n=te.o/255,s=Math.max(t,e,n),a=Math.min(t,e,n),u=s-a;if(a=(s+a)/2,0===u)var c=t=0;else{switch(s){case t:c=(e-n)/u%6;break;case e:c=(n-t)/u+2;break;case n:c=(t-e)/u+4}0>(c*=60)&&(c+=360),t=u/(1-Math.abs(2*a-1))}Ji.j=Math.round(c),Ji.C=Math.round(100*t),Ji.o=Math.round(100*a),Ji.L=te.L}function D_(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Fh(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Nr(t){return t>cr?Math.pow(t,1/3):(Mu*t+16)/116}function wm(t){var e=t*t*t;return e>cr?e:(116*t-16)/Mu}function bu(t,e){"string"!=typeof t&&(t instanceof jt||q("Value for "+e+" must be a color string or a Brush, not "+t))}function _m(){cv=Wr?new Xr(null).context:null}En.className="CanvasSurfaceContext",_p.className="ColorNumbers",jt.prototype.copy=function(){var t=new jt;return t.ha=this.ha,t.Fk=this.Fk,t.Cd=this.Cd.I(),t.Tk=this.Tk.I(),t.Wr=this.Wr,t.Yq=this.Yq,null!==this.me&&(t.me=this.me.copy()),t.Hr=this.Hr,t},(S=jt.prototype).freeze=function(){return this.v=!0,null!==this.me&&this.me.freeze(),this},S.ea=function(){return Object.isFrozen(this)&&q("cannot thaw constant: "+this),this.v=!1,null!==this.me&&this.me.ea(),this},S.gb=function(t){t.classType===jt&&(this.type=t)},S.toString=function(){var t="Brush(";if(this.type===ga)t+=this.color;else if(t=this.type===ma?t+"Linear ":this.type===dr?t+"Radial ":this.type===Tu?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.colorStops)for(var e=this.colorStops.iterator;e.next();)t+=" "+e.key+":"+e.value;return t+")"},S.addColorStop=function(t,e){return this.v&&It(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&ae(t,"0 <= loc <= 1",jt,"addColorStop:loc"),null===this.me&&(this.me=new xt),this.me.add(t,e),this.ha===ga&&(this.type=ma),this.ne=null,this},S.rA=function(t,e){if(this.v&&It(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?Nd:e,this.type===ga)pa(this.color),this.color=Td(t,e);else if((this.type===ma||this.type===dr)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)pa(n.value),this.addColorStop(n.key,Td(t,e));return this},S.sz=function(t,e){if(this.v&&It(this),t=void 0===t||"number"!=typeof t?.2:t,e=void 0===e?Nd:e,this.type===ga)pa(this.color),this.color=Td(-t,e);else if((this.type===ma||this.type===dr)&&null!==this.colorStops)for(var n=this.colorStops.iterator;n.next();)pa(n.value),this.addColorStop(n.key,Td(-t,e));return this},S.hy=function(){if(this.type===ga)return Cd(this.color);if((this.type===ma||this.type===dr)&&null!==this.colorStops){var t=this.colorStops;if(this.type===dr)return Cd(t.first().value);if(null!==t.get(.5))return Cd(t.get(.5));if(2===t.count)return Cd(hv((t=t.ya())[0].value,t[1].value));for(var e=t.iterator,n=-1,s=-1,a=1,u=1;e.next();){var c=e.key,f=Math.abs(.5-e.key);a>u&&f<a?(n=c,a=f):u>=a&&f<u&&(s=c,u=f)}return n>s&&(u=n,n=s,s=u,u=a),a=s-n,Cd(hv(t.get(n),t.get(s),1-u/a))}return!1},kt.Object.defineProperties(jt.prototype,{type:{get:function(){return this.ha},set:function(t){this.v&&It(this,t),this.ha=t,this.start.Bc()&&(t===ma?this.start=Yn:t===dr&&(this.start=Ut)),this.end.Bc()&&(t===ma?this.end=wl:t===dr&&(this.end=Ut)),this.ne=null}},color:{get:function(){return this.Fk},set:function(t){this.v&&It(this,t),this.Fk=t,this.ne=null}},start:{get:function(){return this.Cd},set:function(t){this.v&&It(this,t),this.Cd=t.I(),this.ne=null}},end:{get:function(){return this.Tk},set:function(t){this.v&&It(this,t),this.Tk=t.I(),this.ne=null}},startRadius:{get:function(){return this.Wr},set:function(t){this.v&&It(this,t),0>t&&ae(t,">= zero",jt,"startRadius"),this.Wr=t,this.ne=null}},endRadius:{get:function(){return this.Yq},set:function(t){this.v&&It(this,t),0>t&&ae(t,">= zero",jt,"endRadius"),this.Yq=t,this.ne=null}},colorStops:{get:function(){return this.me},set:function(t){this.v&&It(this,t),this.me=t,this.ne=null}},pattern:{get:function(){return this.Hr},set:function(t){this.v&&It(this,t),this.Hr=t,this.ne=null}}}),jt.prototype.isDark=jt.prototype.hy,jt.prototype.darkenBy=jt.prototype.sz,jt.prototype.lightenBy=jt.prototype.rA,jt.prototype.addColorStop=jt.prototype.addColorStop;var ga,ma,dr,Tu,Nd,b_,cr=216/24389,Mu=24389/27,Cu=[95.047,100,108.883],cv=null,te=new _p,Ji=new _p,vi=new _p,is=new _p,Sd=!1;function Ke(){this.na="Base"}function xm(){this.na="Base"}function Dm(){this.na="Base"}function Ol(){this.na="Base"}function bm(){this.na="Base"}function dv(t,e,n){var s=null;if(t instanceof W&&""!==t.Re&&(s=t.Ya(t.Re))===t&&(s=null),null!==s)for(n&&t.arrange(0,0,e.width,e.height),e.assign(s.actualBounds),s=s.panel;s!==t;)s.transform.xq(e),s=s.panel}function Mm(){this.na="Base"}function Cm(){this.na="Base",this.name="Table"}function Tm(){this.na="Base"}function xp(){this.na="Base"}function Sm(){this.na="Base"}function Dp(){this.na="Base"}function Nm(t,e,n,s){if(0>e)return t%e===n;if(t%e!==n)return!1;e=s.length;for(var a=0;a<e;a++)if(t%s[a]===n)return!1;return!0}function bp(){this.na="Base"}function fv(t,e,n,s){if(!1!==mo(s)){var a=s.strokeWidth;0===a&&t instanceof Rt&&t.type===W.Link&&t.adornedObject instanceof bt&&(a=t.adornedObject.strokeWidth),a*=s.sa,t instanceof K&&null!==t.ma?s.xe((t=t.ma.bounds).x-a/2,t.y-a/2,t.width+a,t.height+a):t instanceof Rt&&null!==t.adornedPart.ma?s.xe((t=t.adornedPart.ma.bounds).x-a/2,t.y-a/2,t.width+a,t.height+a):s.xe(-a/2,-a/2,e+a,n+a),hr(s,!1)}}function Mp(){this.na="Base"}function W(t,e){if(dt.call(this),this.ha=null,void 0===t)this.ha=W.Position;else if("string"==typeof t){var n=Zr.H(t);null!==n&&(this.ha=n)}else t instanceof Ke?this.ha=t:t&&(this.ha=W.Position,e=t);null===this.ha&&q("Panel type not specified or PanelLayout not loaded: "+t),this.T=new st,this.nb=lh,this.ha===W.Grid&&(this.G|=1048576),this.mn=Xt,this.Of=es,this.ha===W.Table&&M_(this),this.Hp=Oo,this.Kn=Ts,this.Ln=Ko,this.Hn=0,this.Gn=100,this.Jn=10,this.In=0,this.Qh=this.jb=this.Rf=this.Qg=this.kj=null,this.ao=NaN,this.ve=this.ci=null,this.hl="category",this.$d=null,this.jg=new z(NaN,NaN,NaN,NaN),this.qh=this.cp=this.ph=null,this.Re="",e&&Object.assign(this,e)}function M_(t){t.fj=lh,t.Hg=1,t.Wh=null,t.Vh=null,t.Gg=1,t.Fg=null,t.Uh=null,t.ob=[],t.ib=[],t.Fj=kp,t.ej=kp,t.vi=0,t.gi=0}function Rh(t,e,n,s){for(var a=s.length,u=t.actualBounds,c=t.naturalBounds,f=!0,p=0;p<a;p++){var g=s[p];if(void 0!==g)if(f)f=!1;else if(0!==g.actual){if(n){if(g.position>u.height)continue}else if(g.position>u.width)continue;var y=g.separatorStrokeWidth;isNaN(y)&&(y=n?t.Hg:t.Gg);var v=g.separatorStroke;if(null===v&&(v=n?t.Wh:t.Fg),0!==y&&null!==v){Tr(t,e,v,!1,!1,c,u),v=!1;var _=g.separatorDashArray;null===_&&(_=n?t.Vh:t.Uh),null!==_&&(v=!0,e.os(_,0)),e.beginPath(),_=g.position+y,n?_>u.height&&(y-=_-u.height):_>u.width&&(y-=_-u.width),g=g.position+y/2,e.lineWidth=y,y=t.nb,n?(_=u.width-y.right,e.moveTo(y.left,g+=y.top),e.lineTo(_,g)):(_=u.height-y.bottom,e.moveTo(g+=y.left,y.top),e.lineTo(g,_)),e.stroke(),v&&e.ms()}}}}function rs(t,e,n,s,a){for(var u=s.length,c=t.actualBounds,f=t.naturalBounds,p=0;p<u;p++){var g=s[p];if(void 0!==g&&null!==g.background&&g.coversSeparators!==a&&0!==g.actual){var y=n?c.height:c.width;if(!(g.position>y)){var v=g.Ic(),_=g.separatorStrokeWidth;isNaN(_)&&(_=n?t.Hg:t.Gg);var b=g.separatorStroke;null===b&&(b=n?t.Wh:t.Fg),null===b&&(_=0),v-=_,(_=g.position+_)+(v+=g.actual)>y&&(v=y-_),0>=v||(y=t.nb,Tr(t,e,g.background,!0,!1,f,c),n?e.fillRect(y.left,_+y.top,c.width-(y.left+y.right),v):e.fillRect(_+y.left,y.top,v,c.height-(y.top+y.bottom)))}}}}function C_(t){return"LineV"===t||"BarV"===t}function za(t){return null!==t.part?t.part.locationObject:null}function Il(t,e){Wb(t,t,e)}function Wb(t,e,n){n(e);for(var s=(e=e.T.m).length,a=0;a<s;a++){var u=e[a];u instanceof W&&Wb(t,u,n)}}function os(t,e){km(t,t,e)}function km(t,e,n){if(n(e),e instanceof W)for(var s=(e=e.T.m).length,a=0;a<s;a++)km(t,e[a],n)}function Em(t,e,n){if(n(e))return e;if(e instanceof W)for(var s=(e=e.T.m).length,a=0;a<s;a++){var u=Em(t,e[a],n);if(null!==u)return u}return null}function T_(t){for(var e=(t=t.T.m).length,n=0,s=0;s<e;s++){var a=t[s];a instanceof W?n=Math.max(n,T_(a)):a instanceof bt&&(n=Math.max(n,a.ig/2*a.Kj*a.Af()))}return n}function Pm(t,e,n,s){for(var a=t.T.m,u=a.length;u--;){var c=a[u];if(c.visible){var f=c.actualBounds,p=t.naturalBounds;f.x>p.width||f.y>p.height||0>f.x+f.width||0>f.y+f.height||(c instanceof W&&Pm(c,e,n,s),null!==e&&(c=e(c)),null===c||null!==n&&!n(c)||s.add(c))}}}function Lh(t){var e=null;return t instanceof bt&&((e=t.spot1)===Xt&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot1)),null===e&&(e=St),e}function Am(t){var e=null;return t instanceof bt&&((e=t.spot2)===Xt&&(e=null),null!==(t=t.geometry)&&null===e&&(e=t.spot2)),null===e&&(e=Ur),e}function Om(t,e){t.G=e?16777216|t.G:-16777217&t.G}function Im(t,e,n){var s=t.ob;if(s&&!(0>e)){if(s[e]=n instanceof en?n:void 0,!n)for(e=s.length-1;0<=e&&void 0===s[e--];)s.length--;t.s()}}function Fm(t,e,n){var s=t.ib;if(s&&!(0>e)){if(s[e]=n instanceof en?n:void 0,!n)for(e=s.length-1;0<=e&&void 0===s[e--];)s.length--;t.s()}}function pv(t){return null!==(t=t.Qh)&&t.v}function yo(t){var e=t.Qh;if(null===e)null!==t.data&&q("Template cannot have .data be non-null: "+t),t.Qh=e=new st;else if(e.v)return;var n=new st;Om(t,!1),t.Em(t,function(g,y){var v=y.fb;if(null!==v)for(Dd(y,!1),v=v.iterator;v.next();){var _=v.value;_.mode===to&&Dd(y,!0);var b=_.sourceName;null!==b&&("/"===b&&Om(g,!0),null!==(b=Er(_,g,y))&&(n.add(b),null===b.Jl&&(b.Jl=new st),b.Jl.add(_))),e.add(_)}if(y instanceof W&&y.type===W.Table){if(0<y.ob.length)for(v=(g=y.ob).length,_=0;_<v;_++)if(void 0!==(b=g[_])&&null!==b.fb)for(var D=b.fb.iterator;D.next();){var k=D.value;k.od=b,k.yp=2,k.Pl=b.index,e.add(k)}if(0<y.ib.length)for(g=(y=y.ib).length,v=0;v<g;v++)if(void 0!==(_=y[v])&&null!==_.fb)for(b=_.fb.iterator;b.next();)(D=b.value).od=_,D.yp=1,D.Pl=_.index,e.add(D)}});for(var s=n.iterator;s.next();){var a=s.value;if(null!==a.Jl){Dd(a,!0);for(var u=a.Jl.iterator;u.next();){var c=u.value;null===a.fb&&(a.fb=new st),a.fb.add(c)}}a.Jl=null}for(s=e.iterator;s.next();)if(null!==(u=(a=s.value).od)){a.od=null;var f=a.targetProperty,p=f.indexOf(".");0<p&&u instanceof W&&(c=f.substring(0,p),f=f.substr(p+1),null!==(p=u.Ya(c))?(u=p,a.targetProperty=f):Ci('Warning: unable to find GraphObject named "'+c+'" for Binding: '+a.toString())),u instanceof en?(c=pn(u.panel),a.Xi=void 0===c?-1:c,u.panel.Dk=a.Xi):u instanceof dt?(c=pn(u),a.Xi=void 0===c?-1:c,u.Dk=a.Xi):q("Unknown type of binding target: "+u)}e.freeze(),t instanceof ft&&t.Mc()&&t.Ta()}function jh(t){if(t.type===W.Spot||t.type===W.Auto)return Math.min(t.T.length,1);if(t.type===W.Link){for(var e=(t=t.T).length,n=0;n<e;n++){var s=t.J(n);if(!(s instanceof bt&&s.isPanelMain))break}return n}return t.type===W.Table&&0<t.T.length&&(t=t.T.J(0)).isPanelMain&&t instanceof W&&(t.type===W.TableRow||t.type===W.TableColumn)?1:0}function gv(t,e){var n=jh(t);if(null===e||0===e.length)for(;t.T.length>n;)t.fc(t.T.length-1,!1);else if(t.T.length<=n){n=e.length;for(var s=0;s<n;s++)Rm(t,e[s],s,!0)}else{s=n;for(var a=0;a<e.length;a++,s++){var u=e[a],c=s<t.T.length?t.T.J(s):null;if(c instanceof W){if(c.data!==u){var f=mv(t,c.data),p=mv(t,u),g=p!==f;g||(f=yv(t,f),g=yv(t,p)!==f),g?(t.fc(s,!1),Rm(t,u,a,!1)):c.data=u}}else Rm(t,u,a,!1)}for(;s<t.T.length;)t.fc(s,!1);t.ph=null,Cp(t,n,0),mo(t)||t.s(),t.Rf=null,t.Ef()||Lm(t,t,!1),null!==(e=t.part)&&(e.li=null,e.Xf=NaN,t.Je&&e instanceof it&&(e.Je=!0),e.Je&&e instanceof it&&(e.oc=null))}}function Rm(t,e,n,s){if(!(null==e||0>n)){var a=mv(t,e);if(null!==(a=yv(t,a))){if(yo(a),0!=(16777216&(a=a.copy()).G)){var u=t.Ch();null!==u&&Om(u,!0)}"object"==typeof e&&(null===t.$d&&(t.$d=new xt),t.$d.add(e,a)),u=n+jh(t),t.wb(u,a),s&&(a.jb=e,Cp(t,u,n),a.jb=null),a.data=e}}}function Cp(t,e,n){for(t=t.T;e<t.length;){var s=t.J(e);if(s instanceof W){var a=e,u=n;s.type===W.TableRow?s.row=a:s.type===W.TableColumn&&(s.column=a),s.itemIndex=u}e++,n++}}function mv(t,e){if(null===e)return"";if("function"==typeof(t=t.hl))t=t(e);else{if("string"!=typeof t||"object"!=typeof e)return"";if(""===t)return"";t=Ue(e,t)}return void 0===t?"":"string"==typeof t?t:void q("Panel.getCategoryForItemData found a non-string category for "+e+": "+t)}function yv(t,e){var n=t.itemTemplateMap,s=null;return null!==n&&(s=n.H(e)),null===s&&(null!==n&&(s=n.H("")),null===s&&(S_||(S_=!0,Ci('No item template Panel found for category "'+e+'" on '+t),Ci("  Using default item template."),t=new W,(e=new Jt).bind(new Ae("text","",xr)),t.add(e),N_=t),s=N_)),s}function Lm(t,e,n){var s=e.enabledChanged;if(null!==s&&s(e,n),e instanceof W){s=(e=e.T.m).length;for(var a=0;a<s;a++){var u=e[a];n&&u instanceof W&&!u.isEnabled||Lm(t,u,n)}}}function ss(t,e){e.name=t,Zr.add(t,e)}jt.className="Brush",jt.Solid=ga=new Q(jt,"Solid",0),jt.Linear=ma=new Q(jt,"Linear",1),jt.Radial=dr=new Q(jt,"Radial",2),jt.Pattern=Tu=new Q(jt,"Pattern",4),jt.Lab=Nd=new Q(jt,"Lab",5),jt.HSL=b_=new Q(jt,"HSL",6),jt.randomColor=function(t,e){void 0===t&&(t=128),void 0===e&&(e=Math.max(t,255));var n=Math.abs(e-t);e=Math.floor(t+Math.random()*n).toString(16);var s=Math.floor(t+Math.random()*n).toString(16);return t=Math.floor(t+Math.random()*n).toString(16),2>e.length&&(e="0"+e),2>s.length&&(s="0"+s),2>t.length&&(t="0"+t),"#"+e+s+t},jt.isValidColor=function(t){if("black"===t)return!0;if(""===t)return!1;Sd||(_m(),Sd=!0);var e=cv;if(null===e)return!0;e.fillStyle="#000000";var n=e.fillStyle;return e.fillStyle=t,e.fillStyle!==n||(e.fillStyle="#FFFFFF",n=e.fillStyle,e.fillStyle=t,e.fillStyle!==n)},jt.lighten=function(t){return uv(t)},jt.lightenBy=uv,jt.darken=function(t){return __(t)},jt.darkenBy=__,jt.mix=hv,jt.isDark=Cd,Ke.prototype.measure=function(){},Ke.prototype.uA=function(t,e,n,s,a){t.measure(e,n,s,a)},Ke.prototype.arrange=function(){},Ke.prototype.gz=function(t,e,n,s,a,u){t.arrange(e,n,s,a,u)},Ke.prototype.EA=function(t){t.ck()},Ke.prototype.pc=function(){},kt.Object.defineProperties(Ke.prototype,{name:{get:function(){return this.na},set:function(t){this.na=t}},classType:{get:function(){return W}}}),Ke.prototype.remeasureObject=Ke.prototype.EA,Ke.prototype.arrangeElement=Ke.prototype.gz,Ke.prototype.measureElement=Ke.prototype.uA,Ke.className="PanelLayout",Wt(xm,Ke),xm.prototype.measure=function(t,e,n,s,a,u,c){var f=s.length;t=za(t);for(var p=0;p<f;p++){var g=s[p];if(g.visible||g===t){var y=g.margin,v=y.right+y.left;y=y.top+y.bottom,g.measure(e,n,u,c);var _=g.measuredBounds;v=Math.max(_.width+v,0),y=Math.max(_.height+y,0),_=g.position.x;var b=g.position.y;isFinite(_)||(_=0),isFinite(b)||(b=0),g instanceof bt&&g.isGeometryPositioned&&(_-=g=g.strokeWidth/2,b-=g),mn(a,_,b,v,y)}}},xm.prototype.arrange=function(t,e,n){var s=e.length,a=t.padding;for(t=n.x-a.left,n=n.y-a.top,a=0;a<s;a++){var u=e[a],c=u.measuredBounds,f=u.margin,p=u.position.x,g=u.position.y;if(p=isNaN(p)?-t:p-t,g=isNaN(g)?-n:g-n,u instanceof bt&&u.isGeometryPositioned){var y=u.strokeWidth/2;p-=y,g-=y}u.visible&&u.arrange(p+f.left,g+f.top,c.width,c.height)}},Wt(Dm,Ke),Dm.prototype.measure=function(t,e,n,s,a,u,c){var f=s.length;e=Lt(),u=za(t);for(var p=0;p<f;p++){var g=s[p];if(g.visible||g===u){var y=Io(g,!1);if(y!==ze&&y!==Un)e.push(g);else{g.measure(1/0,n,0,c),y=g.margin,g=g.measuredBounds;var v=Math.max(g.height+y.top+y.bottom,0);a.width+=Math.max(g.width+y.right+y.left,0),a.height=Math.max(a.height,v)}}}for(s=e.length,t.desiredSize.height?n=Math.min(t.desiredSize.height,t.maxSize.height):0!==a.height&&(n=Math.min(a.height,t.maxSize.height)),t=0;t<s;t++)((p=e[t]).visible||p===u)&&(f=(y=p.margin).right+y.left,y=y.top+y.bottom,p.measure(1/0,n,0,c),p=p.measuredBounds,y=Math.max(p.height+y,0),a.width+=Math.max(p.width+f,0),a.height=Math.max(a.height,y));ee(e)},Dm.prototype.arrange=function(t,e,n){for(var s=e.length,a=t.padding,u=a.top,c=t.isOpposite,f=c?n.width:a.left,p=0;p<s;p++){var g=u,y=e[p];if(y.visible){var v=y.measuredBounds,_=y.margin,b=_.top+_.bottom,D=u+a.bottom,k=v.height,O=Io(y,!1);(isNaN(y.desiredSize.height)&&O===Ge||O===Xn)&&(k=Math.max(n.height-b-D,0)),b=k+b+D,(D=y.alignment).Nb()&&(D=t.defaultAlignment),D.hb()||(D=Ut),c&&(f-=v.width+_.left+_.right),y.arrange(f+D.offsetX+_.left,g+D.offsetY+_.top+(n.height*D.y-b*D.y),v.width,k),c||(f+=v.width+_.left+_.right)}}},Wt(Ol,Ke),Ol.prototype.measure=function(t,e,n,s,a,u){var c=s.length;n=Lt();for(var f=za(t),p=0;p<c;p++){var g=s[p];if(g.visible||g===f){var y=Io(g,!1);if(y!==ze&&y!==Xn)n.push(g);else{var v=g.margin;y=v.right+v.left,v=v.top+v.bottom,g.measure(e,1/0,u,0),g=g.measuredBounds,La(a,Math.max(a.width,Math.max(g.width+y,0)),a.height+Math.max(g.height+v,0))}}}if(0!==(s=n.length)){for(t.desiredSize.width?e=Math.min(t.desiredSize.width,t.maxSize.width):0!==a.width&&(e=Math.min(a.width,t.maxSize.width)),t=0;t<s;t++)((p=n[t]).visible||p===f)&&(c=(g=p.margin).right+g.left,g=g.top+g.bottom,p.measure(e,1/0,u,0),p=p.measuredBounds,g=Math.max(p.height+g,0),a.width=Math.max(a.width,Math.max(p.width+c,0)),a.height+=g);ee(n)}},Ol.prototype.arrange=function(t,e,n){for(var s=e.length,a=t.padding,u=a.left,c=t.isOpposite,f=c?n.height:a.top,p=0;p<s;p++){var g=u,y=e[p];if(y.visible){var v=y.measuredBounds,_=y.margin,b=_.left+_.right,D=u+a.right,k=v.width,O=Io(y,!1);(isNaN(y.desiredSize.width)&&O===Ge||O===Un)&&(k=Math.max(n.width-b-D,0)),b=k+b+D,(D=y.alignment).Nb()&&(D=t.defaultAlignment),D.hb()||(D=Ut),c&&(f-=v.height+_.bottom+_.top),y.arrange(g+D.offsetX+_.left+(n.width*D.x-b*D.x),f+D.offsetY+_.top,k,v.height),c||(f+=v.height+_.bottom+_.top)}}},Wt(bm,Ke),bm.prototype.measure=function(t,e,n,s,a,u,c){var f=s.length,p=t.pb(),g=p.margin,y=g.right+g.left,v=g.top+g.bottom;p.measure(e,n,u,c);var _=p.measuredBounds;u=_.width,c=_.height;var b=Math.max(u+y,0),D=Math.max(c+v,0),k=t.isClipping,O=z.allocAt(-g.left,-g.top,b,D),E=z.allocAt(0,0,u,c);dv(p,E,!0),u=E.width,c=E.height;for(var R=!0,F=za(t),j=0;j<f;j++){var L=s[j],G=e,ot=n;if(L!==p&&(L.visible||L===F)){switch(b=(g=L.margin).right+g.left,D=g.top+g.bottom,_=Io(L,!1)){case Ge:G=u,ot=c;break;case Un:G=u;break;case Xn:ot=c}L.measure(G,ot,0,0),_=L.measuredBounds,b=Math.max(_.width+b,0),D=Math.max(_.height+D,0),(G=L.alignment).Nb()&&(G=t.defaultAlignment),G.hb()||(G=Ut);var Z=L.alignmentFocus;Z.Nb()&&(Z=Ut),ot=null,L instanceof W&&""!==L.Re&&(ot=L.Ya(L.Re))===L&&(ot=null);var ut=E.x,et=E.y;if(null!==ot){for(L.arrange(0,0,_.width,_.height),g=A.allocAt((g=ot.actualBounds).x+(Z.x*g.width-Z.offsetX),g.y+(Z.y*g.height-Z.offsetY)),ot=ot.panel;ot!==L;)ot.transform.Aa(g),ot=ot.panel;ut+=G.x*u+G.offsetX-g.x,et+=G.y*c+G.offsetY-g.y,A.free(g)}else ut+=G.x*u+G.offsetX-(Z.x*_.width+Z.offsetX)-g.left,et+=G.y*c+G.offsetY-(Z.y*_.height+Z.offsetY)-g.top;R?(R=!1,a.h(ut,et,b,D)):mn(a,ut,et,b,D)}}switch(R?a.assign(O):k?a.hv(E.x,E.y,E.width,E.height):mn(a,O.x,O.y,O.width,O.height),z.free(O),z.free(E),(_=p.stretch)===es&&(_=Io(p,!1)),_){case ze:return;case Ge:if(!isFinite(e)&&!isFinite(n))return;break;case Un:if(!isFinite(e))return;break;case Xn:if(!isFinite(n))return}for(u=(_=p.measuredBounds).width,c=_.height,b=Math.max(u+y,0),D=Math.max(c+v,0),dv(p,E=z.allocAt(-(g=p.margin).left,-g.top,b,D),!0),u=E.width,c=E.height,e=0;e<f;e++)(n=s[e])===p||!n.visible&&n!==F||(b=(g=n.margin).right+g.left,D=g.top+g.bottom,_=n.measuredBounds,b=Math.max(_.width+b,0),D=Math.max(_.height+D,0),(y=n.alignment).Nb()&&(y=t.defaultAlignment),y.hb()||(y=Ut),(n=n.alignmentFocus).Nb()&&(n=Ut),R?(R=!1,a.h(y.x*u+y.offsetX-(n.x*_.width+n.offsetX)-g.left,y.y*c+y.offsetY-(n.y*_.height+n.offsetY)-g.top,b,D)):mn(a,y.x*u+y.offsetX-(n.x*_.width+n.offsetX)-g.left,y.y*c+y.offsetY-(n.y*_.height+n.offsetY)-g.top,b,D));R?a.assign(O):k?a.hv(E.x,E.y,E.width,E.height):mn(a,O.x,O.y,O.width,O.height),z.free(E)},bm.prototype.arrange=function(t,e,n){var s=e.length,a=t.pb(),u=a.measuredBounds,c=u.width,f=u.height,p=t.padding,g=(u=p.left)-n.x,y=(p=p.top)-n.y;for(a.arrange(g,y,c,f),dv(a,c=z.allocAt(0,0,c,f),!1),f=0;f<s;f++){var v=e[f];if(v!==a){var _=(g=v.measuredBounds).width,b=g.height;(y=v.alignment).Nb()&&(y=t.defaultAlignment),y.hb()||(y=Ut);var D=v.alignmentFocus;if(D.Nb()&&(D=Ut),g=null,v instanceof W&&""!==v.Re&&(g=v.Ya(v.Re))===v&&(g=null),null!==g){var k=g.actualBounds;for(D=A.allocAt(k.x+(D.x*k.width-D.offsetX),k.y+(D.y*k.height-D.offsetY)),g=g.panel;g!==v;)g.transform.Aa(D),g=g.panel;g=y.x*c.width+y.offsetX-D.x,y=y.y*c.height+y.offsetY-D.y,A.free(D)}else g=y.x*c.width+y.offsetX-(D.x*_+D.offsetX),y=y.y*c.height+y.offsetY-(D.y*b+D.offsetY);g+=c.x-n.x,y+=c.y-n.y,v.visible&&v.arrange(u+g,p+y,_,b)}}z.free(c)},Wt(Mm,Ke),Mm.prototype.measure=function(t,e,n,s,a,u,c){var f=s.length,p=t.pb(),g=p.margin,y=e,v=n,_=g.right+g.left,b=g.top+g.bottom;p.measure(e,n,u,c),g=p.measuredBounds;var D=0,k=null;p instanceof bt&&(D=(k=p).strokeWidth*k.scale);var O=Math.max(g.width+_,0);g=Math.max(g.height+b,0);var E=Lh(p),R=E.x*O+E.offsetX;E=E.y*g+E.offsetY;var F=Am(p),j=F.x*O+F.offsetX;for(F=F.y*g+F.offsetY,isFinite(e)&&(y=Math.max(Math.abs(R-j)-D,0)),isFinite(n)&&(v=Math.max(Math.abs(E-F)-D,0)),(D=Dt.alloc()).h(0,0),t=za(t),F=0;F<f;F++)(E=s[F])===p||!E.visible&&E!==t||(O=(g=E.margin).right+g.left,R=g.top+g.bottom,E.measure(y,v,0,0),g=E.measuredBounds,O=Math.max(g.width+O,0),g=Math.max(g.height+R,0),D.h(Math.max(O,D.width),Math.max(g,D.height)));if(1===f)a.width=O,a.height=g,Dt.free(D);else{switch(E=Lh(p),f=s=0,(F=Am(p)).x!==E.x&&F.y!==E.y&&(s=D.width/Math.abs(F.x-E.x),f=D.height/Math.abs(F.y-E.y)),Dt.free(D),D=0,null!==k&&(D=k.strokeWidth*k.scale,Fl(k)===Oo&&(s=f=Math.max(s,f))),s+=Math.abs(E.offsetX)+Math.abs(F.offsetX)+D,f+=Math.abs(E.offsetY)+Math.abs(F.offsetY)+D,(k=p.stretch)===es&&(k=Io(p,!1)),k){case ze:c=u=0;break;case Ge:isFinite(e)&&(s=e),isFinite(n)&&(f=n);break;case Un:isFinite(e)&&(s=e),c=0;break;case Xn:u=0,isFinite(n)&&(f=n)}p.ck(),p.measure(s,f,u,c),a.width=p.measuredBounds.width+_,a.height=p.measuredBounds.height+b}},Mm.prototype.arrange=function(t,e){var n=e.length,s=t.pb(),a=s.measuredBounds,u=z.alloc();u.h(0,0,1,1);var c=s.margin,f=c.left,p=t.padding,g=p.left;s.arrange(g+f,(p=p.top)+(c=c.top),a.width,a.height);var y=Lh(s),v=Am(s),_=y.y*a.height+y.offsetY,b=v.x*a.width+v.offsetX;for(v=v.y*a.height+v.offsetY,u.x=y.x*a.width+y.offsetX,u.y=_,mn(u,b,v,0,0),u.x+=f+g,u.y+=c+p,a=0;a<n;a++)(f=e[a])!==s&&(g=f.measuredBounds,c=f.margin,p=Math.max(g.width+c.right+c.left,0),y=Math.max(g.height+c.top+c.bottom,0),(_=f.alignment).Nb()&&(_=t.defaultAlignment),_.hb()||(_=Ut),p=u.width*_.x+_.offsetX-p*_.x+c.left+u.x,c=u.height*_.y+_.offsetY-y*_.y+c.top+u.y,f.visible&&(Br(u.x,u.y,u.width,u.height,p,c,g.width,g.height)?f.arrange(p,c,g.width,g.height):f.arrange(p,c,g.width,g.height,new z(u.x,u.y,u.width,u.height))));z.free(u)},Wt(Cm,Ke),Cm.prototype.measure=function(t,e,n,s,a){for(var u=s.length,c=Lt(),f=Lt(),p=0;p<u;p++){var g=s[p],y=g instanceof W?g:null;if(null===y||y.type!==W.TableRow&&y.type!==W.TableColumn||!g.visible)c.push(g);else{f.push(y);for(var v=y.T.m,_=v.length,b=0;b<_;b++){var D=v[b];y.type===W.TableRow?D.row=g.row:y.type===W.TableColumn&&(D.column=g.column),c.push(D)}}}0===(u=c.length)&&(t.getRowDefinition(0),t.getColumnDefinition(0));for(var k=[],O=0;O<u;O++){var E=c[O];hr(E,!0),Al(E,!0),k[E.row]||(k[E.row]=[]),k[E.row][E.column]||(k[E.row][E.column]=[]),k[E.row][E.column].push(E)}ee(c);var R=Lt(),F=Lt(),j=Lt(),L={count:0},G={count:0},ot=e,Z=n,ut=t.ob;u=ut.length;for(var et=0;et<u;et++){var Y=ut[et];void 0!==Y&&(Y.actual=0)}u=(ut=t.ib).length;for(var At=0;At<u;At++)void 0!==(Y=ut[At])&&(Y.actual=0);for(var Mt=k.length,Pt=0,ke=0;ke<Mt;ke++)k[ke]&&(Pt=Math.max(Pt,k[ke].length));var un=Math.min(t.topIndex,Mt-1),ye=Math.min(t.leftIndex,Pt-1),ve=0;Mt=k.length;for(var Ho=za(t),xi=0;xi<Mt;xi++)if(k[xi]){Pt=k[xi].length;var Di=t.getRowDefinition(xi);Di.actual=0;for(var hn=Di.cc=0;hn<Pt;hn++)if(k[xi][hn]){var gs=t.getColumnDefinition(hn);void 0===R[hn]&&(gs.actual=0,gs.cc=0,R[hn]=!0);for(var vc=k[xi][hn],wc=vc.length,Vo=0;Vo<wc;Vo++){var hi=vc[Vo];if(hi.visible||hi===Ho){var hf=1<hi.rowSpan||1<hi.columnSpan;hf&&(xi<un||hn<ye||F.push(hi));var _c=hi.margin,Xl=_c.right+_c.left,xc=_c.top+_c.bottom,sn=yp(hi,Di,gs,!1),cf=hi.desiredSize,zy=!isNaN(cf.height),Na=!isNaN(cf.width)&&zy;if(hf||sn===ze||Na||xi<un||hn<ye||(void 0!==L[hn]||sn!==Ge&&sn!==Un||(L[hn]=-1,L.count++),void 0!==G[xi]||sn!==Ge&&sn!==Xn||(G[xi]=-1,G.count++),j.push(hi)),hi.measure(1/0,1/0,0,0),!(xi<un||hn<ye)){var mr=hi.measuredBounds,qi=Math.max(mr.width+Xl,0),zu=Math.max(mr.height+xc,0);if(1===hi.rowSpan&&(sn===ze||sn===Un)){var yr=(Y=t.getRowDefinition(xi)).Ic();(ve=Math.max(zu-Y.actual,0))+yr>Z&&(ve=Math.max(Z-yr,0));var $u=0===Y.la;Y.cc=Y.cc+ve,Y.actual=Y.la+ve,Z=Math.max(Z-(ve+($u?yr:0)),0)}if(1===hi.columnSpan&&(sn===ze||sn===Xn)){var Dc=(Y=t.getColumnDefinition(hn)).Ic();(ve=Math.max(qi-Y.actual,0))+Dc>ot&&(ve=Math.max(ot-Dc,0));var $y=0===Y.la;Y.cc=Y.cc+ve,Y.actual=Y.la+ve,ot=Math.max(ot-(ve+($y?Dc:0)),0)}hf&&hi.ck()}}}}}ee(R);var Ws=0,Ks=0;u=t.columnCount;for(var bc=0;bc<u;bc++){var Mc=t.ib[bc];void 0!==Mc&&(Ws+=Mc.cc,0!==Mc.cc&&(Ws+=Mc.Ic()))}u=t.rowCount;for(var Bo=0;Bo<u;Bo++){var tl=t.ob[Bo];void 0!==tl&&(Ks+=tl.cc,0!==tl.cc&&(Ks+=tl.Ic()))}ot=Math.max(e-Ws,0);var Qi=Z=Math.max(n-Ks,0),mg=ot;u=j.length;for(var Cc=0;Cc<u;Cc++){var vr=j[Cc],yg=t.getRowDefinition(vr.row),ka=t.getColumnDefinition(vr.column),el=vr.measuredBounds,Ar=vr.margin,p1=Ar.top+Ar.bottom;L[vr.column]=0===ka.cc&&void 0!==L[vr.column]?Math.max(el.width+(Ar.right+Ar.left),L[vr.column]):null,G[vr.row]=0===yg.cc&&void 0!==G[vr.row]?Math.max(el.height+p1,G[vr.row]):null}var Xs,Yu=0,ci=0;for(Xs in G)"count"!==Xs&&(Yu+=G[Xs]);for(Xs in L)"count"!==Xs&&(ci+=L[Xs]);for(var wn=Dt.alloc(),vg=0;vg<u;vg++){var Li=j[vg];if(Li.visible||Li===Ho){var di=t.getRowDefinition(Li.row),tr=t.getColumnDefinition(Li.column),ms=0;isFinite(tr.width)?ms=tr.width:(ms=isFinite(ot)&&null!==L[Li.column]?0===ci?tr.actual+ot:L[Li.column]/ci*mg:null!==L[Li.column]?ot:tr.actual||ot,ms=Math.max(0,ms-tr.Ic()));var Zs=0;switch(isFinite(di.height)?Zs=di.height:(Zs=isFinite(Z)&&null!==G[Li.row]?0===Yu?di.actual+Z:G[Li.row]/Yu*Qi:null!==G[Li.row]?Z:di.actual||Z,Zs=Math.max(0,Zs-di.Ic())),wn.h(Math.max(tr.minimum,Math.min(ms,tr.maximum)),Math.max(di.minimum,Math.min(Zs,di.maximum))),sn=yp(Li,di,tr,!1)){case Un:wn.height=Math.max(wn.height,di.actual+Z);break;case Xn:wn.width=Math.max(wn.width,tr.actual+ot)}var Wu=Li.margin,Or=Wu.right+Wu.left,Tc=Wu.top+Wu.bottom;Li.ck(),Li.measure(wn.width,wn.height,tr.minimum,di.minimum);var Sc=Li.measuredBounds,Go=Math.max(Sc.width+Or,0),df=Math.max(Sc.height+Tc,0);isFinite(ot)&&(Go=Math.min(Go,wn.width)),isFinite(Z)&&(df=Math.min(df,wn.height));var nl=0;nl=di.actual,di.actual=Math.max(di.actual,df),di.cc=Math.max(di.cc,df),ve=di.actual-nl,Z=Math.max(Z-ve,0),null===G[Li.row]&&(Qi=Math.max(Qi-ve,0)),nl=tr.actual,tr.actual=Math.max(tr.actual,Go),tr.cc=Math.max(tr.cc,Go),ve=tr.actual-nl,ot=Math.max(ot-ve,0),null===L[Li.column]&&(mg=Math.max(mg-ve,0))}}ee(j);var Ea=Dt.alloc(),Js=Lt(),qs=Lt();if(0!==(u=F.length))for(var il=0;il<Mt;il++)if(k[il]){Pt=k[il].length;var Ku=t.getRowDefinition(il);Js[il]=Ku.actual;for(var Pa=0;Pa<Pt;Pa++)if(k[il][Pa]){var Wy=t.getColumnDefinition(Pa);qs[Pa]=Wy.actual}}for(var Yi=0;Yi<u;Yi++){var Oe=F[Yi];if(Oe.visible||Oe===Ho){var Wi=t.getRowDefinition(Oe.row),Qs=t.getColumnDefinition(Oe.column);switch(wn.h(Math.max(Qs.minimum,Math.min(e,Qs.maximum)),Math.max(Wi.minimum,Math.min(n,Wi.maximum))),sn=yp(Oe,Wi,Qs,!1)){case Ge:0!==qs[Qs.index]&&(wn.width=Math.min(wn.width,qs[Qs.index])),0!==Js[Wi.index]&&(wn.height=Math.min(wn.height,Js[Wi.index]));break;case Un:0!==qs[Qs.index]&&(wn.width=Math.min(wn.width,qs[Qs.index]));break;case Xn:0!==Js[Wi.index]&&(wn.height=Math.min(wn.height,Js[Wi.index]))}isFinite(Qs.width)&&(wn.width=Qs.width),isFinite(Wi.height)&&(wn.height=Wi.height),Ea.h(0,0);for(var rl=Qs.minimum,ff=Wi.minimum,ol=1;ol<Oe.rowSpan&&!(Oe.row+ol>=t.rowCount);ol++)Y=t.getRowDefinition(Oe.row+ol),ve=0,ve=sn===Ge||sn===Xn?Math.max(Y.minimum,0===Js[Oe.row+ol]?Y.maximum:Math.min(Js[Oe.row+ol],Y.maximum)):Math.max(Y.minimum,isNaN(Y.Bd)?Y.maximum:Math.min(Y.Bd,Y.maximum)),Ea.height+=ve,ff+=Y.minimum;for(var oo=1;oo<Oe.columnSpan&&!(Oe.column+oo>=t.columnCount);oo++)Y=t.getColumnDefinition(Oe.column+oo),ve=0,ve=sn===Ge||sn===Un?Math.max(Y.minimum,0===qs[Oe.column+oo]?Y.maximum:Math.min(qs[Oe.column+oo],Y.maximum)):Math.max(Y.minimum,isNaN(Y.Bd)?Y.maximum:Math.min(Y.Bd,Y.maximum)),Ea.width+=ve,rl+=Y.minimum;wn.width+=Ea.width,wn.height+=Ea.height;var sl=Oe.margin,Nc=sl.right+sl.left,al=sl.top+sl.bottom;Oe.measure(wn.width,wn.height,rl,ff);for(var kc=Oe.measuredBounds,so=Math.max(kc.width+Nc,0),ys=Math.max(kc.height+al,0),Aa=0,Oa=0;Oa<Oe.rowSpan&&!(Oe.row+Oa>=t.rowCount);Oa++)Aa+=(Y=t.getRowDefinition(Oe.row+Oa)).total||0;if(Aa<ys){var Uo=ys-Aa,vs=ys-Aa;if(null!==Oe.spanAllocation)for(var wg=Oe.spanAllocation,ta=0;ta<Oe.rowSpan&&!(0>=Uo)&&!(Oe.row+ta>=t.rowCount);ta++){var _g=(Y=t.getRowDefinition(Oe.row+ta)).la||0,g1=wg(Oe,Y,vs);Y.actual=Math.min(Y.maximum,_g+g1),Y.la!==_g&&(Uo-=Y.la-_g)}for(;0<Uo;){var ao=Y.la||0;if(isNaN(Y.height)&&Y.maximum>ao&&(Y.actual=Math.min(Y.maximum,ao+Uo),Y.la!==ao&&(Uo-=Y.la-ao)),0===Y.index)break;Y=t.getRowDefinition(Y.index-1)}}for(var Xu=0,an=0;an<Oe.columnSpan&&!(Oe.column+an>=t.columnCount);an++)Xu+=(Y=t.getColumnDefinition(Oe.column+an)).total||0;if(Xu<so){var Ec=so-Xu,Ex=so-Xu;if(null!==Oe.spanAllocation)for(var gM=Oe.spanAllocation,xg=0;xg<Oe.columnSpan&&!(0>=Ec)&&!(Oe.column+xg>=t.columnCount);xg++){var Px=(Y=t.getColumnDefinition(Oe.column+xg)).la||0,mM=gM(Oe,Y,Ex);Y.actual=Math.min(Y.maximum,Px+mM),Y.la!==Px&&(Ec-=Y.la-Px)}for(;0<Ec;){var ll=Y.la||0;if(isNaN(Y.width)&&Y.maximum>ll&&(Y.actual=Math.min(Y.maximum,ll+Ec),Y.la!==ll&&(Ec-=Y.la-ll)),0===Y.index)break;Y=t.getColumnDefinition(Y.index-1)}}}}ee(F),Dt.free(Ea),Dt.free(wn),void 0!==Js&&ee(Js),void 0!==qs&&ee(qs);var Pc=0,ea=0,_n=t.desiredSize,Ax=t.maxSize;sn=Io(t,!0);var Ky=Ks=Ws=0,Ac=0;u=t.columnCount;for(var zo=0;zo<u;zo++)void 0!==t.ib[zo]&&(Y=t.getColumnDefinition(zo),isFinite(Y.width)?(Ky+=Y.width,Ky+=Y.Ic()):Tp(Y)===Np?(Ky+=Y.la,Ky+=Y.Ic()):0!==Y.la&&(Ws+=Y.la,Ws+=Y.Ic()));Pc=isFinite(_n.width)?Math.min(_n.width,Ax.width):sn!==ze&&isFinite(e)?e:Ws,Pc=Math.max(Pc,t.minSize.width),Pc=Math.max(Pc-Ky,0);for(var yM=0===Ws?1:Math.max(Pc/Ws,1),Xy=0;Xy<u;Xy++)void 0!==t.ib[Xy]&&(Y=t.getColumnDefinition(Xy),isFinite(Y.width)||Tp(Y)===Np||(Y.actual=Y.la*yM),Y.position=a.width,0!==Y.la&&(a.width+=Y.la,a.width+=Y.Ic()));u=t.rowCount;for(var Zy=0;Zy<u;Zy++)void 0!==t.ob[Zy]&&(Y=t.getRowDefinition(Zy),isFinite(Y.height)?(Ac+=Y.height,Ac+=Y.Ic()):Tp(Y)===Np?(Ac+=Y.la,Ac+=Y.Ic()):0!==Y.la&&(Ks+=Y.la,0!==Y.la&&(Ks+=Y.Ic())));ea=isFinite(_n.height)?Math.min(_n.height,Ax.height):sn!==ze&&isFinite(n)?n:Ks,ea=Math.max(ea,t.minSize.height),ea=Math.max(ea-Ac,0);for(var Dg=0===Ks?1:Math.max(ea/Ks,1),Jy=0;Jy<u;Jy++)void 0!==t.ob[Jy]&&(Y=t.getRowDefinition(Jy),isFinite(Y.height)||Tp(Y)===Np||(Y.actual=Y.la*Dg),Y.position=a.height,0!==Y.la&&(a.height+=Y.la,0!==Y.la&&(a.height+=Y.Ic())));u=f.length;for(var bg=0;bg<u;bg++){var Ir=f[bg],Oc=0,m1=0;Ir.type===W.TableRow?(Oc=a.width,m1=(Y=t.getRowDefinition(Ir.row)).actual):(Oc=(Y=t.getColumnDefinition(Ir.column)).actual,m1=a.height),Ir.measuredBounds.h(0,0,Oc,m1),hr(Ir,!1),k[Ir.row]||(k[Ir.row]=[]),k[Ir.row][Ir.column]||(k[Ir.row][Ir.column]=[]),k[Ir.row][Ir.column].push(Ir)}ee(f),t.cp=k},Cm.prototype.arrange=function(t,e,n){var s=e.length,a=t.padding,u=a.left;a=a.top;for(var f,p,c=t.cp,g=c.length,y=0,v=0;v<g;v++)c[v]&&(y=Math.max(y,c[v].length));for(v=Math.min(t.topIndex,g-1);v!==g&&(void 0===t.ob[v]||0===t.ob[v].la);)v++;for(v=Math.min(v,g-1),v=-t.ob[v].position,f=Math.min(t.leftIndex,y-1);f!==y&&(void 0===t.ib[f]||0===t.ib[f].la);)f++;f=Math.min(f,y-1);for(var _=-t.ib[f].position,b=Dt.alloc(),D=0;D<g;D++)if(c[D]){y=c[D].length;var k=t.getRowDefinition(D);p=k.position+v+a,0!==k.la&&(p+=k.Ku());for(var O=0;O<y;O++)if(c[D][O]){var E=t.getColumnDefinition(O);f=E.position+_+u,0!==E.la&&(f+=E.Ku());for(var R=c[D][O],F=R.length,j=0;j<F;j++){var L=R[j],G=L.measuredBounds,ot=L instanceof W?L:null;if(null===ot||ot.type!==W.TableRow&&ot.type!==W.TableColumn){b.h(0,0);for(var Z=1;Z<L.rowSpan&&!(D+Z>=t.rowCount);Z++)ot=t.getRowDefinition(D+Z),b.height+=ot.total;for(Z=1;Z<L.columnSpan&&!(O+Z>=t.columnCount);Z++)ot=t.getColumnDefinition(O+Z),b.width+=ot.total;var ut=E.la+b.width,et=k.la+b.height;Z=f,ot=p;var Y=ut,At=et,Mt=f,Pt=p,ke=ut,un=et;f+ut>n.width&&(ke=Math.max(n.width-f,0)),p+et>n.height&&(un=Math.max(n.height-p,0));var ye=L.alignment;if(ye.Nb()){(ye=t.defaultAlignment).hb()||(ye=Ut);var ve=ye.x,Ho=ye.y,xi=ye.offsetX;ye=ye.offsetY;var Di=E.alignment,hn=k.alignment;Di.hb()&&(ve=Di.x,xi=Di.offsetX),hn.hb()&&(Ho=hn.y,ye=hn.offsetY)}else ve=ye.x,Ho=ye.y,xi=ye.offsetX,ye=ye.offsetY;(isNaN(ve)||isNaN(Ho))&&(Ho=ve=.5,ye=xi=0),Di=G.width,hn=G.height;var gs=L.margin,vc=gs.left+gs.right,wc=gs.top+gs.bottom,Vo=yp(L,k,E,!1);!isNaN(L.desiredSize.width)||Vo!==Ge&&Vo!==Un||(Di=Math.max(ut-vc,0)),!isNaN(L.desiredSize.height)||Vo!==Ge&&Vo!==Xn||(hn=Math.max(et-wc,0)),ut=L.maxSize,et=L.minSize,Di=Math.min(ut.width,Di),hn=Math.min(ut.height,hn),Di=Math.max(et.width,Di),hn=Math.max(et.height,hn),Z+=Y*ve-(Di+vc)*ve+xi+gs.left,ot+=At*Ho-(ut=hn+wc)*Ho+ye+gs.top,L.visible&&(Br(Mt,Pt,ke,un,Z,ot,G.width,G.height)?L.arrange(Z,ot,Di,hn):L.arrange(Z,ot,Di,hn,new z(Mt,Pt,ke,un)))}else L.dl(),L.actualBounds.ea(),Z=z.allocAt((Y=L.actualBounds).x,Y.y,Y.width,Y.height),Y.x=ot.type===W.TableRow?u:f,Y.y=ot.type===W.TableColumn?a:p,Y.width=G.width,Y.height=G.height,L.actualBounds.freeze(),Al(L,!1),Rw(Z,Y)||null!==(G=L.part)&&(G.Gh(),L.Eo(G)),z.free(Z)}}}for(Dt.free(b),t=0;t<s;t++)null===(u=(n=e[t])instanceof W?n:null)||u.type!==W.TableRow&&u.type!==W.TableColumn||(u=n.actualBounds,n.naturalBounds.ea(),n.naturalBounds.h(0,0,u.width,u.height),n.naturalBounds.freeze())},Wt(Tm,Ke),Tm.prototype.measure=function(){},Tm.prototype.arrange=function(){},Wt(xp,Ke),xp.prototype.measure=function(){},xp.prototype.arrange=function(){},Wt(Sm,Ke),Sm.prototype.measure=function(t,e,n,s,a,u,c){1<s.length&&q("Viewbox Panel cannot contain more than one GraphObject."),(s=s[0]).sa=1,s.ck(),s.measure(1/0,1/0,u,c);var f=s.measuredBounds,p=s.margin,g=p.right+p.left;if(p=p.top+p.bottom,isFinite(e)||isFinite(n)){var y=s.scale,v=f.width;f=f.height;var _=Math.max(e-g,0),b=Math.max(n-p,0),D=1;t.viewboxStretch===Oo?0!==v&&0!==f&&(D=Math.min(_/v,b/f)):0!==v&&0!==f&&(D=Math.max(_/v,b/f)),0===D&&(D=1e-4),s.sa*=D,y!==s.scale&&(hr(s,!0),s.measure(1/0,1/0,u,c))}f=s.measuredBounds,a.width=isFinite(e)?e:Math.max(f.width+g,0),a.height=isFinite(n)?n:Math.max(f.height+p,0)},Sm.prototype.arrange=function(t,e,n){var s=(e=e[0]).measuredBounds,a=e.margin,u=Math.max(s.width+(a.right+a.left),0);a=Math.max(s.height+(a.top+a.bottom),0);var c=e.alignment;c.Nb()&&(c=t.defaultAlignment),c.hb()||(c=Ut),e.arrange(n.width*c.x-u*c.x+c.offsetX,n.height*c.y-a*c.y+c.offsetY,s.width,s.height)},Wt(Dp,Ke),Dp.prototype.measure=function(){},Dp.prototype.arrange=function(){},Dp.prototype.pc=function(t,e,n){0>=(n=t.Af()*n.scale)&&(n=1);var s=t.gridCellSize,a=s.width;s=s.height;var u=t.naturalBounds,c=t.actualBounds,f=u.width,p=u.height,g=Math.ceil(f/a),y=Math.ceil(p/s),v=t.gridOrigin,_=v.x;v=v.y,e.save(),e.beginPath(),e.rect(0,0,f,p),e.clip();for(var b=[],D=t.T.m,k=D.length,O=0;O<k;O++){var E=D[O],R=[];if(b.push(R),E.visible){var F=E.interval;if(!(0>F)){E=C_(E.figure);for(var j=0;j<k;j++)if(j!==O){var L=D[j];L.visible&&C_(L.figure)===E&&(L=L.interval)>F&&R.push(L)}}}}for(k=(D=t.T.m).length,O=0;O<k;O++){var G=D[O];if(G.visible&&(R=G.interval||1,!(2>a*(E=Math.abs(R))*n))){if(F=G.segmentIndex,(!isFinite(F)||isNaN(F))&&(F=0),0>F&&(F=E-Math.min(-F,E)),F=Math.round(F%E),j=1,1!==(E=G.opacity)){if(0===E)continue;e.globalAlpha=(j=e.globalAlpha)*E}L=b[O];var ot=!1,Z=G.strokeDashArray;if(null!==Z&&(ot=!0,e.os(Z,G.strokeDashOffset)),"LineV"===G.figure&&null!==G.stroke&&0<G.strokeWidth){for(e.lineWidth=G.strokeWidth,Tr(t,e,G.stroke,!1,!1,u,c),e.beginPath(),Z=G=Math.floor((_-a)/a);Z<=G+g;Z++){var ut=Z*a+_;0<=ut&&ut<=f&&Nm(Z,R,F,L)&&(e.moveTo(ut,0),e.lineTo(ut,p))}e.stroke()}else if("LineH"===G.figure&&null!==G.stroke&&0<G.strokeWidth){for(e.lineWidth=G.strokeWidth,Tr(t,e,G.stroke,!1,!1,u,c),e.beginPath(),Z=G=Math.floor((v-s)/s);Z<=G+y;Z++)0<=(ut=Z*s+v)&&ut<=p&&Nm(Z,R,F,L)&&(e.moveTo(0,ut),e.lineTo(f,ut));e.stroke()}else if("BarV"===G.figure&&null!==G.fill)for(Tr(t,e,G.fill,!0,!1,u,c),G=G.width,isNaN(G)&&(G=a),ut=Z=Math.floor((_-a)/a);ut<=Z+g;ut++){var et=ut*a+_;0<=et+G&&et<=f&&Nm(ut,R,F,L)&&e.fillRect(et,0,G,p)}else if("BarH"===G.figure&&null!==G.fill)for(Tr(t,e,G.fill,!0,!1,u,c),G=G.height,isNaN(G)&&(G=s),ut=Z=Math.floor((v-s)/s);ut<=Z+y;ut++)0<=(et=ut*s+v)+G&&et<=p&&Nm(ut,R,F,L)&&e.fillRect(0,et,f,G);ot&&e.ms(),1!==E&&(e.globalAlpha=j)}}e.restore(),e.Hc(!1)},Wt(bp,Ke),bp.prototype.measure=function(t,e,n,s,a){if(n=s.length,t instanceof Rt||t instanceof K){var u=null,c=null,f=null;if(t instanceof K&&(c=u=t),t instanceof Rt&&(u=(f=t).adornedPart),u instanceof K){var p=u;if(0===n)La(t.naturalBounds,0,0),t.measuredBounds.h(0,0,0,0);else{var g=t instanceof Rt?null:u.path,y=u.routeBounds;(e=t.jg).h(0,0,y.width,y.height);var v=p.points;u=u.pointsCount,null!==f?f.hk(!1):null!==c&&c.hk(!1);var _=y.width,b=y.height;t.location.h(y.x,y.y),t.j.length=0,null!==g&&(fv(t,_,b,g),e.Qc(f=g.measuredBounds),t.j.push(f)),f=Et.alloc();for(var D=A.alloc(),k=A.alloc(),O=0;O<n;O++){var E=s[O];if(E!==g)if(E.isPanelMain&&E instanceof bt){fv(t,_,b,E);var R=E.measuredBounds;e.Qc(R),t.j.push(R)}else if(2>u)E.measure(1/0,1/0,0,0),e.Qc(R=E.measuredBounds),t.j.push(R);else{var F=E.segmentIndex,j=E.segmentFraction,L=E.alignmentFocus;L.Bc()&&(L=Ut);var G=E.segmentOrientation,ot=E.segmentOffset;if(isNaN(F)){var Z=p.ma;R=Lt(),Z.bv(j,R);var ut=A.allocAt(R[0],R[1]);if(ut.add(p.i(0)),Z.type===rt.j||(Z=Z.figures.first()),ut.offset(-Z.startX,-Z.startY),Z=R[2],G!==Ii){var et=p.computeAngle(E,G,Z);E.zb=et}et=ut.x-y.x;var Y=ut.y-y.y;A.free(ut),ee(R)}else if(F<-u||F>=u)R=A.alloc(),p.vg(),p.computeMidPoint(R),Z=p.midAngle,G!==Ii&&(et=p.computeAngle(E,G,Z),E.zb=et),et=R.x-y.x,Y=R.y-y.y,A.free(R);else{if(et=0,0<=F?(Y=v.J(F),R=F<u-1?v.J(F+1):Y):(Y=v.J(et=u+F),R=0<et?v.J(et-1):Y),Y.Ua(R)){0<=F?(Z=0<F?v.J(F-1):Y,et=F<u-2?v.J(F+2):R):(Z=et<u-1?v.J(et+1):Y,et=1<et?v.J(et-2):R),ut=Z.xf(Y);var At=R.xf(et);Z=ut>At+10?0<=F?Z.Pa(Y):Y.Pa(Z):At>ut+10?0<=F?R.Pa(et):et.Pa(R):0<=F?Z.Pa(et):et.Pa(Z)}else Z=0<=F?Y.Pa(R):R.Pa(Y);G!==Ii&&(et=p.computeAngle(E,G,Z),E.zb=et),et=Y.x+(R.x-Y.x)*j-y.x,Y=Y.y+(R.y-Y.y)*j-y.y}E.measure(1/0,1/0,0,0),R=E.measuredBounds;var Mt=0;E instanceof bt&&(Mt=E.strokeWidth),At=(ut=E.naturalBounds).width+Mt;var Pt=ut.height+Mt;f.reset(),f.translate(-R.x,-R.y),f.scale(E.scale,E.scale),f.rotate(G===Ii?E.angle:Z,At/2,Pt/2),G!==Hd&&G!==Kh||f.rotate(90,At/2,Pt/2),G!==Vd&&G!==Yp||f.rotate(-90,At/2,Pt/2),G===sy&&(45<Z&&135>Z||225<Z&&315>Z)&&f.rotate(-Z,At/2,Pt/2),ut=new z(0,0,At,Pt),D.Ti(ut,L),f.Aa(D),L=Mt/2*E.scale-D.x,E=Mt/2*E.scale-D.y,k.assign(ot),Mt=isNaN(ot.x);var ke=isNaN(ot.y);if(Mt||ke){At=At/2+3,Pt=Pt/2+3;var un=45<=Z&&135>=Z,ye=225<=Z&&315>=Z;G===Ii&&(un||ye)?(k.x=ke?At:ot.y,k.y=Mt?Pt:ot.x,un?0<=F||isNaN(F)&&.5>j||!Mt||(k.y=-Pt):ye&&((0<=F||isNaN(F)&&.5>j)&&Mt&&(k.y=-Pt),ke&&(k.x=-At))):(Mt&&(k.x=0<=F||isNaN(F)&&.5>j?At:-At),ke&&(k.y=-Pt),k.rotate(Z))}else k.rotate(Z);et+=k.x,Y+=k.y,ut.set(R),ut.h(et+L,Y+E,R.width,R.height),t.j.push(ut),e.Qc(ut)}}if(null!==c)for(s=c.labelNodes;s.next();)s.value.measure(1/0,1/0);t.jg=e,(t=t.location).h(t.x+e.x,t.y+e.y),La(a,e.width||0,e.height||0),Et.free(f),A.free(D),A.free(k)}}}},bp.prototype.arrange=function(t,e){var n=e.length;if(t instanceof Rt||t instanceof K){var s=null,a=null,u=null;t instanceof K&&(a=s=t),t instanceof Rt&&(s=(u=t).adornedPart);var c=t instanceof Rt?null:s.path;if(0!==t.j.length){var f=t.j,p=0;if(null!==c&&p<t.j.length){var g=f[p];p++,c.arrange(g.x-t.jg.x,g.y-t.jg.y,g.width,g.height)}for(g=0;g<n;g++){var y=e[g];if(y!==c&&p<t.j.length){var v=f[p];p++,y.arrange(v.x-t.jg.x,v.y-t.jg.y,v.width,v.height)}}}if(2<=(n=(e=s.points).count)&&t instanceof K)for(s=t.labelNodes;s.next();){var _=t;f=(c=s.value).segmentIndex,p=c.segmentFraction;var b=c.alignmentFocus;if(g=c.segmentOrientation,y=c.segmentOffset,isNaN(f)){v=_.ma;var D=Lt();v.bv(p,D);var k=A.allocAt(D[0],D[1]);k.add(_.i(0)),v.type===rt.j||(v=v.figures.first()),k.offset(-v.startX,-v.startY),v=D[2],g!==Ii&&(_=_.computeAngle(c,g,v),c.angle=_),_=k.x;var O=k.y;A.free(k),ee(D)}else if(f<-n||f>=n)O=D=A.alloc(),(v=_).vg(),v.computeMidPoint(O),v=_.midAngle,g!==Ii&&(_=_.computeAngle(c,g,v),c.angle=_),_=D.x,O=D.y,A.free(D);else{if(k=0,0<=f?(D=e.m[f],O=f<n-1?e.m[f+1]:D):(D=e.m[k=n+f],O=0<k?e.m[k-1]:D),D.Ua(O)){0<=f?(v=0<f?e.m[f-1]:D,k=f<n-2?e.m[f+2]:O):(v=k<n-1?e.m[k+1]:D,k=1<k?e.m[k-2]:O);var E=v.xf(D),R=O.xf(k);v=E>R+10?0<=f?v.Pa(D):D.Pa(v):R>E+10?0<=f?O.Pa(k):k.Pa(O):0<=f?v.Pa(k):k.Pa(v)}else v=0<=f?D.Pa(O):O.Pa(D);g!==Ii&&(_=_.computeAngle(c,g,v),c.angle=_),_=D.x+(O.x-D.x)*p,O=D.y+(O.y-D.y)*p}if(b.Es())c.location=new A(_,O);else{b.Bc()&&(b=Ut),(D=Et.alloc()).reset(),D.scale(c.scale,c.scale),D.rotate(c.angle,0,0);var F=c.naturalBounds;k=z.allocAt(0,0,F.width,F.height),(E=A.alloc()).Ti(k,b),D.Aa(E),b=-E.x,R=-E.y;var j=F.width,L=F.height;(F=A.alloc()).assign(y);var G=isNaN(y.x),ot=isNaN(y.y);if(G||ot){j=j/2+3,L=L/2+3;var Z=45<=v&&135>=v,ut=225<=v&&315>=v;g===Ii&&(Z||ut)?(F.x=ot?j:y.y,F.y=G?L:y.x,Z?0<=f||isNaN(f)&&.5>p||!G||(F.y=-L):ut&&((0<=f||isNaN(f)&&.5>p)&&G&&(F.y=-L),ot&&(F.x=-j))):(G&&(F.x=0<=f||isNaN(f)&&.5>p?j:-j),ot&&(F.y=-L),F.rotate(v))}else F.rotate(v);_+=F.x,O+=F.y,D.xq(k),f=A.allocAt(_+(b+=k.x),O+(R+=k.y)),c.move(f),A.free(f),A.free(F),A.free(E),z.free(k),Et.free(D)}}null!==u?u.hk(!1):null!==a&&a.hk(!1)}},Wt(Mp,Ke),Mp.prototype.measure=function(t,e,n,s,a,u,c){var f=t.pb();t.Qg=[];var p=f.margin,g=p.right+p.left,y=p.top+p.bottom;f.measure(e,n,u,c);var v=f.measuredBounds,_=new z(-p.left,-p.top,Math.max(v.width+g,0),Math.max(v.height+y,0));t.Qg.push(_),a.assign(_);for(var b=f.geometry,D=f.strokeWidth,k=b.flattenedSegments,O=b.flattenedLengths,E=b.flattenedTotalLength,R=k.length,F=0,j=0,L=Lt(),G=0;G<R;G++){var ot=k[G],Z=[];j=F=0;for(var ut=ot.length,et=0;et<ut;et+=2){var Y=ot[et],At=ot[et+1];if(0!==et){var Mt=180*Math.atan2(At-j,Y-F)/Math.PI;0>Mt&&(Mt+=360),Z.push(Mt)}F=Y,j=At}L.push(Z)}if(null===t.Rf){for(var Pt=[],ke=t.T.m,un=ke.length,ye=0;ye<un;ye++){var ve=ke[ye],Ho=[];if(Pt.push(Ho),ve.visible){var xi=ve.interval;if(!(0>xi))for(var Di=0;Di<un;Di++)if(Di!==ye){var hn=ke[Di];if(hn.visible&&ve.constructor===hn.constructor){var gs=hn.interval;gs>xi&&Ho.push(gs)}}}}t.Rf=Pt}var vc=t.Rf,wc=t.T.m,Vo=wc.length,hi=0,hf=0,_c=E;t.kj=[];for(var Xl,xc=0;xc<Vo;xc++){var sn=wc[xc];if(Xl=[],sn.visible&&sn!==f){var cf=Math.abs(sn.interval),zy=t.graduatedTickUnit;if(!(2>zy*cf*E/t.graduatedRange)){var Na=O[0][0],mr=0,qi=0;hf=E*sn.graduatedStart-1e-4,_c=E*sn.graduatedEnd+1e-4;var zu=zy*cf,yr=t.graduatedTickBase;if(yr<t.graduatedMin){var $u=(t.graduatedMin-yr)/zu;yr+=($u=$u%1==0?$u:Math.floor($u+1))*zu}else yr>t.graduatedMin+zu&&(yr-=Math.floor((yr-t.graduatedMin)/zu)*zu);for(var Dc=vc[xc],$y=yr,Ws=1;yr<t.graduatedMax+5e-8;Ws++){t:{for(var Ks=Dc.length,bc=0;bc<Ks;bc++)if(V.aa((yr-t.graduatedTickBase)%(Dc[bc]*t.graduatedTickUnit),0)){var Mc=!1;break t}Mc=!0}if(Mc&&(null===sn.graduatedSkip||!sn.graduatedSkip(yr))&&((hi=(yr-t.graduatedMin)*E/t.graduatedRange)>E&&(hi=E),hf<=hi&&hi<=_c)){for(var Bo=L[mr][qi],tl=O[mr][qi];mr<O.length;){for(;hi>Na&&qi<O[mr].length-1;)qi++,Bo=L[mr][qi],Na+=tl=O[mr][qi];if(hi<=Na)break;Bo=L[++mr][qi=0],Na+=tl=O[mr][qi]}var Qi=k[mr],mg=Qi[2*qi],Cc=Qi[2*qi+1],vr=(hi-(Na-tl))/tl,yg=new A(mg+(Qi[2*qi+2]-mg)*vr+D/2-b.bounds.x,Cc+(Qi[2*qi+3]-Cc)*vr+D/2-b.bounds.y);yg.scale(f.scale,f.scale);var ka=Bo,el=L[mr];if(1e-4>vr?0<qi?ka=el[qi-1]:V.aa(Qi[0],Qi[Qi.length-2])&&V.aa(Qi[1],Qi[Qi.length-1])&&(ka=el[el.length-1]):.9999<vr&&(qi+1<el.length?ka=el[qi+1]:V.aa(Qi[0],Qi[Qi.length-2])&&V.aa(Qi[1],Qi[Qi.length-1])&&(ka=el[0])),Bo!==ka&&(180<Math.abs(Bo-ka)&&(Bo<ka?Bo+=360:ka+=360),Bo=(Bo+ka)/2%360),sn instanceof Jt){var Ar="";""!==(Ar=null!==sn.graduatedFunction?null!=(Ar=sn.graduatedFunction(yr))?Ar.toString():"":(+yr.toFixed(2)).toString())&&Xl.push({lm:yg,angle:Bo,text:Ar})}else Xl.push({lm:yg,angle:Bo})}yr=$y+Ws*zu}}}t.kj.push(Xl)}ee(L);var Yy=t.kj;if(null!==Yy)for(var p1=s.length,Yu=0;Yu<p1;Yu++){var ci=s[Yu],Xs=Yy[Yu];if(ci.visible&&ci!==f&&0!==Xs.length){if(ci instanceof bt){var wn=t,vg=a,Li=ci.alignmentFocus;Li.Bc()&&(Li=Yn);var di=ci.angle;ci.zb=0,ci.measure(1/0,1/0,0,0),ci.zb=di;var tr=ci.measuredBounds,ms=tr.width,Zs=tr.height,Wu=z.allocAt(0,0,ms,Zs),Or=A.alloc();Or.Ti(Wu,Li),z.free(Wu);for(var Tc=-Or.x,Sc=-Or.y,Go=new z,df=Xs.length,nl=0;nl<df;nl++)for(var Ea=Xs[nl],Js=Ea.lm.x,qs=Ea.lm.y,il=Ea.angle,Ku=0;4>Ku;Ku++){switch(Ku){case 0:Or.h(Tc,Sc);break;case 1:Or.h(Tc+ms,Sc);break;case 2:Or.h(Tc,Sc+Zs);break;case 3:Or.h(Tc+ms,Sc+Zs)}Or.rotate(il+ci.angle),Or.offset(Js,qs),0===nl&&0===Ku?Go.h(Or.x,Or.y,0,0):Go.Oe(Or),Or.offset(-Js,-qs),Or.rotate(-il-ci.angle)}A.free(Or),null!==wn.Qg&&wn.Qg.push(Go),mn(vg,Go.x,Go.y,Go.width,Go.height)}else if(ci instanceof Jt){var Pa=t,Wy=a;null===Pa.qh&&(Pa.qh=new Jt);var Yi=Pa.qh;Hm(Yi,ci);var Oe=ci.alignmentFocus;Oe.Bc()&&(Oe=Yn);for(var Wi=ci.segmentOrientation,Qs=ci.segmentOffset,rl=new z,ff=0,ol=0,oo=0,sl=0,Nc=0,al=Xs.length,kc=0;kc<al;kc++){var so=Xs[kc];ff=so.lm.x,ol=so.lm.y,oo=so.angle,Nc=sl=ci.angle,Wi!==Ii&&(sl=K.computeAngle(Wi,Nc=Wi===$p||Wi===us?oo+ci.angle:oo)),Yi.zb=sl,Yi.text=so.text||"",Yi.measure(1/0,1/0,0,0);var ys=Yi.measuredBounds,Aa=Yi.naturalBounds,Oa=Aa.width,Uo=Aa.height,vs=Et.alloc();vs.reset(),vs.translate(-ys.x,-ys.y),vs.scale(Yi.scale,Yi.scale),vs.rotate(Nc,Oa/2,Uo/2),Wi!==Hd&&Wi!==Kh||vs.rotate(90,Oa/2,Uo/2),Wi!==Vd&&Wi!==Yp||vs.rotate(-90,Oa/2,Uo/2),Wi===sy&&(45<oo&&135>oo||225<oo&&315>oo)&&vs.rotate(-oo,Oa/2,Uo/2);var wg=z.allocAt(0,0,Oa,Uo),ta=A.alloc();ta.Ti(wg,Oe),vs.Aa(ta);var _g=-ta.x,g1=-ta.y,ao=A.alloc();ao.assign(Qs),isNaN(ao.x)&&(ao.x=Oa/2+3),isNaN(ao.y)&&(ao.y=-(Uo/2+3)),ao.rotate(oo);var Xu=new z(ff+=ao.x+_g,ol+=ao.y+g1,ys.width,ys.height),an=new z(ys.x,ys.y,ys.width,ys.height),Ec=new z(Aa.x,Aa.y,Aa.width,Aa.height);so.pA=sl,so.lineCount=Yi.lineCount,so.lines=[Yi.sb,Yi.ei,Yi.re,Yi.Ce,Yi.Dc,Yi.Tb,Yi.pe],so.actualBounds=Xu,so.measuredBounds=an,so.naturalBounds=Ec,0===kc?rl.assign(Xu):rl.Qc(Xu),A.free(ao),A.free(ta),z.free(wg),Et.free(vs)}null!==Pa.Qg&&Pa.Qg.push(rl),mn(Wy,rl.x,rl.y,rl.width,rl.height)}hr(ci,!1)}}},Mp.prototype.arrange=function(t,e,n){if(null!==t.Qg){var s=t.pb(),a=t.kj;if(null!==a){var u=t.Qg,c=0,f=u[c];c++,null!==s&&s.arrange(f.x-n.x,f.y-n.y,f.width,f.height);for(var p=e.length,g=0;g<p;g++){var y=e[g];f=a[g],y.visible&&y!==s&&0!==f.length&&(f=u[c],c++,y.arrange(f.x-n.x,f.y-n.y,f.width,f.height))}t.Qg=null}}},Mp.prototype.pc=function(t,e,n){var s=n.pj;n.pj=!0;var a=t.naturalBounds,u=a.width;a=a.height,e.save(),e.beginPath(),e.rect(-1,-1,u+1,a+1),e.clip(),(u=t.pb()).pc(e,n),0>=(a=t.Af()*n.scale)&&(a=1);for(var c=u.actualBounds,f=t.T.m,p=t.kj,g=f.length,y=0;y<g;y++){var v=f[y],_=p[y],b=_.length;if(v.visible&&v!==u&&0!==_.length)if(v instanceof bt){if(!(2>t.graduatedTickUnit*v.interval*u.geometry.flattenedTotalLength/t.graduatedRange*a)){var D=v.measuredBounds,k=v.strokeWidth*v.scale,O=v.alignmentFocus;O.Bc()&&(O=Yn);for(var E=0;E<b;E++){var R=_[E].lm,F=_[E].angle,j=O,L=v.vb;L.reset(),L.translate(R.x+c.x,R.y+c.y),L.rotate(F+v.angle,0,0),L.translate(-D.width*j.x+j.offsetX+k/2,-D.height*j.y+j.offsetY+k/2),L.scale(v.scale,v.scale),Ah(v,!1),v.Nh.set(v.vb),v.Sk=v.scale,ur(v,!1),v.pc(e,n),v.vb.reset()}}}else if(v instanceof Jt)for(null===t.qh&&(t.qh=new Jt),Hm(D=t.qh,v),v=0;v<b;v++)(k=_[v]).actualBounds&&k.measuredBounds&&k.naturalBounds&&(D.Xb=k.text||"",D.zb=k.pA||0,D.Xc=k.lineCount||0,void 0!==(O=k.lines)&&(D.sb=O[0],D.ei=O[1],D.re=O[2],D.Ce=O[3],D.Dc=O[4],D.Tb=O[5],D.pe=O[6]),k.naturalBounds&&(D.wc=k.naturalBounds),k.actualBounds&&D.arrange((O=k.actualBounds).x,O.y,O.width,O.height),D.arrange((O=k.actualBounds).x,O.y,O.width,O.height),E=k.measuredBounds,k=k.naturalBounds,(R=D.vb).reset(),R.translate(O.x+c.x,O.y+c.y),R.translate(-E.x,-E.y),D.np(R,k.x,k.y,k.width,k.height),Ah(D,!1),D.Nh.set(D.vb),D.Sk=D.scale,ur(D,!1),D.pc(e,n))}n.pj=s,e.restore(),e.Hc(!0)},Wt(W,dt),W.prototype.cloneProtected=function(t){if(dt.prototype.cloneProtected.call(this,t),t.ha=this.ha,t.nb=this.nb.I(),t.mn=this.mn.I(),t.Of=this.Of,t.ha===W.Table){t.fj=this.fj.I(),t.Hg=this.Hg,t.Wh=this.Wh,t.Vh=this.Vh,t.Gg=this.Gg,t.Fg=this.Fg,t.Uh=this.Uh;var e=[];if(0<this.ob.length)for(var n=this.ob,s=n.length,a=0;a<s;a++)if(void 0!==n[a]){var u=n[a].copy();u.Si(t),e[a]=u}if(t.ob=e,e=[],0<this.ib.length)for(s=(n=this.ib).length,a=0;a<s;a++)void 0!==n[a]&&((u=n[a].copy()).Si(t),e[a]=u);t.ib=e,t.Fj=this.Fj,t.ej=this.ej,t.vi=this.vi,t.gi=this.gi}t.Hp=this.Hp,t.Kn=this.Kn.I(),t.Ln=this.Ln.I(),t.Hn=this.Hn,t.Gn=this.Gn,t.Jn=this.Jn,t.In=this.In,t.kj=this.kj,t.Rf=this.Rf,t.jb=this.jb,t.Qh=this.Qh,t.ao=this.ao,t.ci=this.ci,t.ve=this.ve,t.hl=this.hl,t.jg.assign(this.jg),t.Re=this.Re,null!==this.cp&&(t.cp=this.cp)},W.prototype.wf=function(t){dt.prototype.wf.call(this,t),t.T=this.T;for(var e=t.T.m,n=e.length,s=0;s<n;s++)e[s].bg=t;t.ph=null},W.prototype.copy=function(){var t=dt.prototype.copy.call(this);if(null!==t){for(var e=this.T.m,n=e.length,s=0;s<n;s++){var a=e[s].copy();a.Si(t),a.Dj=null;var u=t.T,c=u.count;if(u.wb(c,a),null!==(u=t.part)){u.li=null,null!==a.portId&&u instanceof it&&(u.Je=!0);var f=t.diagram;null!==f&&f.undoManager.isUndoingRedoing||u.Wa(Ve,"elements",t,null,a,null,c)}}return t}return null},(S=W.prototype).toString=function(){return"Panel("+this.type.name+")#"+pn(this)},S.Eo=function(t){dt.prototype.Eo.call(this,t);for(var e=this.T.m,n=e.length,s=0;s<n;s++)e[s].Eo(t)},S.Ei=function(t,e){if(this.ha===W.Grid)t.Ed(),this.ha.pc(this,t,e);else if(this.ha===W.Graduated)t.Ed(),this.ha.pc(this,t,e);else{this.ha===W.Table&&(t.Ed(),t.lineCap="butt",rs(this,t,!0,this.ob,!0),rs(this,t,!1,this.ib,!0),Rh(this,t,!0,this.ob),Rh(this,t,!1,this.ib),rs(this,t,!0,this.ob,!1),rs(this,t,!1,this.ib,!1));var n=this.isClipping&&this.ha===W.Spot;n&&t.save();for(var s=this.pb(),a=this.T.m,u=a.length,c=0;c<u;c++){var f=a[c];n&&f===s&&(t.clipInsteadOfFill=!0),f.pc(t,e),n&&f===s&&(t.clipInsteadOfFill=!1)}n&&(t.restore(),t.Hc(!0))}},S.ak=function(t,e,n,s,a){var u=this.je(),c=this.transform,f=1/(c.m11*c.m22-c.m12*c.m21),p=c.m22*f,g=-c.m12*f,y=-c.m21*f,v=c.m11*f,_=f*(c.m21*c.dy-c.m22*c.dx),b=f*(c.m12*c.dx-c.m11*c.dy);if(null!==this.areaBackground)return V.Cf((c=this.actualBounds).left,c.top,c.right,c.bottom,t,e,n,s,a);if(null!==this.background)return u=t*p+e*y+_,f=t*g+e*v+b,t=n*p+s*y+_,p=n*g+s*v+b,a.h(0,0),u=V.Cf(0,0,(n=this.naturalBounds).width,n.height,u,f,t,p,a),a.transform(c),u;u||(p=1,y=g=0,v=1,b=_=0),f=t*p+e*y+_,t=t*g+e*v+b,a.h(p=n*p+s*y+_,n=n*g+s*v+b),s=(p-f)*(p-f)+(n-t)*(n-t),g=!1,b=(v=this.T.m).length,y=A.alloc(),_=null,e=1/0;var D=null,k=this.isClipping&&this.ha===W.Spot;k&&(D=A.alloc(),(g=(_=this.pb()).ak(f,t,p,n,D))&&(e=(f-D.x)*(f-D.x)+(t-D.y)*(t-D.y)));for(var O=0;O<b;O++){var E=v[O];E.visible&&E!==_&&E.ak(f,t,p,n,y)&&(g=!0,(E=(f-y.x)*(f-y.x)+(t-y.y)*(t-y.y))<s&&(s=E,a.set(y)))}return k&&(e>s&&a.set(D),A.free(D)),A.free(y),u&&a.transform(c),g},S.s=function(t){if(!mo(this)){dt.prototype.s.call(this,t),t=null,(this.ha===W.Auto||this.ha===W.Link)&&(t=this.pb());for(var e=this.T.m,n=e.length,s=0;s<n;s++){var a=e[s];if((a===t||a.isPanelMain)&&a.s(!0),!a.desiredSize.u()){var u=Io(a,!1);(a instanceof Pn||a instanceof W||a instanceof Jt||u!==ze)&&a.s(!0)}}}},S.ck=function(){if(!mo(this)){hr(this,!0),Al(this,!0);for(var t=this.T.m,e=t.length,n=0;n<e;n++)t[n].ck()}},S.dl=function(){if(0==(2048&this.G)){Ah(this,!0),ur(this,!0);for(var t=this.T.m,e=t.length,n=0;n<e;n++)t[n].jv()}},S.jv=function(){ur(this,!0);for(var t=this.T.m,e=t.length,n=0;n<e;n++)t[n].jv()},S.im=function(t,e,n,s){var a=this.jg;a.h(0,0,0,0);var u=this.desiredSize,c=this.minSize;void 0===n&&(n=c.width,s=c.height),n=Math.max(n,c.width),s=Math.max(s,c.height);var f=this.maxSize;isNaN(u.width)||(t=Math.min(u.width,f.width)),isNaN(u.height)||(e=Math.min(u.height,f.height)),t=Math.max(n,t),e=Math.max(s,e);var p=this.nb;t=Math.max(t-p.left-p.right,0),e=Math.max(e-p.top-p.bottom,0);var g=this.T.m;0!==g.length&&this.ha.measure(this,t,e,g,a,n,s),t=a.width+p.left+p.right,p=a.height+p.top+p.bottom,isFinite(u.width)&&(t=u.width),isFinite(u.height)&&(p=u.height),t=Math.min(f.width,t),p=Math.min(f.height,p),t=Math.max(c.width,t),p=Math.max(c.height,p),La(a,t=Math.max(n,t),p=Math.max(s,p)),La(this.naturalBounds,t,p),this.xe(0,0,t,p)},S.pb=function(){if(null===this.ph){var t=this.T.m,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var s=t[n];if(!0===s.isPanelMain)return this.ph=s}this.ph=t[0]}return this.ph},S.zh=function(t,e,n,s){var a=this.T.m;if(this.actualBounds.h(t,e,n,s),0!==a.length){if(!this.desiredSize.u()){t=Io(this,!0);var u=this.measuredBounds;e=u.width,u=u.height;var c=this.Vg,f=c.left+c.right;switch(c=c.top+c.bottom,e===n&&u===s&&(t=ze),t){case ze:(e>n||u>s)&&(this.s(),this.measure(e>n?n:e,u>s?s:u,0,0));break;case Ge:this.s(!0),this.measure(n+f,s+c,0,0);break;case Un:this.s(!0),this.measure(n+f,u+c,0,0);break;case Xn:this.s(!0),this.measure(e+f,s+c,0,0)}}this.ha.arrange(this,a,this.jg)}},S.Bh=function(t){var e=this.naturalBounds,n=za(this);if(Br(0,0,e.width,e.height,t.x,t.y)){for(var s=(e=this.T.m).length,a=A.allocAt(0,0);s--;){var u=e[s];if((u.visible||u===n)&&(ei(a.set(t),u.transform),u.$(a)))return A.free(a),!0}return A.free(a),!(null===this.Vb&&null===this.hd)}return!1},S.ps=function(t){if(this.Dk===t)return this;for(var e=this.T.m,n=e.length,s=0;s<n;s++){var a=e[s].ps(t);if(null!==a)return a}return null},S.Em=function(t,e){if(e(this,t),t instanceof W)for(var n=(t=t.T.m).length,s=0;s<n;s++)this.Em(t[s],e)},S.$l=function(t){return Em(this,this,t)},S.Ya=function(t){if(this.name===t)return this;var e=this.T.m,n=e.length;null===this.ci&&null===this.ve||(n=jh(this));for(var s=0;s<n;s++){var a=e[s];if(a instanceof W){var u=a.Ya(t);if(null!==u)return u}if(a.name===t)return a}return null},S.je=function(){return!(this.type===W.TableRow||this.type===W.TableColumn)},S.Zb=function(t,e,n){if(!1===this.pickable||(void 0===e&&(e=null),void 0===n&&(n=null),Sr(this)))return null;var s=this.naturalBounds,a=1/this.Af(),u=this.je(),c=u?t:ei(A.allocAt(t.x,t.y),this.transform),f=this.diagram,p=10,g=5;if(null!==f&&(g=(p=f.cm("extraTouchArea"))/2),Br(-g*a,-g*a,s.width+p*a,s.height+p*a,c.x,c.y)){if(!this.isAtomic){var y=(a=this.T.m).length;if(f=A.alloc(),g=(p=this.isClipping&&this.ha===W.Spot)?this.pb():null,p&&(g.je()?ei(f.set(t),g.transform):f.set(t),!g.$(f)))return A.free(f),u||A.free(c),null;for(var v=za(this);y--;){var _=a[y];if((_.visible||_===v)&&(_.je()?ei(f.set(t),_.transform):f.set(t),!p||_!==g)){var b=null;if(_ instanceof W?b=_.Zb(f,e,n):!0===_.pickable&&_.$(f)&&(b=_),null!==b&&(null!==e&&(b=e(b)),null!==b&&(null===n||n(b))))return A.free(f),u||A.free(c),b}}A.free(f)}return null===this.background&&null===this.areaBackground?(u||A.free(c),null):(t=Br(0,0,s.width,s.height,c.x,c.y)?this:null,u||A.free(c),t)}return u||A.free(c),null},S.Hi=function(t,e,n,s){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var a=this.naturalBounds,u=this.je(),c=u?t:ei(A.allocAt(t.x,t.y),this.transform);if(a=Br(0,0,a.width,a.height,c.x,c.y),this.type===W.TableRow||this.type===W.TableColumn||a){if(!this.isAtomic){for(var f=this.T.m,p=f.length,g=A.alloc(),y=za(this);p--;){var v=f[p];if(v.visible||v===y){v.je()?ei(g.set(t),v.transform):g.set(t);var _=v;(null!==(v=v instanceof W?v:null)?v.Hi(g,e,n,s):_.$(g))&&!1!==_.pickable&&(null!==e&&(_=e(_)),null===_||null!==n&&!n(_)||s.add(_))}}A.free(g)}return u||A.free(c),a&&(null!==this.background||null!==this.areaBackground)}return u||A.free(c),!1},S.zf=function(t,e,n,s,a,u){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var c=u;if(void 0===u&&(c=Et.alloc()).reset(),c.multiply(this.transform),this.Ah(t,c))return Pm(this,e,n,a),void 0===u&&Et.free(c),!0;if(this.Lc(t,c)){if(!this.isAtomic)for(var f=za(this),p=this.T.m,g=p.length;g--;){var y=p[g];if(y.visible||y===f){var v=y.actualBounds,_=this.naturalBounds;v.x>_.width||v.y>_.height||0>v.x+v.width||0>v.y+v.height||(v=y,y=y instanceof W?y:null,(_=Et.alloc()).set(c),(null!==y?y.zf(t,e,n,s,a,_):Ub(v,t,s,_))&&(null!==e&&(v=e(v)),null===v||null!==n&&!n(v)||a.add(v)),Et.free(_))}}return void 0===u&&Et.free(c),s}return void 0===u&&Et.free(c),!1},S.qg=function(t,e,n,s,a,u){if(!1===this.pickable)return!1;void 0===n&&(n=null),void 0===s&&(s=null);var c=this.naturalBounds,f=this.je(),p=f?t:ei(A.allocAt(t.x,t.y),this.transform),g=f?e:ei(A.allocAt(e.x,e.y),this.transform),y=p.xf(g),v=0<p.x&&p.x<c.width&&0<p.y&&p.y<c.height||gi(p.x,p.y,0,0,0,c.height)<=y||gi(p.x,p.y,0,c.height,c.width,c.height)<=y||gi(p.x,p.y,c.width,c.height,c.width,0)<=y||gi(p.x,p.y,c.width,0,0,0)<=y;if(c=p.pd(0,0)<=y&&p.pd(0,c.height)<=y&&p.pd(c.width,0)<=y&&p.pd(c.width,c.height)<=y,f||(A.free(p),A.free(g)),v){if(!this.isAtomic){p=A.alloc(),g=A.alloc(),y=za(this);for(var _=this.T.m,b=_.length;b--;){var D=_[b];if(D.visible||D===y){var k=D.actualBounds,O=this.naturalBounds;(!f||!(k.x>O.width||k.y>O.height||0>k.x+k.width||0>k.y+k.height))&&(D.je()?(k=D.transform,ei(p.set(t),k),ei(g.set(e),k)):(p.set(t),g.set(e)),k=D,(null!==(D=D instanceof W?D:null)?D.qg(p,g,n,s,a,u):k.Sx(p,g,a))&&(null!==n&&(k=n(k)),null===k||null!==s&&!s(k)||u.add(k)))}}A.free(p),A.free(g)}return a?v:c}return!1},S.add=function(t){for(var e=[],n=0;n<arguments.length;++n)e[n]=arguments[n];for(n=0;n<e.length;n++)this.wb(this.T.count,e[n]);return this},S.J=function(t){return this.T.J(t)},S.wb=function(t,e){e instanceof ft&&q("Cannot add a Part to a Panel: "+e+"; use a Panel instead"),(this===e||this.sg(e))&&(this===e&&q("Cannot make a Panel contain itself: "+this.toString()),q("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+e.toString()));var n=e.panel;if(null!==n&&n!==this&&q("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+e.toString()+", already contained by "+n.toString()+", cannot be shared by this Panel: "+this.toString()),this.ha!==W.Grid||e instanceof bt||q("Can only add Shapes to a Grid Panel, not: "+e),this.ha!==W.Graduated||e instanceof bt||e instanceof Jt||q("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+e),e.Si(this),e.Dj=null,null!==this.itemArray){var s=e.data;null!==s&&"object"==typeof s&&(null===this.$d&&(this.$d=new xt),this.$d.add(s,e))}var a=this.T;if(s=-1,n===this){for(var u=-1,c=this.T.m,f=c.length,p=0;p<f;p++)if(c[p]===e){u=p;break}if(-1!==u){if(u===t||u+1>=a.count&&t>=a.count)return;a.eb(u),s=u}else q("element "+e.toString()+" has panel "+n.toString()+" but is not contained by it.")}(0>t||t>a.count)&&(t=a.count),a.wb(t,e),(0===t||e.isPanelMain)&&(this.ph=null),mo(this)||this.s(),e.s(!1),(null!==e.portId||e instanceof W&&!0===e.Je)&&(this.Je=!0),this.Rf=null,this.Ef()||Lm(this,e,!1),null!==(n=this.part)&&(n.li=null,n.Xf=NaN,this.Je&&n instanceof it&&(n.Je=!0),n.Je&&n instanceof it&&(n.oc=null),null!==(a=this.diagram)&&a.undoManager.isUndoingRedoing||(-1!==s&&n.Wa(dn,"elements",this,e,null,s,null),n.Wa(Ve,"elements",this,null,e,null,t)))},S.remove=function(t){for(var e=this.T.m,n=e.length,s=-1,a=0;a<n;a++)if(e[a]===t){s=a;break}-1!==s&&this.fc(s,!0)},S.eb=function(t){0<=t&&this.fc(t,!0)},S.fc=function(t,e){var n=this.T,s=n.J(t);if(s.Dj=null,s.Si(null),null!==this.$d){var a=s.data;"object"==typeof a&&this.$d.remove(a)}n.eb(t),hr(this,!1),this.s(),this.ph===s&&(this.ph=null),this.Rf=null;var u=this.part;null!==u&&(u.li=null,u.Xf=NaN,u.Mb(),u instanceof it&&(s instanceof W?s.Em(s,function(c,f){Hp(u,f,e)}):Hp(u,s,e)),null!==(n=this.diagram)&&n.undoManager.isUndoingRedoing||u.Wa(dn,"elements",this,s,null,t,null))},W.prototype.getRowDefinition=function(t){0>t&&ae(t,">= 0",W,"getRowDefinition:idx"),t=Math.round(t);var e=this.ob;if(void 0===e)return null;if(void 0===e[t]){var n=new en;n.Si(this),n.isRow=!0,n.index=t,e[t]=n,this.Wa(Ve,"rowdefs",this,null,n,null,t)}return e[t]},W.prototype.KA=function(t){0>t&&ae(t,">= 0",W,"removeRowDefinition:idx"),t=Math.round(t);var e=this.ob;if(void 0!==e){var n=e[t];if(n){e[t]=void 0;for(var s=e.length-1;0<=s&&void 0===e[s--];)e.length--;this.Wa(dn,"rowdefs",this,n,null,t,null),this.s()}}},W.prototype.getColumnDefinition=function(t){0>t&&ae(t,">= 0",W,"getColumnDefinition:idx"),t=Math.round(t);var e=this.ib;if(void 0===e)return null;if(void 0===e[t]){var n=new en;n.Si(this),n.isRow=!1,n.index=t,e[t]=n,this.Wa(Ve,"coldefs",this,null,n,null,t)}return e[t]},(S=W.prototype).FA=function(t){0>t&&ae(t,">= 0",W,"removeColumnDefinition:idx"),t=Math.round(t);var e=this.ib;if(void 0!==e){var n=e[t];if(n){e[t]=void 0;for(var s=e.length-1;0<=s&&void 0===e[s--];)e.length--;this.Wa(dn,"coldefs",this,n,null,t,null),this.s()}}},S.Mz=function(t){if(0>t||this.type!==W.Table)return-1;for(var e=0,n=this.ob,s=n.length,a=this.vi;a<s;a++){var u=n[a];if(void 0!==u&&t<(e+=u.total))break}return a},S.Ez=function(t){if(0>t||this.type!==W.Table)return-1;for(var e=0,n=this.ib,s=n.length,a=this.gi;a<s;a++){var u=n[a];if(void 0!==u&&t<(e+=u.total))break}return a},S.cA=function(t,e){if(void 0===e&&(e=new A(NaN,NaN)),this.type!==W.Graduated)return e.h(NaN,NaN),e;t=Math.min(Math.max(t,this.graduatedMin),this.graduatedMax);var n=this.pb();return n.geometry.av((t-this.graduatedMin)/this.graduatedRange,e),n.transform.Aa(e)},S.dA=function(t){if(this.type!==W.Graduated)return NaN;var e=this.pb();return e.transform.Hd(t),e.geometry.Wx(t)*this.graduatedRange+this.graduatedMin},S.qz=function(t){void 0===t&&(t=!1);var e=this.copy();return os(e,function(n){n instanceof W&&(n.Qh=null,n.jb=null);var s=n.fb;null!==s&&(n.fb=null,s.each(function(a){n.bind(a.copy())})),null!==(s=n.xg)&&(n.xg=null,s.each(function(a){n.Zv(a.value.copy())}))}),t&&yo(e),e},S.Fa=function(t){var e=this.Qh;if(null!==e)for(void 0===t&&(t=""),e=e.iterator;e.next();){var n=e.value,s=n.sourceProperty;if((""===t||""===s||s===t)&&(s=n.targetProperty,null!==n.converter||""!==s)){s=this.data;var a=n.sourceName;if(null!==a){if(""===a)s=this;else if("/"===a)s=this;else if("."===a)s=this;else if(".."===a)s=this;else if(null===(s=this.Ya(a)))continue}else if(n.isToModel){if(null===(s=this.diagram))continue;s=s.model.modelData}var u=this,c=n.Xi;if(-1!==c){if(null===(u=this.ps(c)))continue}else null!==n.od&&(u=n.od);if("/"===a?s=u.part:"."===a?s=u:".."===a&&(s=u.panel),0!==(a=n.yp)){if(!(u instanceof W))continue;1===a?u=u.getColumnDefinition(n.Pl):2===a&&(u=u.getRowDefinition(n.Pl))}void 0!==u&&n.cw(u,s)}}},S.Rx=function(t){return null==t||null===this.$d?null:this.$d.H(t)},S.Fv=function(){for(var t=jh(this);this.T.length>t;)this.fc(this.T.length-1,!1);gv(this,this.itemArray)},kt.Object.defineProperties(W.prototype,{type:{get:function(){return this.ha},set:function(t){var e=this.ha;e!==t&&(this.ha=t,this.ha===W.Grid?this.isAtomic=!0:this.ha===W.Table&&M_(this),this.s(),this.g("type",e,t))}},elements:{get:function(){return this.T.iterator}},naturalBounds:{get:function(){return this.wc}},padding:{get:function(){return this.nb},set:function(t){"number"==typeof t?(0>t&&ae(t,">= 0",W,"padding"),t=new Ct(t)):(0>t.left&&ae(t.left,">= 0",W,"padding:value.left"),0>t.right&&ae(t.right,">= 0",W,"padding:value.right"),0>t.top&&ae(t.top,">= 0",W,"padding:value.top"),0>t.bottom&&ae(t.bottom,">= 0",W,"padding:value.bottom"));var e=this.nb;e.A(t)||(this.nb=t=t.I(),this.s(),this.g("padding",e,t))}},defaultAlignment:{get:function(){return this.mn},set:function(t){var e=this.mn;e.A(t)||(this.mn=t=t.I(),this.s(),this.g("defaultAlignment",e,t))}},defaultStretch:{get:function(){return this.Of},set:function(t){var e=this.Of;e!==t&&(this.Of=t,this.s(),this.g("defaultStretch",e,t))}},defaultSeparatorPadding:{get:function(){return void 0===this.fj?lh:this.fj},set:function(t){if(void 0!==this.fj){"number"==typeof t&&(t=new Ct(t));var e=this.fj;e.A(t)||(this.fj=t=t.I(),this.s(),this.g("defaultSeparatorPadding",e,t))}}},defaultRowSeparatorStroke:{get:function(){return void 0===this.Wh?null:this.Wh},set:function(t){var e=this.Wh;e!==t&&(null===t||"string"==typeof t||t instanceof jt)&&(t instanceof jt&&t.freeze(),this.Wh=t,this.N(),this.g("defaultRowSeparatorStroke",e,t))}},defaultRowSeparatorStrokeWidth:{get:function(){return void 0===this.Hg?1:this.Hg},set:function(t){if(void 0!==this.Hg){var e=this.Hg;e!==t&&isFinite(t)&&0<=t&&(this.Hg=t,this.s(),this.g("defaultRowSeparatorStrokeWidth",e,t))}}},defaultRowSeparatorDashArray:{get:function(){return void 0===this.Vh?null:this.Vh},set:function(t){if(void 0!==this.Vh){var e=this.Vh;if(e!==t){if(null!==t){for(var n=t.length,s=0,a=0;a<n;a++){var u=t[a];"number"==typeof u&&0<=u&&isFinite(u)||q("defaultRowSeparatorDashArray value "+u+" at index "+a+" must be a positive number or zero."),s+=u}if(0===s){if(null===e)return;t=null}}this.Vh=t,this.N(),this.g("defaultRowSeparatorDashArray",e,t)}}}},defaultColumnSeparatorStroke:{get:function(){return void 0===this.Fg?null:this.Fg},set:function(t){if(void 0!==this.Fg){var e=this.Fg;e!==t&&(null===t||"string"==typeof t||t instanceof jt)&&(t instanceof jt&&t.freeze(),this.Fg=t,this.N(),this.g("defaultColumnSeparatorStroke",e,t))}}},defaultColumnSeparatorStrokeWidth:{get:function(){return void 0===this.Gg?1:this.Gg},set:function(t){if(void 0!==this.Gg){var e=this.Gg;e!==t&&isFinite(t)&&0<=t&&(this.Gg=t,this.s(),this.g("defaultColumnSeparatorStrokeWidth",e,t))}}},defaultColumnSeparatorDashArray:{get:function(){return void 0===this.Uh?null:this.Uh},set:function(t){if(void 0!==this.Uh){var e=this.Uh;if(e!==t){if(null!==t){for(var n=t.length,s=0,a=0;a<n;a++){var u=t[a];"number"==typeof u&&0<=u&&isFinite(u)||q("defaultColumnSeparatorDashArray value "+u+" at index "+a+" must be a positive number or zero."),s+=u}if(0===s){if(null===e)return;t=null}}this.Uh=t,this.N(),this.g("defaultColumnSeparatorDashArray",e,t)}}}},viewboxStretch:{get:function(){return this.Hp},set:function(t){var e=this.Hp;e!==t&&(this.Hp=t,this.s(),this.g("viewboxStretch",e,t))}},gridCellSize:{get:function(){return this.Kn},set:function(t){var e=this.Kn;if(!e.A(t)){t.u()&&0!==t.width&&0!==t.height||q("Invalid Panel.gridCellSize: "+t),this.Kn=t.I();var n=this.diagram;null!==n&&this===n.grid&&Ga(n),this.N(),this.g("gridCellSize",e,t)}}},gridOrigin:{get:function(){return this.Ln},set:function(t){var e=this.Ln;if(!e.A(t)){t.u()||q("Invalid Panel.gridOrigin: "+t),this.Ln=t.I();var n=this.diagram;null!==n&&this===n.grid&&Ga(n),this.N(),this.g("gridOrigin",e,t)}}},graduatedMin:{get:function(){return this.Hn},set:function(t){var e=this.Hn;e!==t&&(this.Hn=t,this.s(),this.g("graduatedMin",e,t),Ph(this)&&null!==(t=this.part)&&Eh(this,t,"graduatedRange"))}},graduatedMax:{get:function(){return this.Gn},set:function(t){var e=this.Gn;e!==t&&(this.Gn=t,this.s(),this.g("graduatedMax",e,t),Ph(this)&&null!==(t=this.part)&&Eh(this,t,"graduatedRange"))}},graduatedRange:{get:function(){return this.graduatedMax-this.graduatedMin}},graduatedTickUnit:{get:function(){return this.Jn},set:function(t){var e=this.Jn;e!==t&&0<t&&(this.Jn=t,this.s(),this.g("graduatedTickUnit",e,t))}},graduatedTickBase:{get:function(){return this.In},set:function(t){var e=this.In;e!==t&&(this.In=t,this.s(),this.g("graduatedTickBase",e,t))}},Je:{get:function(){return 0!=(8388608&this.G)},set:function(t){0!=(8388608&this.G)!==t&&(this.G^=8388608)}},rowCount:{get:function(){return void 0===this.ob?0:this.ob.length}},columnCount:{get:function(){return void 0===this.ib?0:this.ib.length}},rowSizing:{get:function(){return void 0===this.Fj?kp:this.Fj},set:function(t){if(void 0!==this.Fj){var e=this.Fj;e!==t&&(this.Fj=t,this.s(),this.g("rowSizing",e,t))}}},columnSizing:{get:function(){return void 0===this.ej?kp:this.ej},set:function(t){if(void 0!==this.ej){var e=this.ej;e!==t&&(this.ej=t,this.s(),this.g("columnSizing",e,t))}}},topIndex:{get:function(){return void 0===this.vi?0:this.vi},set:function(t){if(void 0!==this.vi){var e=this.vi;e!==t&&((!isFinite(t)||0>t)&&q("Panel.topIndex must be greater than zero and a real number, not: "+t),this.vi=t,this.s(),this.g("topIndex",e,t))}}},leftIndex:{get:function(){return void 0===this.gi?0:this.gi},set:function(t){if(void 0!==this.gi){var e=this.gi;e!==t&&((!isFinite(t)||0>t)&&q("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.gi=t,this.s(),this.g("leftIndex",e,t))}}},data:{get:function(){return this.jb},set:function(t){var e=this.jb;if(e!==t){var n=this instanceof ft&&!(this instanceof Rt);yo(this),this.jb=t;var s=this.diagram;null!==s&&(n?(n=s.partManager,this instanceof K?(null!==e&&n.Ue.remove(e),null!==t&&n.Ue.add(t,this)):this instanceof ft&&(null!==e&&n.Ve.remove(e),null!==t&&n.Ve.add(t,this))):null!==(n=this.panel)&&null!==n.$d&&(null!==e&&n.$d.remove(e),null!==t&&n.$d.add(t,this))),this.g("data",e,t),null!==s&&s.undoManager.isUndoingRedoing||null!==t&&this.Fa()}}},itemIndex:{get:function(){return this.ao},set:function(t){var e=this.ao;e!==t&&(this.ao=t,this.g("itemIndex",e,t))}},itemArray:{get:function(){return this.ci},set:function(t){var e=this.ci;if(e!==t||null!==t&&function kd(t,e){for(var n=(t=t.T.m).length,s=e.length,a=0,u=null;a<n&&!((u=t[a])instanceof W&&null!==u.data);)u=t[++a];if(n-a!==s)return!0;if(null===u)return 0<s;for(var c=0;a<n&&c<s;){if(!((u=t[a])instanceof W)||u.data!==e[c])return!0;a++,c++}return!1}(this,t)){var n=this.diagram;e!==t&&(null!==n&&null!==e&&wy(n.partManager,this,n),this.ci=t,null!==n&&null!==t&&zv(n.partManager,this)),this.g("itemArray",e,t),null!==n&&n.undoManager.isUndoingRedoing||gv(this,t)}}},itemTemplate:{get:function(){return null===this.ve?null:this.ve.H("")},set:function(t){if(null===this.ve){if(null===t)return;this.ve=new xt}var e=this.ve.H("");e!==t&&((t instanceof ft||t.isPanelMain)&&q("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.ve.add("",t),this.g("itemTemplate",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.Fv())}},itemTemplateMap:{get:function(){return this.ve},set:function(t){var e=this.ve;if(e!==t){for(var n=t.iterator;n.next(););this.ve=t,this.g("itemTemplateMap",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.Fv()}}},itemCategoryProperty:{get:function(){return this.hl},set:function(t){var e=this.hl;e!==t&&(this.hl=t,this.g("itemCategoryProperty",e,t))}},isAtomic:{get:function(){return 0!=(1048576&this.G)},set:function(t){var e=0!=(1048576&this.G);e!==t&&(this.G^=1048576,this.g("isAtomic",e,t))}},isClipping:{get:function(){return 0!=(2097152&this.G)},set:function(t){var e=0!=(2097152&this.G);e!==t&&(this.G^=2097152,this instanceof _t&&(this.$a=null),this.s(),this.g("isClipping",e,t))}},isOpposite:{get:function(){return 0!=(33554432&this.G)},set:function(t){var e=0!=(33554432&this.G);e!==t&&(this.G^=33554432,this.s(),this.g("isOpposite",e,t))}},isEnabled:{get:function(){return 0!=(4194304&this.G)},set:function(t){var e=0!=(4194304&this.G);if(e!==t){var n=null===this.panel||this.panel.Ef();this.G^=4194304,this.g("isEnabled",e,t),null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing||n&&Lm(this,this,t)}}},alignmentFocusName:{get:function(){return this.Re},set:function(t){var e=this.Re;e!==t&&(this.Re=t,this.s(),this.g("alignmentFocusName",e,t))}}}),kt.Object.defineProperties(W,{Position:{get:function(){return Zr.H("Position")}},Horizontal:{get:function(){return Zr.H("Horizontal")}},Vertical:{get:function(){return Zr.H("Vertical")}},Spot:{get:function(){return Zr.H("Spot")}},Auto:{get:function(){return Zr.H("Auto")}},Table:{get:function(){return Zr.H("Table")}},Viewbox:{get:function(){return Zr.H("Viewbox")}},TableRow:{get:function(){return Zr.H("TableRow")}},TableColumn:{get:function(){return Zr.H("TableColumn")}},Link:{get:function(){return Zr.H("Link")}},Grid:{get:function(){return Zr.H("Grid")}},Graduated:{get:function(){return Zr.H("Graduated")}}}),W.prototype.rebuildItemElements=W.prototype.Fv,W.prototype.findItemPanelForData=W.prototype.Rx,W.prototype.updateTargetBindings=W.prototype.Fa,W.prototype.copyTemplate=W.prototype.qz,W.prototype.graduatedValueForPoint=W.prototype.dA,W.prototype.graduatedPointForValue=W.prototype.cA,W.prototype.findColumnForLocalX=W.prototype.Ez,W.prototype.findRowForLocalY=W.prototype.Mz,W.prototype.removeColumnDefinition=W.prototype.FA,W.prototype.removeRowDefinition=W.prototype.KA,W.prototype.removeAt=W.prototype.eb,W.prototype.remove=W.prototype.remove,W.prototype.insertAt=W.prototype.wb,W.prototype.elt=W.prototype.J,W.prototype.add=W.prototype.add,W.prototype.findObject=W.prototype.Ya,W.prototype.findInVisualTree=W.prototype.$l,W.prototype.walkVisualTreeFrom=W.prototype.Em,W.prototype.findMainElement=W.prototype.pb;var S_=!1,N_=null,Zr=new xt;function en(){bn(this),this.bg=null,this.pr=!0,this.Ra=0,this.Bd=NaN,this.yj=0,this.xj=1/0,this.yb=Xt,this.ja=this.cc=this.la=0,this.fb=null,this.qp=Sp,this.Ee=es,this.lp=this.fg=null,this.mp=NaN,this.Vb=this.Jj=null,this.hn=!1}function Tp(t){if(t.sizing===Sp){var e=t.bg;return t.isRow?e.rowSizing:e.columnSizing}return t.sizing}W.className="Panel",W.definePanelLayout=ss,ss("Position",new xm),ss("Vertical",new Ol),ss("Auto",new Mm),ss("Link",new bp),en.prototype.copy=function(){var t=new en;return t.pr=this.pr,t.Ra=this.Ra,t.Bd=this.Bd,t.yj=this.yj,t.xj=this.xj,t.yb=this.yb,t.la=this.la,t.cc=this.cc,t.ja=this.ja,t.Ee=this.Ee,t.qp=this.qp,t.fg=null===this.fg?null:this.fg.I(),t.lp=this.lp,t.mp=this.mp,t.Jj=null,null!==this.Jj&&(t.separatorDashArray=Ti(this.separatorDashArray)),t.Vb=this.Vb,t.hn=this.hn,t.fb=this.fb,t},(S=en.prototype).gb=function(t){t.classType===en&&(this.sizing=t)},S.toString=function(){return"RowColumnDefinition "+(this.isRow?"(Row ":"(Column ")+this.index+") #"+pn(this)},S.Si=function(t){this.bg=t},S.Ku=function(){var t=0,e=0,n=this.bg,s=this.isRow;if(null!==n&&n.type===W.Table)for(var a=s?n.ob.length:n.ib.length,u=0;u<a;u++){var c=s?n.ob[u]:n.ib[u];if(void 0!==c){e=c.index;break}}if(this.index!==e&&(null===(e=this.separatorStroke)&&null!==n&&(e=this.isRow?n.defaultRowSeparatorStroke:n.defaultColumnSeparatorStroke),null!==e&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==n?this.isRow?n.defaultRowSeparatorStrokeWidth:n.defaultColumnSeparatorStrokeWidth:0))),null===(e=this.fg)){if(null===n)return t;e=n.defaultSeparatorPadding}return t+(this.isRow?e.top:e.left)},S.Ic=function(){var t=0,e=this.bg,n=0,s=this.isRow;if(null!==e&&e.type===W.Table)for(var a=s?e.ob.length:e.ib.length,u=0;u<a;u++){var c=s?e.ob[u]:e.ib[u];if(void 0!==c){n=c.index;break}}if(this.index!==n&&(null===(n=this.separatorStroke)&&null!==e&&(n=s?e.defaultRowSeparatorStroke:e.defaultColumnSeparatorStroke),null!==n&&(t=this.separatorStrokeWidth,isNaN(t)&&(t=null!==e?s?e.defaultRowSeparatorStrokeWidth:e.defaultColumnSeparatorStrokeWidth:0))),null===(s=this.fg)){if(null===e)return t;s=e.defaultSeparatorPadding}return t+(this.isRow?s.top+s.bottom:s.left+s.right)},S.Eb=function(t,e,n){var s=this.bg;if(null!==s&&(s.Wa(De,t,this,e,n,void 0,void 0),null!==this.fb&&null!==(e=s.diagram)&&!e.skipsModelSourceBindings&&null!==(s=s.Ch())&&null!==(e=s.data)))for(n=this.fb.iterator;n.next();)n.value.Aq(this,e,t,s)},S.bind=function(t,e,n,s){var a=null;return(a="string"==typeof t?new Ae(t,e,n,s):t).od=this,null!==(t=this.panel)&&null!==(e=t.Ch())&&pv(e)&&q("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a+" on "+t),null===this.fb&&(this.fb=new st),this.fb.add(a),this},kt.Object.defineProperties(en.prototype,{panel:{get:function(){return this.bg}},isRow:{get:function(){return this.pr},set:function(t){this.pr=t}},index:{get:function(){return this.Ra},set:function(t){this.Ra=t}},height:{get:function(){return this.Bd},set:function(t){var e=this.Bd;e!==t&&(0>t&&ae(t,">= 0",en,"height"),this.Bd=t,this.actual=this.la,null!==this.panel&&this.panel.s(),this.Eb("height",e,t))}},width:{get:function(){return this.Bd},set:function(t){var e=this.Bd;e!==t&&(0>t&&ae(t,">= 0",en,"width"),this.Bd=t,this.actual=this.la,null!==this.panel&&this.panel.s(),this.Eb("width",e,t))}},minimum:{get:function(){return this.yj},set:function(t){var e=this.yj;e!==t&&((0>t||!isFinite(t))&&ae(t,">= 0",en,"minimum"),this.yj=t,this.actual=this.la,null!==this.panel&&this.panel.s(),this.Eb("minimum",e,t))}},maximum:{get:function(){return this.xj},set:function(t){var e=this.xj;e!==t&&(0>t&&ae(t,">= 0",en,"maximum"),this.xj=t,this.actual=this.la,null!==this.panel&&this.panel.s(),this.Eb("maximum",e,t))}},alignment:{get:function(){return this.yb},set:function(t){var e=this.yb;e.A(t)||(this.yb=t.I(),null!==this.panel&&this.panel.s(),this.Eb("alignment",e,t))}},stretch:{get:function(){return this.Ee},set:function(t){var e=this.Ee;e!==t&&(this.Ee=t,null!==this.panel&&this.panel.s(),this.Eb("stretch",e,t))}},separatorPadding:{get:function(){return this.fg},set:function(t){"number"==typeof t&&(t=new Ct(t));var e=this.fg;null!==t&&null!==e&&e.A(t)||(null!==t&&(t=t.I()),this.fg=t,null!==this.panel&&this.panel.s(),this.Eb("separatorPadding",e,t))}},separatorStroke:{get:function(){return this.lp},set:function(t){var e=this.lp;e!==t&&(null!==t&&bu(t,"RowColumnDefinition.separatorStroke"),t instanceof jt&&t.freeze(),this.lp=t,null!==this.panel&&this.panel.s(),this.Eb("separatorStroke",e,t))}},separatorStrokeWidth:{get:function(){return this.mp},set:function(t){var e=this.mp;e!==t&&(this.mp=t,null!==this.panel&&this.panel.s(),this.Eb("separatorStrokeWidth",e,t))}},separatorDashArray:{get:function(){return this.Jj},set:function(t){var e=this.Jj;if(e!==t){if(null!==t){for(var n=t.length,s=0,a=0;a<n;a++){var u=t[a];"number"==typeof u&&0<=u&&isFinite(u)||q("separatorDashArray value "+u+" at index "+a+" must be a positive number or zero."),s+=u}if(0===s){if(null===e)return;t=null}}this.Jj=t,null!==this.panel&&this.panel.N(),this.Eb("separatorDashArray",e,t)}}},background:{get:function(){return this.Vb},set:function(t){var e=this.Vb;e!==t&&(null!==t&&bu(t,"RowColumnDefinition.background"),t instanceof jt&&t.freeze(),this.Vb=t,null!==this.panel&&this.panel.N(),this.Eb("background",e,t))}},coversSeparators:{get:function(){return this.hn},set:function(t){var e=this.hn;e!==t&&(this.hn=t,null!==this.panel&&this.panel.N(),this.Eb("coversSeparators",e,t))}},sizing:{get:function(){return this.qp},set:function(t){var e=this.qp;e!==t&&(this.qp=t,null!==this.panel&&this.panel.s(),this.Eb("sizing",e,t))}},actual:{get:function(){return this.la},set:function(t){this.la=isNaN(this.Bd)?Math.max(Math.min(this.xj,t),this.yj):Math.max(Math.min(this.xj,this.Bd),this.yj)}},measured:{get:function(){return this.cc},set:function(t){this.cc=t}},total:{get:function(){return this.la+this.Ic()}},position:{get:function(){return this.ja},set:function(t){this.ja=t}}}),en.prototype.computeEffectiveSpacing=en.prototype.Ic,en.prototype.computeEffectiveSpacingTop=en.prototype.Ku;var Sp=new Q(en,"Default",0),Np=new Q(en,"None",1),kp=new Q(en,"ProportionalExtra",2);function bt(t,e){dt.call(this),this.Dd=this.ma=null,this.xn="None",this.En=es,this.Gc=this.Uk="black",this.ig=1,this.Ll="butt",this.Ml="miter",this.Kj=10,this.mh=null,this.nh=0,this.nf=this.mf=Xt,this.Lo=this.Ko=NaN,this.Sn=!1,this.No=null,this.Vk=this.Sl="None",this.Zd=1,this.Yd=0,this.Wd=1,this.Xd=null,"string"==typeof t?this.figure=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function Hh(t,e,n,s){var a=n.length;if(!(4>a)){var u=s.measuredBounds,c=Math.max(1,u.width);u=u.height;for(var g,y,v,_,b,D,f=n[0],p=n[1],k=0,O=Lt(),E=2;E<a;E+=2)0==(v=(g=n[E])-f)&&(v=.001),_=(f=(y=n[E+1])-p)/v,b=Math.atan2(f,v),D=Math.sqrt(v*v+f*f),O.push([v,b,_,D]),k+=D,f=g,p=y;f=n[0],p=n[1],v=s.measuredBounds.width,s instanceof bt&&(v-=s.strokeWidth),1>v&&(v=1),a=n=v,y=0!=(g=c/2),v=(D=O[E=0])[0],b=D[1],_=D[2],D=D[3];for(var R=0;.1<=k;){if(0===R&&(y?(a=n,a-=g,k-=g,y=!1):a=n,0===a&&(a=1)),a>k)return void ee(O);a>D?(R=a-D,a=D):R=0;var F=Math.sqrt(a*a/(1+_*_));if(0>v&&(F=-F),t.translate(f+=F,p+=_*F),t.rotate(b),t.translate(-c/2,-u/2),0===R&&s.Ei(t,e),t.translate(c/2,u/2),t.rotate(-b),t.translate(-f,-p),k-=a,D-=a,0!==R){if(++E===O.length)return void ee(O);v=(D=O[E])[0],b=D[1],_=D[2],D=D[3],a=R}}ee(O)}}function Fl(t){var e=t.geometryStretch;return null!==t.Dd?e===es?Ge:e:e===es?jm[t.figure].defaultStretch:e}function Ep(t,e,n,s,a){return(e=(t=n.x-t)*t+(e=n.y-e)*e)<s?(a.x=n.x,a.y=n.y,e):s}function Pp(t,e,n,s,a,u,c,f,p){var g=!1,y=(a-c)*(e-s)-(u-f)*(t-n);return 0!==y&&(p.x=((a*f-u*c)*(t-n)-(a-c)*(t*s-e*n))/y,p.y=((a*f-u*c)*(e-s)-(u-f)*(t*s-e*n))/y,(t>n?t-n:n-t)<(e>s?e-s:s-e)?(t=e<s?e:s,e=e<s?s:e,(p.y>t||V.aa(p.y,t))&&(p.y<e||V.aa(p.y,e))&&(g=!0)):(e=t<n?t:n,t=t<n?n:t,(p.x>e||V.aa(p.x,e))&&(p.x<t||V.aa(p.x,t))&&(g=!0)),g)}function Su(t,e,n,s){if(!t.ws(e,n,s))return!1;t=e.x,e=e.y;var a=n.x,u=n.y;return n=s.x,s=s.y,t===a?(e<u?(t=e,e=u):t=u,s>=t&&s<=e):(t<a?(s=t,t=a):s=a,n>=s&&n<=t)}function Ap(t){var e=t.diagram;null!==e&&e.undoManager.isUndoingRedoing||(t.segmentOrientation=$p,"None"!==t.Sl?(t.segmentIndex=-1,t.alignmentFocus=Wn):"None"!==t.Vk&&(t.segmentIndex=0,t.alignmentFocus=new pt(1-Wn.x,Wn.y)))}function k_(t){var e=as[t];if(void 0===e){var n=t.toLowerCase();if("none"===n)return"None";if(void 0===(e=as[n])){var a,s=null;for(a in V.Im)if(a.toLowerCase()===n){s=a;break}if(null!==s)return t=rt.parse(V.Im[s],!1),as[s]=t,n!==s&&(as[n]=s),s}}return"string"==typeof e?e:e instanceof rt?t:null}en.className="RowColumnDefinition",en.Default=Sp,en.None=Np,en.ProportionalExtra=kp,Wt(bt,dt),bt.prototype.cloneProtected=function(t){dt.prototype.cloneProtected.call(this,t),t.ma=this.ma,t.xn=this.xn,t.En=this.En,t.Dd=this.Dd,t.Uk=this.Uk,t.Gc=this.Gc,t.ig=this.ig,t.Ll=this.Ll,t.Ml=this.Ml,t.Kj=this.Kj,null!==this.mh&&(t.mh=Ti(this.mh)),t.nh=this.nh,t.mf=this.mf.I(),t.nf=this.nf.I(),t.Ko=this.Ko,t.Lo=this.Lo,t.Sn=this.Sn,t.No=this.No,t.Sl=this.Sl,t.Vk=this.Vk,t.Zd=this.Zd,t.Yd=this.Yd,t.Wd=this.Wd,t.Xd=this.Xd},(S=bt.prototype).gb=function(t){t===ze||t===Oo||t===pp||t===es?this.geometryStretch=t:dt.prototype.gb.call(this,t)},S.toString=function(){return"Shape("+("None"!==this.figure?this.figure:"None"!==this.toArrow?this.toArrow:this.fromArrow)+")#"+pn(this)},S.Ei=function(t,e){var n=this.Gc,s=this.Uk;if(null!==n||null!==s){var a=this.ma;if(null!==a){t.Ed();var u=this.actualBounds,c=this.naturalBounds;null!==s&&Tr(this,t,s,!0,!1,c,u);var f=this.part,p=this.ig;if(null===n||0!==p||null===f||!this.isPanelMain&&f.pb()!==this||(p=f.type===W.Link&&f instanceof Rt&&"Selection"===f.category&&f.adornedObject instanceof bt&&f.adornedPart.pb()===f.adornedObject?f.adornedObject.strokeWidth:0),0===p&&(n=null),null!==n&&0!==p&&(Tr(this,t,n,!1,!1,c,u),t.lineWidth=p,t.lineJoin=this.Ml,t.lineCap=this.Ll,t.miterLimit=this.Kj),u=!1,f&&e.Ie("drawShadows")&&(u=f.isShadowed),f=!0,null===n||null!==s&&"transparent"!==s||(f=!1),c=!1,null!==(p=this.strokeDashArray)&&(c=!0,t.os(p,this.nh)),a.type===rt.j)t.beginPath(),t.moveTo(a.startX,a.startY),t.lineTo(a.endX,a.endY),null!==n&&t.Wi();else if(a.type===rt.C){var g=a.startX;p=a.startY;var y=a.endX,v=a.endY;a=Math.min(g,y);var _=Math.min(p,v);g=Math.abs(y-g),p=Math.abs(v-p),t.beginPath(),t.rect(a,_,g,p),null!==s&&t.yf(s),null!==n&&(f&&u&&fa(t),(0===g||0===p)&&(t.beginPath(),t.rect(a,_,Math.max(g,.1),Math.max(p,.1))),t.Wi(),f&&u&&Bs(t))}else if(a.type===rt.L)g=a.startX,p=a.startY,y=a.endX,v=a.endY,a=Math.abs(y-g)/2,_=Math.abs(v-p)/2,g=Math.min(g,y)+a,p=Math.min(p,v)+_,t.beginPath(),t.moveTo(g,p-_),t.bezierCurveTo(g+V.wg*a,p-_,g+a,p-V.wg*_,g+a,p),t.bezierCurveTo(g+a,p+V.wg*_,g+V.wg*a,p+_,g,p+_),t.bezierCurveTo(g-V.wg*a,p+_,g-a,p+V.wg*_,g-a,p),t.bezierCurveTo(g-a,p-V.wg*_,g-V.wg*a,p-_,g,p-_),t.closePath(),null!==s&&t.yf(s),null!==n&&(f&&u?(fa(t),t.Wi(),Bs(t)):t.Wi());else if(a.type===rt.o)for(p=(a=a.figures).length,_=0;_<p;_++){g=a.m[_],t.beginPath(),t.moveTo(g.startX,g.startY),v=(y=g.segments.m).length;for(var b=null,D=0;D<v;D++){var k=y[D];switch(k.type){case ko:t.moveTo(k.endX,k.endY);break;case tn:t.lineTo(k.endX,k.endY);break;case zr:t.bezierCurveTo(k.point1X,k.point1Y,k.point2X,k.point2Y,k.endX,k.endY);break;case As:t.quadraticCurveTo(k.point1X,k.point1Y,k.endX,k.endY);break;case on:if(k.radiusX===k.radiusY){var O=Math.PI/180;t.arc(k.point1X,k.point1Y,k.radiusX,k.startAngle*O,(k.startAngle+k.sweepAngle)*O,0>k.sweepAngle,null!==b?b.endX:g.startX,null!==b?b.endY:g.startY)}else if(0===(O=(b=ja(k,g)).length))t.lineTo(k.centerX,k.centerY);else for(var E=0;E<O;E++){var R=b[E];0===E&&t.lineTo(R[0],R[1]),t.bezierCurveTo(R[2],R[3],R[4],R[5],R[6],R[7])}break;case Zo:if(E=O=0,null!==b&&b.type===on){if(0===(R=(b=ja(b,g)).length)){t.lineTo(k.endX,k.endY);break}null!==(b=b[R-1]||null)&&(O=b[6],E=b[7])}else O=null!==b?b.endX:g.startX,E=null!==b?b.endY:g.startY;if(0===(O=(b=dh(k,g,O,E)).length)){t.lineTo(k.endX,k.endY);break}for(E=0;E<O;E++)t.bezierCurveTo((R=b[E])[2],R[3],R[4],R[5],R[6],R[7]);break;default:q("Segment not of valid type: "+k.type)}k.isClosed&&t.closePath(),b=k}y=g.isFilled,u?g.isShadowed?(!0===y&&"transparent"!==s&&null!==s&&t.yf(s),null!==n&&(y&&f&&fa(t),t.Wi(),y&&f&&Bs(t))):(fa(t),y&&"transparent"!==s&&null!==s&&t.yf(s),null!==n&&t.Wi(),Bs(t)):(y&&null!==s&&t.yf(s),null!==n&&t.Wi())}if(c&&t.ms(),null!==this.pathPattern){if((n=this.pathPattern).measure(1/0,1/0),n.arrange(0,0,(s=n.measuredBounds).width,s.height),u=this.geometry,t.save(),t.beginPath(),s=Lt(),u.type===rt.j)s.push(u.startX),s.push(u.startY),s.push(u.endX),s.push(u.endY),Hh(t,e,s,n);else if(u.type===rt.o)for(u=u.figures.iterator;u.next();){for(f=u.value,s.length=0,s.push(f.startX),s.push(f.startY),p=c=f.startX,_=a=f.startY,y=(g=f.segments.m).length,v=0;v<y;v++){switch((D=g[v]).type){case ko:Hh(t,e,s,n),s.length=0,s.push(D.endX),s.push(D.endY),p=c=D.endX,_=a=D.endY;break;case tn:s.push(D.endX),s.push(D.endY),c=D.endX,a=D.endY;break;case zr:V.Fe(c,a,D.point1X,D.point1Y,D.point2X,D.point2Y,D.endX,D.endY,.5,s),c=D.endX,a=D.endY;break;case As:V.lq(c,a,D.point1X,D.point1Y,D.endX,D.endY,.5,s),c=D.endX,a=D.endY;break;case on:if(0===(b=(k=ja(D,f)).length)){s.push(D.centerX),s.push(D.centerY),c=D.centerX,a=D.centerY;break}for(O=0;O<b;O++)V.Fe(c,a,(E=k[O])[2],E[3],E[4],E[5],E[6],E[7],.5,s),c=E[6],a=E[7];break;case Zo:if(0===(b=(k=dh(D,f,c,a)).length)){s.push(D.endX),s.push(D.endY),c=D.endX,a=D.endY;break}for(O=0;O<b;O++)V.Fe(c,a,(E=k[O])[2],E[3],E[4],E[5],E[6],E[7],.5,s),c=E[6],a=E[7];break;default:q("Segment not of valid type: "+D.type)}D.isClosed&&(s.push(p),s.push(_),Hh(t,e,s,n))}Hh(t,e,s,n)}else if(u.type===rt.C)s.push(u.startX),s.push(u.startY),s.push(u.endX),s.push(u.startY),s.push(u.endX),s.push(u.endY),s.push(u.startX),s.push(u.endY),s.push(u.startX),s.push(u.startY),Hh(t,e,s,n);else if(u.type===rt.L){if((a=new ii).startX=u.endX,a.startY=(u.startY+u.endY)/2,(c=new Zt(on)).startAngle=0,c.sweepAngle=360,c.centerX=(u.startX+u.endX)/2,c.centerY=(u.startY+u.endY)/2,c.radiusX=Math.abs(u.startX-u.endX)/2,c.radiusY=Math.abs(u.startY-u.endY)/2,a.add(c),0===(f=(u=ja(c,a)).length))s.push(c.centerX),s.push(c.centerY);else for(c=a.startX,a=a.startY,p=0;p<f;p++)V.Fe(c,a,(_=u[p])[2],_[3],_[4],_[5],_[6],_[7],.5,s),c=_[6],a=_[7];Hh(t,e,s,n)}ee(s),t.restore(),t.Hc(!1)}}}},S.da=function(t,e){if(void 0===e&&(e=new A),t instanceof pt){t.Bc()&&q("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var n=this.naturalBounds,s=this.strokeWidth;e.h(t.x*(n.width+s)-s/2+n.x+t.offsetX,t.y*(n.height+s)-s/2+n.y+t.offsetY)}else e.set(t);return this.fe.Aa(e),e},S.Li=function(t){void 0===t&&(t=new z);var e=this.naturalBounds,n=this.fe;e=z.allocAt(e.x,e.y,e.width,e.height);var s=this.strokeWidth;return e.Jc(s/2,s/2),s=A.allocAt(e.x,e.y).transform(n),t.h(s.x,s.y,0,0),s.h(e.right,e.y).transform(n),mn(t,s.x,s.y,0,0),s.h(e.right,e.bottom).transform(n),mn(t,s.x,s.y,0,0),s.h(e.x,e.bottom).transform(n),mn(t,s.x,s.y,0,0),z.free(e),A.free(s),t},S.Bh=function(t,e){var n=this.geometry;if(null===n||null===this.fill&&null===this.stroke)return!1;var s=n.bounds,a=this.strokeWidth/2;n.type!==rt.j||e||(a+=2);var u=z.alloc();if(u.assign(s),u.Jc(a+2,a+2),!u.$(t))return z.free(u),!1;if(s=a+1e-4,n.type===rt.j)return!(null===this.stroke||(s=(n.endX-n.startX)*(t.x-n.startX)+(n.endY-n.startY)*(t.y-n.startY),0>(n.startX-n.endX)*(t.x-n.endX)+(n.startY-n.endY)*(t.y-n.endY)||0>s))&&(z.free(u),V.Ob(n.startX,n.startY,n.endX,n.endY,a,t.x,t.y));if(n.type===rt.C){e=n.startX;var c=n.startY,f=n.endX;if(n=n.endY,u.x=Math.min(e,f),u.y=Math.min(c,n),u.width=Math.abs(f-e),u.height=Math.abs(n-c),null===this.fill){if(u.Jc(-s,-s),u.$(t))return z.free(u),!1;u.Jc(s,s)}return null!==this.stroke&&u.Jc(a,a),t=u.$(t),z.free(u),t}if(n.type===rt.L){c=n.startX,a=n.startY,f=n.endX;var p=n.endY;if(n=Math.min(c,f),e=Math.min(a,p),c=Math.abs(f-c)/2,a=Math.abs(p-a)/2,n=t.x-(n+c),e=t.y-(e+a),null===this.fill){if(a-=s,0>=(c-=s)||0>=a||1>=n*n/(c*c)+e*e/(a*a))return z.free(u),!1;c+=s,a+=s}return null!==this.stroke&&(c+=s,a+=s),z.free(u),!(0>=c||0>=a)&&1>=n*n/(c*c)+e*e/(a*a)}if(n.type===rt.o)return z.free(u),null===this.fill?Eb(n,t.x,t.y,a):R0(n,t,a,1<this.strokeWidth,e);q("Unknown Geometry type: "+n.type)},S.im=function(t,e,n,s){var a=this.desiredSize,u=this.ig;if(t=Math.max(t,0),e=Math.max(e,0),null!==this.Dd)var c=this.geometry.bounds;else{var f=this.figure,p=jm[f];if(void 0===p){var g=V.Qe[f];"string"==typeof g&&(g=V.Qe[g]),"function"==typeof g?(p=g(null,100,100),jm[f]=p):q("Unsupported Figure: "+f)}c=p.bounds}f=c.width,p=c.height,g=c.width;var y=c.height;switch(Io(this,!0)){case ze:s=n=0;break;case Ge:g=Math.max(t-u,0),y=Math.max(e-u,0);break;case Un:g=Math.max(t-u,0),s=0;break;case Xn:n=0,y=Math.max(e-u,0)}switch(isFinite(a.width)&&(g=a.width),isFinite(a.height)&&(y=a.height),a=this.maxSize,c=this.minSize,n=Math.max(n-u,c.width),s=Math.max(s-u,c.height),g=Math.min(a.width,g),y=Math.min(a.height,y),g=isFinite(g)?Math.max(n,g):Math.max(f,n),y=isFinite(y)?Math.max(s,y):Math.max(p,s),n=Fl(this)){case ze:break;case Ge:f=g,p=y;break;case Oo:n=Math.min(g/f,y/p),isFinite(n)||(n=1),f*=n,p*=n;break;default:q(n+" is not a valid geometryStretch.")}null!==this.Dd?(0===f&&(f=.001),0===p&&(p=.001),s=f/(a=(n=null!==this.Dd?this.Dd:this.ma).bounds).width,a=p/a.height,isFinite(s)||(s=1),isFinite(a)||(a=1),this.ma=1===s&&1===a?n:n.copy().scale(s,a)):null!==this.ma&&V.aa(this.ma.cl,t-u)&&V.aa(this.ma.al,e-u)||(this.ma=bt.makeGeometry(this,f,p)),c=this.ma.bounds,t===1/0||e===1/0?this.xe(c.x-u/2,c.y-u/2,0===t&&0===f?0:c.width+u,0===e&&0===p?0:c.height+u):this.xe(-u/2,-u/2,g+u,y+u)},S.zh=function(t,e,n,s){w_(this,t,e,n,s)},S.ws=function(t,e,n){return this.ak(t.x,t.y,e.x,e.y,n)},S.ak=function(t,e,n,s,a){var u=this.transform,c=1/(u.m11*u.m22-u.m12*u.m21),f=u.m22*c,p=-u.m12*c,g=-u.m21*c,y=u.m11*c,v=c*(u.m21*u.dy-u.m22*u.dx),_=c*(u.m12*u.dx-u.m11*u.dy);u=t*f+e*g+v,c=t*p+e*y+_,f=n*f+s*g+v,p=n*p+s*y+_,v=this.ig/2,null===(g=this.ma)&&(this.measure(1/0,1/0),g=this.ma);var b=g.bounds;if(y=!1,g.type===rt.j)if(1.5>=this.strokeWidth)y=V.Le(g.startX,g.startY,g.endX,g.endY,u,c,f,p,a);else{if(g.startX===g.endX?(s=v,y=0):(e=(g.endY-g.startY)/(g.endX-g.startX),s=(y=v/Math.sqrt(1+e*e))*e),e=Lt(),t=new A,V.Le(g.startX+s,g.startY+y,g.endX+s,g.endY+y,u,c,f,p,t)&&e.push(t),t=new A,V.Le(g.startX-s,g.startY-y,g.endX-s,g.endY-y,u,c,f,p,t)&&e.push(t),t=new A,V.Le(g.startX+s,g.startY+y,g.startX-s,g.startY-y,u,c,f,p,t)&&e.push(t),t=new A,V.Le(g.endX+s,g.endY+y,g.endX-s,g.endY-y,u,c,f,p,t)&&e.push(t),0===(f=e.length))return ee(e),!1;for(y=!0,p=1/0,s=0;s<f;s++)(n=((t=e[s]).x-u)*(t.x-u)+(t.y-c)*(t.y-c))<p&&(p=n,a.x=t.x,a.y=t.y);ee(e)}else if(g.type===rt.C)y=V.Cf(b.x-v,b.y-v,b.x+b.width+v,b.y+b.height+v,u,c,f,p,a);else if(g.type===rt.L){t:if(0===(e=z.allocAt(b.x,b.y,b.width,b.height).Jc(v,v)).width)y=V.Le(e.x,e.y,e.x,e.y+e.height,u,c,f,p,a);else if(0===e.height)y=V.Le(e.x,e.y,e.x+e.width,e.y,u,c,f,p,a);else{if(s=e.x+(t=e.width/2),y=e.y+(g=e.height/2),n=9999,u!==f&&(n=(c-p)/(u-f)),9999>Math.abs(n)){if(0>t*t*n*n+g*g-(p=c-y-n*(u-s))*p){a.x=NaN,a.y=NaN,y=!1;break t}f=(-t*t*n*p+t*g*(v=Math.sqrt(t*t*n*n+g*g-p*p)))/(g*g+t*t*n*n)+s,t=(-t*t*n*p-t*g*v)/(g*g+t*t*n*n)+s,g=n*(f-s)+p+y,p=n*(t-s)+p+y,Math.abs((u-f)*(u-f))+Math.abs((c-g)*(c-g))<Math.abs((u-t)*(u-t))+Math.abs((c-p)*(c-p))?(a.x=f,a.y=g):(a.x=t,a.y=p)}else{if(f=g*g,0>(f-=f/(t*t)*(p=u-s)*p)){a.x=NaN,a.y=NaN,y=!1;break t}f=y+(p=Math.sqrt(f)),p=y-p,Math.abs(f-c)<Math.abs(p-c)?(a.x=u,a.y=f):(a.x=u,a.y=p)}y=!0}z.free(e)}else if(g.type===rt.o){_=A.alloc();var D=f-u,k=p-c,O=D*D+k*k,E=u,R=c;if(0<O&&b.contains(E,R)&&(_.x=E,_.y=R,this.$(_)))for(0!==D&&.5>Math.abs(D)?(k*=.5/D,D=.5):0!==k&&.5>Math.abs(k)&&(D*=.5/k,k=.5),E-=D,R-=k;b.contains(E,R);)E-=D,R-=k;for(a.x=f,a.y=p,k=0;k<g.figures.count;k++)for(var F=g.figures.m[k],j=F.isFilled?E:u,L=F.isFilled?R:c,G=F.segments,ot=b=F.startX,Z=D=F.startY,ut=0;ut<G.count;ut++){var et=G.m[ut],Y=et.type,At=et.endX,Mt=et.endY,Pt=!1;switch(Y){case ko:ot=At,Z=Mt;break;case tn:Pt=Pp(b,D,At,Mt,j,L,f,p,_);break;case zr:Pt=V.Op(b,D,et.point1X,et.point1Y,et.point2X,et.point2Y,At,Mt,j,L,f,p,.6,_);break;case As:Pt=V.Op(b,D,b+2/3*(et.point1X-b),D+2/3*(et.point1Y-D),At+2/3*(et.point1X-At),Mt+2/3*(et.point1Y-Mt),At,Mt,j,L,f,p,.6,_);break;case on:case Zo:var ke=(Y=et.type===on?ja(et,F):dh(et,F,b,D)).length;if(0===ke){Pt=Pp(b,D,et.type===on?et.centerX:et.endX,et.type===on?et.centerY:et.endY,j,L,f,p,_);break}for(Mt=null,At=0;At<ke;At++){if(Mt=Y[At],0===At&&Pp(b,D,Mt[0],Mt[1],j,L,f,p,_)){var un=Ep(j,L,_,O,a);un<O&&(O=un,y=!0)}V.Op(Mt[0],Mt[1],Mt[2],Mt[3],Mt[4],Mt[5],Mt[6],Mt[7],j,L,f,p,.6,_)&&(un=Ep(j,L,_,O,a))<O&&(O=un,y=!0)}At=Mt[6],Mt=Mt[7];break;default:q("Unknown Segment type: "+Y)}b=At,D=Mt,Pt&&(Pt=Ep(j,L,_,O,a))<O&&(O=Pt,y=!0),et.isClosed&&Pp(b,D,At=ot,Mt=Z,j,L,f,p,_)&&(et=Ep(j,L,_,O,a))<O&&(O=et,y=!0)}u=n-t,c=s-e,0!==(f=Math.sqrt(u*u+c*c))&&(u/=f,c/=f),a.x-=u*v,a.y-=c*v,A.free(_)}else q("Unknown Geometry type: "+g.type);return!!y&&(this.transform.Aa(a),!0)},S.Ah=function(t,e){if(void 0===e)return t.Ge(this.actualBounds);var n=this.ma;null===n&&(this.measure(1/0,1/0),n=this.ma),n=n.bounds;var s=this.strokeWidth/2,a=!1,u=A.alloc();return u.h(n.x-s,n.y-s),t.$(e.Aa(u))&&(u.h(n.x-s,n.bottom+s),t.$(e.Aa(u))&&(u.h(n.right+s,n.bottom+s),t.$(e.Aa(u))&&(u.h(n.right+s,n.y-s),t.$(e.Aa(u))&&(a=!0)))),A.free(u),a},S.Lc=function(t,e){if(this.Ah(t,e)||void 0===e&&(e=this.transform,t.Ge(this.actualBounds)))return!0;var n=Et.alloc();n.set(e),n.Bs();var s=t.left,a=t.right,u=t.top;t=t.bottom;var c=A.alloc();if(c.h(s,u),n.Aa(c),this.Bh(c,!0)||(c.h(a,u),n.Aa(c),this.Bh(c,!0))||(c.h(s,t),n.Aa(c),this.Bh(c,!0))||(c.h(a,t),n.Aa(c),this.Bh(c,!0)))return A.free(c),!0;var f=A.alloc(),p=A.alloc();return n.set(e),n.tv(this.transform),n.Bs(),f.x=a,f.y=u,f.transform(n),c.x=s,c.y=u,c.transform(n),e=!1,Su(this,c,f,p)?e=!0:(c.x=a,c.y=t,c.transform(n),Su(this,c,f,p)?e=!0:(f.x=s,f.y=t,f.transform(n),Su(this,c,f,p)?e=!0:(c.x=s,c.y=u,c.transform(n),Su(this,c,f,p)&&(e=!0)))),A.free(c),Et.free(n),A.free(f),A.free(p),e},S.Sx=function(t,e,n){function s(O,E){for(var R=O.length,F=0;F<R;F+=2)if(E.pd(O[F],O[F+1])>a)return!0;return!1}if(n&&null!==this.fill&&this.Bh(t,!0))return!0;var a=t.xf(e),u=a;if(1.5<this.strokeWidth&&(a=this.strokeWidth/2+Math.sqrt(a),a*=a),null===(e=this.ma)&&(this.measure(1/0,1/0),null===(e=this.ma)))return!1;if(!n){var c=e.bounds,f=c.x,p=c.y,g=c.x+c.width;if(c=c.y+c.height,aa(t.x,t.y,f,p)<=a&&aa(t.x,t.y,g,p)<=a&&aa(t.x,t.y,f,c)<=a&&aa(t.x,t.y,g,c)<=a)return!0}if(f=e.startX,p=e.startY,g=e.endX,c=e.endY,e.type===rt.j){if(n=(f-g)*(t.x-g)+(p-c)*(t.y-c),gi(t.x,t.y,f,p,g,c)<=(0<=(g-f)*(t.x-f)+(c-p)*(t.y-p)&&0<=n?a:u))return!0}else{if(e.type===rt.C)return e=!1,n&&(e=gi(t.x,t.y,f,p,f,c)<=a||gi(t.x,t.y,f,p,g,p)<=a||gi(t.x,t.y,g,p,g,c)<=a||gi(t.x,t.y,f,c,g,c)<=a),e;if(e.type===rt.L){e=t.x-(f+g)/2,u=t.y-(p+c)/2;var y=Math.abs(g-f)/2,v=Math.abs(c-p)/2;if(0===y||0===v)return gi(t.x,t.y,f,p,g,c)<=a;if(!n)return!(aa(e,u,-y,0)>=a||aa(e,u,0,-v)>=a||aa(e,u,0,v)>=a||aa(e,u,y,0)>=a);if((t=V.xz(y,v,e,u))*t<=a)return!0}else if(e.type===rt.o){if(u=(g=e.bounds).x,f=g.y,p=g.x+g.width,g=g.y+g.height,t.x>p&&t.x<u&&t.y>g&&t.y<f&&gi(t.x,t.y,u,f,u,g)>a&&gi(t.x,t.y,u,f,p,f)>a&&gi(t.x,t.y,p,g,u,g)>a&&gi(t.x,t.y,p,g,p,f)>a)return!1;if(u=Math.sqrt(a),!n){for(n=e.figures,e=0;e<n.count;e++){if(t.pd(c=(u=n.m[e]).startX,y=u.startY)>a)return!1;for(p=(f=u.segments.m).length,g=0;g<p;g++)switch(v=f[g],v.type){case ko:case tn:if(t.pd(c=v.endX,y=v.endY)>a)return!1;break;case zr:var _=Lt();if(V.Fe(c,y,v.point1X,v.point1Y,v.point2X,v.point2Y,v.endX,v.endY,.8,_),c=s(_,t),ee(_),c||t.pd(c=v.endX,y=v.endY)>a)return!1;break;case As:if(_=Lt(),V.lq(c,y,v.point1X,v.point1Y,v.endX,v.endY,.8,_),c=s(_,t),ee(_),c||t.pd(c=v.endX,y=v.endY)>a)return!1;break;case on:case Zo:var b=(_=v.type===on?ja(v,u):dh(v,u,c,y)).length;if(0===b){if(t.pd(c=v.type===on?v.centerX:v.endX,y=v.type===on?v.centerY:v.endY)>a)return!1;break}v=null;for(var D=Lt(),k=0;k<b;k++)if(v=_[k],D.length=0,V.Fe(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],.8,D),s(D,t))return ee(D),!1;ee(D),null!==v&&(c=v[6],y=v[7]);break;default:q("Unknown Segment type: "+v.type)}}return!0}if(null===this.fill?Eb(e,t.x,t.y,u):R0(e,t,u,!0,!1))return!0}}return!1},S.gc=function(){this.ma=null},S.Qw=function(){return this.ig},bt.makeGeometry=function(t,e,n){if("None"!==t.toArrow)var s=as[t.toArrow];else"None"!==t.fromArrow?s=as[t.fromArrow]:("string"==typeof(s=V.Qe[t.figure])&&(s=V.Qe[s]),void 0===s&&q("Unknown Shape.figure: "+t.figure),(s=s(t,e,n)).cl=e,s.al=n);if(null===s){var a=V.Qe.Rectangle;"function"==typeof a&&(s=a(t,e,n))}return s},kt.Object.defineProperties(bt.prototype,{geometry:{get:function(){return null!==this.ma?this.ma:this.Dd},set:function(t){var e=this.ma,n=this.Dd;if(e!==t){this.Dd=this.ma=null!==t?t.freeze():null;var s=this.part;null!==s&&(s.Xf=NaN),this.s(),this.g("geometry",e||n,t),Ph(this)&&null!==(t=this.part)&&Eh(this,t,"geometryString")}}},geometryString:{get:function(){return null===this.geometry?"":this.geometry.toString()},set:function(t){var e=(t=rt.parse(t)).normalize();this.geometry=t,this.position=t=A.allocAt(-e.x,-e.y),A.free(t)}},isGeometryPositioned:{get:function(){return this.Sn},set:function(t){var e=this.Sn;e!==t&&(this.Sn=t,this.s(),this.g("isGeometryPositioned",e,t))}},fill:{get:function(){return this.Uk},set:function(t){var e=this.Uk;e!==t&&(null!==t&&bu(t,"Shape.fill"),t instanceof jt&&t.freeze(),this.Uk=t,this.N(),this.g("fill",e,t))}},stroke:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(null!==t&&bu(t,"Shape.stroke"),t instanceof jt&&t.freeze(),this.Gc=t,this.N(),this.g("stroke",e,t))}},strokeWidth:{get:function(){return this.ig},set:function(t){var e=this.ig;if(e!==t)if(0<=t){this.ig=t,this.s();var n=this.part;null!==n&&(n.Xf=NaN),this.g("strokeWidth",e,t)}else ae(t,"value >= 0",bt,"strokeWidth:value")}},strokeCap:{get:function(){return this.Ll},set:function(t){var e=this.Ll;e!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?ae(t,'"butt", "round", or "square"',bt,"strokeCap"):(this.Ll=t,this.N(),this.g("strokeCap",e,t)))}},strokeJoin:{get:function(){return this.Ml},set:function(t){var e=this.Ml;e!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?ae(t,'"miter", "bevel", or "round"',bt,"strokeJoin"):(this.Ml=t,this.N(),this.g("strokeJoin",e,t)))}},strokeMiterLimit:{get:function(){return this.Kj},set:function(t){var e=this.Kj;if(e!==t&&1<=t){this.Kj=t,this.N();var n=this.part;null!==n&&(n.Xf=NaN),this.g("strokeMiterLimit",e,t)}}},strokeDashArray:{get:function(){return this.mh},set:function(t){var e=this.mh;if(e!==t){if(null!==t){for(var n=t.length,s=0,a=0;a<n;a++){var u=t[a];0<=u&&isFinite(u)||q("strokeDashArray:value "+u+" at index "+a+" must be a positive number or zero."),s+=u}if(0===s){if(null===e)return;t=null}}this.mh=t,this.N(),this.g("strokeDashArray",e,t)}}},strokeDashOffset:{get:function(){return this.nh},set:function(t){var e=this.nh;e!==t&&0<=t&&(this.nh=t,this.N(),this.g("strokeDashOffset",e,t))}},figure:{get:function(){return this.xn},set:function(t){var e=this.xn;if(e!==t){var n=V.Qe[t];"function"==typeof n?n=t:(n=V.Qe[t.toLowerCase()])||q("Unknown Shape.figure: "+t),e!==n&&(null!==(t=this.part)&&(t.Xf=NaN),this.xn=n,this.Dd=null,this.gc(),this.s(),this.g("figure",e,n))}}},toArrow:{get:function(){return this.Sl},set:function(t){var e=this.Sl;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=k_(t);null===n?q("Unknown Shape.toArrow: "+t):e!==n&&(this.Sl=n,this.Dd=null,this.gc(),this.s(),Ap(this),this.g("toArrow",e,n))}}},fromArrow:{get:function(){return this.Vk},set:function(t){var e=this.Vk;if(!0===t?t="Standard":!1===t&&(t=""),e!==t){var n=k_(t);null===n?q("Unknown Shape.fromArrow: "+t):e!==n&&(this.Vk=n,this.Dd=null,this.gc(),this.s(),Ap(this),this.g("fromArrow",e,n))}}},spot1:{get:function(){return this.mf},set:function(t){var e=this.mf;e.A(t)||(this.mf=t=t.I(),this.s(),this.g("spot1",e,t))}},spot2:{get:function(){return this.nf},set:function(t){var e=this.nf;e.A(t)||(this.nf=t=t.I(),this.s(),this.g("spot2",e,t))}},parameter1:{get:function(){return this.Ko},set:function(t){var e=this.Ko;e!==t&&(this.Ko=t,this.gc(),this.s(),this.g("parameter1",e,t))}},parameter2:{get:function(){return this.Lo},set:function(t){var e=this.Lo;e!==t&&(this.Lo=t,this.gc(),this.s(),this.g("parameter2",e,t))}},naturalBounds:{get:function(){var t=this.desiredSize;return t.u()||null===this.ma?new z(0,0,t.width,t.height):(this.wc.assign(this.ma.bounds),this.wc)}},pathPattern:{get:function(){return this.No},set:function(t){var e=this.No;e!==t&&(this.No=t,this.N(),this.g("pathPattern",e,t))}},geometryStretch:{get:function(){return this.En},set:function(t){var e=this.En;e!==t&&(this.En=t,this.s(),this.g("geometryStretch",e,t))}},interval:{get:function(){return this.Zd},set:function(t){var e=this.Zd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Zd=t;var n=this.diagram;null!==n&&this.panel===n.grid&&Ga(n),this.s(),null!==(n=this.panel)&&(n.Rf=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Yd},set:function(t){var e=this.Yd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Yd=t,this.s(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Wd},set:function(t){var e=this.Wd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Wd=t,this.s(),this.g("graduatedEnd",e,t))}},graduatedSkip:{get:function(){return this.Xd},set:function(t){var e=this.Xd;e!==t&&(this.Xd=t,this.s(),this.g("graduatedSkip",e,t))}}}),bt.prototype.intersectsRect=bt.prototype.Lc,bt.prototype.containedInRect=bt.prototype.Ah,bt.prototype.getNearestIntersectionPoint=bt.prototype.ws,bt.prototype.getDocumentBounds=bt.prototype.Li,bt.prototype.getDocumentPoint=bt.prototype.da;var as=new Dr,jm=new Dr;function Jt(t,e){return dt.call(this),Ym||(Oi=Wr?new Xr(null).context:null,Ym=!0),this.Xb="",this.Gc="black",this.qe="13px sans-serif",this.ti="start",this.Vd=ze,this.Ai=If,this.qj=!0,this.ai=this.bi=!1,this.$f=Um,this.mg=P_,this.vr=this.sb=this.Xc=0,this.Zt=this.$t=null,this.un=!1,this.md=this.Xm=this.zp=this.ui=this.Ap=null,this.lf=this.kf=0,this.Yh=A_,this.we=1/0,this.ei=0,this.re=null,this.Ce=0,this.pe=this.Tb=this.Dc=null,this.Zd=1,this.Yd=0,this.Wd=1,this.Xd=this.jj=null,"string"==typeof t?this.text=t:t&&Object.assign(this,t),e&&Object.assign(this,e),this}function Hm(t,e){t.G=6144|e.G,t.mb=e.opacity,t.Vb=e.background,t.hd=e.areaBackground,t.Tc=e.desiredSize.I(),t.Zf=e.minSize.I(),t.Yf=e.maxSize.I(),t.Cb=null!==e.Cb?e.Cb.copy():null,t.sa=e.scale,t.zb=e.angle,t.Ee=e.stretch,t.Vg=e.margin.I(),t.yb=e.alignment.I(),t.xk=e.alignmentFocus.I(),t.Bl=e.segmentFraction,t.Cl=e.segmentOffset.I(),t.Dl=e.segmentOrientation,null!==e.$a&&(t.$a=e.$a.copy()),t.Fl=e.shadowVisible,e instanceof Jt&&(t.Xb=e.Xb,t.Gc=e.Gc,t.qe=e.qe,t.ti=e.ti,t.Vd=e.Vd,t.Ai=e.Ai,t.qj=e.qj,t.bi=e.bi,t.ai=e.ai,t.$f=e.$f,t.mg=e.mg,t.re=null,t.kf=e.kf,t.lf=e.lf,t.we=e.we,t.ei=e.ei,t.Zd=e.Zd,t.Yd=e.Yd,t.Wd=e.Wd,t.jj=e.jj,t.Xd=e.Xd)}function Ed(t,e,n){null===t.pe?(t.pe=e,t.sb=n):((null===t.Tb||null===t.Dc)&&(t.Tb=[],t.Dc=[],t.Tb.push(t.pe),t.Dc.push(t.sb)),t.Tb.push(e),t.Dc.push(n))}function Pd(t,e,n,s){var a=t.Yh===A_;a&&(e=e.trim());var u=0,c=t.qe,f=t.kf+t.lf;f=Math.max(0,Vh(t)+f);var p=t.$f===Op?vv(c):0;if(t.Xc>=t.we)null!==s&&s.h(0,f);else if(c=e,t.mg===Gm){t.Ce=1;var g=Jr(e);if(0===p||g<=n)t.sb=Math.max(t.sb,g),Ed(t,e,t.sb),null!==s&&s.h(g,f);else{for(g=Jr((u=Rl(t,c))+(e=Rl(t,c=c.substr(u.length))));0<e.length&&g<=n;)g=(u+=e)+(e=Rl(t,c=c.substr(e.length))),a&&(g=g.trim()),g=Jr(g);for(a&&(e=e.trim()),u+=e,n=Math.max(1,n-p);Jr(u)>n&&1<u.length;)u=u.substr(0,u.length-1);var y=Jr(u+=Ip);t.sb=y,Ed(t,u,y),null!==s&&s.h(y,f)}}else{for(p=0,0===c.length&&(p=1,Ed(t,c,0));0<c.length;){for(e=Rl(t,c),c=c.substr(e.length);Jr(e)>n;){var v=1;for(g=Jr(e.substr(0,v)),y=0;g<=n;)v++,y=g,g=Jr(e.substr(0,v));if(1===v){var _=g;u=Math.max(u,g)}else _=y,u=Math.max(u,y);if(1>--v&&(v=1),Ed(t,e.substr(0,v),_),p++,e=e.substr(v),t.Xc+p>t.we)break}for(g=Jr(e+(y=Rl(t,c)));0<y.length&&g<=n;)g=(e+=y)+(y=Rl(t,c=c.substr(y.length))),a&&(g=g.trim()),g=Jr(g);if(a&&(e=e.trim()),""!==e&&("\xad"===e[e.length-1]&&(e=e.substring(0,e.length-1)+"\u2010"),0===y.length?(v=g,u=Math.max(u,g)):(v=y=Jr(e),u=Math.max(u,y)),Ed(t,e,v),p++,t.Xc+p>t.we))break}t.Ce=Math.min(t.we,p),t.sb=Math.max(t.sb,u),null!==s&&s.h(t.sb,f*t.Ce)}}function Rl(t,e){if(t.mg===wv)return e.substr(0,1);for(var n=e.length,s=0,a=Kb;s<n&&!a.test(e.charAt(s));)s++;for(t.Yh===O_&&(n=Math.min(n,s+1));s<n&&a.test(e.charAt(s));)s++;return s>=e.length?e:e.substr(0,s)}function Jr(t){return null===Oi?8*t.length:Oi.measureText(t).width}function Vh(t){if(null!==t.re)return t.re;var e=t.qe;if(null===Oi){var n=16;return t.re=n}return void 0!==zm[e]&&5e3>I_?n=zm[e]:(n=1.3*Oi.measureText("M").width,zm[e]=n,I_++),t.re=n}function vv(t){if(null===Oi)return 6;if(void 0!==$m[t]&&5e3>ls)var e=$m[t];else e=Oi.measureText(Ip).width,$m[t]=e,ls++;return e}function Vm(t,e){var n=t.Xb.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),s=t.kf+t.lf;if(s=Math.max(0,Vh(t)+s),0===n.length)return t.sb=0,t.Xc=1,s;if(!t.isMultiline){var a=n.indexOf("\n",0);0<=a&&(n=n.substr(0,a))}a=0;for(var c,u=t.Xc=0,f=!1;!f;){if(-1===(c=n.indexOf("\n",u))&&(c=n.length,f=!0),u<=c){if(u=n.substr(u,c-u),t.mg!==Gm){t.Ce=0;var p=Dt.alloc();Pd(t,u,e,p),a+=p.height,Dt.free(p),t.Xc+=t.Ce}else Pd(t,u,e,null),a+=s,t.Xc++;t.Xc===t.we&&(f=!0)}u=c+1}return t.vr=a}bt.className="Shape",bt.getFigureGenerators=function(){var e,t=new xt;for(e in V.Qe)e!==e.toLowerCase()&&t.add(e,V.Qe[e]);return t.freeze(),t},bt.defineFigureGenerator=function(t,e){var n=t.toLowerCase(),s=V.Qe;s[t]=e,s[n]=t},bt.getArrowheadGeometries=function(){var t=new xt;for(s in V.Im)if(void 0===as[s]){var e=rt.parse(V.Im[s],!1);as[s]=e,(e=s.toLowerCase())!==s&&(as[e]=s)}for(var n in as)if(n!==n.toLowerCase()){var s=as[n];s instanceof rt&&t.add(n,s)}return t.freeze(),t},bt.defineArrowheadGeometry=function(t,e){var n;n="string"==typeof e?rt.parse(e,!1):e,"none"!==(e=t.toLowerCase())&&t!==e||q("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t);var s=as;s[t]=n,s[e]=t},Wt(Jt,dt),Jt.prototype.cloneProtected=function(t){dt.prototype.cloneProtected.call(this,t),t.Xb=this.Xb,t.Gc=this.Gc,t.qe=this.qe,t.ti=this.ti,t.Vd=this.Vd,t.Ai=this.Ai,t.qj=this.qj,t.bi=this.bi,t.ai=this.ai,t.$f=this.$f,t.mg=this.mg,t.Xc=this.Xc,t.vr=this.vr,t.sb=this.sb,t.$t=this.$t,t.Zt=this.Zt,t.un=this.un,t.Ap=this.Ap,t.ui=this.ui,t.zp=this.zp,t.Xm=this.Xm,t.md=this.md,t.kf=this.kf,t.lf=this.lf,t.Yh=this.Yh,t.we=this.we,t.re=this.re,t.Ce=this.Ce,t.Dc=this.Dc,t.Tb=this.Tb,t.pe=this.pe,t.ei=this.ei,t.Zd=this.Zd,t.Yd=this.Yd,t.Wd=this.Wd,t.jj=this.jj,t.Xd=this.Xd},(S=Jt.prototype).gb=function(t){t.classType===Jt?this.wrap=t:dt.prototype.gb.call(this,t)},S.toString=function(){return 22<this.Xb.length?'TextBlock("'+this.Xb.substring(0,20)+'"...)':'TextBlock("'+this.Xb+'")'},S.s=function(){dt.prototype.s.call(this),this.Zt=this.$t=null},S.Ei=function(t,e){if(null!==this.Gc&&0!==this.Xb.length&&null!==this.qe){var n=this.naturalBounds,s=this.actualBounds,a=n.width,u=n.height,c=Vh(this),f=t.textAlign=this.ti,p=e.Vn;"start"===f?f=p?"right":"left":"end"===f&&(f=p?"left":"right"),p=this.bi;var g=this.ai;Tr(this,t,this.Gc,!0,!1,n,s),(p||g)&&Tr(this,t,this.Gc,!1,!1,n,s),s=0,n=!1;var y=this.fe,v=y.dx-(c*y.m21+y.dx),_=e.scale;switch(8>(v*v+(y=y.dy-(c*y.m22+y.dy))*y)*_*_&&(n=!0),e.Ab!==t&&(n=!1),!1===e.Ie("textGreeking")&&(n=!1),e=this.kf,v=this.lf,this.flip){case Hs:t.translate(a,0),t.scale(-1,1);break;case gp:t.translate(0,u),t.scale(1,-1);break;case Pl:t.translate(a,u),t.scale(-1,-1)}if(t.Ed(),u>(_=(e+c+v)*(y=this.Xc))&&(s=(s=this.Ai).y*u-s.y*_+s.offsetY),1===y&&null!==this.pe)(v=this.sb)>a&&(v=a),this.Di(this.pe,t,0,s+e,a,c,v,n,f,p,g);else if(null!==this.Dc&&null!==this.Tb)for(_=0;_<y;_++){var b=this.Dc[_];b>a&&(b=a),this.Di(this.Tb[_],t,0,s+=e,a,c,b,n,f,p,g),s+=c+v}switch(this.flip){case Hs:t.scale(-1,1),t.translate(-a,0);break;case gp:t.scale(1,-1),t.translate(0,-u);break;case Pl:t.scale(-1,-1),t.translate(-a,-u)}}},S.Di=function(t,e,n,s,a,u,c,f,p,g,y){var v=0;f?("left"===p?v=0:"right"===p?v=a-c:"center"===p&&(v=(a-c)/2),e.fillRect(n+v,s+.25*u,c,1)):("left"===p?v=0:"right"===p?v=a:"center"===p&&(v=a/2),a=null!==Nu?Nu(this,u):.75*u,e.fillText(t,n+v,s+a),0==(t=u/20|0)&&(t=1),"right"===p?v-=c:"center"===p&&(v-=c/2),g&&(p=null!==Bm?Bm(this,u):.8*u,e.beginPath(),e.lineWidth=t,e.moveTo(n+v,s+p),e.lineTo(n+v+c,s+p),e.stroke()),y&&(e.beginPath(),e.lineWidth=t,s=s+u-u/2.2|0,t%2!=0&&(s+=.5),e.moveTo(n+v,s),e.lineTo(n+v+c,s),e.stroke()))},S.im=function(t,e,n,s){this.ei=t;var u,a=this.qe;if(null!==Oi&&_v!==a&&(_v=Oi.font=a),this.sb=this.Ce=0,this.pe=this.Tb=this.Dc=this.re=null,isNaN(this.desiredSize.width)){if(0===(a=this.Xb.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length)a=0;else if(this.isMultiline){for(var c=u=0,f=!1;!f;){var p=a.indexOf("\n",c);-1===p&&(p=a.length,f=!0),c=a.substr(c,p-c),this.Yh===A_&&(c=c.trim()),u=Math.max(u,Jr(c)),c=p+1}a=u}else 0<=(u=a.indexOf("\n",0))&&(a=a.substr(0,u)),a=Jr(a);a=Math.min(a,t/this.scale),a=Math.max(8,a)}else a=this.desiredSize.width;if(null!==this.panel&&(a=Math.min(a,this.panel.maxSize.width)),u=Vm(this,a),f=u=isNaN(this.desiredSize.height)?Math.min(u,e/this.scale):this.desiredSize.height,0!==this.sb&&null!==this.Dc&&null!==this.Tb&&this.$f===Op&&(e=this.qe,e=this.$f===Op?vv(e):0,p=this.kf+this.lf,p=Math.max(0,Vh(this)+p),!((f=Math.min(this.maxLines-1,Math.max(Math.floor(f/p+.01)-1,0)))+1>=this.Tb.length))){for(p=this.Tb[f],e=Math.max(1,t-e);Jr(p)>e&&1<p.length;)p=p.substr(0,p.length-1);e=Jr(p+=Ip),this.Tb[f]=p,this.Tb=this.Tb.slice(0,f+1),this.Dc[f]=e,this.Dc=this.Dc.slice(0,f+1),this.Ce=this.Tb.length,this.sb=Math.max(this.sb,e),this.Xc=this.Ce,1===this.Xc&&(this.pe=this.Tb[0])}(this.wrap===E_||isNaN(this.desiredSize.width))&&(a=isNaN(t)?this.sb:Math.min(t,this.sb),isNaN(this.desiredSize.width)&&(a=Math.max(8,a))),a=Math.max(n,a),u=Math.max(s,u),La(this.wc,a,u),this.xe(0,0,a,u)},S.zh=function(t,e,n,s){w_(this,t,e,n,s)},kt.Object.defineProperties(Jt.prototype,{font:{get:function(){return this.qe},set:function(t){var e=this.qe;e!==t&&(this.qe=t,this.re=null,this.s(),this.g("font",e,t))}},text:{get:function(){return this.Xb},set:function(t){var e=this.Xb;e!==(t=null!=t?t.toString():"")&&(this.Xb=t,this.s(),this.g("text",e,t))}},textAlign:{get:function(){return this.ti},set:function(t){var e=this.ti;e===t||"start"!==t&&"end"!==t&&"left"!==t&&"right"!==t&&"center"!==t||(this.ti=t,this.N(),this.g("textAlign",e,t))}},flip:{get:function(){return this.Vd},set:function(t){var e=this.Vd;e!==t&&(this.Vd=t,this.N(),this.g("flip",e,t))}},verticalAlignment:{get:function(){return this.Ai},set:function(t){var e=this.Ai;e.A(t)||(this.Ai=t=t.I(),xd(this),this.g("verticalAlignment",e,t))}},naturalBounds:{get:function(){if(!this.wc.u()){var t=Dt.alloc();Pd(this,this.Xb,999999,t);var e=t.width;Dt.free(t),t=Vm(this,e);var n=this.desiredSize;isNaN(n.width)||(e=n.width),isNaN(n.height)||(t=n.height),La(this.wc,e,t)}return this.wc}},isMultiline:{get:function(){return this.qj},set:function(t){var e=this.qj;e!==t&&(this.qj=t,this.s(),this.g("isMultiline",e,t))}},isUnderline:{get:function(){return this.bi},set:function(t){var e=this.bi;e!==t&&(this.bi=t,this.N(),this.g("isUnderline",e,t))}},isStrikethrough:{get:function(){return this.ai},set:function(t){var e=this.ai;e!==t&&(this.ai=t,this.N(),this.g("isStrikethrough",e,t))}},wrap:{get:function(){return this.mg},set:function(t){var e=this.mg;e!==t&&(this.mg=t,this.s(),this.g("wrap",e,t))}},overflow:{get:function(){return this.$f},set:function(t){var e=this.$f;e!==t&&(this.$f=t,this.s(),this.g("overflow",e,t))}},stroke:{get:function(){return this.Gc},set:function(t){var e=this.Gc;e!==t&&(null!==t&&bu(t,"TextBlock.stroke"),t instanceof jt&&t.freeze(),this.Gc=t,this.N(),this.g("stroke",e,t))}},lineCount:{get:function(){return this.Xc}},lineHeight:{get:function(){return Vh(this)}},editable:{get:function(){return this.un},set:function(t){var e=this.un;e!==t&&(this.un=t,this.g("editable",e,t))}},textEditor:{get:function(){return this.Ap},set:function(t){var e=this.Ap;e!==t&&(this.Ap=t,this.g("textEditor",e,t))}},errorFunction:{get:function(){return this.md},set:function(t){var e=this.md;e!==t&&(this.md=t,this.g("errorFunction",e,t))}},interval:{get:function(){return this.Zd},set:function(t){var e=this.Zd;if(e!==(t=Math.round(t))&&0!==t&&isFinite(t)){this.Zd=t,this.s();var n=this.panel;null!==n&&(n.Rf=null),this.g("interval",e,t)}}},graduatedStart:{get:function(){return this.Yd},set:function(t){var e=this.Yd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Yd=t,this.s(),this.g("graduatedStart",e,t))}},graduatedEnd:{get:function(){return this.Wd},set:function(t){var e=this.Wd;e!==t&&(0>t?t=0:1<t&&(t=1),this.Wd=t,this.s(),this.g("graduatedEnd",e,t))}},graduatedFunction:{get:function(){return this.jj},set:function(t){var e=this.jj;e!==t&&(this.jj=t,this.s(),this.g("graduatedFunction",e,t))}},graduatedSkip:{get:function(){return this.Xd},set:function(t){var e=this.Xd;e!==t&&(this.Xd=t,this.s(),this.g("graduatedSkip",e,t))}},textValidation:{get:function(){return this.ui},set:function(t){var e=this.ui;e!==t&&(this.ui=t,this.g("textValidation",e,t))}},textEdited:{get:function(){return this.zp},set:function(t){var e=this.zp;e!==t&&(this.zp=t,this.g("textEdited",e,t))}},spacingAbove:{get:function(){return this.kf},set:function(t){var e=this.kf;e!==t&&(this.kf=t,this.s(),this.g("spacingAbove",e,t))}},spacingBelow:{get:function(){return this.lf},set:function(t){var e=this.lf;e!==t&&(this.lf=t,this.s(),this.g("spacingBelow",e,t))}},formatting:{get:function(){return this.Yh},set:function(t){var e=this.Yh;e!==t&&(this.Yh=t,this.s(),this.g("formatting",e,t))}},maxLines:{get:function(){return this.we},set:function(t){var e=this.we;e!==t&&(0>=(t=Math.floor(t))&&ae(t,"> 0",Jt,"maxLines"),this.we=t,this.s(),this.g("maxLines",e,t))}},metrics:{get:function(){return{arrSize:null!==this.Dc?this.Dc:[this.sb],arrText:null!==this.Tb?this.Tb:[this.pe],maxLineWidth:this.sb,fontHeight:this.re}}},choices:{get:function(){return this.Xm},set:function(t){var e=this.Xm;e!==t&&(this.Xm=t,this.g("choices",e,t))}}});var Nu=null,Bm=null,Gm=new Q(Jt,"None",0),E_=new Q(Jt,"WrapFit",1),P_=new Q(Jt,"WrapDesiredSize",2),wv=new Q(Jt,"WrapBreakAll",3),Um=new Q(Jt,"OverflowClip",0),Op=new Q(Jt,"OverflowEllipsis",1),A_=new Q(Jt,"FormatTrim",0),O_=new Q(Jt,"FormatNone",0),Kb=/[ \u200b\u00ad]/,zm=new Dr,I_=0,$m=new Dr,ls=0,Ip="...",_v="",Oi=null,Ym=!1;function zi(t,e){dt.call(this),this.Mg=null,this.sp="",this.lh=Qc,this.Xk=Ge,this.oh=this.md=null,this.Wk=Ut,this.Vd=ze,this.Ol=null,this.Rn=!1,this.br=!0,this.ml=!1,this.Hl=null,"string"==typeof t?this.source=t:t&&Object.assign(this,t),e&&Object.assign(this,e)}function Ad(t){void 0===t&&(t=""),""!==t?Od[t]&&(delete Od[t],Wm--):(Od=new Dr,Wm=0)}function xv(t,e){e.Py||(e.Yt=function(n){e.mr=!0,e.Mn=!1;var s=e.Ig.copy();if(null!=s){for(s=s.iterator;s.next();){var a=s.value,u=e.getAttribute("src"),c=a.fh.H(u);if(null!==c)for(var f=c.length,p=0;p<f;p++)a.Oo.add(u=c[p]),a.Gb(),e.Fn&&(void 0===e.lu&&(e.lu=n),null!==u.oh&&u.oh(u,n))}e.Ig=null}t.desiredSize.u()||(hr(t,!1),t.s())},e.Nt=function(n){e.Mn=n;var s=e.Ig.copy();if(null!=s){for(s=s.iterator;s.next();){var a=s.value,u=e.getAttribute("src"),c=a.fh.H(u);if(null!==c){a=c.length,u=Lt();for(var f=0;f<a;f++)u.push(c[f]);if(e.Fn)for(f=0;f<a;f++)null!==(c=u[f]).md&&c.md(c,n);ee(u)}}e.Ig=null}},e.addEventListener("load",e.Yt),e.addEventListener("error",e.Nt),e.Py=!0)}function F_(t){t.removeEventListener("load",t.Yt),t.removeEventListener("error",t.Nt),delete t.Yt,delete t.Nt}Jt.className="TextBlock",Jt.getEllipsis=function(){return Ip},Jt.setEllipsis=function(t){Ip=t,$m=new Dr,ls=0},Jt.getBaseline=function(){return Nu},Jt.setBaseline=function(t){Nu=t},Jt.getUnderline=function(){return Bm},Jt.setUnderline=function(t){Bm=t},Jt.isValidFont=function(t){if(Ym||(Oi=Wr?new Xr(null).context:null,Ym=!0),null===Oi)return!0;var e=Oi.font;if(t===e||"10px sans-serif"===t)return!0;Oi.font="10px sans-serif",Oi.font=t;var n=Oi.font;if("10px sans-serif"!==n)return Oi.font=e,!0;Oi.font="19px serif";var s=Oi.font;return Oi.font=t,n=Oi.font,Oi.font=e,n!==s},Jt.None=Gm,Jt.WrapFit=E_,Jt.WrapDesiredSize=P_,Jt.WrapBreakAll=wv,Jt.OverflowClip=Um,Jt.OverflowEllipsis=Op,Wt(zi,dt),zi.prototype.cloneProtected=function(t){dt.prototype.cloneProtected.call(this,t),t.element=this.Mg,t.sp=this.sp,t.lh=this.lh.I(),t.Xk=this.Xk,t.Vd=this.Vd,t.md=this.md,t.oh=this.oh,t.Wk=this.Wk.I(),t.br=this.br,t.Hl=this.Hl},zi.prototype.gb=function(t){t===ze||t===Oo||t===pp?this.imageStretch=t:dt.prototype.gb.call(this,t)},zi.prototype.toString=function(){return"Picture("+this.source+")#"+pn(this)},zi.prototype.DA=function(){if(""!==this.source){Ad(this.source);var t=this.source;this.source="",this.source=t}},zi.prototype.redraw=function(){this.N()},zi.prototype.Ei=function(t,e){var n=this.Mg;if(null!==n){var s=n.getAttribute("src");if(!(n instanceof HTMLImageElement&&(null===s||""===s)||n.Mn instanceof Event&&t instanceof En)){s=this.naturalBounds;var a=0,u=0,c=this.Rn,f=c?+n.width:n.naturalWidth;if(void 0===f&&n.videoWidth&&(f=n.videoWidth),void 0===(c=c?+n.height:n.naturalHeight)&&n.videoHeight&&(c=n.videoHeight),c=c||s.height,0!==(f=f||s.width)&&0!==c){var p=f,g=c;this.sourceRect.u()&&(a=this.lh.x,u=this.lh.y,f=this.lh.width,c=this.lh.height);var y=f,v=c,_=this.Xk,b=this.Wk;switch(_){case ze:if(this.sourceRect.u())break;y>=s.width&&(a=a+b.offsetX+(y*b.x-s.width*b.x)),v>=s.height&&(u=u+b.offsetY+(v*b.y-s.height*b.y)),f=Math.min(s.width,y),c=Math.min(s.height,v);break;case Ge:y=s.width,v=s.height;break;case Oo:case pp:_===Oo?(y*=_=Math.min(s.height/v,s.width/y),v*=_):_===pp&&((y*=_=Math.max(s.height/v,s.width/y))>=s.width&&(a=(a+b.offsetX+(y*b.x-s.width*b.x)/y)*f),(v*=_)>=s.height&&(u=(u+b.offsetY+(v*b.y-s.height*b.y)/v)*c),f*=1/(y/s.width),c*=1/(v/s.height),y=s.width,v=s.height)}var D=y*(_=this.Af()*e.scale)*v*_,k=f*c/D,O=n.__goCache;if(_=null,n.mr&&void 0!==O&&4<D&&k>xe*xe)for(null===O.Ci&&(Dv(O,4,p,g,n),Dv(O,16,p,g,n)),g=(p=O.Ci).length,D=0;D<g&&p[D].ratio*p[D].ratio<k;D++)_=p[D];if(!e.rn){if(null===this.Ol)if(null===this.Mg)this.Ol=!1;else{(p=new Xr(null).context).drawImage(this.Mg,0,0);try{p.getImageData(0,0,1,1).data[3]&&(this.Ol=!1),this.Ol=!1}catch(R){this.Ol=!0}}if(this.Ol)return}switch(p=0,y<s.width&&(p=b.offsetX+(s.width*b.x-y*b.x)),g=0,v<s.height&&(g=b.offsetY+(s.height*b.y-v*b.y)),this.flip){case Hs:t.translate(Math.min(s.width,y),0),t.scale(-1,1);break;case gp:t.translate(0,Math.min(s.height,v)),t.scale(1,-1);break;case Pl:t.translate(Math.min(s.width,y),Math.min(s.height,v)),t.scale(-1,-1)}if(t.Ed(),e.Ie("pictureRatioOptimization")&&!e.pj&&void 0!==O&&null!==_&&1!==_.ratio){t.save(),e=_.ratio;try{t.drawImage(_.source,a/e,u/e,Math.min(_.source.width,f/e),Math.min(_.source.height,c/e),p,g,Math.min(s.width,y),Math.min(s.height,v))}catch(R){this.br=!1}t.restore()}else try{t.drawImage(n,a,u,f,c,p,g,Math.min(s.width,y),Math.min(s.height,v))}catch(R){this.br=!1}switch(this.flip){case Hs:t.scale(-1,1),t.translate(-Math.min(s.width,y),0);break;case gp:t.scale(1,-1),t.translate(0,-Math.min(s.height,v));break;case Pl:t.scale(-1,-1),t.translate(-Math.min(s.width,y),-Math.min(s.height,v))}}}}},zi.prototype.im=function(t,e,n,s){var a=this.desiredSize,u=Io(this,!0),c=this.Mg,f=this.Rn;(f||!this.ml&&c&&c.complete)&&(this.ml=!0),null===c&&(isFinite(a.width)||(t=0),isFinite(a.height)||(e=0)),isFinite(a.width)||u===Ge||u===Un?(isFinite(t)||(t=this.sourceRect.u()?this.sourceRect.width:f?+c.width:c.naturalWidth),n=0):null!==c&&!1!==this.ml&&(t=this.sourceRect.u()?this.sourceRect.width:f?+c.width:c.naturalWidth),isFinite(a.height)||u===Ge||u===Xn?(isFinite(e)||(e=this.sourceRect.u()?this.sourceRect.height:f?+c.height:c.naturalHeight),s=0):null!==c&&!1!==this.ml&&(e=this.sourceRect.u()?this.sourceRect.height:f?+c.height:c.naturalHeight),isFinite(a.width)&&(t=a.width),isFinite(a.height)&&(e=a.height),a=this.maxSize,u=this.minSize,n=Math.max(n,u.width),s=Math.max(s,u.height),t=Math.min(a.width,t),e=Math.min(a.height,e),t=Math.max(n,t),e=Math.max(s,e),null===c||c.complete||(isFinite(t)||(t=0),isFinite(e)||(e=0)),La(this.wc,t,e),this.xe(0,0,t,e)},zi.prototype.zh=function(t,e,n,s){w_(this,t,e,n,s)},kt.Object.defineProperties(zi.prototype,{element:{get:function(){return this.Mg},set:function(t){var e=this.Mg;if(e!==t){this.Rn=t instanceof HTMLCanvasElement;var n=t instanceof HTMLImageElement;e instanceof HTMLImageElement&&F_(e),null===t||n||t instanceof HTMLVideoElement||this.Rn||q("Picture.element must be an instance of Image, Canvas, or Video, not: "+t);var s=this.diagram;null!==s&&ip(s,this),this.Mg=t,null!==t&&n&&void 0===t.Ig&&(t.Ig=new nt),null!==s&&n&&po(s,this),null!==t&&(this.Rn||!0===t.complete?(t.Fn&&(t.Mn instanceof Event&&null!==this.md?this.md(this,t.Mn):!0===t.mr&&!t.Mn&&null!==this.oh&&t.lu&&this.oh(this,t.lu)),t.mr=!0,this.desiredSize.u()||(hr(this,!1),this.s())):n&&xv(this,t)),this.g("element",e,t),this.N()}}},source:{get:function(){return this.sp},set:function(t){var e=this.sp;if(e!==t){this.sp=t;var n=Od;if(Wr){var s=null;if(void 0!==n[t])s=n[t];else if(""!==t){30<Wm&&(Ad(),n=Od),(s=Wo("img")).Fn=!0,xv(this,s);var a=this.Hl;null!==a&&(s.crossOrigin=a(this)),s.src=t,n[t]=s,Wm++}this.element=s,null!==s&&void 0===s.__goCache&&(s.__goCache=new $e),this.s(),this.N()}this.g("source",e,t)}}},sourceCrossOrigin:{get:function(){return this.Hl},set:function(t){if(this.Hl!==t&&(this.Hl=t,null!==this.element)){var e=this.element.getAttribute("src");null===t&&"string"==typeof e?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=e}}},sourceRect:{get:function(){return this.lh},set:function(t){var e=this.lh;e.A(t)||(this.lh=t=t.I(),this.N(),this.g("sourceRect",e,t))}},imageStretch:{get:function(){return this.Xk},set:function(t){var e=this.Xk;e!==t&&(this.Xk=t,this.N(),this.g("imageStretch",e,t))}},flip:{get:function(){return this.Vd},set:function(t){var e=this.Vd;e!==t&&(this.Vd=t,this.N(),this.g("flip",e,t))}},imageAlignment:{get:function(){return this.Wk},set:function(t){var e=this.Wk;e.A(t)||(this.Wk=t=t.I(),this.N(),this.g("imageAlignment",e,t))}},errorFunction:{get:function(){return this.md},set:function(t){var e=this.md;e!==t&&(this.md=t,this.g("errorFunction",e,t))}},successFunction:{get:function(){return this.oh},set:function(t){var e=this.oh;e!==t&&(this.oh=t,this.g("successFunction",e,t))}},naturalBounds:{get:function(){return this.wc}}}),zi.prototype.redraw=zi.prototype.redraw,zi.prototype.reloadSource=zi.prototype.DA;var Od=null,Wm=0,xe=4;function $e(){this.Ci=null}function Dv(t,e,n,s,a){null===t.Ci&&(t.Ci=[]);var u=new Xr(null),c=u.context,f=1/e;u.width=n/e,u.height=s/e,0!==u.width&&0!==u.height&&(e=new bv(u.La,e),n=1,0<t.Ci.length&&(a=(n=t.Ci[t.Ci.length-1]).source,n=n.ratio),c.setTransform(f*n,0,0,f*n,0,0),c.Ed(),c.drawImage(a,0,0),t.Ci.push(e))}function bv(t,e){this.source=t,this.ratio=e}function $a(){this.ts=new rt,this.kc=null}function qr(t,e,n,s,a){t.kc=new ii,t.kc.startX=e,t.kc.startY=n,t.kc.isFilled=s,t.ts.figures.add(t.kc),void 0!==a&&(t.kc.isShadowed=a)}function R_(t){var e=t.kc.segments.length;0<e&&t.kc.segments.J(e-1).close()}function Ya(t,e,n,s,a,u,c){var f;void 0===f&&(f=!1);var p=new Zt(zr);p.point1X=e,p.point1Y=n,p.point2X=s,p.point2Y=a,p.endX=u,p.endY=c,f&&p.close(),t.kc.segments.add(p)}function Id(t,e,n,s,a){var u;void 0===u&&(u=!1);var c=new Zt(As);c.point1X=e,c.point1Y=n,c.endX=s,c.endY=a,u&&c.close(),t.kc.segments.add(c)}function Ll(t,e,n,s,a,u,c,f){var p;void 0===p&&(p=!1),e=new Zt(Zo,c,f,e,n,s,a,u),p&&e.close(),t.kc.segments.add(e)}function Km(t){var e=Fp;return null!==e?(Fp=null,e.reset(t),e):((e=new $a).reset(t),e)}zi.className="Picture",Od=new Dr,zi.clearCache=Ad,$e.className="PictureCacheArray",bv.className="PictureCacheInstance",$a.prototype.reset=function(t){null!==t?(t.ea(),this.ts=t,t.figures.clear()):this.ts=new rt,this.kc=null},$a.prototype.Bm=function(t){this.kc.isShadowed=t},$a.prototype.moveTo=function(t,e,n){void 0===n&&(n=!1);var s=new Zt(ko);s.endX=t,s.endY=e,n&&s.close(),this.kc.segments.add(s)},$a.prototype.lineTo=function(t,e,n){void 0===n&&(n=!1);var s=new Zt(tn);s.endX=t,s.endY=e,n&&s.close(),this.kc.segments.add(s)},$a.prototype.arcTo=function(t,e,n,s,a,u,c){void 0===u&&(u=0),void 0===c&&(c=!1);var f=new Zt(on);f.startAngle=t,f.sweepAngle=e,f.centerX=n,f.centerY=s,f.radiusX=a,f.radiusY=0!==u?u:a,c&&f.close(),this.kc.segments.add(f)};var Fp=null;function wi(t,e){var n=t.toLowerCase(),s=V.Qe;s[t]=e,s[n]=t}function ft(t,e){void 0===t||t instanceof Ke||"string"==typeof t?W.call(this,t):(W.call(this),t&&(e=t)),this.F=2408959,this.Ug=this.Nf="",this.Yo=this.Uo=this.ip=this.eo=null,this.kp="",this.Lf=this.Pn=this.jp=this.jh=null,this.Wo="",this.Vo=Ow,this.Xb=this.Zo="",this.fi=this.$m=this.Rh=null,this.Wf=new A(NaN,NaN).freeze(),this.lo="",this.cf=null,this.mo=St,this.$o=Xt,this.uo=Wg,this.no=E0,this.qn=null,this.fo=127,this.pp=Pw,this.op="gray",this.hg=4,this.Ww=-1,this.Lp=NaN,this.Oy=new z,this.li=null,this.Xf=NaN,e&&Object.assign(this,e)}function Xm(t){0!=(16384&t.F)&&(t.updateAdornments(),t.F&=-16385)}function Bh(t){if(!1===ya(t)){V_(t,!0),t.dl();var e=t.diagram;null!==e&&(e.te.add(t),e.Gb())}}function Rp(t){if(t.F|=2097152,!1!==ya(t)){var e=t.position,n=t.location;n.u()&&e.u()||Xb(t,e,n),n=t.xb;var s=z.alloc().assign(n);n.ea(),n.x=e.x,n.y=e.y,n.freeze(),t.jm(s,n),z.free(s),V_(t,!1)}}function Gs(t,e,n,s){void 0===s&&(s=new A),n=n.Bc()?Ut:n;var a=e.naturalBounds;if(s.h(a.width*n.x+n.offsetX,a.height*n.y+n.offsetY),null===e||e===t)return s;for(e.transform.Aa(s),e=e.panel;null!==e&&e!==t;)e.transform.Aa(s),e=e.panel;return null!==t.Cb&&t.Cb.Aa(s),s.offset(-t.mc.x,-t.mc.y),s}function jl(t,e){var n=t.Oy;isNaN(t.Xf)&&(t.Xf=T_(t));var s=t.Xf,a=2*s;if(!t.isShadowed)return n.h(e.x-1-s,e.y-1-s,e.width+2+a,e.height+2+a),n;s=e.x,a=e.y;var u=e.width;e=e.height;var c=t.shadowBlur;return u+=c,e+=c,s-=c/2,a-=c/2,0<(t=t.shadowOffset).x?u+=t.x:(s+=t.x,u-=t.x),0<t.y?e+=t.y:(a+=t.y,e-=t.y),n.h(s-1,a-1,u+2,e+2),n}function Zm(t,e,n,s,a){null===e||t instanceof Rt||(e=e.animationManager).tb&&Kf(e,t,new A(s,a),n)}function Xb(t,e,n){var s=A.alloc(),a=t.locationObject,u=a.naturalBounds,c=a instanceof bt?a.strokeWidth:0;if(s.Ui(0,0,u.width+c,u.height+c,t.locationSpot),a!==t)for(s.offset(-c/2,-c/2),a.transform.Aa(s),a=a.panel;null!==a&&a!==t;)a.transform.Aa(s),a=a.panel;null!==t.Cb&&t.Cb.Aa(s),s.offset(-t.mc.x,-t.mc.y),a=t.diagram,u=n.u(),c=e.u(),u&&c?0!=(2097152&t.F)?L_(t,e,n,a,s):j_(t,e,n,a,s):u?L_(t,e,n,a,s):c&&j_(t,e,n,a,s),t.F|=2097152,A.free(s),t.dl()}function L_(t,e,n,s,a){var u=e.x,c=e.y;e.h(n.x-a.x,n.y-a.y),null!==s&&((s=(n=s.animationManager).defaultAnimation.isAnimating)||!n.tb||t instanceof Rt||Kf(n,t,new A(u,c),e),s||e.x===u&&e.y===c||t.g("position",new A(u,c),e.copy()))}function j_(t,e,n,s,a){var u=n.copy();n.h(e.x+a.x,e.y+a.y),n.A(u)||null===s||t.g("location",u,n.copy())}function H_(t,e,n){Cv(t,!1),t instanceof it&&op(n,t),t.layer.isTemporary||e||n.Qa(),e=t.xb;var s=n.viewportBounds;s.u()?ku(t)?(Af(e,s)||t.Md(!1),t.updateAdornments()):e.Lc(s)?(t.Md(!0),t.updateAdornments()):t.Mb():n.nj=!0}function Mv(t,e,n,s){e.constructor===t.constructor||Jb||(Jb=!0,Ci('Should not change the class of the Part when changing category from "'+n+'" to "'+s+'"'),Ci("  Old class: "+Be(t.constructor)+", new class: "+Be(e.constructor)+", part: "+t.toString())),t.Qj();var a=t.data;n=t.layerName;var u=t.isSelected,c=t.isHighlighted,f=!0,p=!0,g=!1;t instanceof it&&(f=t.isTreeLeaf,p=t.isTreeExpanded,g=t.wasTreeExpanded),e.wf(t),e.cloneProtected(t),t.Nf=s,t.s(),t.N(),s=!0,null!==(e=t.diagram)&&(s=e.skipsUndoManager,e.skipsUndoManager=!0),t.jb=a,t.F=u?4096|t.F:-4097&t.F,t.F=c?524288|t.F:-524289&t.F,t instanceof it&&(t.R=f?4|t.R:-5&t.R,t.R=p?1|t.R:-2&t.R,t.R=g?2|t.R:-3&t.R),null!==a&&t.Fa(),(a=t.layerName)!==n&&(t.Ug=n,t.layerName=a),null!==e&&(e.skipsUndoManager=s),t.Mc()&&t.B(64)}function ya(t){return 0!=(32768&t.F)}function V_(t,e){t.F=e?32768|t.F:-32769&t.F}function Cv(t,e){t.F=e?65536|t.F:-65537&t.F}function ku(t){return 0!=(131072&t.F)}function Lp(t,e){t.F=e?1048576|t.F:-1048577&t.F}function Jm(t,e){var n=e.containingGroup;return null!==n?1+Jm(t,n):e instanceof it&&null!==(e=e.labeledLink)?Jm(t,e):0}function B_(t,e){var n=e.containingGroup;return null!==n||e instanceof it&&null!==(n=e.labeledLink)?B_(t,n):e}function jp(t,e,n){if(e===n||null===n)return!1;var s=e.containingGroup;return!(null===s||s!==n&&!jp(t,s,n))||e instanceof it&&null!==(e=e.labeledLink)&&jp(t,e,n)}function Zb(t){return!(!t.isVisible()||null!==(t=t.layer)&&t.isTemporary)}function Eu(t,e,n,s,a,u){if(void 0===u&&(u=null),!(t.contains(e)||null!==u&&!u(e)||e instanceof Rt))if(t.add(e),e instanceof it){if(n&&e instanceof _t)for(var c=e.memberParts;c.next();)Eu(t,c.value,n,s,a,u);if(!1!==a)for(c=e.linksConnected;c.next();){var f=c.value;if(!t.contains(f)){var p=f.fromNode,g=f.toNode;p=null===p||t.contains(p),g=null===g||t.contains(g),(a?p&&g:p||g)&&Eu(t,f,n,s,a,u)}}if(1<s)for(e=e.Zu();e.next();)Eu(t,e.value,n,s-1,a,u)}else if(e instanceof K)for(e=e.labelNodes;e.next();)Eu(t,e.value,n,s,a,u)}$a.className="StreamGeometryContext",wi("Rectangle",function(t,e,n){var s=V.Jf[t="r"+e+","+n];return void 0!==s||((s=new rt(rt.C)).endX=e,s.endY=n,V.Kf<V.Jm&&(V.Jf[t]=s,V.Kf++)),s}),wi("Square",function(t,e,n){var s=V.Jf[t="s"+e+","+n];return void 0!==s||((s=new rt(rt.C)).endX=e,s.endY=n,s.defaultStretch=Oo,V.Kf<V.Jm&&(V.Jf[t]=s,V.Kf++)),s}),wi("RoundedRectangle",function(t,e,n){t=t?t.parameter1:NaN,(isNaN(t)||0>t)&&(t=5),t=Math.min(t,e/3);var s="rr"+e+","+n+","+(t=Math.min(t,n/3)),a=V.Jf[s];if(void 0!==a)return a;var u=t*V.wg;return a=(new rt).add(new ii(t,0,!0).add(new Zt(tn,e-t,0)).add(new Zt(zr,e,t,e-u,0,e,u)).add(new Zt(tn,e,n-t)).add(new Zt(zr,e-t,n,e,n-u,e-u,n)).add(new Zt(tn,t,n)).add(new Zt(zr,0,n-t,u,n,0,n-u)).add(new Zt(tn,0,t)).add(new Zt(zr,t,0,0,u,u,0).close())),1<u&&(a.spot1=new pt(0,0,u,u),a.spot2=new pt(1,1,-u,-u)),V.Kf<V.Jm&&(V.Jf[s]=a,V.Kf++),a}),wi("Border","RoundedRectangle"),wi("Ellipse",function(t,e,n){var s=V.Jf[t="e"+e+","+n];return void 0!==s||((s=new rt(rt.L)).endX=e,s.endY=n,s.spot1=Cn,s.spot2=F0,V.Kf<V.Jm&&(V.Jf[t]=s,V.Kf++)),s}),wi("Circle",function(t,e,n){var s=V.Jf[t="c"+e+","+n];return void 0!==s||((s=new rt(rt.L)).endX=e,s.endY=n,s.spot1=Cn,s.spot2=F0,s.defaultStretch=Oo,V.Kf<V.Jm&&(V.Jf[t]=s,V.Kf++)),s}),wi("TriangleRight",function(t,e,n){return(new rt).add(new ii(0,0).add(new Zt(tn,e,.5*n)).add(new Zt(tn,0,n).close())).Cm(0,.25,.5,.75)}),wi("TriangleDown",function(t,e,n){return(new rt).add(new ii(0,0).add(new Zt(tn,e,0)).add(new Zt(tn,.5*e,n).close())).Cm(.25,0,.75,.5)}),wi("TriangleLeft",function(t,e,n){return(new rt).add(new ii(e,n).add(new Zt(tn,0,.5*n)).add(new Zt(tn,e,0).close())).Cm(.5,.25,1,.75)}),wi("TriangleUp",function(t,e,n){return(new rt).add(new ii(e,n).add(new Zt(tn,0,n)).add(new Zt(tn,.5*e,0).close())).Cm(.25,.5,.75,1)}),wi("Triangle","TriangleUp"),wi("Diamond",function(t,e,n){return(new rt).add(new ii(.5*e,0).add(new Zt(tn,0,.5*n)).add(new Zt(tn,.5*e,n)).add(new Zt(tn,e,.5*n).close())).Cm(.25,.25,.75,.75)}),wi("LineH",function(t,e,n){return(t=new rt(rt.j)).startX=0,t.startY=n/2,t.endX=e,t.endY=n/2,t}),wi("LineV",function(t,e,n){return(t=new rt(rt.j)).startX=e/2,t.startY=0,t.endX=e/2,t.endY=n,t}),wi("None","Rectangle"),wi("BarH","Rectangle"),wi("BarV","Rectangle"),wi("MinusLine","LineH"),wi("PlusLine",function(t,e,n){return(new rt).add(new ii(0,n/2,!1).add(new Zt(tn,e,n/2)).add(new Zt(ko,e/2,0)).add(new Zt(tn,e/2,n)))}),wi("XLine",function(t,e,n){return(new rt).add(new ii(0,n,!1).add(new Zt(tn,e,0)).add(new Zt(ko,0,0)).add(new Zt(tn,e,n)))}),V.Im={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},Wt(ft,W),ft.prototype.cloneProtected=function(t){W.prototype.cloneProtected.call(this,t),t.F=-4097&this.F|49152,t.Nf=this.Nf,t.Ug=this.Ug,t.eo=this.eo,t.ip=this.ip,t.Uo=this.Uo,t.Yo=this.Yo,t.kp=this.kp,t.jp=this.jp,t.Pn=this.Pn,t.Lf=null,t.Wo=this.Wo,t.Vo=this.Vo.I(),t.Zo=this.Zo,t.$o=this.$o.I(),t.Xb=this.Xb,t.$m=this.$m,t.Wf.assign(this.Wf),t.lo=this.lo,t.mo=this.mo.I(),t.uo=this.uo.I(),t.no=this.no.I(),t.qn=this.qn,t.fo=this.fo,t.pp=this.pp.I(),t.op=this.op,t.hg=this.hg,t.Lp=this.Lp},ft.prototype.wf=function(t){W.prototype.wf.call(this,t),t.Gh(),t.jh=null,t.cf=null,t.li=null},ft.prototype.toString=function(){var t=Be(this.constructor)+"#"+pn(this);return null!==this.data&&(t+="("+xr(this.data)+")"),t},ft.prototype.qk=function(t,e,n,s,a,u,c){var f=this.diagram;null!==f&&(t===Ve&&"elements"===e?a instanceof W?Il(a,function(p){zv(f.partManager,p),rv(f,p)}):po(f,a):t===dn&&"elements"===e&&(a instanceof W?Il(a,function(p){wy(f.partManager,p,f)}):ip(f,a)),f.Wa(t,e,n,s,a,u,c))},ft.prototype.Fa=function(t){if(W.prototype.Fa.call(this,t),null!==this.data){for(var e=this.T.m,n=e.length,s=0;s<n;s++){var a=e[s];a instanceof W&&Il(a,function(u){null!==u.data&&u.Fa()})}for(e=this.adornments;e.next();)e.value.Fa(t)}},ft.prototype.updateRelationshipsFromData=function(){null!==this.data&&this.diagram.partManager.updateRelationshipsFromData(this)},ft.prototype.Yj=function(t){var e=this.Lf;return null===e?null:e.H(t)},ft.prototype.xh=function(t,e){if(null!==e){var n=null,s=this.Lf;if(null!==s&&(n=s.H(t)),n!==e){if(null!==n){var a=n.diagram;null!==a&&a.remove(n)}null===s&&(this.Lf=s=new xt),e.Nf!==t&&(e.category=t),s.add(t,e),null!==(t=this.diagram)&&(t.add(e),null!==(t=e.adornedObject)&&null!==(t=t.Ch())&&(e.data=t.data))}}},ft.prototype.Gf=function(t){var e=this.Lf;if(null!==e){var n=e.H(t);if(null!==n){var s=n.diagram;null!==s&&s.remove(n)}e.remove(t),0===e.count&&(this.Lf=null)}},ft.prototype.Qj=function(){var t=this.Lf;if(null!==t){var e=Lt();for(t=t.iterator;t.next();)e.push(t.key);t=e.length;for(var n=0;n<t;n++)this.Gf(e[n]);ee(e)}},ft.prototype.updateAdornments=function(){var t=this.diagram;if(null!==t){for(var e=this.adornments;e.next();){var n=e.value;n.s(),n.placeholder&&n.placeholder.s()}t:{if(this.isSelected&&this.selectionAdorned&&null!==(e=this.selectionObject)&&this.actualBounds.u()&&this.isVisible()&&e.Ff()&&e.actualBounds.u()){if(null===(n=this.Yj("Selection"))){if(null===(n=this.selectionAdornmentTemplate)&&(n=this.Hh()?t.linkSelectionAdornmentTemplate:this instanceof _t?t.groupSelectionAdornmentTemplate:t.nodeSelectionAdornmentTemplate),!(n instanceof Rt))break t;yo(n),null!==(n=n.copy())&&(this.Hh()&&this.selectionObject===this.path&&(n.type=W.Link),n.adornedObject=e)}if(null!==n){n.type===W.Link&&n.s(),this.xh("Selection",n);break t}}this.Gf("Selection")}for(function gS(t,e){e.toolManager.mouseDownTools.each(function(n){n.isEnabled&&n.updateAdornments(t)}),e.toolManager.updateAdornments(t)}(this,t),e=this.adornments;e.next();)e.value.Fa()}},ft.prototype.Mb=function(){var t=this.diagram;null!==t&&(Ls(t),0==(16384&this.F)&&(this.F|=16384,t.Gb()))},ft.prototype.xe=function(t,e,n,s){var a=this.mc;a.h(t,e,n,s),null===this.Cb&&(this.Cb=new Et);var u=this.Cb;u.reset(),this.np(u,t,e,n,s),this.Cb=u,u.Cs()||u.xq(a)},ft.prototype.np=function(t,e,n,s,a){if(1!==this.sa&&t.scale(this.sa),0!==this.zb){var u=Ut;this.locationSpot.hb()&&(u=this.locationSpot);var c=A.alloc();if(this.locationObject!==this)for(c.Ui((n=(e=this.locationObject).naturalBounds).x,n.y,n.width,n.height,u),null!==e.Cb&&e.Cb.Aa(c),c.offset(-e.measuredBounds.x,-e.measuredBounds.y),u=e.panel;null!==u&&u!==this;)null!==u.Cb&&u.Cb.Aa(c),c.offset(-u.measuredBounds.x,-u.measuredBounds.y),u=u.panel;else c.Ui(e,n,s,a,u);t.rotate(this.zb,c.x,c.y),A.free(c)}},ft.prototype.move=function(t,e){!0===e?this.location=t:this.position=t},ft.prototype.moveTo=function(t,e,n){t=A.allocAt(t,e),this.move(t,n),A.free(t)},ft.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;if(null!==t){if(!t.visible)return!1;if(null!==(t=t.diagram)&&t.animationManager.Ms(this))return!0}return!!(null===(t=this.containingGroup)||t.isSubGraphExpanded&&t.isVisible())},ft.prototype.Pb=function(t){var e=this.diagram;t?(this.B(4),this.Mb(),null!==e&&e.te.add(this)):(this.B(8),this.Qj()),this.Gh(),null!==e&&(e.Qa(),e.N())},ft.prototype.Ya=function(t){if(this.name===t)return this;var e=this.li;if(null===e&&(this.li=e=new xt),null!==e.H(t))return e.H(t);var n=W.prototype.Ya.call(this,t);return null!==n?(e.set(t,n),n):(e.set(t,null),null)},ft.prototype.Li=function(t){return void 0===t&&(t=new z),t.assign(this.actualBounds)},ft.prototype.Ta=function(){!0===mo(this)&&this.measure(1/0,1/0),this.arrange()},ft.prototype.arrange=function(){if(!1===Sr(this))Rp(this);else{Al(this,!1);var t=this.xb,e=z.alloc();e.assign(t);var n=ku(this);this.zh(0,0,this.mc.width,this.mc.height);var s=this.position;Xb(this,s,this.location),t.ea(),t.x=s.x,t.y=s.y,t.freeze(),this.jm(e,t),e.A(t)?this.Md(n):!this.Mc()||V.w(e.width,t.width)&&V.w(e.height,t.height)||0<=this.Ww&&this.B(16),z.free(e),V_(this,!1)}},(S=ft.prototype).jm=function(t,e){var n=this.diagram;if(null!==n){var s=!1;if(!1===n.lj&&t.u()){var a=z.alloc();a.assign(n.documentBounds),a.Vv(n.padding),t.x>a.x&&t.y>a.y&&t.right<a.right&&t.bottom<a.bottom&&e.x>a.x&&e.y>a.y&&e.right<a.right&&e.bottom<a.bottom&&(s=!0),z.free(a)}0==(65536&this.F)&&t.A(e)||H_(this,s,n),n.N(),!t.u()&&!e.u()||Rw(t,e)||(this instanceof it&&!n.undoManager.isUndoingRedoing&&this.rd(),this.Gh())}},S.Rv=function(t,e,n){if(this.Hh()||!t.u())return!1;var s=this.diagram;null!==s&&Zm(this,s,t,e,n),this.ja=t,this.F&=-2097153;var a=this.Wf;return!a.u()||null!==s&&!s.animationManager.isTicking&&s.undoManager.isUndoingRedoing||(s=a.copy(),a.h(a.x+(t.x-e),a.y+(t.y-n)),this.g("location",s,a.copy())),!1===ya(this)&&!1===Sr(this)&&(Bh(this),Rp(this)),!0},S.ym=function(t,e,n){var s=this.Wf,a=this.ja;if(n){if(s.x===t&&s.y===e)return;ya(this)||Sr(this)?a.h(NaN,NaN):a.h(a.x+t-s.x,a.y+e-s.y),s.h(t,e)}else{if(a.x===t&&a.y===e)return;ya(this)||Sr(this)?this.Vs():s.h(s.x+t-a.x,s.y+e-a.y),a.h(t,e)}Bh(this)},S.Vs=function(){this.F&=-2097153,Bh(this)},S.Ri=function(){return!0},S.Mc=function(){return!0},S.Hh=function(){return!1},S.Qi=function(){return!0},ft.prototype.canCopy=function(){if(!this.copyable)return!1;var t=this.layer;return null===t||!!t.allowCopy&&(null===(t=t.diagram)||!!t.allowCopy)},ft.prototype.canDelete=function(){if(!this.deletable)return!1;var t=this.layer;return null===t||!!t.allowDelete&&(null===(t=t.diagram)||!!t.allowDelete)},ft.prototype.canEdit=function(){if(!this.textEditable)return!1;var t=this.layer;return null===t||!!t.allowTextEdit&&(null===(t=t.diagram)||!!t.allowTextEdit)},ft.prototype.canGroup=function(){if(!this.groupable)return!1;var t=this.layer;return null===t||!!t.allowGroup&&(null===(t=t.diagram)||!!t.allowGroup)},ft.prototype.canMove=function(){if(!this.movable)return!1;var t=this.layer;return null===t||!!t.allowMove&&(null===(t=t.diagram)||!!t.allowMove)},ft.prototype.canReshape=function(){if(!this.reshapable)return!1;var t=this.layer;return null===t||!!t.allowReshape&&(null===(t=t.diagram)||!!t.allowReshape)},ft.prototype.canResize=function(){if(!this.resizable)return!1;var t=this.layer;return null===t||!!t.allowResize&&(null===(t=t.diagram)||!!t.allowResize)},ft.prototype.canRotate=function(){if(!this.rotatable)return!1;var t=this.layer;return null===t||!!t.allowRotate&&(null===(t=t.diagram)||!!t.allowRotate)},ft.prototype.canSelect=function(){if(!this.selectable)return!1;var t=this.layer;return null===t||!!t.allowSelect&&(null===(t=t.diagram)||!!t.allowSelect)},(S=ft.prototype).Md=function(t){this.F=t?131072|this.F:-131073&this.F},S.Gh=function(){var t=this.containingGroup;null!==t&&(t.s(),null!==t.placeholder&&t.placeholder.s(),t.rd())},S.N=function(){var t=this.diagram;null!==t&&!Sr(this)&&!ya(this)&&this.isVisible()&&this.xb.u()&&t.N(jl(this,this.xb))},S.s=function(){W.prototype.s.call(this);var t=this.diagram;null!==t&&(t.te.add(this),this instanceof it&&null!==this.labeledLink&&xd(this.labeledLink),t.Gb(!0))},S.cq=function(t){t||null!==(t=this.Rh)&&Ev(t,this)},S.eq=function(t){t||null!==(t=this.Rh)&&Gh(t,this)},S.Wj=function(){var t=this.data;if(null!==t){var e=this.diagram;null!==e&&null!==(e=e.model)&&e.om(t)}},S.Nz=function(){return Jm(this,this)},S.Rz=function(){return B_(this,this)},S.Jd=function(t){return t instanceof _t&&jp(this,this,t)},S.Px=function(t){if(null===t)return null;if(this===t)return this.containingGroup;for(var e=this;null!==e;){if(e instanceof _t&&Lp(e,!0),e instanceof it){var n=e.labeledLink;null!==n&&(e=n)}e=e.containingGroup}for(n=null,e=t;null!==e;){if(0!=(1048576&e.F)){n=e;break}e instanceof it&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup}for(e=this;null!==e;)e instanceof _t&&Lp(e,!1),e instanceof it&&null!==(t=e.labeledLink)&&(e=t),e=e.containingGroup;return n},ft.prototype.canLayout=function(){if(!this.isLayoutPositioned||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.isTemporary||this instanceof it&&this.isLinkLabel)},ft.prototype.B=function(t){if(void 0===t&&(t=16777215),this.isLayoutPositioned&&0!=(t&this.layoutConditions)){var e=this.layer;e=!(null!==e&&e.isTemporary||this instanceof it&&this.isLinkLabel)&&!(null!==(e=this.diagram)&&e.undoManager.isUndoingRedoing)}else e=!1;if(e)if(null!==(e=this.Rh)){var n=e.layout;null!==n?n.B():e.B(t)}else null!==(t=this.diagram)&&null!==(t=t.layout)&&t.B()},kt.Object.defineProperties(ft.prototype,{key:{get:function(){var t=this.diagram;if(null!==t)return t.model.pa(this.data)}},adornments:{get:function(){return null===this.Lf?To:this.Lf.iteratorValues}},layer:{get:function(){return this.fi}},diagram:{get:function(){var t=this.fi;return null==t?null:t.diagram}},layerName:{get:function(){return this.Ug},set:function(t){var e=this.Ug;if(e!==t){var n=this.diagram;if((null===n||null!==n.Zj(t)&&!n.partManager.addsToTemporaryLayer)&&(this.Ug=t,null!==n&&n.Qa(),this.g("layerName",e,t),null!==(e=this.layer)&&e.name!==t&&null!==(n=e.diagram)&&null!==(t=n.Zj(t))&&t!==e)){var s=e.fc(-1,this,!0);if(0<=s&&n.Wa(dn,"parts",e,this,null,s,!0),s=t.Ni(99999999,this,!0),e.visible!==t.visible&&this.Pb(t.visible),0<=s&&n.Wa(Ve,"parts",t,null,this,!0,s),null!==(s=this.layerChanged)){var a=n.Z;n.Z=!0,s(this,e,t),n.Z=a}}}}},layerChanged:{get:function(){return this.eo},set:function(t){var e=this.eo;e!==t&&(this.eo=t,this.g("layerChanged",e,t))}},zOrder:{get:function(){return this.Lp},set:function(t){var e=this.Lp;if(e!==t){this.Lp=t;var n=this.layer;null!==n&&rm(n,-1,this),this.g("zOrder",e,t),null!==(t=this.diagram)&&t.N()}}},locationObject:{get:function(){if(null===this.cf){var t=this.locationObjectName;""!==t?(t=this.Ya(t),this.cf=null!==t?t:this):this.cf=this instanceof Rt&&this.type!==W.Link&&null!==this.placeholder?this.placeholder:this}return this.cf.visible?this.cf:this}},minLocation:{get:function(){return this.uo},set:function(t){var e=this.uo;e.A(t)||(this.uo=t=t.I(),this.g("minLocation",e,t))}},maxLocation:{get:function(){return this.no},set:function(t){var e=this.no;e.A(t)||(this.no=t=t.I(),this.g("maxLocation",e,t))}},locationObjectName:{get:function(){return this.lo},set:function(t){var e=this.lo;e!==t&&(this.lo=t,this.cf=null,this.s(),this.g("locationObjectName",e,t))}},locationSpot:{get:function(){return this.mo},set:function(t){var e=this.mo;e.A(t)||(this.mo=t=t.I(),this.s(),this.g("locationSpot",e,t))}},location:{get:function(){return this.Wf},set:function(t){var e=t.x,n=t.y,s=this.Wf;if(!(s.x===e||isNaN(s.x)&&isNaN(e))||!(s.y===n||isNaN(s.y)&&isNaN(n))){if(e=t=t.copy(),this.Hh())e=!1;else{if(this.Wf=e,this.F|=2097152,!1===Sr(this)&&(Bh(this),(n=this.ja).u())){var a=this.diagram;if(null===a||a.animationManager.isTicking||!a.undoManager.isUndoingRedoing){var u=n.copy();n.h(n.x+(e.x-s.x),n.y+(e.y-s.y)),Zm(this,a,n,u.x,u.y),this.g("position",u,n.copy())}}e=!0}e&&this.g("location",s,t.copy())}}},category:{get:function(){return this.Nf},set:function(t){var e=this.Nf;if(e!==t){var n=this.diagram,s=this.data,a=null;if(null!==n&&null!==s&&!(this instanceof Rt)){var u=n.model.undoManager;u.isEnabled&&!u.isUndoingRedoing&&(a=this.clone()).T.addAll(this.T)}this.Nf=t,this.g("category",e,t),null===n||null===s||this instanceof Rt?this instanceof Rt&&null!==(a=this.adornedPart)&&(null!==(t=a.Lf)&&t.remove(e),a.xh(this.category,this)):(u=n.model).undoManager.isUndoingRedoing||(this.Hh()?(n.partManager.setLinkCategoryForData(s,t),null!==(n=n.partManager.findLinkTemplateForCategory(t))&&(yo(n),null!==(n=n.copy())&&Mv(this,n,e,t))):(null!==u&&u.vm(s,t),null!==(n=tx(n.partManager,s,t))&&(yo(n),null===(n=n.copy())||n instanceof K||(s=this.location.copy(),Mv(this,n,e,t),this.location.u()||(this.location=s)))),null!==a&&((e=this.clone()).T.addAll(this.T),this.g("self",a,e)))}}},self:{get:function(){return this},set:function(t){Mv(this,t,this.category,t.category)}},copyable:{get:function(){return 0!=(1&this.F)},set:function(t){var e=0!=(1&this.F);e!==t&&(this.F^=1,this.g("copyable",e,t))}},deletable:{get:function(){return 0!=(2&this.F)},set:function(t){var e=0!=(2&this.F);e!==t&&(this.F^=2,this.g("deletable",e,t))}},textEditable:{get:function(){return 0!=(4&this.F)},set:function(t){var e=0!=(4&this.F);e!==t&&(this.F^=4,this.g("textEditable",e,t),this.Mb())}},groupable:{get:function(){return 0!=(8&this.F)},set:function(t){var e=0!=(8&this.F);e!==t&&(this.F^=8,this.g("groupable",e,t))}},movable:{get:function(){return 0!=(16&this.F)},set:function(t){var e=0!=(16&this.F);e!==t&&(this.F^=16,this.g("movable",e,t))}},selectionAdorned:{get:function(){return 0!=(32&this.F)},set:function(t){var e=0!=(32&this.F);e!==t&&(this.F^=32,this.g("selectionAdorned",e,t),this.Mb())}},isInDocumentBounds:{get:function(){return 0!=(64&this.F)},set:function(t){var e=0!=(64&this.F);if(e!==t){this.F^=64;var n=this.diagram;null!==n&&n.Qa(),this.g("isInDocumentBounds",e,t)}}},isLayoutPositioned:{get:function(){return 0!=(128&this.F)},set:function(t){var e=0!=(128&this.F);e!==t&&(this.F^=128,this.g("isLayoutPositioned",e,t),this.B(t?4:8))}},selectable:{get:function(){return 0!=(256&this.F)},set:function(t){var e=0!=(256&this.F);e!==t&&(this.F^=256,this.g("selectable",e,t),this.Mb())}},reshapable:{get:function(){return 0!=(512&this.F)},set:function(t){var e=0!=(512&this.F);e!==t&&(this.F^=512,this.g("reshapable",e,t),this.Mb())}},resizable:{get:function(){return 0!=(1024&this.F)},set:function(t){var e=0!=(1024&this.F);e!==t&&(this.F^=1024,this.g("resizable",e,t),this.Mb())}},rotatable:{get:function(){return 0!=(2048&this.F)},set:function(t){var e=0!=(2048&this.F);e!==t&&(this.F^=2048,this.g("rotatable",e,t),this.Mb())}},isSelected:{get:function(){return 0!=(4096&this.F)},set:function(t){var e=0!=(4096&this.F);if(e!==t){var n=this.diagram;if(!t||this.canSelect()&&!(null!==n&&n.selection.count>=n.maxSelectionCount)){this.F^=4096;var s=!1;if(null!==n){s=n.skipsUndoManager,n.skipsUndoManager=!0;var a=n.selection;a.ea(),t?a.add(this):a.remove(this),a.freeze()}this.g("isSelected",e,t),this.Mb(),null!==(t=this.selectionChanged)&&t(this),null!==n&&(n.Gb(),n.skipsUndoManager=s)}}}},isHighlighted:{get:function(){return 0!=(524288&this.F)},set:function(t){var e=0!=(524288&this.F);if(e!==t){this.F^=524288;var n=this.diagram;null!==n&&((n=n.highlighteds).ea(),t?n.add(this):n.remove(this),n.freeze()),this.g("isHighlighted",e,t),this.N(),null!==(t=this.highlightedChanged)&&t(this)}}},isShadowed:{get:function(){return 0!=(8192&this.F)},set:function(t){var e=0!=(8192&this.F);e!==t&&(this.F^=8192,this.g("isShadowed",e,t),this.N())}},isAnimated:{get:function(){return 0!=(262144&this.F)},set:function(t){var e=0!=(262144&this.F);e!==t&&(this.F^=262144,this.g("isAnimated",e,t))}},highlightedChanged:{get:function(){return this.Pn},set:function(t){var e=this.Pn;e!==t&&(this.Pn=t,this.g("highlightedChanged",e,t))}},selectionObjectName:{get:function(){return this.kp},set:function(t){var e=this.kp;e!==t&&(this.kp=t,this.jh=null,this.g("selectionObjectName",e,t))}},selectionAdornmentTemplate:{get:function(){return this.ip},set:function(t){var e=this.ip;e!==t&&(this.ip=t,this.g("selectionAdornmentTemplate",e,t))}},selectionObject:{get:function(){if(null===this.jh){var t=this.selectionObjectName;null!==t&&""!==t?(t=this.Ya(t),this.jh=null!==t?t:this):this.jh=this instanceof K&&null!==(t=this.path)?t:this}return this.jh}},selectionChanged:{get:function(){return this.jp},set:function(t){var e=this.jp;e!==t&&(this.jp=t,this.g("selectionChanged",e,t))}},resizeAdornmentTemplate:{get:function(){return this.Uo},set:function(t){var e=this.Uo;e!==t&&(this.Uo=t,this.g("resizeAdornmentTemplate",e,t))}},resizeObjectName:{get:function(){return this.Wo},set:function(t){var e=this.Wo;e!==t&&(this.Wo=t,this.g("resizeObjectName",e,t))}},resizeObject:{get:function(){var t=this.resizeObjectName;return""!==t&&null!==(t=this.Ya(t))?t:this}},resizeCellSize:{get:function(){return this.Vo},set:function(t){var e=this.Vo;e.A(t)||(this.Vo=t=t.I(),this.g("resizeCellSize",e,t))}},rotateAdornmentTemplate:{get:function(){return this.Yo},set:function(t){var e=this.Yo;e!==t&&(this.Yo=t,this.g("rotateAdornmentTemplate",e,t))}},rotateObjectName:{get:function(){return this.Zo},set:function(t){var e=this.Zo;e!==t&&(this.Zo=t,this.g("rotateObjectName",e,t))}},rotateObject:{get:function(){var t=this.rotateObjectName;return""!==t&&null!==(t=this.Ya(t))?t:this}},rotationSpot:{get:function(){return this.$o},set:function(t){var e=this.$o;e.A(t)||(this.$o=t=t.I(),this.g("rotationSpot",e,t))}},text:{get:function(){return this.Xb},set:function(t){var e=this.Xb;e!==t&&(this.Xb=t,this.g("text",e,t))}},containingGroup:{get:function(){return this.Rh},set:function(t){if(this.Mc()){var e=this.Rh;if(e!==t){null===t||this!==t&&!t.Jd(this)||(this===t&&q("Cannot make a Group a member of itself: "+this.toString()),q("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.B(2);var n=this.diagram;if(null!==e?Gh(e,this):this instanceof _t&&null!==n&&n.wi.remove(this),this.Rh=t,null!==t?Ev(t,this):this instanceof _t&&null!==n&&n.wi.add(this),this.B(1),null!==n&&n.Z){var s=this.data,a=n.model;if(null!==s&&a.ek()){var u=a.pa(null!==t?t.data:null);a.uq(s,u)}}if(null!==(s=this.containingGroupChanged)&&(a=!0,null!==n&&(a=n.Z,n.Z=!0),s(this,e,t),null!==n&&(n.Z=a)),this instanceof _t)for(Eu(n=new nt,this,!0,0,!0),n=n.iterator;n.next();)if((s=n.value)instanceof it)for(s=s.linksConnected;s.next();)va(s.value);if(this instanceof it){for(n=this.linksConnected;n.next();)va(n.value);null!==(n=this.labeledLink)&&va(n)}this.g("containingGroup",e,t),null!==t&&null!==(e=t.layer)&&rm(e,-1,t)}}else q("cannot set the Part.containingGroup of a Link or Adornment")}},containingGroupChanged:{get:function(){return this.$m},set:function(t){var e=this.$m;e!==t&&(this.$m=t,this.g("containingGroupChanged",e,t))}},isTopLevel:{get:function(){return!(null!==this.containingGroup||this instanceof it&&null!==this.labeledLink)}},layoutConditions:{get:function(){return this.fo},set:function(t){var e=this.fo;e!==t&&(this.fo=t,this.g("layoutConditions",e,t))}},dragComputation:{get:function(){return this.qn},set:function(t){var e=this.qn;e!==t&&(this.qn=t,this.g("dragComputation",e,t))}},shadowOffset:{get:function(){return this.pp},set:function(t){var e=this.pp;e.A(t)||(this.pp=t=t.I(),this.N(),this.g("shadowOffset",e,t))}},shadowColor:{get:function(){return this.op},set:function(t){var e=this.op;e!==t&&(this.op=t,this.N(),this.g("shadowColor",e,t))}},shadowBlur:{get:function(){return this.hg},set:function(t){var e=this.hg;e!==t&&(this.hg=t,this.N(),this.g("shadowBlur",e,t))}}}),ft.prototype.invalidateLayout=ft.prototype.B,ft.prototype.findCommonContainingGroup=ft.prototype.Px,ft.prototype.isMemberOf=ft.prototype.Jd,ft.prototype.findTopLevelPart=ft.prototype.Rz,ft.prototype.findSubGraphLevel=ft.prototype.Nz,ft.prototype.ensureBounds=ft.prototype.Ta,ft.prototype.getDocumentBounds=ft.prototype.Li,ft.prototype.findObject=ft.prototype.Ya,ft.prototype.moveTo=ft.prototype.moveTo,ft.prototype.invalidateAdornments=ft.prototype.Mb,ft.prototype.clearAdornments=ft.prototype.Qj,ft.prototype.removeAdornment=ft.prototype.Gf,ft.prototype.addAdornment=ft.prototype.xh,ft.prototype.findAdornment=ft.prototype.Yj,ft.prototype.updateTargetBindings=ft.prototype.Fa;var Jb=!1;function Rt(t,e){void 0===t||t instanceof Ke||"string"==typeof t?ft.call(this,t):(ft.call(this),t&&(e=t)),this.F&=-257,this.Ug="Adornment",this.le=null,this.$w=0,this.vx=!1,this.j=t instanceof bp?[]:mS,this.Sa=null,e&&Object.assign(this,e)}ft.className="Part",ft.LayoutNone=0,ft.LayoutAdded=1,ft.LayoutRemoved=2,ft.LayoutShown=4,ft.LayoutHidden=8,ft.LayoutNodeSized=16,ft.LayoutGroupLayout=32,ft.LayoutNodeReplaced=64,ft.LayoutStandard=127,ft.LayoutAll=16777215,Wt(Rt,ft),Rt.prototype.toString=function(){var t=this.adornedPart;return"Adornment("+this.category+")"+(null!==t?t.toString():"")},Rt.prototype.updateRelationshipsFromData=function(){},Rt.prototype.hk=function(t){var e=this.adornedObject.part;if(e instanceof K&&this.adornedObject instanceof bt){var n=e.path;e.hk(t),t=n.geometry,n=(e=this.T.m).length;for(var s=0;s<n;s++){var a=e[s];a.isPanelMain&&a instanceof bt&&(a.ma=t)}}},Rt.prototype.Ri=function(){var t=this.le;return null===t||null===(t=t.part)||!Sr(t)},Rt.prototype.Mc=function(){return!1},Rt.prototype.qk=function(t,e,n,s,a,u,c){if(t===Ve&&"elements"===e){if(a instanceof Pn)null===this.Sa&&(this.Sa=a);else if(a instanceof W){var f=a.$l(function(p){return p instanceof Pn});f instanceof Pn&&null===this.Sa&&(this.Sa=f)}}else t===dn&&"elements"===e&&null!==this.Sa&&(s===this.Sa||s instanceof W&&this.Sa.sg(s))&&(this.Sa=null);ft.prototype.qk.call(this,t,e,n,s,a,u,c)},Rt.prototype.updateAdornments=function(){},Rt.prototype.Wj=function(){},kt.Object.defineProperties(Rt.prototype,{placeholder:{get:function(){return this.Sa}},adornedObject:{get:function(){return this.le},set:function(t){var e=this.adornedPart,n=null;null!==t&&(n=t.part),null===e||null!==t&&e===n||e.Gf(this.category),this.le=t,null!==n&&n.xh(this.category,this)}},adornedPart:{get:function(){var t=this.le;return null!==t?t.part:null}},containingGroup:{get:function(){return null}}});var mS=[];function it(t,e){void 0===t||t instanceof Ke||"string"==typeof t?ft.call(this,t):(ft.call(this),t&&(e=t)),this.R=13,this.ab=new st,this.Ep=this.il=this.ii=this.io=this.ho=null,this.Bk=I0,this.oc=this.Te=null,this.Ro=kv,this.vh=!1,e&&Object.assign(this,e)}function qb(t,e){null!==e&&(null===t.Te&&(t.Te=new nt),t.Te.add(e))}function Qb(t,e,n,s){if(null===e||null===t.Te)return null;for(var a=t.Te.iterator;a.next();){var u=a.value;if(u.Ks===t&&u.vv===e&&u.qy===n&&u.sy===s||u.Ks===e&&u.vv===t&&u.qy===s&&u.sy===n)return u}return null}function tM(t,e){for(t=t.linksConnected;t.next();){var n=t.value;(n.fromPort===e||n.toPort===e)&&(fr(n.fromPort),fr(n.toPort),n.Va())}}function fr(t){if(null!==t){var e=t.Qo;null!==e&&e.em(),null===(e=(t=t.part).containingGroup)||t.isVisible()||fr(e.port)}}function Hl(t,e,n,s){if(null!==e&&!n.has(e)){n.add(e);var a=!0,u=t.diagram;null!==u&&(a=u.isTreePathToChildren),e.linksConnected.each(function(c){c.isTreeLink?(a?c.fromNode===e:c.toNode===e)&&Hl(t,a?c.toNode:c.fromNode,n,s):s.add(c)})}}function Fd(t,e,n){fr(n);var s=t.ab.contains(e);if(s||t.ab.add(e),!s||e.fromNode===e.toNode){var a=t.linkConnected;if(null!==a){var u=!0,c=t.diagram;null!==c&&(u=c.Z,c.Z=!0),a(t,e,n),null!==c&&(c.Z=u)}}!s&&e.isTreeLink&&(n=e.fromNode,e=e.toNode,null!==n&&null!==e&&n!==e&&(s=!0,null!==(t=t.diagram)&&(s=t.isTreePathToChildren),u=s?n:e,(a=s?e:n).vh||(a.vh=u),!u.isTreeLeaf||null!==t&&t.undoManager.isUndoingRedoing||(s?n===u&&(u.isTreeLeaf=!1):e===u&&(u.isTreeLeaf=!1))))}function qm(t,e,n){fr(n);var s=t.ab.remove(e),a=null;if(s||e.toNode===e.fromNode){var u=t.linkDisconnected;if(a=t.diagram,null!==u){var c=!0;null!==a&&(c=a.Z,a.Z=!0),u(t,e,n),null!==a&&(a.Z=c)}}s&&e.isTreeLink&&(n=!0,null!==a&&(n=a.isTreePathToChildren),t=n?e.toNode:e.fromNode,e=n?e.fromNode:e.toNode,null!==t&&(t.vh=!1),null===e||e.isTreeLeaf||(0===e.ab.count?(e.vh=null,null!==a&&a.undoManager.isUndoingRedoing||(e.isTreeLeaf=!0)):Rd(e)))}function Rd(t){if(t.vh=!1,0!==t.ab.count){var e=!0,n=t.diagram;if(null===n||!n.undoManager.isUndoingRedoing){for(null!==n&&(e=n.isTreePathToChildren),n=t.ab.iterator;n.next();){var s=n.value;if(s.isTreeLink)if(e){if(s.fromNode===t)return void(t.isTreeLeaf=!1)}else if(s.toNode===t)return void(t.isTreeLeaf=!1)}t.isTreeLeaf=!0}}}function Qm(t){null===t.oc?t.oc=new xt:t.oc.clear(),t.Em(t,function(e,n){Tv(e,n)}),0===t.oc.count&&t.oc.add("",t)}function Tv(t,e){var n=e.portId;null!==n&&null!==t.oc&&t.oc.add(n,e)}function Hp(t,e,n){var s=e.portId;if(null!==s&&(null!==t.oc&&t.oc.remove(s),null!==(e=t.diagram)&&n)){for(n=null,t=t.findLinksConnected(s);t.next();)s=t.value,null===n&&(n=Lt()),n.push(s);if(null!==n){for(t=0;t<n.length;t++)e.remove(n[t]);ee(n)}}}function G_(t,e){return null===(e=e.rg())?0:1+G_(t,e)}function Vl(t,e,n,s,a,u,c){if(1<s)for(var f=n?t.Wp():t.Gd();f.next();){var p=f.value;p.isTreeLink&&(null===(p=p.aq(t))||p===t||e.contains(p)||(e.add(p),Vl(p,e,n,s-1,a,u,c)))}else Sv(t,e,n,a,u,c)}function Sv(t,e,n,s,a,u){for(var c=a===t||t.isTreeExpanded,f=n?t.Wp():t.Gd();f.next();){var p=f.value;if(p.isTreeLink&&null!==(p=p.aq(t))&&p!==t){var g=e.contains(p);g||e.add(p),c&&(u&&s.Mj(p,a),p.Gh(),p.Pb(!1)),p.isTreeExpanded&&(p.wasTreeExpanded=p.isTreeExpanded,g||Sv(p,e,n,s,a,u))}}t.isTreeExpanded=!1}function U_(t,e,n,s,a,u,c){for(var f=u!==t&&t.isTreeExpanded,p=n?t.Wp():t.Gd();p.next();){var g=p.value;g.isTreeLink&&(f||g.td||g.Va(),null!==(g=g.aq(t))&&g!==t&&!e.contains(g)&&(e.add(g),f||(g.Pb(!0),g.Gh(),c&&a.Oj(g,u)),2<s||g.wasTreeExpanded))&&(g.wasTreeExpanded=!1,U_(g,e,n,s-1,a,u,c))}t.isTreeExpanded=!0}Rt.className="Adornment",Wt(it,ft),it.prototype.cloneProtected=function(t){ft.prototype.cloneProtected.call(this,t),t.R=this.R,t.R=-17&this.R,t.ho=this.ho,t.io=this.io,t.ii=this.ii,t.Ep=this.Ep,t.Bk=this.Bk.I(),t.Ro=this.Ro},(S=it.prototype).wf=function(t){ft.prototype.wf.call(this,t),t.rd(),t.Te=this.Te,t.oc=null},S.jA=function(t,e,n){null==e&&(e=""),null==n&&(n=""),null!==(t=Qb(this,t,e,n))&&t.em()},S.qk=function(t,e,n,s,a,u,c){(t===Ve&&"elements"===e||t===dn&&"elements"===e)&&(this.oc=null),ft.prototype.qk.call(this,t,e,n,s,a,u,c)},S.rd=function(t){void 0===t&&(t=null);for(var e=this.linksConnected;e.next();){var n=e.value;null!==t&&t.contains(n)||(fr(n.fromPort),fr(n.toPort),n.Va())}},S.Ri=function(){return!0},it.prototype.getAvoidableRect=function(t){return t.set(this.actualBounds),t.Mp(this.Bk),t},it.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.containingGroup;return t},it.prototype.isVisible=function(){if(!ft.prototype.isVisible.call(this))return!1;var t=!0,e=Th,n=this.diagram;if(null!==n){if(n.animationManager.Ms(this))return!0;t=n.isTreePathToChildren,e=n.treeCollapsePolicy}if(e===Th){if(null!==(t=this.rg())&&!t.isTreeExpanded)return!1}else if(e===pm){if(0<(t=t?this.Wu():this.Xu()).count&&t.all(function(s){return!s.isTreeExpanded}))return!1}else if(e===up&&0<(t=t?this.Wu():this.Xu()).count&&t.any(function(s){return!s.isTreeExpanded}))return!1;return null===(t=this.labeledLink)||t.isVisible()},it.prototype.Pb=function(t){ft.prototype.Pb.call(this,t);for(var e=this.linksConnected;e.next();){var n=e.value;if(t&&null!==this.containingGroup){var s=n.aq(this);null===s||s.Jd(this.containingGroup)||n.Va()}n.Pb(t)}},it.prototype.Qx=function(){var t=new nt,e=new nt;return Hl(this,this,t,e),e.iterator},it.prototype.findLinksConnected=function(t){if(void 0===t&&(t=null),null===t)return this.ab.iterator;var e=new kn(this.ab),n=this;return e.predicate=function(s){return s.fromNode===n&&s.fromPortId===t||s.toNode===n&&s.toPortId===t},e},(S=it.prototype).Wp=function(t){void 0===t&&(t=null);var e=new kn(this.ab),n=this;return e.predicate=function(s){return s.fromNode===n&&(null===t||s.fromPortId===t)},e},S.Gd=function(t){void 0===t&&(t=null);var e=new kn(this.ab),n=this;return e.predicate=function(s){return s.toNode===n&&(null===t||s.toPortId===t)},e},S.Vu=function(t){void 0===t&&(t=null);for(var e=null,n=null,s=this.ab.iterator;s.next();){var a=s.value;a.fromNode===this?(null===t||a.fromPortId===t)&&(a=a.toNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a):a.toNode!==this||null!==t&&a.toPortId!==t||(a=a.fromNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new Nn(n):To},S.Xu=function(t){void 0===t&&(t=null);for(var e=null,n=null,s=this.ab.iterator;s.next();){var a=s.value;a.fromNode!==this||null!==t&&a.fromPortId!==t||(a=a.toNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new Nn(n):To},S.Wu=function(t){void 0===t&&(t=null);for(var e=null,n=null,s=this.ab.iterator;s.next();){var a=s.value;a.toNode!==this||null!==t&&a.toPortId!==t||(a=a.fromNode,null!==e?e.add(a):null!==n&&n!==a?((e=new nt).add(n),e.add(a)):n=a)}return null!==e?e.iterator:null!==n?new Nn(n):To},S.Iz=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var s=new kn(this.ab),a=this;return s.predicate=function(u){return!((u.fromNode!==a||u.toNode!==t||null!==e&&u.fromPortId!==e||null!==n&&u.toPortId!==n)&&(u.fromNode!==t||u.toNode!==a||null!==n&&u.fromPortId!==n||null!==e&&u.toPortId!==e))},s},S.Jz=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var s=new kn(this.ab),a=this;return s.predicate=function(u){return!(u.fromNode!==a||u.toNode!==t||null!==e&&u.fromPortId!==e||null!==n&&u.toPortId!==n)},s},it.prototype.updateRelationshipsFromData=function(){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)},(S=it.prototype).cq=function(t){ft.prototype.cq.call(this,t),t||(Rd(this),null!==(t=this.il)&&z_(t,this))},S.eq=function(t){ft.prototype.eq.call(this,t),t||null!==(t=this.il)&&null!==t.nd&&(t.nd.remove(this),t.s())},S.Wj=function(){if(0<this.ab.count){var t=this.diagram;if(null!==t)for(var e=null===t.commandHandler||t.commandHandler.deletesConnectedLinks,n=this.ab.copy().iterator;n.next();){var s=n.value;e?t.remove(s):(s.fromNode===this&&(s.fromNode=null),s.toNode===this&&(s.toNode=null))}}this.labeledLink=null,ft.prototype.Wj.call(this)},S.ss=function(t){if(null===this.oc){if(""===t&&!1===this.Je)return this;Qm(this)}var e=this.oc.H(t);return null!==e||""!==t&&null!==(e=this.oc.H(""))?e:this},S.lA=function(t){if(null===t||t===this)return!1;var e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),n=this,e)for(;n!==t;){e=null;for(var s=n.ab.iterator;s.next();){var a=s.value;if(a.isTreeLink&&(e=a.fromNode)!==n&&e!==this)break}if(e===this||null===e||e===n)return!1;n=e}else for(;n!==t;){for(e=null,s=n.ab.iterator;s.next()&&(!(a=s.value).isTreeLink||(e=a.toNode)===n||e===this););if(e===this||null===e||e===n)return!1;n=e}return!0},S.Vz=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this,t)for(;;){t=null;for(var n=e.ab.iterator;n.next();){var s=n.value;if(s.isTreeLink&&(t=s.fromNode)!==e&&t!==this)break}if(t===this)return this;if(null===t||t===e)return e;e=t}else for(;;){for(t=null,n=e.ab.iterator;n.next()&&(!(s=n.value).isTreeLink||(t=s.toNode)===e||t===this););if(t===this)return this;if(null===t||t===e)return e;e=t}},S.Fz=function(t){if(null===t)return null;if(this===t)return this;for(var e=this;null!==e;)Lp(e,!0),e=e.rg();var n=null;for(e=t;null!==e;){if(0!=(1048576&e.F)){n=e;break}e=e.rg()}for(e=this;null!==e;)Lp(e,!1),e=e.rg();return n},S.Ii=function(){var t=!0,e=this.diagram;if(null!==e&&(t=e.isTreePathToChildren),e=this.ab.iterator,t){for(;e.next();)if((t=e.value).isTreeLink&&t.fromNode!==this)return t}else for(;e.next();)if((t=e.value).isTreeLink&&t.toNode!==this)return t;return null},S.rg=function(){var t=this.vh;if(null===t)return null;if(t instanceof it)return t;var e=!0;if(null!==(t=this.diagram)&&(e=t.isTreePathToChildren),t=this.ab.iterator,e){for(;t.next();)if((e=t.value).isTreeLink&&(e=e.fromNode)!==this)return this.vh=e}else for(;t.next();)if((e=t.value).isTreeLink&&(e=e.toNode)!==this)return this.vh=e;return this.vh=null},S.Tz=function(){var e=new nt;return function t(n,s){if(null!==n){s.add(n);var a=n.Ii();null!==a&&(s.add(a),t(n.rg(),s))}}(this,e),e},S.Sz=function(){return G_(this,this)},S.Yp=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren),e=new kn(this.ab);var n=this;return e.predicate=t?function(s){return!(!s.isTreeLink||s.fromNode!==n)}:function(s){return!(!s.isTreeLink||s.toNode!==n)},e},S.Zu=function(){var t=!0,e=this.diagram;null!==e&&(t=e.isTreePathToChildren);var n=e=null,s=this.ab.iterator;if(t)for(;s.next();)(t=s.value).isTreeLink&&t.fromNode===this&&(t=t.toNode,null!==e?e.add(t):null!==n&&n!==t?((e=new st).add(n),e.add(t)):n=t);else for(;s.next();)(t=s.value).isTreeLink&&t.toNode===this&&(t=t.fromNode,null!==e?e.add(t):null!==n&&n!==t?((e=new st).add(n),e.add(t)):n=t);return null!==e?e.iterator:null!==n?new Nn(n):To},S.Uz=function(t){void 0===t&&(t=1/0);var e=new nt;return Eu(e,this,!1,t,!0),e},it.prototype.collapseTree=function(t){void 0===t&&(t=1),1>t&&(t=1);var e=this.diagram;if(null!==e&&!e.Ke){e.Ke=!0;var n=new nt;n.add(this),Vl(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Th),e.Ke=!1}},it.prototype.expandTree=function(t){void 0===t&&(t=2),2>t&&(t=2);var e=this.diagram;if(null!==e&&!e.Ke){e.Ke=!0;var n=new nt;n.add(this),U_(this,n,e.isTreePathToChildren,t,e,this,e.treeCollapsePolicy===Th),e.Ke=!1}},kt.Object.defineProperties(it.prototype,{portSpreading:{get:function(){return this.Ro},set:function(t){var e=this.Ro;e!==t&&(this.Ro=t,this.g("portSpreading",e,t),null!==(t=this.diagram)&&t.undoManager.isUndoingRedoing||this.rd())}},avoidable:{get:function(){return 0!=(8&this.R)},set:function(t){var e=0!=(8&this.R);if(e!==t){this.R^=8;var n=this.diagram;null!==n&&op(n,this),this.g("avoidable",e,t)}}},avoidableMargin:{get:function(){return this.Bk},set:function(t){"number"==typeof t&&(t=new Ct(t));var e=this.Bk;if(!e.A(t)){this.Bk=t=t.I();var n=this.diagram;null!==n&&op(n,this),this.g("avoidableMargin",e,t)}}},linksConnected:{get:function(){return this.ab.iterator}},linkConnected:{get:function(){return this.ho},set:function(t){var e=this.ho;e!==t&&(this.ho=t,this.g("linkConnected",e,t))}},linkDisconnected:{get:function(){return this.io},set:function(t){var e=this.io;e!==t&&(this.io=t,this.g("linkDisconnected",e,t))}},linkValidation:{get:function(){return this.ii},set:function(t){var e=this.ii;e!==t&&(this.ii=t,this.g("linkValidation",e,t))}},isLinkLabel:{get:function(){return null!==this.il}},labeledLink:{get:function(){return this.il},set:function(t){var e=this.il;if(e!==t){var n=this.diagram,s=this.data;if(null!==e){if(null!==e.nd&&(e.nd.remove(this),e.s()),null!==n&&null!==s&&!n.undoManager.isUndoingRedoing){var a=e.data,u=n.model;if(null!==a&&u.Pi()){var c=u.pa(s);void 0!==c&&u.ty(a,c)}}this.containingGroup=null}this.il=t,null!==t&&(z_(t,this),null===n||null===s||n.undoManager.isUndoingRedoing||(n=n.model,null!==(a=t.data)&&n.Pi()&&void 0!==(s=n.pa(s))&&n.Bu(a,s)),this.containingGroup=t.containingGroup),xd(this),this.g("labeledLink",e,t)}}},port:{get:function(){return this.ss("")}},ports:{get:function(){return null===this.oc&&Qm(this),this.oc.iteratorValues}},isTreeExpanded:{get:function(){return 0!=(1&this.R)},set:function(t){var e=0!=(1&this.R);if(e!==t){this.R^=1;var n=this.diagram;if(this.g("isTreeExpanded",e,t),null!==(e=this.treeExpandedChanged)){var s=!0;null!==n&&(s=n.Z,n.Z=!0),e(this),null!==n&&(n.Z=s)}null!==n&&n.undoManager.isUndoingRedoing?this.Pb(t):t?this.expandTree():this.collapseTree()}}},wasTreeExpanded:{get:function(){return 0!=(2&this.R)},set:function(t){var e=0!=(2&this.R);e!==t&&(this.R^=2,this.g("wasTreeExpanded",e,t))}},treeExpandedChanged:{get:function(){return this.Ep},set:function(t){var e=this.Ep;e!==t&&(this.Ep=t,this.g("treeExpandedChanged",e,t))}},isTreeLeaf:{get:function(){return 0!=(4&this.R)},set:function(t){var e=0!=(4&this.R);e!==t&&(this.R^=4,this.g("isTreeLeaf",e,t))}}}),it.prototype.expandTree=it.prototype.expandTree,it.prototype.collapseTree=it.prototype.collapseTree,it.prototype.findTreeParts=it.prototype.Uz,it.prototype.findTreeChildrenNodes=it.prototype.Zu,it.prototype.findTreeChildrenLinks=it.prototype.Yp,it.prototype.findTreeLevel=it.prototype.Sz,it.prototype.findTreeParentChain=it.prototype.Tz,it.prototype.findTreeParentNode=it.prototype.rg,it.prototype.findTreeParentLink=it.prototype.Ii,it.prototype.findCommonTreeParent=it.prototype.Fz,it.prototype.findTreeRoot=it.prototype.Vz,it.prototype.isInTreeOf=it.prototype.lA,it.prototype.findPort=it.prototype.ss,it.prototype.findLinksTo=it.prototype.Jz,it.prototype.findLinksBetween=it.prototype.Iz,it.prototype.findNodesInto=it.prototype.Wu,it.prototype.findNodesOutOf=it.prototype.Xu,it.prototype.findNodesConnected=it.prototype.Vu,it.prototype.findLinksInto=it.prototype.Gd,it.prototype.findLinksOutOf=it.prototype.Wp,it.prototype.findExternalTreeLinksConnected=it.prototype.Qx,it.prototype.invalidateConnectedLinks=it.prototype.rd,it.prototype.invalidateLinkBundle=it.prototype.jA;var Nv=new Q(it,"SpreadingNone",10),kv=new Q(it,"SpreadingEvenly",11),ty=new Q(it,"SpreadingPacked",12);function _t(t,e){void 0===t||t instanceof Ke||"string"==typeof t?it.call(this,t):(it.call(this),t&&(e=t)),this.R|=4608,this.so=new nt,this.rl=new nt,this.Sa=this.xp=this.ki=this.to=this.ro=this.$a=null,this.uc=new Ht,this.uc.group=this,this.$q=null,e&&Object.assign(this,e)}function Ev(t,e){if(t.so.add(e)){e instanceof _t&&t.rl.add(e);var n=t.memberAdded;if(null!==n){var s=!0,a=t.diagram;null!==a&&(s=a.Z,a.Z=!0),n(t,e),null!==a&&(a.Z=s)}t.isVisible()&&t.isSubGraphExpanded||e.Pb(!1)}e instanceof K&&!t.computesBoundsIncludingLinks||(null===(e=t.Sa)&&(e=t),e.s())}function Gh(t,e){if(t.so.remove(e)){e instanceof _t&&t.rl.remove(e);var n=t.memberRemoved;if(null!==n){var s=!0,a=t.diagram;null!==a&&(s=a.Z,a.Z=!0),n(t,e),null!==a&&(a.Z=s)}t.isVisible()&&t.isSubGraphExpanded||e.Pb(!0)}e instanceof K&&!t.computesBoundsIncludingLinks||(null===(e=t.Sa)&&(e=t),e.s())}function Uh(t,e,n,s){for(var a=t.memberParts;a.next();){var u=a.value;if(u.Pb(!1),u instanceof _t&&u.isSubGraphExpanded&&(u.wasSubGraphExpanded=u.isSubGraphExpanded,Uh(u,e,n,s)),u instanceof it)u.rd(e),n.Mj(u,s);else if(u instanceof K)for(u=u.labelNodes;u.next();)u.value.rd(e)}t.isSubGraphExpanded=!1}function ey(t,e,n,s){for(var a=t.memberParts;a.next();){var u=a.value;if(u.Pb(!0),u instanceof _t&&u.wasSubGraphExpanded&&(u.wasSubGraphExpanded=!1,ey(u,e,n,s)),u instanceof it)u.rd(e),n.Oj(u,s);else if(u instanceof K)for(u=u.labelNodes;u.next();)u.value.rd(e)}t.isSubGraphExpanded=!0}function Pn(t){dt.call(this),this.nb=lh,this.fp=new z(NaN,NaN,NaN,NaN),t&&Object.assign(this,t)}function K(t){ft.call(this,W.Link),this.Ia=8,this.We=null,this.Xe="",this.pf=this.Dn=null,this.qf="",this.Dp=null,this.vk=Ii,this.gn=0,this.jn=Ii,this.kn=NaN,this.Ej=W_,this.rp=.5,this.nd=null,this.Db=(new st).freeze(),this.gf=this.eh=null,this.yl=new z,this.ma=new rt,this.C=this.o=this.Mf=this.Qf=null,this.j=[],this.tu=new A,this.dr=this.nx=this.mx=null,this.Pt=NaN,this.P=null,t&&Object.assign(this,t)}function va(t){var s,e=t.fromNode,n=t.toNode;if(s=null!==e?null!==n?e.Px(n):e.containingGroup:null!==n?n.containingGroup:null,(n=t.Rh)!==(e=s)){null!==n&&Gh(n,t),t.Rh=e,null!==e&&Ev(e,t);var a=t.containingGroupChanged;if(null!==a){var u=!0,c=t.diagram;null!==c&&(u=c.Z,c.Z=!0),a(t,n,e),null!==c&&(c.Z=u)}!t.td||t.mx!==n&&t.nx!==n||t.Va()}if(t.isLabeledLink)for(t=t.labelNodes;t.next();)t.value.containingGroup=s}function z_(t,e){null===t.nd&&(t.nd=new nt),t.nd.add(e),t.s()}function wa(t,e,n){if(0!==e||0!==n)if(0===t.pointsCount)t.defaultFromPoint&&t.defaultFromPoint.offset(e,n),t.defaultToPoint&&t.defaultToPoint.offset(e,n);else{for(var s=t.td,a=new st,u=t.Db.iterator;u.next();){var c=u.value;a.add(new A(c.x+e,c.y+n).freeze())}a.freeze(),u=t.Db,t.Db=a,c=t.diagram,isNaN(e)||isNaN(n)||null!==c&&c.animationManager.tb?t.s():(t.Wf.h(t.Wf.x+e,t.Wf.y+n),t.ja.h(t.ja.x+e,t.ja.y+n),xd(t)),s?Vp(t):(t.defaultFromPoint&&(t.defaultFromPoint=t.i(0)),t.defaultToPoint&&(t.defaultToPoint=t.i(t.pointsCount-1))),null!==c&&c.animationManager.tb&&(e=c.animationManager,t.gf=a,e.Al.add(t)),t.g("points",u,a)}}function Vp(t){0===t.Db.count?t.td=!1:(t.td=!0,t.dr=null,t.Pt=NaN,t.defaultFromPoint=t.i(0),t.defaultToPoint=t.i(t.pointsCount-1),vo(t,!1))}function Bp(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?(e.x=e.x>=t.x?t.x+9e9:t.x-9e9,e.y=t.y):(e.y=e.y>=t.y?t.y+9e9:t.y-9e9,e.x=t.x),e}function Ld(t,e){var n=e.Qo;return null===n&&((n=new Xh).port=e,n.node=e.part,e.Qo=n),Lv(n,t)}function zh(t){return t===Vn||.5===t.x&&.5===t.y}function $h(t){return.5===t.x&&.5===t.y?t:Ut}function Pv(t){if(null===t.diagram||!t.isAvoiding||!fm(t.diagram))return!1;var e=t.points.m,n=e.length;if(4>n)return!1;t=dd(t.diagram,!0,t.containingGroup,null);for(var s=1;s<n-2;s++){var a=e[s],u=e[s+1];if(!t.fk(Math.min(a.x,u.x),Math.min(a.y,u.y),Math.abs(a.x-u.x),Math.abs(a.y-u.y)))return!0}return!1}function ny(t,e,n,s,a,u,c){var f=e.Rp,p=e.Qp,g=Us(e,n,s),y=n,v=s;for(0===a?y+=f:90===a?v+=p:180===a?y-=f:v-=p,a!==c&&g>Fu&&Us(e,y,v)!==g-1&&(Us(e,n-f,s)===g-1?(a=180,y=n-f,v=s):Us(e,n+f,s)===g-1?(a=0,y=n+f,v=s):Us(e,n,s-p)===g-1?(a=270,y=n,v=s-p):Us(e,n,s+p)===g-1&&(a=90,y=n,v=s+p));g>Fu&&Us(e,y,v)===g-1;)n=y,s=v,0===a?y+=f:90===a?v+=p:180===a?y-=f:v-=p,--g;u?g>Fu&&(180===a||0===a?n=Math.floor(n/f)*f+f/2:(90===a||270===a)&&(s=Math.floor(s/p)*p+p/2)):(n=Math.floor(n/f)*f+f/2,s=Math.floor(s/p)*p+p/2),g>Fu&&(u=a,c=n,y=s,0===a?(u=90,y+=p):90===a?(u=180,c-=f):180===a?(u=270,y-=p):270===a&&(u=0,c+=f),Us(e,c,y)===g-1?ny(t,e,c,y,u,!1,u):(c=n,y=s,0===a?(u=270,y-=p):90===a?(u=0,c+=f):180===a?(u=90,y+=p):270===a&&(u=180,c-=f),Us(e,c,y)===g-1&&ny(t,e,c,y,u,!1,u))),t.tf(n,s)}function Av(t,e,n,s){return t=n-t,isNaN(t)||t===1/0||t===-1/0?NaN:(0>t&&(t=-t),e=s-e,isNaN(e)||e===1/0||e===-1/0?NaN:(0>e&&(e=-e),V.aa(t,0)?e:V.aa(e,0)?t:Math.sqrt(t*t+e*e)))}function Pu(t,e,n,s){var a=t.pointsCount;if(2>a)return e;if(n){var u=t.i(1);if(0===(s=Av(e.x,e.y,n=u.x-s.x,u=u.y-s.y)))return e;a=2===a?.5*s:s,(t=t.computeShortLength(!0))>a&&(t=a),a=t*(u-e.y)/s,e.x+=t*(n-e.x)/s,e.y+=a}else{if(u=t.i(a-2),0===(s=Av(e.x,e.y,n=u.x-s.x,u=u.y-s.y)))return e;a=2===a?.5*s:s,(t=t.computeShortLength(!1))>a&&(t=a),a=t*(e.y-u)/s,e.x-=t*(e.x-n)/s,e.y-=a}return e}function iy(t,e,n,s){for(var a=t.pointsCount,u=e;V.aa(e.x,u.x)&&V.aa(e.y,u.y);){if(n>=a)return a-1;u=t.i(n++)}if(!V.aa(e.x,u.x)&&!V.aa(e.y,u.y))return n-1;for(var c=u;V.aa(e.x,u.x)&&V.aa(u.x,c.x)&&(!s||(e.y>=u.y?u.y>=c.y:u.y<=c.y))||V.aa(e.y,u.y)&&V.aa(u.y,c.y)&&(!s||(e.x>=u.x?u.x>=c.x:u.x<=c.x));){if(n>=a)return a-1;c=t.i(n++)}return n-2}function Yh(t,e,n,s,a,u,c){if(!c&&Au(t)){var f=(c=t.computeJumpLength())/2,p=[],g=0;if(t.isVisible()&&(g=function $_(t,e,n,s){var a=t.diagram;if(null===a||e.A(n))return 0;for(a=a.layers;a.next();){var u=a.value;if(null!==u&&u.visible)for(var c=(u=u.Ha.m).length,f=0;f<c;f++){var p=u[f];if(p instanceof K){if(p===t)return 0<s.length&&s.sort(function(y,v){return y-v}),s.length;if(p.isVisible()&&Au(p)){var g=p.routeBounds;g.u()&&t.routeBounds.Lc(g)&&!t.usesSamePort(p)&&null!==(g=p.path)&&g.Ff()&&eM(e,n,s,p)}}}}return 0<s.length&&s.sort(function(y,v){return y-v}),s.length}(t,a,u,p)),0<g)if(V.w(a.y,u.y))if(a.x<u.x)for(var y=0;y<g;){var v=Math.max(a.x,Math.min(p[y++]-f,u.x-c));e.lineTo(v+n,u.y+s);for(var _=v+n,b=Math.min(v+c,u.x);y<g&&(v=p[y])<b+c;)y++,b=Math.min(v+f,u.x);v=u.y-c+s,b+=n;var D=u.y+s;t.curve===Wa?qr(e,b,D,!1):Ya(e,_,v,b,v,b,D)}else for(--g;0<=g;){for(y=Math.min(a.x,Math.max(p[g--]+f,u.x+c)),e.lineTo(y+n,u.y+s),_=y+n,v=Math.max(y-c,u.x);0<=g&&(y=p[g])>v-c;)g--,v=Math.max(y-f,u.x);y=u.y-c+s,v+=n,b=u.y+s,t.curve===Wa?qr(e,v,b,!1):Ya(e,_,y,v,y,v,b)}else if(V.w(a.x,u.x))if(a.y<u.y)for(y=0;y<g;){for(v=Math.max(a.y,Math.min(p[y++]-f,u.y-c)),e.lineTo(u.x+n,v+s),_=v+s,v=Math.min(v+c,u.y);y<g&&(b=p[y])<v+c;)y++,v=Math.min(b+f,u.y);b=u.x-c+n,D=u.x+n,v+=s,t.curve===Wa?qr(e,D,v,!1):Ya(e,b,_,b,v,D,v)}else for(--g;0<=g;){for(y=Math.min(a.y,Math.max(p[g--]+f,u.y+c)),e.lineTo(u.x+n,y+s),_=y+s,y=Math.max(y-c,u.y);0<=g&&(v=p[g])>y-c;)g--,y=Math.max(v-f,u.y);v=u.x-c+n,b=u.x+n,y+=s,t.curve===Wa?qr(e,b,y,!1):Ya(e,v,_,v,y,b,y)}}e.lineTo(u.x+n,u.y+s)}function eM(t,e,n,s){for(var a=V.w(t.y,e.y),u=s.pointsCount,c=s.i(0),f=A.alloc(),p=1;p<u;p++){var g=s.i(p);if(p<u-1){var y=s.i(p+1);if(c.y===g.y&&g.y===y.y){if(g.x>c.x&&y.x>=g.x||g.x<c.x&&y.x<=g.x)continue}else if(c.x===g.x&&g.x===y.x&&(g.y>c.y&&y.y>=g.y||g.y<c.y&&y.y<=g.y))continue}t:{var v=t.y,_=e.x,b=e.y,D=c.x;c=c.y;var k=g.x,O=g.y;if(V.w(y=t.x,_)){if(!V.w(v,b)&&V.w(c,O)&&Math.min(v,b)<c&&Math.max(v,b)>c&&Math.min(D,k)<y&&Math.max(D,k)>y&&!V.w(D,k)){f.x=y,f.y=c,y=!0;break t}}else if(V.w(v,b)&&V.w(D,k)&&Math.min(y,_)<D&&Math.max(y,_)>D&&Math.min(c,O)<v&&Math.max(c,O)>v&&!V.w(c,O)){f.x=D,f.y=v,y=!0;break t}f.x=0,f.y=0,y=!1}y&&n.push(a?f.x:f.y),c=g}A.free(f)}function Au(t){return(t=t.curve)===Wh||t===Wa}function vo(t,e){(e||Au(t))&&(null===(e=t.diagram)||e.animationManager.isTicking||e.Xh.contains(t)||0===t.yl.width&&0===t.yl.height||e.Xh.add(t,t.yl.copy()))}function Y_(t,e,n){if(null!==e&&e.Dm&&e.td&&Au(e)){var s=e.routeBounds;s.u()&&(t.routeBounds.Lc(s)||n.Lc(s))&&(t.usesSamePort(e)||e.gc(!1))}}function Gp(t){var e=t.We;if(null!==e){var n=t.pf;if(null!==n&&isNaN(t.curviness)){for(var s=t.Xe,a=t.qf,u=t=null,c=e.ab.m,f=c.length,p=0;p<f;p++){var g=c[p];(g.We===e&&g.Xe===s&&g.pf===n&&g.qf===a||g.We===n&&g.Xe===a&&g.pf===e&&g.qf===s)&&(null===u?u=g:(null===t&&(t=[]).push(u),t.push(g)))}if(null!==t){for(null===(u=Qb(e,n,s,a))&&(qb(e,u=new ay(e,s,n,a)),qb(n,u)),u.links=t,e=0;e<t.length;e++)t[e].Mf=u;u.em()}}}}function ry(t){var e=t.Mf;null!==e&&isNaN(t.curviness)&&(t.Mf=null,0<=(t=e.links.indexOf(t))&&(gl(e.links,t),e.em()))}it.className="Node",it.SpreadingNone=Nv,it.SpreadingEvenly=kv,it.SpreadingPacked=ty,Wt(_t,it),_t.prototype.cloneProtected=function(t){it.prototype.cloneProtected.call(this,t),this.R=-32769&this.R,null!==this.$a&&(t.$a=this.$a.copy()),t.ro=this.ro,t.to=this.to,t.ki=this.ki,t.xp=this.xp;var e=t.$l(function(n){return n instanceof Pn});t.Sa=e instanceof Pn?e:null,null!==this.uc?(t.uc=this.uc.copy(),t.uc.group=t):(null!==t.uc&&(t.uc.group=null),t.uc=null)},(S=_t.prototype).wf=function(t){it.prototype.wf.call(this,t);var e=t.$j();for(t=t.memberParts;t.next();){var n=t.value;if(n.s(),n.B(8),n.Qj(),n instanceof it)n.rd(e);else if(n instanceof K)for(n=n.labelNodes;n.next();)n.value.rd(e)}},S.qk=function(t,e,n,s,a,u,c){if(t===Ve&&"elements"===e){if(a instanceof Pn)null===this.Sa?this.Sa=a:this.Sa!==a&&q("Cannot insert a second Placeholder into the visual tree of a Group.");else if(a instanceof W){var f=a.$l(function(p){return p instanceof Pn});f instanceof Pn&&(null===this.Sa?this.Sa=f:this.Sa!==f&&q("Cannot insert a second Placeholder into the visual tree of a Group."))}}else t===dn&&"elements"===e&&null!==this.Sa&&(s===this.Sa||s instanceof W&&this.Sa.sg(s))&&(this.Sa=null);it.prototype.qk.call(this,t,e,n,s,a,u,c)},S.jm=function(t,e){it.prototype.jm.call(this,t,e),this.isClipping&&this.type!==W.Spot&&this.isSubGraphExpanded&&((t=this.resizeObject)instanceof W&&(t=t.pb()),null===this.$a&&(this.$a=new z),t.Li(this.$a),t instanceof bt&&this.$a.Jc(-t.strokeWidth,-t.strokeWidth))},S.zh=function(t,e,n,s){this.cf=this.Sa,it.prototype.zh.call(this,t,e,n,s)},S.Ta=function(){var t=this;t.isSubGraphExpanded&&this.memberParts.each(function(e){!t.computesBoundsIncludingLinks&&e instanceof K||e.Ta()}),it.prototype.Ta.call(this)},S.Ri=function(){if(!it.prototype.Ri.call(this))return!1;for(var t=this.memberParts;t.next();){var e=t.value;if(e instanceof it){if(e.isVisible()&&Sr(e))return!1}else if(e instanceof K&&e.isVisible()&&Sr(e)&&e.fromNode!==this&&e.toNode!==this)return!1}return!0},S.Wj=function(){if(0<this.so.count){var t=this.diagram;if(null!==t)for(var e=this.so.copy().iterator;e.next();)t.remove(e.value)}it.prototype.Wj.call(this)},_t.prototype.canAddMembers=function(t){var e=this.diagram;if(null===e)return!1;for(e=e.commandHandler,t=fp(t).iterator;t.next();)if(!e.isValidMember(this,t.value))return!1;return!0},_t.prototype.addMembers=function(t,e){var n=this.diagram;if(null===n)return!1;n=n.commandHandler;var s=!0;for(t=fp(t).iterator;t.next();){var a=t.value;!e||n.isValidMember(this,a)?a.containingGroup=this:s=!1}return s},_t.prototype.canUngroup=function(){if(!this.ungroupable)return!1;var t=this.layer;return!(null!==t&&!t.allowUngroup||null!==(t=t.diagram)&&!t.allowUngroup)},(S=_t.prototype).rd=function(t){void 0===t&&(t=null);var e=0!=(65536&this.R);if(it.prototype.rd.call(this,t),!e)for(0==(65536&this.R)&&(this.R=65536^this.R),e=this.Uu();e.next();){var n=e.value;if(null===t||!t.contains(n)){var s=n.fromNode;(null!==s&&s!==this&&s.Jd(this)&&!s.isVisible()||null!==(s=n.toNode)&&s!==this&&s.Jd(this)&&!s.isVisible())&&(fr(n.fromPort),fr(n.toPort),n.Va())}}},S.Uu=function(){var t=null!==this.diagram&&this.diagram.qx;if(t&&null!==this.$q)return this.$q.iterator;var e=this.$j();e.add(this);for(var n=new nt,s=e.iterator;s.next();){var a=s.value;if(a instanceof it)for(a=a.linksConnected;a.next();){var u=a.value;e.contains(u)||n.add(u)}}return t&&(this.$q=n),n.iterator},S.Hz=function(){var t=this.$j();t.add(this);for(var e=new nt,n=t.iterator;n.next();){var s=n.value;if(s instanceof it)for(s=s.linksConnected;s.next();){var a=s.value,u=a.fromNode;null===u||t.contains(u)&&u!==this||e.add(u),null===(a=a.toNode)||t.contains(a)&&a!==this||e.add(a)}}return e.iterator},S.Gz=function(){var e=new nt;return function t(n,s){null!==n&&(s.add(n),t(n.containingGroup,s))}(this,e),e},S.$j=function(){var t=new nt;return Eu(t,this,!0,0,!0),t.remove(this),t},S.Pb=function(t){it.prototype.Pb.call(this,t);for(var e=this.memberParts;e.next();)e.value.Pb(t)},_t.prototype.collapseSubGraph=function(){var t=this.diagram;null===t||t.Ke||(t.Ke=!0,Uh(this,this.$j(),t,this),t.Ke=!1)},_t.prototype.expandSubGraph=function(){var t=this.diagram;null===t||t.Ke||(t.Ke=!0,ey(this,this.$j(),t,this),t.Ke=!1)},_t.prototype.move=function(t,e){void 0===e&&(e=!1);var n=e?this.location:this.position,s=n.x;n=n.y;var a=t.x,u=t.y;if(!(s===a||isNaN(s)&&isNaN(a))||!(n===u||isNaN(n)&&isNaN(u))){for(s=a-(isNaN(s)?0:s),n=u-(isNaN(n)?0:n),u=A.alloc(),it.prototype.move.call(this,t,e),t=new nt,e=this.$j().iterator;e.next();)(a=e.value)instanceof K&&(a.suspendsRouting&&t.add(a),a.td||a.fromNode!==this&&a.toNode!==this)&&(a.suspendsRouting=!0);for(e.reset();e.next();)if(!((a=e.value).Hh()||a instanceof it&&a.isLinkLabel)){var c=a.position,f=a.location;c.u()?(u.x=c.x+s,u.y=c.y+n,a.position=u):f.u()&&(u.x=f.x+s,u.y=f.y+n,a.location=u)}for(e.reset();e.next();)(a=e.value)instanceof K&&(a.suspendsRouting=t.contains(a),a.td||a.fromNode!==this&&a.toNode!==this)&&(u.x=(c=a.position).x+s,u.y=c.y+n,u.u()?a.move(u):a.Va(),Pv(a)&&a.Va());A.free(u)}},kt.Object.defineProperties(_t.prototype,{placeholder:{get:function(){return this.Sa}},computesBoundsAfterDrag:{get:function(){return 0!=(2048&this.R)},set:function(t){var e=0!=(2048&this.R);e!==t&&(this.R^=2048,this.g("computesBoundsAfterDrag",e,t))}},computesBoundsIncludingLinks:{get:function(){return 0!=(4096&this.R)},set:function(t){var e=0!=(4096&this.R);e!==t&&(this.R^=4096,this.g("computesBoundsIncludingLinks",e,t))}},computesBoundsIncludingLocation:{get:function(){return 0!=(8192&this.R)},set:function(t){var e=0!=(8192&this.R);e!==t&&(this.R^=8192,this.g("computesBoundsIncludingLocation",e,t))}},handlesDragDropForMembers:{get:function(){return 0!=(16384&this.R)},set:function(t){var e=0!=(16384&this.R);e!==t&&(this.R^=16384,this.g("handlesDragDropForMembers",e,t))}},memberParts:{get:function(){return this.so.iterator}},layout:{get:function(){return this.uc},set:function(t){var e=this.uc;if(e!==t){null!==e&&(e.diagram=null,e.group=null),this.uc=t;var n=this.diagram;null!==t&&(t.diagram=n,t.group=this),null!==n&&(n.Oh=!0),this.g("layout",e,t),null!==n&&n.Gb()}}},memberAdded:{get:function(){return this.ro},set:function(t){var e=this.ro;e!==t&&(this.ro=t,this.g("memberAdded",e,t))}},memberRemoved:{get:function(){return this.to},set:function(t){var e=this.to;e!==t&&(this.to=t,this.g("memberRemoved",e,t))}},memberValidation:{get:function(){return this.ki},set:function(t){var e=this.ki;e!==t&&(this.ki=t,this.g("memberValidation",e,t))}},ungroupable:{get:function(){return 0!=(256&this.R)},set:function(t){var e=0!=(256&this.R);e!==t&&(this.R^=256,this.g("ungroupable",e,t))}},isSubGraphExpanded:{get:function(){return 0!=(512&this.R)},set:function(t){var e=0!=(512&this.R);if(e!==t){this.R^=512;var n=this.diagram;if(this.g("isSubGraphExpanded",e,t),null!==(e=this.subGraphExpandedChanged)){var s=!0;null!==n&&(s=n.Z,n.Z=!0),e(this),null!==n&&(n.Z=s)}null!==n&&n.undoManager.isUndoingRedoing?(null!==this.Sa&&this.Sa.s(),this.memberParts.each(function(a){a.updateAdornments()})):t?this.expandSubGraph():this.collapseSubGraph()}}},wasSubGraphExpanded:{get:function(){return 0!=(1024&this.R)},set:function(t){var e=0!=(1024&this.R);e!==t&&(this.R^=1024,this.g("wasSubGraphExpanded",e,t))}},subGraphExpandedChanged:{get:function(){return this.xp},set:function(t){var e=this.xp;e!==t&&(this.xp=t,this.g("subGraphExpandedChanged",e,t))}},Jh:{get:function(){return 0!=(32768&this.R)},set:function(t){0!=(32768&this.R)!==t&&(this.R^=32768)}}}),_t.prototype.expandSubGraph=_t.prototype.expandSubGraph,_t.prototype.collapseSubGraph=_t.prototype.collapseSubGraph,_t.prototype.findSubGraphParts=_t.prototype.$j,_t.prototype.findContainingGroupChain=_t.prototype.Gz,_t.prototype.findExternalNodesConnected=_t.prototype.Hz,_t.prototype.findExternalLinksConnected=_t.prototype.Uu,_t.prototype.ensureBounds=_t.prototype.Ta,_t.className="Group",Wt(Pn,dt),Pn.prototype.cloneProtected=function(t){dt.prototype.cloneProtected.call(this,t),t.nb=this.nb.I(),t.fp=this.fp.copy()},Pn.prototype.Bh=function(t){if(null===this.background&&null===this.areaBackground)return!1;var e=this.naturalBounds;return Br(0,0,e.width,e.height,t.x,t.y)},Pn.prototype.im=function(){var t=this.part;if(null!==t&&(t instanceof _t||t instanceof Rt)||q("Placeholder is not inside a Group or Adornment."),t instanceof _t){var e=this.computeBorder(this.fp),n=this.minSize,s=this.wc;for(La(s,(isFinite(n.width)?Math.max(n.width,e.width):e.width)||0,(isFinite(n.height)?Math.max(n.height,e.height):e.height)||0),this.xe(0,0,s.width,s.height),s=t.memberParts,n=!1;s.next();)if(s.value.isVisible()){n=!0;break}s=t.diagram,!n||null===s||s.animationManager.kv(t)||isNaN(e.x)||isNaN(e.y)||((n=A.alloc()).Ti(e,t.locationSpot),n.A(t.location)||(t.location=n),A.free(n))}else{e=this.wc,s=(n=this.nb).left+n.right;var a=n.top+n.bottom,u=t.adornedObject;t.angle=u.Ki();var c=0;u instanceof bt&&(c=u.strokeWidth);var f=u.Af(),p=u.naturalBounds,g=(p.width+c)*f;c=(p.height+c)*f,t.type!==W.Link&&(u=u.da("Selection"===t.category?St:t.locationSpot,A.alloc()),t.location=u,A.free(u)),isNaN(g)||isNaN(c)?(g=(t=t.adornedObject).da(St,A.alloc()),(u=z.allocAt(g.x,g.y,0,0)).Oe(t.da(Ur,g)),u.Oe(t.da(ki,g)),u.Oe(t.da(vl,g)),La(e,u.width+s||0,u.height+a||0),this.xe(-n.left,-n.top,e.width,e.height),A.free(g),z.free(u)):(La(e,g+s||0,c+a||0),this.xe(-n.left,-n.top,e.width,e.height))}},Pn.prototype.zh=function(t,e,n,s){this.actualBounds.h(t,e,n,s)},Pn.prototype.computeBorder=function(t){var e=this.part,n=e.diagram;if(null!==n&&e instanceof _t&&!e.layer.isTemporary&&e.computesBoundsAfterDrag&&this.fp.u()){var s=n.toolManager.findTool("Dragging");if(s===n.currentTool&&null!==(n=s.computeBorder(e,this.fp,t)))return n}n=z.alloc(),s=this.computeMemberBounds(n);var a=this.nb;return e instanceof _t&&!e.isSubGraphExpanded?t.h(s.x-a.left,s.y-a.top,0,0):t.h(s.x-a.left,s.y-a.top,Math.max(s.width+a.left+a.right,0),Math.max(s.height+a.top+a.bottom,0)),z.free(n),e instanceof _t&&e.computesBoundsIncludingLocation&&e.location.u()&&t.Oe(e.location),t},Pn.prototype.computeMemberBounds=function(t){if(!(this.part instanceof _t))return t.h(0,0,0,0),t;for(var e=this.part,n=1/0,s=1/0,a=-1/0,u=-1/0,c=e.memberParts;c.next();){var f=c.value;if(f.isVisible()){if(f instanceof K&&(!e.computesBoundsIncludingLinks||mo(f)||f.fromNode===e||f.toNode===e))continue;(f=f.actualBounds).left<n&&(n=f.left),f.top<s&&(s=f.top),f.right>a&&(a=f.right),f.bottom>u&&(u=f.bottom)}}return isFinite(n)&&isFinite(s)?t.h(n,s,a-n,u-s):t.h((e=e.location).x,e.y,0,0),t},kt.Object.defineProperties(Pn.prototype,{padding:{get:function(){return this.nb},set:function(t){"number"==typeof t&&(t=new Ct(t));var e=this.nb;e.A(t)||(this.nb=t=t.I(),this.g("padding",e,t),this.s())}}}),Pn.className="Placeholder",Wt(K,ft),K.prototype.cloneProtected=function(t){ft.prototype.cloneProtected.call(this,t),t.Ia=-113&this.Ia,t.Xe=this.Xe,t.Dn=this.Dn,t.qf=this.qf,t.Dp=this.Dp,t.vk=this.vk,t.gn=this.gn,t.jn=this.jn,t.kn=this.kn,t.Ej=this.Ej,t.rp=this.rp,null!==this.P&&(t.P=this.P.copy())},(S=K.prototype).wf=function(t){ft.prototype.wf.call(this,t),this.Xe=t.Xe,this.qf=t.qf,t.eh=null,t.Va(),t.Mf=this.Mf;var e=t.fromPort;null!==e&&fr(e),null!==(t=t.toPort)&&fr(t)},S.gb=function(t){t.classType===K?2==(2&t.value)?this.routing=t:t===pr||t===Wa||t===Wh?this.curve=t:t===Up||t===zp||t===oy?this.adjusting=t:t!==W_&&t!==Ii&&q("Unknown Link enum value for a Link property: "+t):ft.prototype.gb.call(this,t)},S.Kc=function(){null===this.P&&(this.P=new Ud)},S.Ri=function(){var t=this.fromNode;if(null!==t){var e=t.findVisibleNode();if(null!==e&&(t=e),Sr(t)||ya(t))return!1}return!(null!==(t=this.toNode)&&(e=t.findVisibleNode(),null!==e&&(t=e),Sr(t)||ya(t)))},S.Rv=function(){return!1},S.Vs=function(){},S.Mc=function(){return!1},K.prototype.computeAngle=function(t,e,n){return K.computeAngle(e,n)},K.computeAngle=function(t,e){switch(t){default:case Ii:t=0;break;case $p:t=e;break;case Hd:t=e+90;break;case Vd:t=e-90;break;case Fv:t=e+180;break;case us:90<(t=V.jq(e))&&270>t&&(t-=180);break;case Kh:90<(t=V.jq(e+90))&&270>t&&(t-=180);break;case Yp:90<(t=V.jq(e-90))&&270>t&&(t-=180);break;case sy:if(45<(t=V.jq(e))&&135>t||225<t&&315>t)return 0;90<t&&270>t&&(t-=180)}return V.jq(t)},(S=K.prototype).Gh=function(){var t=this.containingGroup;null!==t&&this.fromNode!==t&&this.toNode!==t&&t.computesBoundsIncludingLinks&&ft.prototype.Gh.call(this)},S.aq=function(t){var e=this.fromNode;return t===e?this.toNode:e},S.$z=function(t){var e=this.fromPort;return t===e?this.toPort:e},S.cq=function(t){if(ft.prototype.cq.call(this,t),Au(this)&&this.fq(this.actualBounds),!t){var e=null;null!==(t=this.We)&&Fd(t,this,e=this.fromPort);var n=this.pf;if(null!==n){var s=this.toPort;n===t&&s===e||Fd(n,this,s)}Gp(this)}},S.eq=function(t){if(ft.prototype.eq.call(this,t),Au(this)&&this.fq(this.actualBounds),!t){var e=null;null!==(t=this.We)&&qm(t,this,e=this.fromPort);var n=this.pf;if(null!==n){var s=this.toPort;n===t&&s===e||qm(n,this,s)}ry(this)}},S.Wj=function(){if(this.td=!0,null!==this.nd){var t=this.diagram;if(null!==t)for(var e=this.nd.copy().iterator;e.next();)t.remove(e.value)}null!==this.data&&null!==(t=this.diagram)&&t.partManager.removeDataForLink(this)},K.prototype.updateRelationshipsFromData=function(){if(null!==this.data){var t=this.diagram;null!==t&&t.partManager.updateRelationshipsFromData(this)}},K.prototype.move=function(t,e){var n=e?this.location:this.position,s=n.x;isNaN(s)&&(s=0);var a=n.y;for(isNaN(a)&&(a=0),s=t.x-s,a=t.y-a,!0===e?ft.prototype.move.call(this,t,!1):(t=A.allocAt(n.x+s,n.y+a),ft.prototype.move.call(this,t,!1),A.free(t)),wa(this,s,a),t=this.labelNodes;t.next();)(e=t.value).moveTo((n=e.position).x+s,n.y+a)},K.prototype.canRelinkFrom=function(){if(!this.relinkableFrom)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},K.prototype.canRelinkTo=function(){if(!this.relinkableTo)return!1;var t=this.layer;return null===t||!!t.allowRelink&&!(null!==(t=t.diagram)&&!t.allowRelink)},K.prototype.computeMidPoint=function(t){var e=this.pointsCount;if(0===e)return t.assign(fe),t;if(1===e)return t.assign(this.i(0)),t;if(2===e){var n=this.i(0),s=this.i(1);return t.h((n.x+s.x)/2,(n.y+s.y)/2),t}if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===pr))return this.ma.av(.5,t),t.add(this.i(0)),n=this.ma.figures.first(),t.offset(-n.startX,-n.startY),t;if(this.computeCurve()===pr){if(3===e)return this.i(1);if(n=3*((s=(e-1)/3|0)/2|0),s%2==1){s=this.i(n);var a=this.i(n+1),u=this.i(n+2);n=this.i(n+3),V.iz(s.x,s.y,a.x,a.y,u.x,u.y,n.x,n.y,t)}else t.assign(this.i(n));return t}var c=this.flattenedLengths;for(n=this.flattenedTotalLength,a=u=s=0;s<n/2&&u<e&&!(s+(a=c[u])>n/2);)s+=a,u++;return e=this.i(u),u=this.i(u+1),1>Math.abs(e.x-u.x)?t.h(e.x,e.y>u.y?e.y-(n/2-s):e.y+(n/2-s)):1>Math.abs(e.y-u.y)?t.h(e.x>u.x?e.x-(n/2-s):e.x+(n/2-s),e.y):t.h(e.x+(n=(n/2-s)/a)*(u.x-e.x),e.y+n*(u.y-e.y)),t},K.prototype.computeMidAngle=function(){var t=this.pointsCount;if(2>t)return NaN;if(2===t)return this.i(0).Pa(this.i(1));if(this.isOrthogonal&&(15<=this.computeCorner()||this.computeCurve()===pr))return this.ma.Vx(.5);if(this.computeCurve()===pr&&4<=t){var e=(t-1)/3|0,n=3*(e/2|0);if(e%2==1){n=Math.floor(n),t=this.i(n),e=this.i(n+1);var s=this.i(n+2);return n=this.i(n+3),V.hz(t.x,t.y,e.x,e.y,s.x,s.y,n.x,n.y)}if(0<n&&n+1<t)return this.i(n-1).Pa(this.i(n+1))}e=this.flattenedLengths,s=this.flattenedTotalLength;var u,a=0;for(n=0;a<s/2&&n<t&&!(a+(u=e[n])>s/2);)a+=u,n++;if(e=this.i(n),s=this.i(n+1),1>Math.abs(e.x-s.x)&&1>Math.abs(e.y-s.y)){if(0<n&&n+2<t)return this.i(n-1).Pa(this.i(n+2))}else{if(1>Math.abs(e.x-s.x))return e.y>s.y?270:90;if(1>Math.abs(e.y-s.y))return e.x>s.x?180:0}return e.Pa(s)},(S=K.prototype).i=function(t){return this.Db.m[t]},S.Pc=function(t,e){this.Db.Oc(t,e)},S.M=function(t,e,n){this.Db.Oc(t,new A(e,n))},S.iA=function(t,e){this.Db.wb(t,e)},S.l=function(t,e,n){this.Db.wb(t,new A(e,n))},S.ee=function(t){this.Db.add(t)},S.tf=function(t,e){this.Db.add(new A(t,e))},S.Iv=function(t){this.Db.eb(t)},S.Rj=function(){this.Db.clear()},S.Lh=function(){null===this.eh&&(this.eh=this.Db,this.Db=this.Db.copy())},S.vf=function(){if(null!==this.eh){for(var t=this.eh,e=this.Db,n=1/0,s=1/0,a=t.m,u=a.length,c=0;c<u;c++){var f=a[c];n=Math.min(f.x,n),s=Math.min(f.y,s)}f=c=1/0;for(var p=e.m,g=p.length,y=0;y<g;y++){var v=p[y];c=Math.min(v.x,c),f=Math.min(v.y,f),v.freeze()}if(e.freeze(),g===u){for(u=0;u<g;u++)if((y=a[u]).x-n!=(v=p[u]).x-c||y.y-s!=v.y-f){this.gc(!0);break}}else this.gc(!0);this.eh=null,null!==(n=this.diagram)&&n.animationManager.tb&&(n=n.animationManager,this.gf=e,n.Al.add(this)),Vp(this),this.g("points",t,e)}},S.Kv=function(){null!==this.eh&&(this.Db=this.eh,this.eh=null)},S.Va=function(){if(!this.suspendsRouting){var t=this.diagram;if(t){if(t.Hs.contains(this)||t.undoManager.isUndoingRedoing||(t=t.animationManager).isTicking&&!t.isAnimating)return;null!==this.gf&&!t.isTicking&&t.isAnimating&&(this.gf=null)}null!==(t=this.path)&&(this.td=!1,this.s(),t.s())}},S.vg=function(){if(!this.td&&!this.computingPoints){var t=!0;try{this.computingPoints=!0,this.Lh(),t=this.computePoints()}catch(e){this.computingPoints=!1,this.Kv()}finally{this.computingPoints=!1,t?this.vf():this.Kv()}}},K.prototype.computePoints=function(){if(null===this.diagram)return!1;var t=this.fromNode,e=null;if(null===t?(jd||((jd=new it).desiredSize=Xo,jd.Ta()),this.defaultFromPoint&&(jd.location=this.defaultFromPoint,jd.Ta(),e=t=jd)):e=this.fromPort,null!==e&&!t.isVisible()){var n=t.findVisibleNode();null!==n&&n!==t?(t=n,e=n.port):t=n}if(this.mx=t,null===t||!t.location.u())return!1;for(;!(null===e||e.actualBounds.u()&&e.Ff());)e=e.panel;if(null===e)return!1;var s=this.toNode,a=null;if(null===s?(Ou||((Ou=new it).desiredSize=Xo,Ou.Ta()),this.defaultToPoint&&(Ou.location=this.defaultToPoint,Ou.Ta(),a=s=Ou)):a=this.toPort,null===a||s.isVisible()||(null!==(n=s.findVisibleNode())&&n!==s?(s=n,a=n.port):s=n),this.nx=s,null===s||!s.location.u())return!1;for(;!(null===a||a.actualBounds.u()&&a.Ff());)a=a.panel;if(null===a)return!1;var u=this.pointsCount,c=this.computeSpot(!0,e);n=this.computeSpot(!1,a);var f=zh(c),p=zh(n),g=e===a&&null!==e,y=this.isOrthogonal,v=this.curve===pr;this.Qf=!(!g||y)&&(v=!0);var _=this.computeAdjusting()===Ii||g;if(!y&&!g&&f&&p){if(f=!1,!_&&3<=u&&(_=this.getLinkPoint(t,e,c,!0,!1,s,a),p=this.getLinkPoint(s,a,n,!1,!1,t,e),f=this.adjustPoints(0,_,u-1,p))&&(_=this.getLinkPoint(t,e,c,!0,!1,s,a),p=this.getLinkPoint(s,a,n,!1,!1,t,e),this.adjustPoints(0,_,u-1,p)),!f)if(this.Rj(),v){u=this.getLinkPoint(t,e,c,!0,!1,s,a),f=(_=this.getLinkPoint(s,a,n,!1,!1,t,e)).x-u.x,p=_.y-u.y,g=this.computeCurviness(),v=y=0;var b=u.x+f/3,D=u.y+p/3,k=b,O=D;V.w(p,0)?O=0<f?O-g:O+g:(y=-f/p,v=Math.sqrt(g*g/(y*y+1)),0>g&&(v=-v),O=y*((k=(0>p?-1:1)*v+b)-b)+D);var E=b=u.x+2*f/3,R=D=u.y+2*p/3;R=V.w(p,0)?0<f?R-g:R+g:y*((E=(0>p?-1:1)*v+b)-b)+D,this.Rj(),this.ee(u),this.tf(k,O),this.tf(E,R),this.ee(_),this.Pc(0,this.getLinkPoint(t,e,c,!0,!1,s,a)),this.Pc(3,this.getLinkPoint(s,a,n,!1,!1,t,e))}else s=this.getLinkPoint(t,e,c,!0,!1,u=s,_=a),a=this.getLinkPoint(u,_,n,!1,!1,t,e),this.hasCurviness()?(_=a.x-s.x,n=a.y-s.y,c=this.computeCurviness(),u=t=s.x+_/2,f=e=s.y+n/2,V.w(n,0)?f=0<_?f-c:f+c:(_=-_/n,u=Math.sqrt(c*c/(_*_+1)),0>c&&(u=-u),f=_*((u=(0>n?-1:1)*u+t)-t)+e),this.ee(s),this.tf(u,f),this.ee(a)):(this.ee(s),this.ee(a),f=z.alloc(),e.Li(f),p=f.$(a),_.Li(f),g=f.$(s),(p||g)&&(c=e.da($h(c),new A),this.Pc(0,this.getLinkPointFromPoint(t,e,c,a,!0,c)),n=_.da($h(n),new A),this.Pc(1,this.getLinkPointFromPoint(u,_,n,s,!1,n))),z.free(f))}else{v=this.isAvoiding,_&&(y&&v||g)&&this.Rj();var F=g?this.computeCurviness():0;v=this.getLinkPoint(t,e,c,!0,y,s,a),b=k=D=0,(y||!f||g)&&(O=this.computeEndSegmentLength(t,e,c,!0),b=this.getLinkDirection(t,e,v,c,!0,y,s,a),g&&(f||c.A(n)||!y&&c.x+n.x===1&&c.y+n.y===1)&&(b-=y?90:30,0>F&&(b-=180)),0>b?b+=360:360<=b&&(b-=360),g&&(O+=Math.abs(F)*(y?1:2)),0===b?D=O:90===b?k=O:180===b?D=-O:270===b?k=-O:(D=O*Math.cos(b*Math.PI/180),k=O*Math.sin(b*Math.PI/180)),c.Bc()&&g&&(O=e.da(Ut,A.alloc()),E=A.allocAt(O.x+1e3*D,O.y+1e3*k),this.getLinkPointFromPoint(t,e,O,E,!0,v),A.free(O),A.free(E))),O=this.getLinkPoint(s,a,n,!1,y,t,e);var j=R=E=0;if(y||!p||g){var L=this.computeEndSegmentLength(s,a,n,!1);j=this.getLinkDirection(s,a,O,n,!1,y,t,e),g&&(p||c.A(n)||!y&&c.x+n.x===1&&c.y+n.y===1)&&(j+=y?0:30,0>F&&(j+=180)),0>j?j+=360:360<=j&&(j-=360),g&&(L+=Math.abs(F)*(y?1:2)),0===j?E=L:90===j?R=L:180===j?E=-L:270===j?R=-L:(E=L*Math.cos(j*Math.PI/180),R=L*Math.sin(j*Math.PI/180)),n.Bc()&&g&&(n=a.da(Ut,A.alloc()),c=A.allocAt(n.x+1e3*E,n.y+1e3*R),this.getLinkPointFromPoint(s,a,n,c,!1,O),A.free(n),A.free(c))}n=v,(y||!f||g)&&(n=new A(v.x+D,v.y+k)),c=O,(y||!p||g)&&(c=new A(O.x+E,O.y+R)),!_&&!y&&f&&3<u&&this.adjustPoints(0,v,u-2,c)?this.Pc(u-1,O):!_&&!y&&p&&3<u&&this.adjustPoints(1,n,u-1,O)?this.Pc(0,v):!_&&(y?6<=u:4<u)&&this.adjustPoints(1,n,u-2,c)?(this.Pc(0,v),this.Pc(u-1,O)):(this.Rj(),this.ee(v),(y||!f||g)&&this.ee(n),y&&this.addOrthoPoints(n,b,c,j,t,s),(y||!p||g)&&this.ee(c),this.ee(O))}return!0},K.prototype.getLinkPointFromPoint=function(t,e,n,s,a,u){if(void 0===u&&(u=new A),null===t||null===e)return u.assign(n),u;if(t.isVisible()||null!==(a=t.findVisibleNode())&&a!==t&&(e=a.port),t=null,null===(a=e.panel)||a.je()||(a=a.panel),null===a){a=s.x,s=s.y;var c=n.x;n=n.y}else{var f=-(t=a.fe).m12*(a=1/(t.m11*t.m22-t.m12*t.m21)),p=-t.m21*a,g=t.m11*a,y=a*(t.m21*t.dy-t.m22*t.dx),v=a*(t.m12*t.dx-t.m11*t.dy);a=s.x*(c=t.m22*a)+s.y*p+y,s=s.x*f+s.y*g+v,c=n.x*c+n.y*p+y,n=n.x*f+n.y*g+v}return e.ak(a,s,c,n,u),null!==t&&u.transform(t),u},K.prototype.getLinkPoint=function(t,e,n,s,a,u,c,f){if(void 0===f&&(f=new A),n.hb()&&!zh(n))return e.da(n,f),f;if(n.Nc()){var p=Ld(this,e);if(null!==p){if(f.assign(p.hq),a&&this.routing===Iv){var g=Ld(this,c);if(null!==g&&p.Yl<g.Yl){p=A.alloc(),g=A.alloc();var y=new z(e.da(St,p),e.da(Ur,g)),v=this.computeSpot(!s,c);t=this.getLinkPoint(u,c,v,!s,a,t,e,g),(n.Df(ks)||n.Df(Ei))&&t.y>=y.y&&t.y<=y.y+y.height?f.y=t.y:(n.Df(_l)||n.Df(td))&&t.x>=y.x&&t.x<=y.x+y.width&&(f.x=t.x),A.free(p),A.free(g)}}return f}}return n=e.da($h(n),A.alloc()),this.pointsCount>(a?6:2)?(c=this.i(s?1:this.pointsCount-2),a&&(c=Bp(n,c.copy()))):(p=this.computeSpot(!s,c),u=A.alloc(),c=c.da($h(p),u),a&&(c=Bp(n,c)),A.free(u)),this.getLinkPointFromPoint(t,e,n,c,s,f),A.free(n),f},K.prototype.getLinkDirection=function(t,e,n,s,a,u,c,f){t:if(s.hb())var p=s.x>s.y?s.x>1-s.y?0:s.x<1-s.y?270:315:s.x<s.y?s.x>1-s.y?90:s.x<1-s.y?180:135:.5>s.x?225:.5<s.x?45:0;else{if(s.Nc()&&null!==(p=Ld(this,e)))switch(p.Cc){case 1:p=270;break t;case 2:p=180;break t;default:case 4:p=0;break t;case 8:p=90;break t}p=e.da(Ut,A.alloc()),this.pointsCount>(u?6:2)?(f=this.i(a?1:this.pointsCount-2),f=u?Bp(p,f.copy()):n):(n=A.alloc(),f=f.da(Ut,n),A.free(n)),n=Math.abs(f.x-p.x)>Math.abs(f.y-p.y)?f.x>=p.x?0:180:f.y>=p.y?90:270,A.free(p),p=n}return s.Bc()&&c.Jd(t)&&360<=(p+=180)&&(p-=360),zh(s)||0===(t=e.Ki())||(45<=t&&135>t?p+=90:135<=t&&225>t?p+=180:225<=t&&315>t&&(p+=270),360<=p&&(p-=360)),p},K.prototype.computeEndSegmentLength=function(t,e,n,s){return null!==e&&n.Nc()&&null!==(t=Ld(this,e))?t.Ru:(t=s?this.fromEndSegmentLength:this.toEndSegmentLength,null!==e&&isNaN(t)&&(t=s?e.fromEndSegmentLength:e.toEndSegmentLength),isNaN(t)&&(t=10),t)},K.prototype.computeSpot=function(t,e){return void 0===e&&(e=null),t?null===(t=e||this.fromPort)?t=Ut:((e=this.fromSpot).Nb()&&(e=t.fromSpot),t=e===Xt?Vn:e):null===(t=e||this.toPort)?t=Ut:((e=this.toSpot).Nb()&&(e=t.toSpot),t=e===Xt?Vn:e),t},K.prototype.computeOtherPoint=function(t,e){return this.computeAdjusting()!==Ii&&4<this.pointsCount?this.computeMidPoint(new A):null!==(t=null!==(t=e.Qo)?Lv(t,this):null)?t.hq:e.da(Ut)},K.prototype.computeShortLength=function(t){if(t){if(t=this.fromShortLength,isNaN(t)){var e=this.fromPort;null!==e&&(t=e.fromShortLength)}return isNaN(t)?0:t}return t=this.toShortLength,isNaN(t)&&null!==(e=this.toPort)&&(t=e.toShortLength),isNaN(t)?0:t},K.prototype.zf=function(t,e,n,s,a,u){if(!1===this.pickable)return!1;void 0===e&&(e=null),void 0===n&&(n=null);var c=u;if(void 0===u&&(c=Et.alloc()).reset(),c.multiply(this.transform),this.Ah(t,c))return Pm(this,e,n,a),void 0===u&&Et.free(c),!0;if(this.Lc(t,c)){var f=!1;if(!this.isAtomic)for(var p=this.T.m,g=p.length;g--;){var y=p[g];if(y.visible||y===this.locationObject){var v=y.actualBounds,_=this.naturalBounds;if(!(v.x>_.width||v.y>_.height||0>v.x+v.width||0>v.y+v.height)){if((v=Et.alloc()).set(c),y instanceof W)f=y.zf(t,e,n,s,a,v);else if(this.path===y){if(y instanceof bt)if(f=t,_=s,!1===y.pickable)f=!1;else if(v.multiply(y.transform),_)t:{var b=f,D=v;if(y.Ah(b,D))f=!0;else{if(void 0===D&&(D=y.transform,b.Ge(y.actualBounds))){f=!0;break t}f=b.left,_=b.right;var k=b.top;b=b.bottom;var O=A.alloc(),E=A.alloc(),R=A.alloc(),F=Et.alloc();F.set(D),F.tv(y.transform),F.Bs(),E.x=_,E.y=k,E.transform(F),O.x=f,O.y=k,O.transform(F),D=!1,Su(y,O,E,R)?D=!0:(O.x=_,O.y=b,O.transform(F),Su(y,O,E,R)?D=!0:(E.x=f,E.y=b,E.transform(F),Su(y,O,E,R)?D=!0:(O.x=f,O.y=k,O.transform(F),Su(y,O,E,R)&&(D=!0)))),Et.free(F),A.free(O),A.free(E),A.free(R),f=D}}else f=y.Ah(f,v)}else f=Ub(y,t,s,v);f&&(_=y,null!==e&&(_=e(y)),_&&(null===n||n(_))&&a.add(_)),Et.free(v)}}}return void 0===u&&Et.free(c),f||null!==this.background||null!==this.areaBackground}return void 0===u&&Et.free(c),!1},K.prototype.computeCurve=function(){if(null===this.Qf){var t=this.fromPort;this.Qf=null!==t&&t===this.toPort&&!this.isOrthogonal}return this.Qf?pr:this.curve},K.prototype.computeCorner=function(){if(this.curve===pr)return 0;var t=this.corner;return(isNaN(t)||0>t)&&(t=10),t},K.prototype.findMidLabel=function(){for(var t=this.path,e=this.T.m,n=e.length,s=0;s<n;s++){var a=e[s];if(a!==t&&!a.isPanelMain&&(a.segmentIndex===-1/0||isNaN(a.segmentIndex)))return a}for(t=this.labelNodes;t.next();)if((e=t.value).segmentIndex===-1/0||isNaN(e.segmentIndex))return e;return null},K.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t=Rv;t=Math.max(t,this.computeThickness());var e=this.fromPort,n=this.toPort;if(null!==e&&null!==n){var s=this.findMidLabel();if(null!==s){var a=s.naturalBounds,u=s.margin,c=isNaN(a.width)?30:a.width*s.scale+u.left+u.right;a=isNaN(a.height)?14:a.height*s.scale+u.top+u.bottom,(s=s.segmentOrientation)===$p||s===us||s===Fv?t=Math.max(t,a):s===Vd||s===Yp||s===Hd||s===Kh?t=Math.max(t,c):(e=e.da(Ut).Pa(n.da(Ut))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(e)*c)+Math.abs(Math.cos(e)*a)+1)),this.curve===pr&&(t*=1.333)}}return t},K.prototype.arrangeBundledLinks=function(t,e){if(e)for(e=0;e<t.length;e++){var n=t[e];n.computeAdjusting()===Ii&&n.Va()}},K.prototype.computeCurviness=function(){var t=this.curviness;if(isNaN(t)){t=iM;var e=this.Mf;if(null!==e){for(var n=Lt(),s=0,a=e.links,u=0;u<a.length;u++){var c=a[u].computeSpacing();n.push(c),s+=c}for(s=-s/2,u=0;u<a.length;u++){if(a[u]===this){t=s+n[u]/2;break}s+=n[u]}e.Ks===this.fromNode&&(t=-t),ee(n)}}return t},K.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.strokeWidth,1):1},K.prototype.hasCurviness=function(){return!isNaN(this.curviness)||null!==this.Mf},K.prototype.adjustPoints=function(t,e,n,s){var a=this.computeAdjusting();if(this.isOrthogonal){if(a===zp)return!1;a===oy&&(a=Up)}switch(a){case zp:var u=this.i(t),c=this.i(n);if(!u.Ua(e)||!c.Ua(s)){var f=c.x-(a=u.x),p=c.y-(u=u.y),g=Math.sqrt(f*f+p*p);if(!V.aa(g,0)){if(V.aa(f,0))var y=0>p?-Math.PI/2:Math.PI/2;else y=Math.atan(p/Math.abs(f)),0>f&&(y=Math.PI-y);var v=e.y;f=s.x-(c=e.x);var _=s.y-v;for(p=Math.sqrt(f*f+_*_),V.aa(f,0)?_=0>_?-Math.PI/2:Math.PI/2:(_=Math.atan(_/Math.abs(f)),0>f&&(_=Math.PI-_)),g=p/g,y=_-y,this.Pc(t,e),t+=1;t<n;t++)f=(e=this.i(t)).x-a,p=e.y-u,e=Math.sqrt(f*f+p*p),V.aa(e,0)||(V.aa(f,0)?p=0>p?-Math.PI/2:Math.PI/2:(p=Math.atan(p/Math.abs(f)),0>f&&(p=Math.PI-p)),f=p+y,this.M(t,c+(e*=g)*Math.cos(f),v+e*Math.sin(f)));this.Pc(n,s)}}return!0;case oy:if(u=this.i(t),v=this.i(n),!u.Ua(e)||!v.Ua(s)){g=((c=v.x)-(a=u.x))*(c-a)+((v=v.y)-(u=u.y))*(v-u),y=e.y,_=s.y;var b=1;if((p=s.x)-(f=e.x)!=0){var D=(_-y)/(p-f);b=Math.sqrt(1+1/(D*D))}else D=9e9;for(this.Pc(t,e),t+=1;t<n;t++){var k=(e=this.i(t)).x,O=e.y,E=.5;0!==g&&(E=((a-k)*(a-c)+(u-O)*(u-v))/g);var R=a+E*(c-a),F=u+E*(v-u);e=Math.sqrt((k-R)*(k-R)+(O-F)*(O-F)),O<D*(k-R)+F&&(e=-e),0<D&&(e=-e),k=f+E*(p-f),E=y+E*(_-y),0!==D?this.M(t,e=k+e/b,E-(e-k)/D):this.M(t,k,E+e)}this.Pc(n,s)}return!0;case Up:return this.isOrthogonal&&(a=this.i(t),u=this.i(t+1),c=this.i(t+2),v=f=u.x,g=y=u.y,V.w(a.y,u.y)?V.w(u.x,c.x)?y=e.y:V.w(u.y,c.y)&&(f=e.x):V.w(a.x,u.x)&&(V.w(u.y,c.y)?f=e.x:V.w(u.x,c.x)&&(y=e.y)),this.M(t+1,f,y),a=this.i(n),u=this.i(n-1),c=this.i(n-2),p=f=u.x,_=y=u.y,V.w(a.y,u.y)?V.w(u.x,c.x)?y=s.y:V.w(u.y,c.y)&&(f=s.x):V.w(a.x,u.x)&&(V.w(u.y,c.y)?f=s.x:V.w(u.x,c.x)&&(y=s.y)),this.M(n-1,f,y),Pv(this))?(this.M(t+1,v,g),this.M(n-1,p,_),n=!1):(this.Pc(t,e),this.Pc(n,s),n=!0),n;default:return!1}},K.prototype.addOrthoPoints=function(t,e,n,s,a,u){0>e?e+=360:360<=e&&(e-=360),0>s?s+=360:360<=s&&(s-=360);var c=s;e=315<=e||45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270,s=315<=s||45>s?0:45<=s&&135>s?90:135<=s&&225>s?180:270;var f=a.actualBounds.copy(),p=u.actualBounds.copy();if(f.u()&&p.u()){f.Jc(Wp,Wp),p.Jc(Wp,Wp),f.Oe(t),p.Oe(n);var g=A.alloc(),y=A.alloc();0===e?n.x>t.x||270===s&&n.y<t.y&&p.right>t.x||90===s&&n.y>t.y&&p.right>t.x?(g.h(n.x,t.y),y.h(n.x,(t.y+n.y)/2),180===s?(g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),y.x=g.x,y.y=n.y):270===s&&n.y<t.y||90===s&&n.y>t.y?(g.x=t.x<p.left?this.computeMidOrthoPosition(t.x,t.y,p.left,n.y,!1):t.x<p.right&&(270===s&&t.y<p.top||90===s&&t.y>p.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):p.right,y.x=g.x,y.y=n.y):0===s&&t.x<p.left&&t.y>p.top&&t.y<p.bottom&&(g.x=t.x,g.y=t.y<n.y?Math.min(n.y,p.top):Math.max(n.y,p.bottom),y.y=g.y)):(g.h(t.x,n.y),y.h((t.x+n.x)/2,n.y),(180===s||90===s&&n.y<f.top||270===s&&n.y>f.bottom)&&(180===s&&(p.$(t)||f.$(n))?g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(180===s||90===s)?g.y=this.computeMidOrthoPosition(t.x,f.top,n.x,Math.max(n.y,p.bottom),!0):n.y>t.y&&(180===s||270===s)&&(g.y=this.computeMidOrthoPosition(t.x,f.bottom,n.x,Math.min(n.y,p.top),!0)),y.x=n.x,y.y=g.y),g.y>f.top&&g.y<f.bottom&&(n.x>=f.left&&n.x<=t.x||t.x<=p.right&&t.x>=n.x?(90===s||270===s)&&(g.h(Math.max((t.x+n.x)/2,t.x),t.y),y.h(g.x,n.y)):(g.y=270===s||(0===s||180===s)&&n.y<t.y?Math.min(n.y,0===s?f.top:Math.min(f.top,p.top)):Math.max(n.y,0===s?f.bottom:Math.max(f.bottom,p.bottom)),y.x=n.x,y.y=g.y))):180===e?n.x<t.x||270===s&&n.y<t.y&&p.left<t.x||90===s&&n.y>t.y&&p.left<t.x?(g.h(n.x,t.y),y.h(n.x,(t.y+n.y)/2),0===s?(g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1),y.x=g.x,y.y=n.y):270===s&&n.y<t.y||90===s&&n.y>t.y?(g.x=t.x>p.right?this.computeMidOrthoPosition(t.x,t.y,p.right,n.y,!1):t.x>p.left&&(270===s&&t.y<p.top||90===s&&t.y>p.bottom)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):p.left,y.x=g.x,y.y=n.y):180===s&&t.x>p.right&&t.y>p.top&&t.y<p.bottom&&(g.x=t.x,g.y=t.y<n.y?Math.min(n.y,p.top):Math.max(n.y,p.bottom),y.y=g.y)):(g.h(t.x,n.y),y.h((t.x+n.x)/2,n.y),(0===s||90===s&&n.y<f.top||270===s&&n.y>f.bottom)&&(0===s&&(p.$(t)||f.$(n))?g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):n.y<t.y&&(0===s||90===s)?g.y=this.computeMidOrthoPosition(t.x,f.top,n.x,Math.max(n.y,p.bottom),!0):n.y>t.y&&(0===s||270===s)&&(g.y=this.computeMidOrthoPosition(t.x,f.bottom,n.x,Math.min(n.y,p.top),!0)),y.x=n.x,y.y=g.y),g.y>f.top&&g.y<f.bottom&&(n.x<=f.right&&n.x>=t.x||t.x>=p.left&&t.x<=n.x?(90===s||270===s)&&(g.h(Math.min((t.x+n.x)/2,t.x),t.y),y.h(g.x,n.y)):(g.y=270===s||(0===s||180===s)&&n.y<t.y?Math.min(n.y,180===s?f.top:Math.min(f.top,p.top)):Math.max(n.y,180===s?f.bottom:Math.max(f.bottom,p.bottom)),y.x=n.x,y.y=g.y))):90===e?n.y>t.y||180===s&&n.x<t.x&&p.bottom>t.y||0===s&&n.x>t.x&&p.bottom>t.y?(g.h(t.x,n.y),y.h((t.x+n.x)/2,n.y),270===s?(g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),y.x=n.x,y.y=g.y):180===s&&n.x<t.x||0===s&&n.x>t.x?(g.y=t.y<p.top?this.computeMidOrthoPosition(t.x,t.y,n.x,p.top,!0):t.y<p.bottom&&(180===s&&t.x<p.left||0===s&&t.x>p.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):p.bottom,y.x=n.x,y.y=g.y):90===s&&t.y<p.top&&t.x>p.left&&t.x<p.right&&(g.x=t.x<n.x?Math.min(n.x,p.left):Math.max(n.x,p.right),g.y=t.y,y.x=g.x)):(g.h(n.x,t.y),y.h(n.x,(t.y+n.y)/2),(270===s||0===s&&n.x<f.left||180===s&&n.x>f.right)&&(270===s&&(p.$(t)||f.$(n))?g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(270===s||0===s)?g.x=this.computeMidOrthoPosition(f.left,t.y,Math.max(n.x,p.right),n.y,!1):n.x>t.x&&(270===s||180===s)&&(g.x=this.computeMidOrthoPosition(f.right,t.y,Math.min(n.x,p.left),n.y,!1)),y.x=g.x,y.y=n.y),g.x>f.left&&g.x<f.right&&(n.y>=f.top&&n.y<=t.y||t.y<=p.bottom&&t.y>=n.y?(0===s||180===s)&&(g.h(t.x,Math.max((t.y+n.y)/2,t.y)),y.h(n.x,g.y)):(g.x=180===s||(90===s||270===s)&&n.x<t.x?Math.min(n.x,90===s?f.left:Math.min(f.left,p.left)):Math.max(n.x,90===s?f.right:Math.max(f.right,p.right)),y.x=g.x,y.y=n.y))):n.y<t.y||180===s&&n.x<t.x&&p.top<t.y||0===s&&n.x>t.x&&p.top<t.y?(g.h(t.x,n.y),y.h((t.x+n.x)/2,n.y),90===s?(g.y=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0),y.x=n.x,y.y=g.y):180===s&&n.x<t.x||0===s&&n.x>=t.x?(g.y=t.y>p.bottom?this.computeMidOrthoPosition(t.x,t.y,n.x,p.bottom,!0):t.y>p.top&&(180===s&&t.x<p.left||0===s&&t.x>p.right)?this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!0):p.top,y.x=n.x,y.y=g.y):270===s&&t.y>p.bottom&&t.x>p.left&&t.x<p.right&&(g.x=t.x<n.x?Math.min(n.x,p.left):Math.max(n.x,p.right),g.y=t.y,y.x=g.x)):(g.h(n.x,t.y),y.h(n.x,(t.y+n.y)/2),(90===s||0===s&&n.x<f.left||180===s&&n.x>f.right)&&(90===s&&(p.$(t)||f.$(n))?g.x=this.computeMidOrthoPosition(t.x,t.y,n.x,n.y,!1):n.x<t.x&&(90===s||0===s)?g.x=this.computeMidOrthoPosition(f.left,t.y,Math.max(n.x,p.right),n.y,!1):n.x>t.x&&(90===s||180===s)&&(g.x=this.computeMidOrthoPosition(f.right,t.y,Math.min(n.x,p.left),n.y,!1)),y.x=g.x,y.y=n.y),g.x>f.left&&g.x<f.right&&(n.y<=f.bottom&&n.y>=t.y||t.y>=p.top&&t.y<=n.y?(0===s||180===s)&&(g.h(t.x,Math.min((t.y+n.y)/2,t.y)),y.h(n.x,g.y)):(g.x=180===s||(90===s||270===s)&&n.x<t.x?Math.min(n.x,270===s?f.left:Math.min(f.left,p.left)):Math.max(n.x,270===s?f.right:Math.max(f.right,p.right)),y.x=g.x,y.y=n.y)));var v=n;if(this.isAvoiding){var _=this.diagram;if(null===_||a===u||this.layer.isTemporary||!fm(_)||f.$(v)&&!u.Jd(a)||p.$(t)&&!a.Jd(u))e=!1;else{var b=dd(_,!0,this.containingGroup,null);if(17!==this.segmentIndex&&b.fk(Math.min(t.x,g.x),Math.min(t.y,g.y),Math.abs(t.x-g.x),Math.abs(t.y-g.y))&&b.fk(Math.min(g.x,y.x),Math.min(g.y,y.y),Math.abs(g.x-y.x),Math.abs(g.y-y.y))&&b.fk(Math.min(y.x,v.x),Math.min(y.y,v.y),Math.abs(y.x-v.x),Math.abs(y.y-v.y)))e=!1;else{a=t,u=v;var D=n=null;if(_.isVirtualized){(_=b.bounds.copy()).Jc(-b.Rp,-b.Qp);var k=A.alloc();Iu(b,t.x,t.y)||(V.Cf(_.x,_.y,_.x+_.width,_.y+_.height,t.x,t.y,g.x,g.y,k)?(n=t=k.copy(),e=k.Pa(g)):V.Cf(_.x,_.y,_.x+_.width,_.y+_.height,g.x,g.y,y.x,y.y,k)?(n=t=k.copy(),e=k.Pa(y)):V.Cf(_.x,_.y,_.x+_.width,_.y+_.height,y.x,y.y,v.x,v.y,k)&&(n=t=k.copy(),e=k.Pa(v))),Iu(b,v.x,v.y)||(V.Cf(_.x,_.y,_.x+_.width,_.y+_.height,v.x,v.y,y.x,y.y,k)?(D=v=k.copy(),s=y.Pa(k)):V.Cf(_.x,_.y,_.x+_.width,_.y+_.height,y.x,y.y,g.x,g.y,k)?(D=v=k.copy(),s=g.Pa(k)):V.Cf(_.x,_.y,_.x+_.width,_.y+_.height,g.x,g.y,t.x,t.y,k)&&(D=v=k.copy(),s=t.Pa(k))),A.free(k)}(f=f.copy().Qc(p)).Jc(b.Rp*b.Dy,b.Qp*b.Dy),uy(b,t,e,v,s,f,!0),p=Us(b,v.x,v.y),!b.abort&&p>=Gd&&(K_(b),f.Jc(b.Rp*b.jy,b.Qp*b.jy),uy(b,t,e,v,s,f,!1),p=Us(b,v.x,v.y)),!b.abort&&p<Gd&&Us(b,v.x,v.y)!==_a?(ny(this,b,v.x,v.y,s,!0,c),f=this.i(2),4>this.pointsCount?(0===e||180===e?(f.x=t.x,f.y=v.y):(f.x=v.x,f.y=t.y),this.M(2,f.x,f.y),this.l(3,f.x,f.y)):(c=this.i(3),0===e||180===e?V.w(f.x,c.x)?(f=0===e?Math.max(f.x,t.x):Math.min(f.x,t.x),this.M(2,f,t.y),this.M(3,f,c.y)):V.w(f.y,c.y)?(Math.abs(t.y-f.y)<=b.Qp/2&&(this.M(2,f.x,t.y),this.M(3,c.x,t.y)),this.l(2,f.x,t.y)):this.M(2,t.x,f.y):(90===e||270===e)&&(V.w(f.y,c.y)?(f=90===e?Math.max(f.y,t.y):Math.min(f.y,t.y),this.M(2,t.x,f),this.M(3,c.x,f)):V.w(f.x,c.x)?(Math.abs(t.x-f.x)<=b.Rp/2&&(this.M(2,t.x,f.y),this.M(3,t.x,c.y)),this.l(2,t.x,f.y)):this.M(2,f.x,t.y))),null!==n&&(t=this.i(1),c=this.i(2),t.x!==c.x&&t.y!==c.y?0===e||180===e?this.l(2,t.x,c.y):this.l(2,c.x,t.y):0===e||180===e?this.l(2,a.x,n.y):this.l(2,n.x,a.y)),null!==D&&(0===s||180===s?this.tf(u.x,D.y):this.tf(D.x,u.y)),e=!0):e=!1}}}else e=!1;e||(this.ee(g.copy()),this.ee(y.copy())),A.free(g),A.free(y)}},K.prototype.computeMidOrthoPosition=function(t,e,n,s,a){var u=0;return!this.hasCurviness()||this.computeSpot(!0,this.fromPort).Nc()||this.computeSpot(!1,this.toPort).Nc()||(u=this.computeCurviness()),a?(e+s)/2+u:(t+n)/2+u},K.prototype.Dz=function(t){var e=t.x;t=t.y;for(var n=this.i(0),s=this.i(1),a=gi(e,t,n.x,n.y,s.x,s.y),u=0,c=1;c<this.pointsCount-1;c++){n=this.i(c+1);var f=gi(e,t,s.x,s.y,n.x,n.y);s=n,f<a&&(u=c,a=f)}return u},K.prototype.gc=function(t){this.Dm=!1,t&&this.s()},K.prototype.hk=function(t){if((t||!1!==this.td&&(t=this.pb(),!this.Dm||null!==t&&null===t.geometry))&&(this.ma=this.makeGeometry(),null!==(t=this.path))){t.ma=this.ma;for(var e=this.T.m,n=e.length,s=0;s<n;s++){var a=e[s];a!==t&&a.isPanelMain&&a instanceof bt&&(a.ma=this.ma)}}},K.prototype.makeGeometry=function(){var t=this.ma,e=this.pointsCount;if(2>e)return t.type=rt.j,this.Dm=!0,t;var n=!1,s=this.diagram;null!==s&&Au(this)&&s.Xh.contains(this)&&(0!==this.yl.width||0!==this.yl.height)&&(n=!0);var a=this.i(0).copy(),u=a.copy();s=this.Db.m;var c=this.computeCurve();if(c===pr&&3<=e&&!V.aa(this.smoothness,0))if(3===e){var f=this.i(1);s=Math.min(a.x,f.x);var p=Math.min(a.y,f.y);f=this.i(2),s=Math.min(s,f.x),p=Math.min(p,f.y)}else{if(this.isOrthogonal)for(p=0;p<e;p++)f=s[p],u.x=Math.min(f.x,u.x),u.y=Math.min(f.y,u.y);else for(s=3;s<e;s+=3)s+3>=e&&(s=e-1),p=this.i(s),u.x=Math.min(p.x,u.x),u.y=Math.min(p.y,u.y);s=u.x,p=u.y}else{for(p=0;p<e;p++)f=s[p],u.x=Math.min(f.x,u.x),u.y=Math.min(f.y,u.y);s=u.x,p=u.y}if(p-=this.tu.y,a.x-=s-=this.tu.x,a.y-=p,2!==e||Au(this)){if(t.type=rt.o,f=Km(t),0!==this.computeShortLength(!0)&&(a=Pu(this,a,!0,u)),qr(f,a.x,a.y,!1),c===pr&&3<=e&&!V.aa(this.smoothness,0))if(3===e)e=(n=this.i(1)).x-s,n=n.y-p,(a=this.i(2).copy()).x-=s,a.y-=p,0!==this.computeShortLength(!1)&&(a=Pu(this,a,!1,u)),Ya(f,e,n,e,n,a.x,a.y);else if(this.isOrthogonal){e=A.allocAt(s,p),(n=A.alloc()).assign(this.i(1)),u=A.allocAt(s,p),a=A.allocAt(s,p),c=this.i(0);for(var g,y=this.smoothness/3,v=1;v<this.pointsCount-1;v++){var _=c,b=g=this.i(v),D=this.i(iy(this,g,v,!1));if(!(V.aa(_.x,b.x)&&V.aa(b.x,D.x)||V.aa(_.y,b.y)&&V.aa(b.y,D.y))){var k=y;isNaN(k)&&(k=this.smoothness/3);var O=_.x,E=b.x,R=D.x;D=D.y;var F=k*Av(O,_=_.y,E,b=b.y);k*=Av(E,b,R,D),V.aa(_,b)&&V.aa(E,R)&&(E>O?D>b?(u.x=E-F,u.y=b-F,a.x=E+k,a.y=b+k):(u.x=E-F,u.y=b+F,a.x=E+k,a.y=b-k):D>b?(u.x=E+F,u.y=b-F,a.x=E-k,a.y=b+k):(u.x=E+F,u.y=b+F,a.x=E-k,a.y=b-k)),V.aa(O,E)&&V.aa(b,D)&&(b>_?(R>E?(u.x=E-F,u.y=b-F,a.x=E+k):(u.x=E+F,u.y=b-F,a.x=E-k),a.y=b+k):(R>E?(u.x=E-F,u.y=b+F,a.x=E+k):(u.x=E+F,u.y=b+F,a.x=E-k),a.y=b-k)),(V.aa(O,E)&&V.aa(E,R)||V.aa(_,b)&&V.aa(b,D))&&(_=.5*(_+D),u.x=O=.5*(O+R),u.y=_,a.x=O,a.y=_),(1===v||2===v&&V.aa(c.x,this.i(0).x)&&V.aa(c.y,this.i(0).y))&&(n.x=.5*(c.x+g.x),n.y=.5*(c.y+g.y)),Ya(f,n.x-s,n.y-p,u.x-s,u.y-p,g.x-s,g.y-p),e.set(u),n.set(a),c=g}}g=c.x,c=c.y,y=this.i(this.pointsCount-1),0!==this.computeShortLength(!1)&&(y=Pu(this,y.copy(),!1,Ko)),Ya(f,a.x-s,a.y-p,(g=.5*(g+y.x))-s,(c=.5*(c+y.y))-p,y.x-s,y.y-p),A.free(e),A.free(n),A.free(u),A.free(a)}else for(n=3;n<e;n+=3)u=this.i(n-2),n+3>=e&&(n=e-1),a=this.i(n-1),c=this.i(n),n===e-1&&0!==this.computeShortLength(!1)&&(c=Pu(this,c.copy(),!1,Ko)),Ya(f,u.x-s,u.y-p,a.x-s,a.y-p,c.x-s,c.y-p);else{for((u=A.alloc()).assign(this.i(0)),(a=A.alloc()).assign(u),c=this.computeCorner(),v=1,g=0;v<e;){if(v=iy(this,u,v,1<v),y=this.i(v),v>=e-1){if(u.A(y)){if(0===g)for(v=1;v<e;)a.assign(u),Yh(this,f,-s,-p,u,y=this.i(v++),n),u.assign(y)}else 0!==this.computeShortLength(!1)&&(y=Pu(this,y.copy(),!1,Ko)),Yh(this,f,-s,-p,u,y,n);break}if(g=iy(this,y,v+1,v<e-3),v=-s,O=-p,_=y,E=this.i(g),k=n,V.w(u.y,_.y)&&V.w(_.x,E.x))if(D=Math.min(c,Math.abs(_.x-a.x)/2),D=F=Math.min(D,Math.abs(E.y-_.y)/2),V.w(D,0))Yh(this,f,v,O,u,_,k),u.assign(_);else{var j=_.x,L=_.y;b=j,R=L,R=E.y>_.y?_.y+F:_.y-F,Yh(this,f,v,O,u,E=A.allocAt(j=_.x>u.x?_.x-D:_.x+D,L),k),A.free(E),Id(f,_.x+v,_.y+O,b+v,R+O),u.h(b,R)}else V.w(u.x,_.x)&&V.w(_.y,E.y)?(D=Math.min(c,Math.abs(_.y-a.y)/2),D=F=Math.min(D,Math.abs(E.x-_.x)/2),V.w(F,0)?(Yh(this,f,v,O,u,_,k),u.assign(_)):(b=j=_.x,R=L=_.y,b=E.x>_.x?_.x+F:_.x-F,Yh(this,f,v,O,u,E=A.allocAt(j,L=_.y>u.y?_.y-D:_.y+D),k),A.free(E),Id(f,_.x+v,_.y+O,b+v,R+O),u.h(b,R))):(Yh(this,f,v,O,u,_,k),u.assign(_));a.assign(y),v=g}A.free(u)}Fp=f}else(f=this.i(1).copy()).x-=s,f.y-=p,0!==this.computeShortLength(!0)&&(a=Pu(this,a,!0,u)),0!==this.computeShortLength(!1)&&(f=Pu(this,f,!1,u)),t.type=rt.j,t.startX=a.x,t.startY=a.y,t.endX=f.x,t.endY=f.y;return this.Dm=!0,t},K.prototype.computeJumpLength=function(){return 10},K.prototype.fq=function(t){var e=this.layer;if(null!==e&&e.visible&&!e.isTemporary){var n=e.diagram;if(null!==n&&!n.animationManager.isTicking){var s=!1;for(n=n.layers;n.next();){var a=n.value;if(a.visible)if(a===e){s=!0;for(var u=!1,c=(a=a.Ha.m).length,f=0;f<c;f++){var p=a[f];p instanceof K&&(p===this?u=!0:u&&Y_(this,p,t))}}else if(s)for(a=(u=a.Ha.m).length,c=0;c<a;c++)(f=u[c])instanceof K&&Y_(this,f,t)}}}},K.prototype.usesSamePort=function(t){var e=this.pointsCount,n=t.pointsCount;if(0<e&&0<n){var s=this.i(0),a=t.i(0);if(s.Ua(a)||(e=this.i(e-1),t=t.i(n-1),e.Ua(t)||s.Ua(t)||e.Ua(a)))return!0}else if(this.fromNode===t.fromNode||this.toNode===t.toNode||this.fromNode===t.toNode||this.toNode===t.fromNode)return!0;return!1},K.prototype.isVisible=function(){if(!ft.prototype.isVisible.call(this))return!1;var t=this.containingGroup,e=!0,n=this.diagram;if(null!==n&&(e=n.isTreePathToChildren),null!==(n=this.fromNode)){if(this.isTreeLink&&e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(var s=n;null!==s;){if(s.labeledLink===this)return!0;s=s.containingGroup}if(null===(n=n.findVisibleNode())||n===t)return!1}if(null!==(n=this.toNode)){if(this.isTreeLink&&!e&&!n.isTreeExpanded)return!1;if(n===t)return!0;for(e=n;null!==e;){if(e.labeledLink===this)return!0;e=e.containingGroup}if(null===(e=n.findVisibleNode())||e===t)return!1}return!0},K.prototype.Pb=function(t){if(ft.prototype.Pb.call(this,t),null!==this.Mf&&this.Mf.em(),null!==this.nd)for(var e=this.nd.iterator;e.next();)e.value.Pb(t)},K.prototype.computeAdjusting=function(){return this.isAvoiding&&null!==this.diagram&&this.diagram.animationManager.defaultAnimation.isAnimating?Up:this.vk},K.prototype.Hh=function(){return!0},kt.Object.defineProperties(K.prototype,{fromNode:{get:function(){return this.We},set:function(t){var e=this.We;if(e!==t){var n=this.fromPort;null!==e&&(this.pf!==e&&qm(e,this,n),ry(this),this.B(2)),this.We=t,null!==t&&this.Pb(t.isVisible()),this.Qf=null,this.Va();var s=this.diagram;null!==s&&s.Z&&s.partManager.setFromNodeForLink(this,t,e);var a=this.fromPort,u=this.fromPortChanged;if(null!==u){var c=!0;null!==s&&(c=s.Z,s.Z=!0),u(this,n,a),null!==s&&(s.Z=c)}null!==t&&(this.pf!==t&&Fd(t,this,a),Gp(this),this.B(1)),this.g("fromNode",e,t),va(this)}}},fromPortId:{get:function(){return this.Xe},set:function(t){var e=this.Xe;if(e!==t){var n=this.fromPort;null!==n&&fr(n),ry(this),this.Xe=t;var s=this.fromPort;null!==s&&fr(s);var a=this.diagram;if(null!==a){var u=this.data,c=a.model;null!==u&&c.Pi()&&c.Pv(u,t)}n!==s&&(this.Qf=null,this.Va(),null!==(u=this.fromPortChanged)&&(c=!0,null!==a&&(c=a.Z,a.Z=!0),u(this,n,s),null!==a&&(a.Z=c))),Gp(this),this.g("fromPortId",e,t)}}},fromPort:{get:function(){var t=this.We;return null===t?null:t.ss(this.Xe)}},fromPortChanged:{get:function(){return this.Dn},set:function(t){var e=this.Dn;e!==t&&(this.Dn=t,this.g("fromPortChanged",e,t))}},toNode:{get:function(){return this.pf},set:function(t){var e=this.pf;if(e!==t){var n=this.toPort;null!==e&&(this.We!==e&&qm(e,this,n),ry(this),this.B(2)),this.pf=t,null!==t&&this.Pb(t.isVisible()),this.Qf=null,this.Va();var s=this.diagram;null!==s&&s.Z&&s.partManager.setToNodeForLink(this,t,e);var a=this.toPort,u=this.toPortChanged;if(null!==u){var c=!0;null!==s&&(c=s.Z,s.Z=!0),u(this,n,a),null!==s&&(s.Z=c)}null!==t&&(this.We!==t&&Fd(t,this,a),Gp(this),this.B(1)),this.g("toNode",e,t),va(this)}}},toPortId:{get:function(){return this.qf},set:function(t){var e=this.qf;if(e!==t){var n=this.toPort;null!==n&&fr(n),ry(this),this.qf=t;var s=this.toPort;null!==s&&fr(s);var a=this.diagram;if(null!==a){var u=this.data,c=a.model;null!==u&&c.Pi()&&c.Tv(u,t)}n!==s&&(this.Qf=null,this.Va(),null!==(u=this.toPortChanged)&&(c=!0,null!==a&&(c=a.Z,a.Z=!0),u(this,n,s),null!==a&&(a.Z=c))),Gp(this),this.g("toPortId",e,t)}}},toPort:{get:function(){var t=this.pf;return null===t?null:t.ss(this.qf)}},toPortChanged:{get:function(){return this.Dp},set:function(t){var e=this.Dp;e!==t&&(this.Dp=t,this.g("toPortChanged",e,t))}},fromSpot:{get:function(){return null!==this.P?this.P.Pg:Xt},set:function(t){this.Kc();var e=this.P.Pg;e.A(t)||(t=t.I(),this.P.Pg=t,this.g("fromSpot",e,t),(e.Nc()||t.Nc())&&null!==this.fromNode&&fr(this.fromPort),this.Va())}},fromEndSegmentLength:{get:function(){return null!==this.P?this.P.Ng:NaN},set:function(t){this.Kc();var e=this.P.Ng;e!==t&&(0>t&&ae(t,">= 0",K,"fromEndSegmentLength"),this.P.Ng=t,this.g("fromEndSegmentLength",e,t),this.Va())}},fromShortLength:{get:function(){return null!==this.P?this.P.Og:NaN},set:function(t){this.Kc();var e=this.P.Og;e!==t&&(this.P.Og=t,this.gc(!0),this.g("fromShortLength",e,t))}},toSpot:{get:function(){return null!==this.P?this.P.th:Xt},set:function(t){this.Kc();var e=this.P.th;e.A(t)||(t=t.I(),this.P.th=t,this.g("toSpot",e,t),(e.Nc()||t.Nc())&&null!==this.toNode&&fr(this.toPort),this.Va())}},toEndSegmentLength:{get:function(){return null!==this.P?this.P.rh:NaN},set:function(t){this.Kc();var e=this.P.rh;e!==t&&(0>t&&ae(t,">= 0",K,"toEndSegmentLength"),this.P.rh=t,this.g("toEndSegmentLength",e,t),this.Va())}},toShortLength:{get:function(){return null!==this.P?this.P.sh:NaN},set:function(t){this.Kc();var e=this.P.sh;e!==t&&(this.P.sh=t,this.gc(!0),this.g("toShortLength",e,t))}},isLabeledLink:{get:function(){return null!==this.nd&&0<this.nd.count}},labelNodes:{get:function(){return null===this.nd?To:this.nd.iterator}},relinkableFrom:{get:function(){return 0!=(1&this.Ia)},set:function(t){var e=0!=(1&this.Ia);e!==t&&(this.Ia^=1,this.g("relinkableFrom",e,t),this.Mb())}},relinkableTo:{get:function(){return 0!=(2&this.Ia)},set:function(t){var e=0!=(2&this.Ia);e!==t&&(this.Ia^=2,this.g("relinkableTo",e,t),this.Mb())}},resegmentable:{get:function(){return 0!=(4&this.Ia)},set:function(t){var e=0!=(4&this.Ia);e!==t&&(this.Ia^=4,this.g("resegmentable",e,t),this.Mb())}},isTreeLink:{get:function(){return 0!=(8&this.Ia)},set:function(t){var e=0!=(8&this.Ia);e!==t&&(this.Ia^=8,this.g("isTreeLink",e,t),null!==this.fromNode&&Rd(this.fromNode),null!==this.toNode&&Rd(this.toNode))}},path:{get:function(){var t=this.pb();return t instanceof bt?t:null}},routeBounds:{get:function(){this.vg();var t=this.yl,e=1/0,n=1/0,s=this.pointsCount;if(0===s)t.h(NaN,NaN,0,0);else{if(1===s)s=this.i(0),e=Math.min(s.x,e),n=Math.min(s.y,n),t.h(s.x,s.y,0,0);else if(2===s){s=this.i(0);var a=this.i(1);e=Math.min(s.x,a.x),n=Math.min(s.y,a.y),t.h(s.x,s.y,0,0),t.Oe(a)}else if(this.computeCurve()===pr&&3<=s&&!this.isOrthogonal)if(a=this.i(0),t.h(e=a.x,n=a.y,0,0),3===s){s=this.i(1),e=Math.min(s.x,e),n=Math.min(s.y,n);var u=this.i(2);e=Math.min(u.x,e),n=Math.min(u.y,n),V.Vl(a.x,a.y,s.x,s.y,s.x,s.y,u.x,u.y,.5,t)}else for(u=3;u<s;u+=3){var c=this.i(u-2);u+3>=s&&(u=s-1);var f=this.i(u-1),p=this.i(u);V.Vl(a.x,a.y,c.x,c.y,f.x,f.y,p.x,p.y,.5,t),e=Math.min(p.x,e),n=Math.min(p.y,n),a=p}else for(a=this.i(0),u=this.i(1),e=Math.min(a.x,u.x),n=Math.min(a.y,u.y),t.h(a.x,a.y,0,0),t.Oe(u),a=2;a<s;a++)u=this.i(a),e=Math.min(u.x,e),n=Math.min(u.y,n),t.Oe(u);this.tu.h(e-t.x,n-t.y)}return t}},midPoint:{get:function(){return this.vg(),this.computeMidPoint(new A)}},midAngle:{get:function(){return this.vg(),this.computeMidAngle()}},flattenedLengths:{get:function(){if(null===this.dr){this.td||Vp(this);for(var t=this.dr=[],e=this.pointsCount,n=0;n<e-1;n++){var s=this.i(n),a=this.i(n+1);V.aa(s.x,a.x)?0>(s=a.y-s.y)&&(s=-s):V.aa(s.y,a.y)?0>(s=a.x-s.x)&&(s=-s):s=Math.sqrt(s.xf(a)),t.push(s)}}return this.dr}},flattenedTotalLength:{get:function(){var t=this.Pt;if(isNaN(t)){for(var e=this.flattenedLengths,n=e.length,s=t=0;s<n;s++)t+=e[s];this.Pt=t}return t}},points:{get:function(){return this.Db},set:function(t){var e=this.Db;if(e!==t){var n=null;if(Array.isArray(t)){var s=t.length%2==0;if(s)for(var a=0;a<t.length;a++)if("number"!=typeof t[a]||isNaN(t[a])){s=!1;break}if(s)for(n=new st,s=0;s<t.length/2;s++)a=new A(t[2*s],t[2*s+1]).freeze(),n.add(a);else{for(s=!0,a=0;a<t.length;a++){var u=t[a];if(!Kt(u)||"number"!=typeof u.x||isNaN(u.x)||"number"!=typeof u.y||isNaN(u.y)){s=!1;break}}if(s)for(n=new st,s=0;s<t.length;s++)n.add(new A((a=t[s]).x,a.y).freeze())}}else if(t instanceof st)for(n=t.copy(),t=n.iterator;t.next();)t.value.freeze();else q("Link.points value is not an instance of List or Array: "+t);n.freeze(),this.Db=n,this.gc(!0),Vp(this),null!==(t=this.diagram)&&(t.Oi||t.undoManager.isUndoingRedoing||t.Hs.add(this),t.animationManager.tb&&(t=t.animationManager,this.gf=n,t.Al.add(this))),this.g("points",e,n)}}},pointsCount:{get:function(){return this.Db.count}},td:{get:function(){return 0!=(16&this.Ia)},set:function(t){0!=(16&this.Ia)!==t&&(this.Ia^=16)}},suspendsRouting:{get:function(){return 0!=(32&this.Ia)},set:function(t){0!=(32&this.Ia)!==t&&(this.Ia^=32)}},computingPoints:{get:function(){return 0!=(64&this.Ia)},set:function(t){0!=(64&this.Ia)!==t&&(this.Ia^=64)}},defaultFromPoint:{get:function(){return this.o},set:function(t){this.o=t.copy()}},defaultToPoint:{get:function(){return this.C},set:function(t){this.C=t.copy()}},isOrthogonal:{get:function(){return 2==(2&this.Ej.value)}},isAvoiding:{get:function(){return 4==(4&this.Ej.value)}},Dm:{get:function(){return 0!=(128&this.Ia)},set:function(t){0!=(128&this.Ia)!==t&&(this.Ia^=128)}},geometry:{get:function(){return this.Dm||(this.vg(),this.ma=this.makeGeometry()),this.ma}},firstPickIndex:{get:function(){return 2>=this.pointsCount?0:this.isOrthogonal||!zh(this.computeSpot(!0))?1:0}},lastPickIndex:{get:function(){var t=this.pointsCount;return 0===t?0:2>=t?t-1:this.isOrthogonal||!zh(this.computeSpot(!1))?t-2:t-1}},adjusting:{get:function(){return this.vk},set:function(t){var e=this.vk;e!==t&&(this.vk=t,this.g("adjusting",e,t))}},corner:{get:function(){return this.gn},set:function(t){var e=this.gn;e!==t&&(this.gn=t,this.gc(!0),this.g("corner",e,t))}},curve:{get:function(){return this.jn},set:function(t){var e=this.jn;e!==t&&(this.jn=t,this.Va(),this.gc(!0),vo(this,e===Wa||e===Wh||t===Wa||t===Wh),this.g("curve",e,t))}},curviness:{get:function(){return this.kn},set:function(t){var e=this.kn;e!==t&&(this.kn=t,this.Va(),this.gc(!1),this.g("curviness",e,t))}},routing:{get:function(){return this.Ej},set:function(t){var e=this.Ej;e!==t&&(this.Ej=t,this.Qf=null,this.Va(),vo(this,2==(2&e.value)||2==(2&t.value)),this.g("routing",e,t))}},smoothness:{get:function(){return this.rp},set:function(t){var e=this.rp;e!==t&&(this.rp=t,this.gc(!0),this.g("smoothness",e,t))}},key:{get:function(){var t=this.diagram;if(null!==t&&t.model.Pi())return t.model.qc(this.data)}}}),K.prototype.invalidateOtherJumpOvers=K.prototype.fq,K.prototype.findClosestSegment=K.prototype.Dz,K.prototype.updateRoute=K.prototype.vg,K.prototype.invalidateRoute=K.prototype.Va,K.prototype.rollbackRoute=K.prototype.Kv,K.prototype.commitRoute=K.prototype.vf,K.prototype.startRoute=K.prototype.Lh,K.prototype.clearPoints=K.prototype.Rj,K.prototype.removePoint=K.prototype.Iv,K.prototype.addPointAt=K.prototype.tf,K.prototype.addPoint=K.prototype.ee,K.prototype.insertPointAt=K.prototype.l,K.prototype.insertPoint=K.prototype.iA,K.prototype.setPointAt=K.prototype.M,K.prototype.setPoint=K.prototype.Pc,K.prototype.getPoint=K.prototype.i,K.prototype.getOtherPort=K.prototype.$z,K.prototype.getOtherNode=K.prototype.aq;var jd=null,Ou=null,W_=new Q(K,"Normal",1),nM=new Q(K,"Orthogonal",2),Ov=new Q(K,"AvoidsNodes",6),Iv=new Q(K,"AvoidsNodesStraight",7),Ii=new Q(K,"None",0),pr=new Q(K,"Bezier",9),Wa=new Q(K,"JumpGap",10),Wh=new Q(K,"JumpOver",11),Up=new Q(K,"End",17),zp=new Q(K,"Scale",18),oy=new Q(K,"Stretch",19),$p=new Q(K,"OrientAlong",21),Hd=new Q(K,"OrientPlus90",22),Vd=new Q(K,"OrientMinus90",23),Fv=new Q(K,"OrientOpposite",24),us=new Q(K,"OrientUpright",25),Kh=new Q(K,"OrientPlus90Upright",26),Yp=new Q(K,"OrientMinus90Upright",27),sy=new Q(K,"OrientUpright45",28),iM=16,Rv=14,Wp=8;function ay(t,e,n,s){bn(this),this.ue=this.jr=!1,this.Ks=t,this.qy=e,this.vv=n,this.sy=s,this.links=[]}function Kp(){bn(this),this.Cy=this.group=null,this.As=!0,this.abort=!1,this.zd=this.yd=1,this.po=this.oo=-1,this.ic=this.hc=8,this.Ub=null,this.zi=this.yi=0,this.Dy=11,this.jy=124}function Iu(t,e,n){return t.yd<=e&&e<=t.oo&&t.zd<=n&&n<=t.po}function Us(t,e,n){return Iu(t,e,n)?(e-=t.yd,n-=t.zd,t.Ub[0|(e/=t.hc)][0|(n/=t.ic)]):Xp}function K_(t){if(null!==t.Ub)for(var e=0;e<=t.yi;e++)for(var n=t.Ub[e],s=0;s<=t.zi;s++)n[s]>=Fu&&(n[s]=Xp)}function wo(t,e,n,s,a,u,c,f,p){if(!(e<u||e>c||n<f||n>p)){var g=0|e,y=0|n,v=t.Ub[g][y];if(v>=Fu&&v<Gd)for(a?y+=s:g+=s,v+=1;u<=g&&g<=c&&f<=y&&y<=p&&!(v>=t.Ub[g][y]);)t.Ub[g][y]=v,v+=1,a?y+=s:g+=s;if(g=a?y:g,a)if(0<s)for(n+=s;n<g;n+=s)wo(t,e,n,1,!a,u,c,f,p),wo(t,e,n,-1,!a,u,c,f,p);else for(n+=s;n>g;n+=s)wo(t,e,n,1,!a,u,c,f,p),wo(t,e,n,-1,!a,u,c,f,p);else if(0<s)for(e+=s;e<g;e+=s)wo(t,e,n,1,!a,u,c,f,p),wo(t,e,n,-1,!a,u,c,f,p);else for(e+=s;e>g;e+=s)wo(t,e,n,1,!a,u,c,f,p),wo(t,e,n,-1,!a,u,c,f,p)}}function Bd(t,e,n,s,a,u,c,f,p){var g=_a,y=Fu;for(t.Ub[e|=0][n|=0]=y;g===_a&&e>u&&e<c&&n>f&&n<p;)t.Ub[e][n]=y+=1,a?n+=s:e+=s,g=t.Ub[e][n]}function ly(t,e,n,s,a,u,c,f,p){var g=_a,y=Gd;for(t.Ub[e|=0][n|=0]=y;g===_a&&e>u&&e<c&&n>f&&n<p;)t.Ub[e][n]=y,a?n+=s:e+=s,g=t.Ub[e][n]}function uy(t,e,n,s,a,u,c){if(null!==t.Ub){t.abort=!1;var f=e.x,p=e.y;if(Iu(t,f,p)){f-=t.yd,f/=t.hc,p-=t.zd,p/=t.ic;var g=s.x,y=s.y;if(Iu(t,g,y))if(g-=t.yd,g/=t.hc,y-=t.zd,y/=t.ic,1>=Math.abs(f-g)&&1>=Math.abs(p-y))t.abort=!0;else{var v=u.x;s=u.y,e=u.x+u.width;var _=u.y+u.height;v-=t.yd,v/=t.hc,s-=t.zd,s/=t.ic,e-=t.yd,e/=t.hc,_-=t.zd,_/=t.ic,u=Math.max(0,Math.min(t.yi,0|v)),e=Math.min(t.yi,Math.max(0,0|e)),v=Math.max(0,Math.min(t.zi,0|s)),_=Math.min(t.zi,Math.max(0,0|_)),g|=0,y|=0;var b=0===n||90===n?1:-1;if(n=90===n||270===n,(s=t.Ub)[f|=0][p|=0]===_a?(Bd(t,f,p,b,n,u,e,v,_),Bd(t,f,p,1,!n,u,e,v,_),Bd(t,f,p,-1,!n,u,e,v,_)):Bd(t,f,p,b,n,f,p,f,p),s[g][y]===_a?(ly(t,g,y,0===a||90===a?1:-1,90===a||270===a,u,e,v,_),ly(t,g,y,1,!(90===a||270===a),u,e,v,_),ly(t,g,y,-1,!(90===a||270===a),u,e,v,_)):ly(t,g,y,b,n,g,y,g,y),n=Lt(),c&&hy(t,g,y,a,f,p,n))for((n[0]!==g||n[1]!==y)&&(n.unshift(y),n.unshift(g)),(n[n.length-2]!==f||n[n.length-1]!==p)&&(n.push(f),n.push(p)),t=Fu,s[a=n[n.length-2]][c=n[n.length-1]]=t++,u=n.length-4;0<=u;u-=2)for(a=n[u+2],c=n[u+3],e=n[u],g=n[u+1];e>a?a++:e<a?a--:g>c?c++:g<c&&c--,s[a][c]=t++,a!==e||c!==g;);else wo(t,f,p,1,!1,u,e,v,_),wo(t,f,p,-1,!1,u,e,v,_),wo(t,f,p,1,!0,u,e,v,_),wo(t,f,p,-1,!0,u,e,v,_);ee(n)}}}}function hy(t,e,n,s,a,u,c){for(var f=t.Ub,p=e,g=n;;){if(p===a&&g===u)return!0;var y=p,v=g;if(0===s){if(!(y<a))break;y++}else if(90===s){if(!(v<u))break;v++}else if(180===s){if(!(y>a))break;y--}else{if(!(v>u))break;v--}var _=f[y][v];if(0===_||_===X_)break;p=y,g=v}for(;;){if(y=s,v=p,_=g,0===s?_<u?(y=90,_++):_>u&&(y=270,_--):90===s?v<a?(y=0,v++):v>a&&(y=180,v--):180===s?_<u?(y=90,_++):_>u&&(y=270,_--):v<a?(y=0,v++):v>a&&(y=180,v--),v=f[v][_],y!==s&&0!==v&&v!==X_){if(c.push(p),c.push(g),hy(t,p,g,y,a,u,c))return!0;c.pop(),c.pop()}if(f[p][g]=X_,0===s){if(p===e)return!1;p--}else if(90===s){if(g===n)return!1;g--}else if(180===s){if(p===e)return!1;p++}else{if(g===n)return!1;g++}}}K.className="Link",K.Normal=W_,K.Orthogonal=nM,K.AvoidsNodes=Ov,K.AvoidsNodesStraight=Iv,K.None=Ii,K.Bezier=pr,K.JumpGap=Wa,K.JumpOver=Wh,K.End=Up,K.Scale=zp,K.Stretch=oy,K.OrientAlong=$p,K.OrientPlus90=Hd,K.OrientMinus90=Vd,K.OrientOpposite=Fv,K.OrientUpright=us,K.OrientPlus90Upright=Kh,K.OrientMinus90Upright=Yp,K.OrientUpright45=sy,K.EndSegmentStep=8,K.CurvinessStart=iM,K.SpacingMin=Rv,K.OrthoShortCut=Wp,K.AvoidanceCell=8,K.AvoidanceLimit=999,ay.prototype.em=function(){if(!this.jr){var t=this.links;0<t.length&&null!==(t=t[0].diagram)&&(t.Sw.add(this),this.ue=t.undoManager.isUndoingRedoing)}this.jr=!0},ay.prototype.ew=function(){if(this.jr){this.jr=!1;var t=this.links;if(0<t.length){var e=t[0],n=e.diagram;n=null===n||n.Oi&&!this.ue,this.ue=!1,e.arrangeBundledLinks(t,n),1===t.length&&(e.Mf=null,t.length=0)}0===t.length&&(t=this.Ks,null!==this&&null!==t.Te&&t.Te.remove(this),t=this.vv,null!==this&&null!==t.Te&&t.Te.remove(this))}},ay.className="LinkBundle",Kp.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var e=t.y,n=t.x+t.width,s=t.y+t.height;if(this.yd=Math.floor((t.x-this.hc)/this.hc)*this.hc,this.zd=Math.floor((e-this.ic)/this.ic)*this.ic,this.oo=Math.ceil((n+2*this.hc)/this.hc)*this.hc,this.po=Math.ceil((s+2*this.ic)/this.ic)*this.ic,t=1+(0|Math.ceil((this.oo-this.yd)/this.hc)),e=1+(0|Math.ceil((this.po-this.zd)/this.ic)),null===this.Ub||this.yi<t-1||this.zi<e-1){for(n=[],s=0;s<=t;s++)n[s]=new Uint32Array(e);this.Ub=n,this.yi=t-1,this.zi=e-1}if(t=Xp,null!==this.Ub)for(e=0;e<=this.yi;e++)if((n=this.Ub[e]).fill)n.fill(t);else for(s=0;s<=this.zi;s++)n[s]=t}},Kp.prototype.fk=function(t,e,n,s){if(t>this.oo||t+n<this.yd||e>this.po||e+s<this.zd)return!0;t=(t-this.yd)/this.hc|0,e=(e-this.zd)/this.ic|0,n=Math.max(0,n)/this.hc+1|0;var a=Math.max(0,s)/this.ic+1|0;if(0>t&&(n+=t,t=0),0>e&&(a+=e,e=0),0>n||0>a)return!0;for(s=0|Math.min(t+n-1,this.yi),n=0|Math.min(e+a-1,this.zi);t<=s;t++){a=this.Ub[t];for(var u=e;u<=n;u++)if(a[u]===_a)return!1}return!0},kt.Object.defineProperties(Kp.prototype,{bounds:{get:function(){return new z(this.yd,this.zd,this.oo-this.yd,this.po-this.zd)}},Rp:{get:function(){return this.hc},set:function(t){0<t&&t!==this.hc&&(this.hc=t,this.initialize(this.bounds))}},Qp:{get:function(){return this.ic},set:function(t){0<t&&t!==this.ic&&(this.ic=t,this.initialize(this.bounds))}}});var _a=0,Fu=1,Gd=999999,Xp=Gd+1,X_=Gd+2;function Xh(){bn(this),this.port=this.node=null,this.ge=[],this.iq=!1}function Z_(t,e,n,s){switch(e=e.offsetY){case 8:return 90;case 2:return 180;case 1:return 270;case 4:return 0}switch(e){case 9:return 180<n?270:90;case 6:return 90<n&&270>=n?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,e){case 3:return n>t&&n<=180+t?180:270;case 5:return n>180-t&&n<=360-t?270:0;case 12:return n>t&&n<=180+t?90:0;case 10:return n>180-t&&n<=360-t?180:90;case 7:return 90<n&&n<=180+t?180:n>180+t&&n<=360-t?270:0;case 13:return 180<n&&n<=360-t?270:n>t&&180>=n?90:0;case 14:return n>t&&n<=180-t?90:n>180-t&&270>=n?180:0;case 11:return n>180-t&&n<=180+t?180:n>180+t?270:90}return s&&15!==e&&0>(n-=15)&&(n+=360),n>t&&n<180-t?90:n>=180-t&&n<=180+t?180:n>180+t&&n<360-t?270:0}function Lv(t,e){var n=t.ge;if(0===n.length){t:if(!t.iq){n=t.iq,t.iq=!0;var s=null,a=t.node,u=a instanceof _t?a:null;if(null===u||u.isSubGraphExpanded)var c=a.isTreeExpanded?a.findLinksConnected(t.port.portId):a.Qx();else{if(!u.actualBounds.u()){t.iq=n;break t}c=(s=u).Uu()}u=t.ge.length=0;var f=t.port.da(St,A.alloc()),p=t.port.da(Ur,A.alloc());for((a=z.allocAt(f.x,f.y,0,0)).Oe(p),A.free(f),A.free(p),f=A.allocAt(a.x+a.width/2,a.y+a.height/2),p=t.port.Ki(),c=c.iterator;c.next();){var g=c.value;if(g.isVisible()&&g.fromPort!==g.toPort){var y=g.fromPort===t.port||null!==g.fromNode&&g.fromNode.Jd(s),v=g.computeSpot(y,t.port);if(v.Nc()){var _=y?g.toPort:g.fromPort;if(null!==_&&null!==(y=_.part)){var b=y.findVisibleNode();null!==b&&b!==y&&(_=(y=b).port),y=g.computeOtherPoint(y,_),_=f.Pa(_.da(Ut)),_+=(f.Pa(y)-_)/360,0>(_-=p)?_+=360:360<=_&&(_-=360),0===(v=Z_(a,v,_,g.isOrthogonal))?(v=4,180<_&&(_-=360)):90===v?(v=8,270<_&&(_-=360)):180===v?v=2:(v=1,90>_&&(_+=360)),void 0===(b=t.ge[u])?(b=new cy(g,_,v),t.ge[u]=b):(b.link=g,b.angle=_,b.Cc=v),b.yv.set(y),u++}}}}for(A.free(f),t.ge.sort(Xh.prototype.j),p=t.ge.length,s=-1,u=f=0;u<p;u++)void 0!==(c=t.ge[u])&&(c.Cc!==s&&(s=c.Cc,f=0),c.bq=f,f++);for(s=-1,f=0,u=p-1;0<=u;u--)void 0!==(p=t.ge[u])&&(p.Cc!==s&&(s=p.Cc,f=p.bq+1),p.Yl=f);if(u=t.ge,v=t.port,s=t.node.portSpreading,f=A.alloc(),p=A.alloc(),c=A.alloc(),g=A.alloc(),v.da(St,f),v.da(ki,p),v.da(Ur,c),v.da(vl,g),b=_=y=v=0,s===ty)for(var D=0;D<u.length;D++){var k=u[D];if(null!==k){var O=k.link.computeThickness();switch(k.Cc){case 8:_+=O;break;case 2:b+=O;break;case 1:v+=O;break;default:y+=O}}}var E=D=0,R=1,F=k=0;for(O=0;O<u.length;O++){var j=u[O];if(null!==j){if(D!==j.Cc){switch(D=j.Cc){case 8:var L=c;E=g;break;case 2:L=g,E=f;break;case 1:L=f,E=p;break;default:L=p,E=c}switch(k=E.x-L.x,F=E.y-L.y,D){case 8:_>Math.abs(k)?(R=Math.abs(k)/_,_=Math.abs(k)):R=1;break;case 2:b>Math.abs(F)?(R=Math.abs(F)/b,b=Math.abs(F)):R=1;break;case 1:v>Math.abs(k)?(R=Math.abs(k)/v,v=Math.abs(k)):R=1;break;default:y>Math.abs(F)?(R=Math.abs(F)/y,y=Math.abs(F)):R=1}E=0}var G=j.hq;if(s===ty){switch(j=j.link.computeThickness(),j*=R,G.set(L),D){case 8:G.x=L.x+k/2+_/2-E-j/2;break;case 2:G.y=L.y+F/2+b/2-E-j/2;break;case 1:G.x=L.x+k/2-v/2+E+j/2;break;default:G.y=L.y+F/2-y/2+E+j/2}E+=j}else{var ot=.5;s===kv&&(ot=(j.bq+1)/(j.Yl+1)),G.x=L.x+k*ot,G.y=L.y+F*ot}}}for(A.free(f),A.free(p),A.free(c),A.free(g),L=t.ge,u=0;u<L.length;u++)null!==(s=L[u])&&(s.Ru=t.computeEndSegmentLength(s));t.iq=n,z.free(a)}n=t.ge}for(t=0;t<n.length;t++)if(null!==(a=n[t])&&a.link===e)return a;return null}function cy(t,e,n){this.link=t,this.angle=e,this.Cc=n,this.yv=new A,this.Yl=this.bq=0,this.hq=new A,this.Ru=0}function Ud(){this.th=this.Pg=Xt,this.sh=this.Og=this.rh=this.Ng=NaN,this.Bp=this.Bn=null,this.Cp=this.Cn=1/0}function Ht(t){bn(this),this.o=this.D=null,this.$h=this.Un=!0,this.$n=!1,this.Rm=new A(0,0).freeze(),this.Xn=!0,this.Vm=this.Wn=null,this.Zn=!1,this.j=null,this.C=0,this.qo=this.Ip=null,this.hs=!1,this.lg=this.Gj=null,this.Yr=!1,t&&Object.assign(this,t)}function kr(t,e,n,s,a,u,c,f){for(n=n.iterator;n.next();){var p=n.value;s&&!p.isTopLevel||null!==a&&!a(p)||!p.canLayout()||(u&&p instanceof it?p.isLinkLabel||(p instanceof _t&&null===p.layout?kr(t,e,p.memberParts,!1,a,u,c,f):(Ru(p),e.add(p))):c&&p instanceof K?e.add(p):!f||!p.Mc()||p instanceof it||(Ru(p),e.add(p)))}}function Ru(t){var e=t.actualBounds;(0===e.width||0===e.height||isNaN(e.width)||isNaN(e.height))&&t.Ta()}function dy(t,e){if(null!==t.workerStateChanged){var n={key:t.group?t.group.key:null};void 0!==e&&(n.time=e),null!==t.Gj&&(n.running=J_(t.Gj)),null!==t.lg&&(n.waiting=J_(t.lg)),t.workerStateChanged(n,t)}}function J_(t){return{vertexes:t.vertexes.count,edges:t.edges.count}}function jv(t,e){var n=Zh(t);if(!n)throw Error("Unknown Layout class: "+t);if(e)for(var s in e)n[s]=e[s]}function Zh(t){var e=null;if("function"==typeof t){if(!(e=$d.get(t))){var n=Be(t);(e=$d.get(n))||((e=new q_).Mu=t,e.name=n,e.j=t.name,e.by=py,$d.set(n,e),$d.set(t,e),$d.set(t.name,e))}}else"string"==typeof t&&(e=$d.get(t));return e}function Hv(t,e){t.hs=!0;var n=Zh(t.constructor),s=fy(t,e,!0);s._GoJS="_GoJS",n.Pe.postMessage(s),n.gm.set(pn(t),t),t.Gj=e}function fy(t,e,n){t.onNetworkSerialization(1,n,e,null);var s={};t.serializeLayoutProperties(s,n);var a=[];e.vertexes.each(function(c){var f={};c.serializeVertexProperties(f,n),a.push(f)});var u=[];return e.edges.each(function(c){var f={};c.serializeEdgeProperties(f,n),u.push(f)}),s={id:n?pn(t):t.id,layout:Be(t.constructor),p:s,XA:a,Bz:u},t.onNetworkSerialization(2,n,e,s),s}function zd(t,e,n){n&&(t.id=e.id);var s=t.diagram,a=t.createNetwork();t.onNetworkSerialization(3,n,a,e);var u=e.XA,c=new xt;u&&u.forEach(function(g){var y=null;null===g.key||null===s||n||(y=s.Fb(g.key)),null!==y?y=a.Pj(y):(y=a.createVertex(),a.og(y)),n&&null!==g.key&&(y.data={di:g.key}),c.set(g.id,y)});var f=e.Bz,p=new xt;return f&&f.forEach(function(g){var y=null;null===g.key||null===s||n||(y=s.findLinkForKey(g.key));var v=a.createEdge();a.Tl(v),v.link=y,n&&null!==g.key&&(v.data={di:g.key}),p.set(g.id,v)}),u&&u.forEach(function(g){var y=c.get(g.id);y&&y.deserializeVertexProperties(g,c,p,n)}),f&&f.forEach(function(g){var y=p.get(g.id);y&&y.deserializeEdgeProperties(g,c,p,n)}),t.deserializeLayoutProperties(e.p,c,p,n,a),t.onNetworkSerialization(4,n,a,e),a}Kp.className="PositionArray",Xh.prototype.toString=function(){for(var t=this.ge,e=this.node.toString()+" "+t.length.toString()+":",n=0;n<t.length;n++){var s=t[n];null!==s&&(e+="\n  "+s.toString())}return e},Xh.prototype.em=function(){this.ge.length=0},Xh.prototype.j=function(t,e){return t===e?0:null===t?-1:null===e?1:t.Cc<e.Cc?-1:t.Cc>e.Cc?1:t.angle<e.angle?-1:t.angle>e.angle?1:0},Xh.prototype.computeEndSegmentLength=function(t){var e=t.link,n=e.computeEndSegmentLength(this.node,this.port,Vn,e.fromPort===this.port),s=t.bq;if(0>s)return n;var a=t.Yl;if(1>=a||!e.isOrthogonal)return n;e=t.yv;var u=t.hq;return(2===t.Cc||8===t.Cc)&&(s=a-1-s),((t=2===t.Cc||4===t.Cc)?e.y<u.y:e.x<u.x)?n+8*s:(t?e.y===u.y:e.x===u.x)?n:n+8*(a-1-s)},Xh.className="Knot",cy.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.Cc.toString()+":"+this.bq.toString()+"/"+this.Yl.toString()+" "+this.hq.toString()+" "+this.Ru.toString()+" "+this.yv.toString()},cy.className="LinkInfo",Ud.prototype.copy=function(){var t=new Ud;return t.Pg=this.Pg.I(),t.th=this.th.I(),t.Ng=this.Ng,t.rh=this.rh,t.Og=this.Og,t.sh=this.sh,t.Bn=this.Bn,t.Bp=this.Bp,t.Cn=this.Cn,t.Cp=this.Cp,t},Ud.className="LinkSettings",Ht.prototype.cloneProtected=function(t){t.Un=this.Un,t.$h=this.$h,t.$n=this.$n,t.Rm.assign(this.Rm),t.Xn=this.Xn,t.Wn=this.Wn,t.Vm=this.Vm,t.Zn=!0,t.qo=this.qo,t.Ip=this.Ip},Ht.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Ht.prototype.serializeLayoutProperties=function(t){t.arrangementOrigin={x:this.arrangementOrigin.x,y:this.arrangementOrigin.y},t.isRouting=this.isRouting},Ht.prototype.deserializeLayoutProperties=function(t){null!==t&&(this.arrangementOrigin=new A(t.arrangementOrigin.x,t.arrangementOrigin.y),this.isRouting=t.isRouting)},Ht.prototype.gb=function(){},Ht.prototype.toString=function(){var t=Be(this.constructor);return t+="(",null!==this.group&&(t+=" in "+this.group),null!==this.diagram&&(t+=" for "+this.diagram),t+")"},Ht.prototype.B=function(){if(this.isValidLayout){var t=this.diagram;if(null!==t&&!t.undoManager.isUndoingRedoing){var e=t.animationManager;!e.isTicking&&(e.defaultAnimation.isAnimating&&e.rc(),this.isOngoing&&t.Oi||this.isInitial&&!t.Oi)&&(this.isValidLayout=!1,t.Gb())}}},Ht.prototype.createNetwork=function(){return new qt(this)},Ht.prototype.makeNetwork=function(t){var e=this.createNetwork();return t instanceof U?(e.ng(t.nodes,!0),e.ng(t.links,!0)):e.ng(t instanceof _t?t.memberParts:t.iterator),e},Ht.prototype.updateParts=function(){if(this.isValidLayout=!0,!this.workerLayout()){var t=this.diagram;if(null===t&&null!==this.network)for(var e=this.network.vertexes.iterator;e.next();){var n=e.value.node;if(null!==n&&null!==(t=n.diagram))break}try{null!==t&&t.xa("Layout"),this.commitLayout()}finally{null!==t&&t.Xa("Layout")}}},Ht.prototype.commitLayout=function(){if(null!==this.network){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();if(this.isRouting)for(t=this.network.edges.iterator;t.next();)t.value.commit()}},Ht.prototype.doLayout=function(t){var e=new nt;t instanceof U?(kr(this,e,t.nodes,!0,this.Jh,!0,!1,!0),kr(this,e,t.parts,!0,this.Jh,!0,!1,!0)):t instanceof _t?kr(this,e,t.memberParts,!1,this.Jh,!0,!1,!0):e.addAll(t.iterator),0<e.count&&(null!==(t=this.diagram)&&t.xa("Layout"),this.doMinimalNoNetworkLayout(e),null!==t&&t.Xa("Layout")),this.isValidLayout=!0},Ht.prototype.doMinimalNoNetworkLayout=function(t){var e=Math.ceil(Math.sqrt(t.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var n=this.arrangementOrigin.x,s=n,a=this.arrangementOrigin.y,u=0,c=0;for(t=t.iterator;t.next();){var f=t.value;Ru(f);var p=f.measuredBounds,g=p.width;p=p.height,f.moveTo(s,a),f instanceof _t&&(f.Jh=!1),s+=Math.max(g,50)+20,c=Math.max(c,Math.max(p,50)),u>=e-1?(u=0,s=n,a+=c+20,c=0):u++}},Ht.prototype.doMinimalNetworkLayout=function(){var t=Math.ceil(Math.sqrt(this.network.vertexes.count));this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);for(var e=this.arrangementOrigin.x,n=e,s=this.arrangementOrigin.y,a=0,u=0,c=this.network.vertexes.iterator;c.next();){var f=c.value.node;if(!(null===f||f instanceof K)&&(Ru(f),this.Jh(f))){var p=f.measuredBounds,g=p.width;p=p.height,f.moveTo(n,s),f instanceof _t&&(f.Jh=!1),n+=Math.max(g,50)+20,u=Math.max(u,Math.max(p,50)),a>=t-1?(a=0,n=e,s+=u+20,u=0):a++}}},Ht.prototype.Jh=function(t){return!(t.location.u()&&!(t instanceof _t&&t.Jh))},Ht.prototype.Mi=function(t,e){var n=this.boundsComputation;return null!==n?(e||(e=new z),n(t,this,e)):e?(e.set(t.actualBounds),e):t.actualBounds},Ht.prototype.Fx=function(t){var e=new nt;return t instanceof U?(kr(this,e,t.nodes,!0,null,!0,!0,!0),kr(this,e,t.links,!0,null,!0,!0,!0),kr(this,e,t.parts,!0,null,!0,!0,!0)):kr(this,e,t instanceof _t?t.memberParts:t.iterator,!1,null,!0,!0,!0),e},Ht.prototype.initialOrigin=function(t){var e=this.group;if(null!==e){var n=e.position.copy();return(isNaN(n.x)||isNaN(n.y))&&n.set(t),null!==(e=e.placeholder)&&(n=e.da(St),(isNaN(n.x)||isNaN(n.y))&&n.set(t),n.x+=(t=e.padding).left,n.y+=t.top),n}return t},Ht.prototype.mayUseWorker=function(){return!!this.mayUseWorkerFunction&&this.mayUseWorkerFunction(this)},Ht.prototype.workerLayout=function(){return!1},Ht.prototype.jz=function(){var t=Zh(this.constructor);t&&(null!==t.Pe&&t.Pe.terminate(),t.Pe=null,t.gm.iteratorValues.each(function(e){e.hs=!1,e.Gj=null,e.lg=null,e.Yr=!1,dy(e)}),t.gm.clear())},Ht.prototype.dw=function(){if("undefined"==typeof Worker||!Vv||"undefined"==typeof self||void 0!==self.DedicatedWorkerGlobalScope)return!1;if(!this.mayUseWorker())return this.hs&&(this.Yr=!0,this.lg=this.Gj=null,dy(this)),!1;var t=Zh(this.constructor);return null!==t&&(null===t.Pe&&(t.Pe=new Worker(Vv),t.Pe.onerror=function(e){e.preventDefault(),Ci("Worker Error at: "+e.filename+" "+e.lineno+" "+e.colno+"\n  "+e.message)},t.Pe.j=function(e){Ci("Worker serialization error: "+e)},t.Pe.onmessage=function(e){var n=e.data;if("_GoJS"===n._GoJS)if(n.version&&U.version&&n.version!==U.version)Ci("Failure: GoJS v"+U.version+"  Worker v"+n.version);else if(e=t.gm.get(n.id)){if(t.gm.remove(n.id),e.hs=!1,e.Gj=null,e.Yr)e.Yr=!1,e.lg=null;else{var s=zd(e,n,!1);e.network=s,e.updateParts(),e.network=null,e.isValidLayout=!0}if(dy(e,n.time),null!==(n=e.lg))e.lg=null;else for(s=t.gm.iteratorValues;s.next();){var a=s.value;if(null!==(n=a.lg)){a.lg=null;break}}null!==n&&Hv(e,n)}},t.Pe.postMessage({_GoJS:"_GoJS",url:t.by}),Array.isArray(t.scripts)&&t.scripts.forEach(function(e){t.Pe.postMessage({_GoJS:"_GoJS",url:e})}),t.Pe.postMessage({_GoJS:"_GoJS",version:-1})),null!==this.Gj?this.lg=this.network:Hv(this,this.network),dy(this),this.doMinimalNetworkLayout(),this.network=null,this.isValidLayout=!0)},Ht.prototype.onNetworkSerialization=function(){},kt.Object.defineProperties(Ht.prototype,{diagram:{get:function(){return this.D},set:function(t){this.D=t}},group:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t,null!==t&&(this.D=t.diagram))}},isOngoing:{get:function(){return this.Un},set:function(t){this.Un!==t&&(this.Un=t)}},isInitial:{get:function(){return this.$h},set:function(t){this.$h=t,t||(this.Zn=!0)}},isViewportSized:{get:function(){return this.$n},set:function(t){this.$n!==t&&(this.$n=t)&&this.B()}},isRouting:{get:function(){return this.Xn},set:function(t){this.Xn!==t&&(this.Xn=t)}},isRealtime:{get:function(){return this.Wn},set:function(t){this.Wn!==t&&(this.Wn=t)}},isValidLayout:{get:function(){return this.Zn},set:function(t){this.Zn!==t&&(this.Zn=t,t||null!==(t=this.diagram)&&(t.Oh=!0))}},network:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t,null!==t&&(t.layout=this))}},boundsComputation:{get:function(){return this.Vm},set:function(t){this.Vm!==t&&(this.Vm=t,this.B())}},arrangementOrigin:{get:function(){return this.Rm},set:function(t){this.Rm.A(t)||(this.Rm.assign(t),this.B())}},id:{get:function(){return this.C},set:function(t){this.C=t}},mayUseWorkerFunction:{get:function(){return this.qo},set:function(t){this.qo!==t&&(this.qo=t)}},workerStateChanged:{get:function(){return this.Ip},set:function(t){this.Ip!==t&&(this.Ip=t)}}}),Ht.prototype.useWorker=Ht.prototype.dw,Ht.declareWorkerLayout=jv,Ht.prototype.cancelWorker=Ht.prototype.jz,Ht.prototype.collectParts=Ht.prototype.Fx,Ht.prototype.getLayoutBounds=Ht.prototype.Mi,Ht.prototype.invalidateLayout=Ht.prototype.B;var $d=new xt,py="object"==typeof gt.document&&gt.document.currentScript?gt.document.currentScript.src:"",Vv="undefined"!=typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof Blob?URL.createObjectURL(new Blob(["self.onmessage=function(e){if(e.data.url){\nimportScripts(e.data.url);}}"],{type:"text/javascript"})):"";function q_(){this.Mu=null,this.by=this.j=this.name="",this.scripts=[],this.Pe=null,this.gm=new xt}function qt(t){bn(this),this.uc=t,this.rf=new nt,this.oe=new nt,this.Ls=new xt,this.Gs=new xt}function Q_(t,e){if(null===e)return!1;var n=t.rf.remove(e);return n&&null!==(e=e.node)&&t.Ls.remove(e),n}function Zp(t,e){if(null!==e){t.oe.add(e);var n=e.link;null!==n&&null===t.Vp(n)&&t.Gs.add(n,e),e.network=t}}function Bv(t,e){null!==e&&t.oe.remove(e)&&null!==(e=e.link)&&t.Gs.remove(e)}function gy(t,e,n){if(null!==n&&n.network!==e){Q_(t,n),e.og(n);for(var s=n.sourceEdges;s.next();){var a=s.value;a.network!==e&&(Bv(t,a),Zp(e,a),gy(t,e,a.fromVertex))}for(s=n.destinationEdges;s.next();)(n=s.value).network!==e&&(Bv(t,n),Zp(e,n),gy(t,e,n.toVertex))}}function Pe(t){bn(this),this.Sb=t,this.j=new z(0,0,10,10).freeze(),this.o=new A(5,5).freeze(),this.mi=this.jb=null,this.sd=new st,this.Fd=new st}function my(t,e){return e=e.mi,(t=t.mi)?e?(t=t.text)<(e=e.text)?-1:t>e?1:0:1:null!==e?-1:0}function zn(t){bn(this),this.Rb=t,this.cd=this.Uc=this.ll=this.jb=null}function Tn(t){Ht.call(this),this.isViewportSized=!0,this.Jp=this.Kp=NaN,this.zg=new Dt(NaN,NaN).freeze(),this.jf=new Dt(10,10).freeze(),this.yb=Jp,this.Ib=vy,this.$c=Wd,this.Sc=Jh,t&&Object.assign(this,t)}function Jh(t,e){return(t=t.text)<(e=e.text)?-1:t>e?1:0}Ht.className="Layout",Ht.GoJSScriptURL=py,Ht.declareWorkerLayout=jv,"undefined"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&"undefined"!=typeof self&&void 0!==self.DedicatedWorkerGlobalScope&&(self.onmessage=function(t){if("_GoJS"===(t=t.data)._GoJS)if(t.url)importScripts(t.url);else if(t.version)self.postMessage({_GoJS:"_GoJS",version:U.version},void 0);else{var e=performance.now(),n=null;t.layout&&(n=Zh(t.layout));var s=null;if(n&&n.Mu&&(s=new n.Mu),!s)throw Error("no registered Worker Layout: "+t.layout);s.network=zd(s,t,!0),s.workerLayout=function(){var a=fy(s,s.network,!1);return a._GoJS="_GoJS",a.time=performance.now()-e,self.postMessage(a,void 0),!0},s.doLayout(new st)}}),qt.prototype.clear=function(){if(this.rf)for(var t=this.rf.iterator;t.next();)t.value.clear();if(this.oe)for(t=this.oe.iterator;t.next();)t.value.clear();this.rf=new nt,this.oe=new nt,this.Ls=new xt,this.Gs=new xt},qt.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutNetwork"+(null!==this.layout?"("+this.layout.toString()+")":"");if(0>=t)return e;if(e+=" vertexes: "+this.rf.count+" edges: "+this.oe.count,1<t){for(var n=this.rf.iterator;n.next();)e+="\n    "+n.value.toString(t-1);for(n=this.oe.iterator;n.next();)e+="\n    "+n.value.toString(t-1)}return e},qt.prototype.createVertex=function(){return new Pe(this)},qt.prototype.createEdge=function(){return new zn(this)},qt.prototype.ng=function(t,e,n){if(null!==t){for(void 0===e&&(e=!1),void 0===n&&(n=null),null===n&&(n=function(c){if(c instanceof it)return!c.isLinkLabel;if(c instanceof K){var f=c.fromNode;return null!==f&&!f.isLinkLabel&&!(null===(c=c.toNode)||c.isLinkLabel)}return!1}),t=t.iterator;t.next();){var s=t.value;if(s instanceof it&&(!e||s.isTopLevel)&&s.canLayout()&&n(s))if(s instanceof _t&&null===s.layout)this.ng(s.memberParts,!1);else if(null===this.Ji(s)){var a=this.createVertex();a.node=s,this.og(a)}}for(t.reset();t.next();)if((s=t.value)instanceof K&&(!e||s.isTopLevel)&&s.canLayout()&&n(s)&&null===this.Vp(s)){var u=s.fromNode;a=s.toNode,null!==u&&null!==a&&u!==a&&(u=this.findGroupVertex(u),a=this.findGroupVertex(a),null!==u&&null!==a&&this.gk(u,a,s))}}},qt.prototype.findGroupVertex=function(t){if(null===t)return null;var e=t.findVisibleNode();if(null===e)return null;if(null!==(t=this.Ji(e)))return t;for(e=e.containingGroup;null!==e;){if(null!==(t=this.Ji(e)))return t;e=e.containingGroup}return null},(S=qt.prototype).og=function(t){if(null!==t){this.rf.add(t);var e=t.node;null!==e&&this.Ls.add(e,t),t.network=this}},S.Pj=function(t){if(null===t)return null;var e=this.Ji(t);return null===e&&((e=this.createVertex()).node=t,this.og(e)),e},S.Qu=function(t){if(null!==t&&Q_(this,t)){for(var e=t.sd,n=e.count-1;0<=n;n--){var s=e.J(n);this.Xj(s)}for(t=(e=t.Fd).count-1;0<=t;t--)n=e.J(t),this.Xj(n)}},S.wz=function(t){null!==t&&null!==(t=this.Ji(t))&&this.Qu(t)},S.Ji=function(t){return null===t?null:this.Ls.H(t)},S.Tl=function(t){if(null!==t){Zp(this,t);var e=t.toVertex;null!==e&&e.Cu(t),null!==(e=t.fromVertex)&&e.Au(t)}},S.$y=function(t){if(null===t)return null;var e=t.fromNode,n=t.toNode,s=this.Vp(t);return null===s?((s=this.createEdge()).link=t,null!==e&&(s.fromVertex=this.Pj(e)),null!==n&&(s.toVertex=this.Pj(n)),this.Tl(s)):(s.fromVertex=null!==e?this.Pj(e):null,s.toVertex=null!==n?this.Pj(n):null),s},S.Xj=function(t){if(null!==t){var e=t.toVertex;null!==e&&e.Pu(t),null!==(e=t.fromVertex)&&e.Ou(t),Bv(this,t)}},S.vz=function(t){null!==t&&null!==(t=this.Vp(t))&&this.Xj(t)},S.Vp=function(t){return null===t?null:this.Gs.H(t)},S.gk=function(t,e,n){if(null===t||null===e)return null;if(t.network===this&&e.network===this){var s=this.createEdge();return s.link=n,s.fromVertex=t,s.toVertex=e,this.Tl(s),s}return null},S.sm=function(t){if(null!==t){var e=t.fromVertex,n=t.toVertex;null!==e&&null!==n&&(e.Ou(t),n.Pu(t),t.sm(),e.Cu(t),n.Au(t))}},S.Tp=function(){for(var t=Lt(),e=this.oe.iterator;e.next();){var n=e.value;n.fromVertex===n.toVertex&&t.push(n)}for(e=t.length,n=0;n<e;n++)this.Xj(t[n]);ee(t)},qt.prototype.deleteArtificialVertexes=function(){for(var t=Lt(),e=this.rf.iterator;e.next();){var n=e.value;null===n.node&&null===n.data&&t.push(n)}for(n=t.length,e=0;e<n;e++)this.Qu(t[e]);for(e=Lt(),n=this.oe.iterator;n.next();){var s=n.value;null===s.link&&null===s.data&&e.push(s)}for(n=e.length,s=0;s<n;s++)this.Xj(e[s]);ee(t),ee(e)},qt.prototype.Ey=function(t){void 0===t&&(t=!0),t&&(this.deleteArtificialVertexes(),function rM(t){for(var e=Lt(),n=t.oe.iterator;n.next();){var s=n.value;null!==s.fromVertex&&null!==s.toVertex||e.push(s)}for(n=e.length,s=0;s<n;s++)t.Xj(e[s]);ee(e)}(this),this.Tp()),t=new st;for(var e=!0;e;){e=!1;for(var n=this.rf.iterator;n.next();){var s=n.value;if(0<s.sd.count||0<s.Fd.count){e=this.layout.createNetwork(),t.add(e),gy(this,e,s),e=!0;break}}}return t.sort(function(a,u){return null===a||null===u||a===u?0:u.vertexes.count-a.vertexes.count}),t},qt.prototype.Cz=function(){for(var t=new nt,e=this.rf.iterator;e.next();)t.add(e.value.node);for(e=this.oe.iterator;e.next();)t.add(e.value.link);return t},kt.Object.defineProperties(qt.prototype,{layout:{get:function(){return this.uc},set:function(t){null!==t&&(this.uc=t)}},vertexes:{get:function(){return this.rf}},edges:{get:function(){return this.oe}}}),qt.prototype.findAllParts=qt.prototype.Cz,qt.prototype.splitIntoSubNetworks=qt.prototype.Ey,qt.prototype.deleteSelfEdges=qt.prototype.Tp,qt.prototype.reverseEdge=qt.prototype.sm,qt.prototype.linkVertexes=qt.prototype.gk,qt.prototype.findEdge=qt.prototype.Vp,qt.prototype.deleteLink=qt.prototype.vz,qt.prototype.deleteEdge=qt.prototype.Xj,qt.prototype.addLink=qt.prototype.$y,qt.prototype.addEdge=qt.prototype.Tl,qt.prototype.findVertex=qt.prototype.Ji,qt.prototype.deleteNode=qt.prototype.wz,qt.prototype.deleteVertex=qt.prototype.Qu,qt.prototype.addNode=qt.prototype.Pj,qt.prototype.addVertex=qt.prototype.og,qt.prototype.addParts=qt.prototype.ng,qt.className="LayoutNetwork",Pe.prototype.serializeVertexProperties=function(t){t.id=pn(this),t.key=this.node?this.node.key:this.data?this.data.di:void 0,void 0===t.key&&(t.key=null),t.x=this.bounds.x,t.y=this.bounds.y,t.YA=this.bounds.width,t.fA=this.bounds.height,t.fx=this.focus.x,t.fy=this.focus.y;var e=[];this.sd.each(function(s){e.push(pn(s))}),t.By=e;var n=[];this.Fd.each(function(s){n.push(pn(s))}),t.Lx=n},Pe.prototype.deserializeVertexProperties=function(t,e,n){if(null!==t){this.x=t.x,this.y=t.y,this.width=t.YA,this.height=t.fA,this.focusX=t.fx,this.focusY=t.fy;var s=this;t.By&&t.By.forEach(function(a){(a=n.get(a))&&s.sd.add(a)}),t.Lx&&t.Lx.forEach(function(a){(a=n.get(a))&&s.Fd.add(a)})}},Pe.prototype.clear=function(){this.mi=this.jb=null,this.sd=new st,this.Fd=new st},Pe.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutVertex#"+pn(this);if(0<t&&(e+=null!==this.node?"("+this.node.toString()+")":"",1<t)){t="";for(var n=!0,s=this.sd.iterator;s.next();){var a=s.value;n?n=!1:t+=",",t+=a.toString(0)}for(a="",n=!0,s=this.Fd.iterator;s.next();)n?n=!1:a+=",",a+=s.value.toString(0);e+=" sources: "+t+" destinations: "+a}return e},Pe.prototype.commit=function(){var t=this.jb;if(null!==t){var e=this.bounds,n=t.bounds;Kt(n)?(n.x=e.x,n.y=e.y,n.width=e.width,n.height=e.height):t.bounds=e.copy()}else if(null!==(t=this.node)){if(e=this.bounds,!(t instanceof _t)){n=z.alloc();var s=this.network.layout.Mi(t,n),a=t.locationObject.da(Ut);if(s.u()&&a.u())return t.moveTo(e.x+this.focusX-(a.x-s.x),e.y+this.focusY-(a.y-s.y)),void z.free(n);z.free(n)}t.moveTo(e.x,e.y)}},Pe.prototype.Cu=function(t){null!==t&&(this.sd.contains(t)||this.sd.add(t))},Pe.prototype.Pu=function(t){null!==t&&this.sd.remove(t)},Pe.prototype.Au=function(t){null!==t&&(this.Fd.contains(t)||this.Fd.add(t))},Pe.prototype.Ou=function(t){null!==t&&this.Fd.remove(t)},kt.Object.defineProperties(Pe.prototype,{sourceEdgesArrayAccess:{get:function(){return this.sd._dataArray}},destinationEdgesArrayAccess:{get:function(){return this.Fd._dataArray}},data:{get:function(){return this.jb},set:function(t){if(this.jb=t,null!==t&&t.bounds){var e=t.bounds;t=e.x;var n=e.y,s=e.width;this.o.h(s/2,(e=e.height)/2),this.j.h(t,n,s,e)}}},node:{get:function(){return this.mi},set:function(t){if(this.mi!==t){this.mi=t,t.Ta();var e=this.network.layout,n=z.alloc(),s=e.Mi(t,n);e=s.x;var a=s.y,u=s.width;if(s=s.height,isNaN(e)&&(e=0),isNaN(a)&&(a=0),this.j.h(e,a,u,s),z.free(n),!(t instanceof _t)&&(t=t.locationObject.da(Ut)).u())return void this.o.h(t.x-e,t.y-a);this.o.h(u/2,s/2)}}},bounds:{get:function(){return this.j},set:function(t){this.j.A(t)||this.j.assign(t)}},focus:{get:function(){return this.o},set:function(t){this.o.A(t)||this.o.assign(t)}},centerX:{get:function(){return this.j.x+this.o.x},set:function(t){var e=this.j;e.x+this.o.x!==t&&(e.ea(),e.x=t-this.o.x,e.freeze())}},centerY:{get:function(){return this.j.y+this.o.y},set:function(t){var e=this.j;e.y+this.o.y!==t&&(e.ea(),e.y=t-this.o.y,e.freeze())}},focusX:{get:function(){return this.o.x},set:function(t){var e=this.o;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},focusY:{get:function(){return this.o.y},set:function(t){var e=this.o;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},x:{get:function(){return this.j.x},set:function(t){var e=this.j;e.x!==t&&(e.ea(),e.x=t,e.freeze())}},y:{get:function(){return this.j.y},set:function(t){var e=this.j;e.y!==t&&(e.ea(),e.y=t,e.freeze())}},width:{get:function(){return this.j.width},set:function(t){var e=this.j;e.width!==t&&(e.ea(),e.width=t,e.freeze())}},height:{get:function(){return this.j.height},set:function(t){var e=this.j;e.height!==t&&(e.ea(),e.height=t,e.freeze())}},network:{get:function(){return this.Sb},set:function(t){this.Sb=t}},sourceVertexes:{get:function(){for(var t=new nt,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);return t.iterator}},destinationVertexes:{get:function(){for(var t=new nt,e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},vertexes:{get:function(){for(var t=new nt,e=this.sourceEdges;e.next();)t.add(e.value.fromVertex);for(e=this.destinationEdges;e.next();)t.add(e.value.toVertex);return t.iterator}},sourceEdges:{get:function(){return this.sd.iterator}},destinationEdges:{get:function(){return this.Fd.iterator}},edges:{get:function(){for(var t=new st,e=this.sourceEdges;e.next();)t.add(e.value);for(e=this.destinationEdges;e.next();)t.add(e.value);return t.iterator}},edgesCount:{get:function(){return this.sd.count+this.Fd.count}}}),Pe.prototype.deleteDestinationEdge=Pe.prototype.Ou,Pe.prototype.addDestinationEdge=Pe.prototype.Au,Pe.prototype.deleteSourceEdge=Pe.prototype.Pu,Pe.prototype.addSourceEdge=Pe.prototype.Cu,Pe.className="LayoutVertex",Pe.standardComparer=my,Pe.smartComparer=function(t,e){if(null!==t){if(null!==e){var n=e.mi;if(null!==(t=t.mi)){if(null!==n){for(e=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),t=n.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),n=0;n<e.length;n++)if(""!==t[n]&&void 0!==t[n]){var s=parseFloat(e[n]),a=parseFloat(t[n]);if(isNaN(s)){if(!isNaN(a))return 1;if(0!==e[n].localeCompare(t[n]))return e[n].localeCompare(t[n])}else{if(isNaN(a))return-1;if(s-a!=0)return s-a}}else if(""!==e[n])return 1;return""!==t[n]&&void 0!==t[n]?-1:0}return 1}return null!==n?-1:0}return 1}return null!==e?-1:0},zn.prototype.clear=function(){this.cd=this.Uc=this.ll=this.jb=null},zn.prototype.serializeEdgeProperties=function(t){t.id=pn(this),t.key=this.link?this.link.key:this.data?this.data.di:void 0,void 0===t.key&&(t.key=null),t.from=this.fromVertex?pn(this.fromVertex):null,t.TA=this.toVertex?pn(this.toVertex):null},zn.prototype.deserializeEdgeProperties=function(t,e){if(null!==t){var n=e.get(t.from);n&&(this.fromVertex=n),(t=e.get(t.TA))&&(this.toVertex=t)}},zn.prototype.toString=function(t){void 0===t&&(t=0);var e="LayoutEdge#"+pn(this);return 0<t&&(e+=null!==this.ll?"("+this.ll.toString()+")":"",1<t&&(e+=" "+(this.Uc?this.Uc.toString():"null")+" --\x3e "+(this.cd?this.cd.toString():"null"))),e},zn.prototype.sm=function(){var t=this.Uc;this.Uc=this.cd,this.cd=t},zn.prototype.commit=function(){},zn.prototype.Zx=function(t){return this.cd===t?this.Uc:this.Uc===t?this.cd:null},kt.Object.defineProperties(zn.prototype,{network:{get:function(){return this.Rb},set:function(t){this.Rb=t}},data:{get:function(){return this.jb},set:function(t){this.jb!==t&&(this.jb=t)}},link:{get:function(){return this.ll},set:function(t){this.ll!==t&&(this.ll=t)}},fromVertex:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},toVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}}}),zn.prototype.getOtherVertex=zn.prototype.Zx,zn.className="LayoutEdge",Wt(Tn,Ht),Tn.prototype.cloneProtected=function(t){Ht.prototype.cloneProtected.call(this,t),t.Kp=this.Kp,t.Jp=this.Jp,t.zg.assign(this.zg),t.jf.assign(this.jf),t.yb=this.yb,t.Ib=this.Ib,t.$c=this.$c,t.Sc=this.Sc},Tn.prototype.gb=function(t){t.classType===Tn?t===Wd||t===qp||t===Fi||t===Yd?this.sorting=t:t===vy||t===Fo?this.arrangement=t:t===Jp||t===yy?this.alignment=t:q("Unknown enum value: "+t):Ht.prototype.gb.call(this,t)},Tn.prototype.doLayout=function(t){this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin);var e=this.Fx(t);t=this.diagram;for(var n=e.copy().iterator;n.next();){var s=n.value;if(!s.Hh()||null===s.fromNode&&null===s.toNode){if(s.Ta(),s instanceof _t)for(s=s.memberParts;s.next();)e.remove(s.value)}else e.remove(s)}var a=e.ya();if(0!==a.length){switch(this.sorting){case Yd:a.reverse();break;case Wd:a.sort(this.comparer);break;case qp:a.sort(this.comparer),a.reverse()}var u=this.wrappingColumn;isNaN(u)&&(u=0);var c=this.wrappingWidth;switch(isNaN(c)&&null!==t?(e=t.padding,c=Math.max(t.viewportBounds.width-e.left-e.right,0)):c=Math.max(this.wrappingWidth,0),0>=u&&0>=c&&(u=1),e=this.spacing.width,isFinite(e)||(e=0),n=this.spacing.height,isFinite(n)||(n=0),null!==t&&t.xa("Layout"),s=[],this.alignment){case yy:var f=e,p=n,g=z.alloc(),y=Math.max(this.cellSize.width,1);if(!isFinite(y))for(var v=y=0;v<a.length;v++){var _=this.Mi(a[v],g);y=Math.max(y,_.width)}if(y=Math.max(y+f,1),v=Math.max(this.cellSize.height,1),!isFinite(v))for(_=v=0;_<a.length;_++){var b=this.Mi(a[_],g);v=Math.max(v,b.height)}v=Math.max(v+p,1),_=this.arrangement;for(var D=b=this.arrangementOrigin.x,k=this.arrangementOrigin.y,O=0,E=0,R=0;R<a.length;R++){var F=a[R],j=this.Mi(F,g),L=Math.ceil((j.width+f)/y)*y,G=Math.ceil((j.height+p)/v)*v;if(_===Fo)var ot=Math.abs(D-j.width);else ot=D+j.width;(0<u&&O>u-1||0<c&&0<O&&ot-b>c)&&(s.push(new z(0,k,c+f,E)),O=0,D=b,k+=E,E=0),E=Math.max(E,G),F.moveTo(D+(j=_===Fo?-j.width:0),k),_===Fo?D-=L:D+=L,O++}s.push(new z(0,k,c+f,E)),z.free(g);break;case Jp:for(p=c,y=u,v=e,_=n,c=z.alloc(),b=Math.max(this.cellSize.width,1),u=k=g=0,f=A.alloc(),D=0;D<a.length;D++)O=this.Mi(E=a[D],c),E=Gs(E,E.locationObject,E.locationSpot,f),g=Math.max(g,E.x),k=Math.max(k,O.width-E.x),u=Math.max(u,E.y);(D=this.arrangement)===Fo?g+=v:k+=v,b=isFinite(b)?Math.max(b+v,1):Math.max(g+k,1);var Z=E=this.arrangementOrigin.x;for(R=this.arrangementOrigin.y,k=0,p>=g&&(p-=g),g=F=0,L=Math.max(this.cellSize.height,1),j=u=0,G=!0,O=A.alloc(),ot=0;ot<a.length;ot++){var ut=a[ot],et=this.Mi(ut,c),Y=Gs(ut,ut.locationObject,ut.locationSpot,f);if(0<k?D===Fo?(Z=(Z-E-(et.width-Y.x))/b,Z=(Z=V.aa(Math.round(Z),Z)?Math.round(Z):Math.floor(Z))*b+E):(Z=(Z-E+Y.x)/b,Z=(Z=V.aa(Math.round(Z),Z)?Math.round(Z):Math.ceil(Z))*b+E):F=D===Fo?Z+Y.x+et.width:Z-Y.x,D===Fo)var At=-(Z+Y.x)+F;else At=Z+et.width-Y.x-F;if(0<y&&k>y-1||0<p&&0<k&&At>p){for(s.push(new z(0,G?R-u:R,p+v,j+u+_)),Z=0;Z<k&&ot!==k;Z++){var Mt=Gs(At=a[ot-k+Z],At.locationObject,At.locationSpot,O);At.moveTo(At.position.x,At.position.y+u-Mt.y)}j+=_,R=G?R+j:R+(j+u),k=j=u=0,Z=E,G=!1}Z===E&&(g=D===Fo?Math.max(g,et.width-Y.x):Math.min(g,-Y.x)),u=Math.max(u,Y.y),j=Math.max(j,et.height-Y.y),isFinite(L)&&(j=Math.max(j,Math.max(et.height,L)-Y.y)),ut.moveTo(Z-Y.x,G?R-Y.y:R),D===Fo?Z-=Y.x+v:Z+=et.width-Y.x+v,k++}if(s.push(new z(0,R,p+v,(G?j:j+u)+_)),a.length!==k)for(p=0;p<k;p++)v=Gs(y=a[a.length-k+p],y.locationObject,y.locationSpot,f),y.moveTo(y.position.x,y.position.y+u-v.y);if(A.free(f),A.free(O),D===Fo)for(a=0;a<s.length;a++)(u=s[a]).width+=g,u.x-=g;else for(a=0;a<s.length;a++)(u=s[a]).x>g&&(u.width+=u.x-g,u.x=g);z.free(c)}for(f=u=c=a=0;f<s.length;f++)p=s[f],a=Math.min(a,p.x),c=Math.min(c,p.y),u=Math.max(u,p.x+p.width);this.commitLayers(s,new A(this.arrangement===Fo?a+e/2-(u+a):a-e/2,c-n/2)),null!==t&&t.Xa("Layout"),this.isValidLayout=!0}},Tn.prototype.commitLayers=function(){},kt.Object.defineProperties(Tn.prototype,{wrappingWidth:{get:function(){return this.Kp},set:function(t){this.Kp!==t&&(0<t||isNaN(t))&&(this.Kp=t,this.isViewportSized=isNaN(t),this.B())}},wrappingColumn:{get:function(){return this.Jp},set:function(t){this.Jp!==t&&(0<t||isNaN(t))&&(this.Jp=t,this.B())}},cellSize:{get:function(){return this.zg},set:function(t){this.zg.A(t)||(this.zg.assign(t),this.B())}},spacing:{get:function(){return this.jf},set:function(t){this.jf.A(t)||(this.jf.assign(t),this.B())}},alignment:{get:function(){return this.yb},set:function(t){this.yb===t||t!==Jp&&t!==yy||(this.yb=t,this.B())}},arrangement:{get:function(){return this.Ib},set:function(t){this.Ib===t||t!==vy&&t!==Fo||(this.Ib=t,this.B())}},sorting:{get:function(){return this.$c},set:function(t){this.$c===t||t!==Fi&&t!==Yd&&t!==Wd&&t!==qp||(this.$c=t,this.B())}},comparer:{get:function(){return this.Sc},set:function(t){this.Sc!==t&&(this.Sc=t,this.B())}}});var yy=new Q(Tn,"Position",0),Jp=new Q(Tn,"Location",1),vy=new Q(Tn,"LeftToRight",2),Fo=new Q(Tn,"RightToLeft",3),Fi=new Q(Tn,"Forward",4),Yd=new Q(Tn,"Reverse",5),Wd=new Q(Tn,"Ascending",6),qp=new Q(Tn,"Descending",7);function $t(){this.Do=new nt,this.ko=new nt,this.Ha=new nt,this.Ve=new xt,this.Ue=new xt,this.rj=new xt,this.D=null,this.Bq=!1}function Gv(t,e,n){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ve.contains(e)){void 0===n&&(n=!0);t:{if(null!=e&&!t.D.undoManager.isUndoingRedoing&&!t.Ve.contains(e)){var s=t.Zp(e),a=tx(t,e,s);if(null!==a&&(yo(a),null!==(a=a.copy()))){var u=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,a.Nf=s,a.jb=e,t.Bq&&(a.Ug="Tool"),t.diagram.add(a),a.jb=null,a.data=e,t.diagram.skipsModelSourceBindings=u,s=a;break t}}s=null}null!==s&&n&&t.resolveReferencesForData(e)}}function tx(t,e,n){var s=(t=t.D).model;return s.ek()&&s.lv(e)?null===(e=t.groupTemplateMap.H(n))&&null===(e=t.groupTemplateMap.H(""))&&(nx||(nx=!0,Ci('No Group template found for category "'+n+'"'),Ci("  Using default group template")),e=t.Jw):null===(e=t.nodeTemplateMap.H(n))&&null===(e=t.nodeTemplateMap.H(""))&&(Yv||(Yv=!0,Ci('No Node template found for category "'+n+'"'),Ci("  Using default node template")),e=t.Lw),e}function Uv(t,e,n){for(var s in n){var a=e[s],u=n[s];if(Dn(u)){if(!Dn(a)||a.length<u.length)return!1;for(var c=0;c<a.length;c++){var f=u[c];if(void 0!==f&&!ex(t,a[c],f))return!1}}else if(!ex(t,a,u))return!1}return!0}function ex(t,e,n){if("function"==typeof n){if(!n(e))return!1}else if(n instanceof RegExp){if(!e||!n.test(e.toString()))return!1}else if(Kt(e)&&Kt(n)){if(!Uv(t,e,n))return!1}else if(e!==n)return!1;return!0}function zv(t,e){var n=e.ci;if(Dn(n)){var s=t.rj.H(n);if(null===s)(s=[]).push(e),t.rj.add(n,s);else{for(t=0;t<s.length;t++)if(s[t]===e)return;s.push(e)}}}function wy(t,e,n){Il(e,function(c){for(var f=(c=c.T.m).length,p=0;p<f;p++)ip(n,c[p])});var s=e.ci;if(Dn(s)){var a=t.rj.H(s);if(null!==a)for(var u=0;u<a.length;u++)if(a[u]===e){a.splice(u,1),0===a.length&&t.rj.remove(s);break}}}function $v(t,e,n,s,a){if(null===e||a&&!e.canCopy())return null;if(s.contains(e))return s.H(e);var u=t.copyPartData(e,n);if(!(u instanceof ft))return null;if(u.isSelected=!1,u.isHighlighted=!1,s.add(e,u),e instanceof it){for(var c=e.linksConnected;c.next();){var f=c.value;if(f.fromNode===e){var p=s.H(f);null!==p&&(p.fromNode=u)}f.toNode===e&&null!==(f=s.H(f))&&(f.toNode=u)}if(e instanceof _t&&u instanceof _t)for(e=e.memberParts;e.next();)(c=$v(t,e.value,n,s,a))instanceof K||null===c||(c.containingGroup=u)}else if(e instanceof K&&u instanceof K)for(null!==(c=e.fromNode)&&null!==(c=s.H(c))&&(u.fromNode=c),null!==(c=e.toNode)&&null!==(c=s.H(c))&&(u.toNode=c),e=e.labelNodes;e.next();)null!==(c=$v(t,e.value,n,s,a))&&c instanceof it&&(c.labeledLink=u);return u}Tn.className="GridLayout",Tn.standardComparer=Jh,Tn.smartComparer=function(t,e){if(null!==t){if(null!==e){t=t.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+-]?[.]?\d+(?:\.\d*)?(?:e[+-]?\d+)?)/);for(var n=0;n<t.length;n++)if(""!==e[n]&&void 0!==e[n]){var s=parseFloat(t[n]),a=parseFloat(e[n]);if(isNaN(s)){if(!isNaN(a))return 1;if(0!==t[n].localeCompare(e[n]))return t[n].localeCompare(e[n])}else{if(isNaN(a))return-1;if(s-a!=0)return s-a}}else if(""!==t[n])return 1;return""!==e[n]&&void 0!==e[n]?-1:0}return 1}return null!==e?-1:0},Tn.Position=yy,Tn.Location=Jp,Tn.LeftToRight=vy,Tn.RightToLeft=Fo,Tn.Forward=Fi,Tn.Reverse=Yd,Tn.Ascending=Wd,Tn.Descending=qp,(S=$t.prototype).clear=function(){this.Do.clear(),this.ko.clear(),this.Ha.clear(),this.Ve.clear(),this.Ue.clear(),this.rj.clear()},S.Ne=function(t){this.D=t},S.Ni=function(t){if(t instanceof it){if(this.Do.add(t),t instanceof _t){var e=t.containingGroup;null===e?this.D.wi.add(t):e.rl.add(t),null!==(e=t.layout)&&(e.diagram=this.D)}}else t instanceof K?this.ko.add(t):t instanceof Rt||this.Ha.add(t);null===(e=t.data)||t instanceof Rt||(t instanceof K?this.Ue.add(e,t):this.Ve.add(e,t))},S.fc=function(t){if(t.Qj(),t instanceof it){if(this.Do.remove(t),t instanceof _t){var e=t.containingGroup;null===e?this.D.wi.remove(t):e.rl.remove(t),null!==(e=t.layout)&&(e.diagram=null)}}else t instanceof K?this.ko.remove(t):t instanceof Rt||this.Ha.remove(t);null===(e=t.data)||t instanceof Rt||(t instanceof K?this.Ue.remove(e):this.Ve.remove(e))},S.Ld=function(){for(var t=this.D.nodeTemplateMap.iterator;t.next();){var e=t.value,n=t.key;(!e.Mc()||e instanceof _t)&&q('Invalid node template in Diagram.nodeTemplateMap: template for "'+n+'" must be a Node or a simple Part, not a Group or Link: '+e)}for(t=this.D.groupTemplateMap.iterator;t.next();)n=t.key,(e=t.value)instanceof _t||q('Invalid group template in Diagram.groupTemplateMap: template for "'+n+'" must be a Group, not a normal Node or Link: '+e);for(t=this.D.linkTemplateMap.iterator;t.next();)n=t.key,(e=t.value)instanceof K||q('Invalid link template in Diagram.linkTemplateMap: template for "'+n+'" must be a Link, not a normal Node or simple Part: '+e);for(t=Lt(),e=this.D.selection.iterator;e.next();)(n=e.value.data)&&t.push(n);for(e=Lt(),n=this.D.highlighteds.iterator;n.next();){var s=n.value.data;s&&e.push(s)}for(n=Lt(),s=this.nodes.iterator;s.next();){var a=s.value;null!==a.data&&(n.push(a.data),n.push(a.location))}for(s=this.links.iterator;s.next();)null!==(a=s.value).data&&(n.push(a.data),n.push(a.location));for(s=this.parts.iterator;s.next();)null!==(a=s.value).data&&(n.push(a.data),n.push(a.location));for(this.removeAllModeledParts(),this.addAllModeledParts(),s=0;s<t.length;s++)null!==(a=this.Ac(t[s]))&&(a.isSelected=!0);for(s=0;s<e.length;s++)null!==(a=this.Ac(e[s]))&&(a.isHighlighted=!0);for(s=0;s<n.length;s+=2)null!==(a=this.Ac(n[s]))&&(a.location=n[s+1]);ee(t),ee(e),ee(n)},$t.prototype.addAllModeledParts=function(){this.addModeledParts(this.diagram.model.nodeDataArray)},$t.prototype.addModeledParts=function(t,e){var n=this,s=this.diagram.model;t.forEach(function(a){s.cb(a)&&Gv(n,a,!1)}),t.forEach(function(a){s.cb(a)&&n.resolveReferencesForData(a)}),!1!==e&&rp(this.diagram,!1)},$t.prototype.insertLink=function(){return null},$t.prototype.resolveReferencesForData=function(){},$t.prototype.Zp=function(t){return this.D.model.Zp(t)},$t.prototype.getLinkCategoryForData=function(){return""},$t.prototype.setLinkCategoryForData=function(){},$t.prototype.setFromNodeForLink=function(){},$t.prototype.setToNodeForLink=function(){},$t.prototype.findLinkTemplateForCategory=function(t){var e=this.D.linkTemplateMap.H(t);return null===e&&null===(e=this.D.linkTemplateMap.H(""))&&(ix||(ix=!0,Ci('No Link template found for category "'+t+'"'),Ci("  Using default link template")),e=this.D.Kw),e},$t.prototype.removeAllModeledParts=function(){this.Ps(this.diagram.model.nodeDataArray)},$t.prototype.Ps=function(t){var e=this;t.forEach(function(n){e.qq(n)})},$t.prototype.qq=function(t){null!==(t=this.Ac(t))&&(bh(this.diagram,t,!1),this.unresolveReferencesForPart(t))},$t.prototype.unresolveReferencesForPart=function(){},$t.prototype.removeDataForLink=function(){},$t.prototype.findPartForKey=function(t){return null==t?null:null!==(t=this.D.model.Yb(t))?this.Ve.H(t):null},$t.prototype.Fb=function(t){return null==t||null===(t=this.D.model.Yb(t))?null:(t=this.Ve.H(t))instanceof it?t:null},$t.prototype.findLinkForKey=function(){return null},(S=$t.prototype).Ac=function(t){if(null===t)return null;var e=this.Ve.H(t);return null!==e?e:e=this.Ue.H(t)},S.Gi=function(t){return null===t?null:(t=this.Ve.H(t))instanceof it?t:null},S.zc=function(t){return null===t?null:this.Ue.H(t)},S.rs=function(t){for(var e=0;e<arguments.length;++e);e=new nt;for(var n=this.Do.iterator;n.next();){var s=n.value,a=s.data;if(null!==a)for(var u=0;u<arguments.length;u++){var c=arguments[u];if(Kt(c)&&Uv(this,a,c)){e.add(s);break}}}return e.iterator},S.qs=function(t){for(var e=0;e<arguments.length;++e);e=new nt;for(var n=this.ko.iterator;n.next();){var s=n.value,a=s.data;if(null!==a)for(var u=0;u<arguments.length;u++){var c=arguments[u];if(Kt(c)&&Uv(this,a,c)){e.add(s);break}}}return e.iterator},$t.prototype.doModelChanged=function(t){if(this.D){var e=this.D;if(t.model===e.model){var n=t.change;if(e.doModelChanged(t),e.Z){e.Z=!1;try{var s=t.modelChange;if(""!==s)if(n===De){if("nodeCategory"===s){var a=this.Ac(t.object),u=t.newValue;null!==a&&"string"==typeof u&&(a.category=u)}else"nodeDataArray"===s&&(this.Ps(t.oldValue),this.addModeledParts(t.newValue));e.isModified=!0}else if(n===Ve){var c=t.newValue;"nodeDataArray"===s&&Kt(c)&&Gv(this,c),e.isModified=!0}else if(n===dn){var f=t.oldValue;"nodeDataArray"===s&&Kt(f)&&this.qq(f),e.isModified=!0}else n===Jo&&("SourceChanged"===s?null!==t.object?this.updateDataBindings(t.object,t.propertyName):(this.zq(),this.updateAllTargetBindings()):"ModelDisplaced"===s&&this.Ld());else if(n===De){var p=t.propertyName,g=t.object;g===e.model?("nodeKeyProperty"===p||"nodeCategoryProperty"===p)&&(e.undoManager.isUndoingRedoing||this.Ld()):this.updateDataBindings(g,p),e.isModified=!0}else if(n===Ve||n===dn){var y=t.change===Ve,v=y?t.newParam:t.oldParam,_=y?t.newValue:t.oldValue,b=this.rj.H(t.object);if(Array.isArray(b))for(t=0;t<b.length;t++){var D=b[t];if(y)Rm(D,_,v,!0);else if(!(0>v)){var k=v+jh(D);D.fc(k,!0),Cp(D,k,v)}}e.isModified=!0}}finally{e.Z=!0}}}}},$t.prototype.updateAllTargetBindings=function(t){void 0===t&&(t="");for(var e=this.parts.iterator;e.next();)e.value.Fa(t);for(e=this.nodes.iterator;e.next();)e.value.Fa(t);for(e=this.links.iterator;e.next();)e.value.Fa(t)},$t.prototype.zq=function(){for(var t=this.D.model,e=new nt,n=t.nodeDataArray,s=0;s<n.length;s++)e.add(n[s]);var a=[];for(this.nodes.each(function(c){null===c.data||e.contains(c.data)||a.push(c.data)}),this.parts.each(function(c){null===c.data||e.contains(c.data)||a.push(c.data)}),a.forEach(function(c){ax(t,c,!1)}),s=0;s<n.length;s++){var u=n[s];null===this.Ac(u)&&sx(t,u,!1)}for(this.refreshDataBoundLinks(),n=this.parts.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.nodes.iterator;n.next();)n.value.updateRelationshipsFromData();for(n=this.links.iterator;n.next();)n.value.updateRelationshipsFromData()},$t.prototype.refreshDataBoundLinks=function(){},$t.prototype.updateRelationshipsFromData=function(){},$t.prototype.updateDataBindings=function(t,e){if("string"==typeof e){var n=this.Ac(t);if(null!==n)n.Fa(e);else{n=null;for(var s=this.rj.iterator;s.next();){for(var a=s.value,u=0;u<a.length;u++){var c=a[u].Rx(t);null!==c&&(null===n&&(n=Lt()),n.push(c))}if(null!==n)break}if(null!==n){for(s=0;s<n.length;s++)n[s].Fa(e);ee(n)}}t===this.diagram.model.modelData&&this.updateAllTargetBindings(e)}},$t.prototype.Vj=function(t,e,n){void 0===n&&(n=!1);var s=new xt;if(Dn(t))for(var a=0;a<t.length;a++)$v(this,t[a],e,s,n);else for(t=t.iterator;t.next();)$v(this,t.value,e,s,n);if(null!==e){n=e.model,t=null!==(t=e.toolManager.findTool("Dragging"))?t.dragOptions.dragsLink:e.pn.dragsLink,a=new nt;for(var u=new xt,c=s.iterator;c.next();){var f=c.value;if(f instanceof K)t||null!==f.fromNode&&null!==f.toNode||a.add(f);else if(f instanceof it&&null!==f.data&&n.fm()){var p=f,g=(f=c.key).rg();null!==g&&(null!==(g=s.H(g))?(n.he(p.data,n.pa(g.data)),p=e.zc(p.data),null!==(f=f.Ii())&&null!==p&&u.add(f,p)):n.he(p.data,void 0))}}if(0<a.count&&e.Qs(a,!1),0<u.count)for(n=u.iterator;n.next();)s.add(n.key,n.value)}if(null!==e&&null!==this.D&&null!==(n=(e=e.model).afterCopyFunction)){var y=new xt;s.each(function(v){null!==v.key.data&&y.add(v.key.data,v.value.data)}),n(y,e,this.D.model)}for(e=s.iterator;e.next();)e.value.Fa();return s},$t.prototype.copyPartData=function(t,e){var n=null,s=t.data;if(null!==s&&null!==e){var a=e.model;t instanceof K||Kt(s=a.copyNodeData(s))&&(a.sf(s),n=e.Ac(s))}else yo(t),null!==(n=t.copy())&&(a=this.D,null!==e?e.add(n):null!==s&&null!==a&&null!==a.commandHandler&&a.commandHandler.copiesClipboardData&&(e=a.model,a=null,n instanceof K||(a=e.copyNodeData(s)),Kt(a)&&(n.data=a)));return n},kt.Object.defineProperties($t.prototype,{nodes:{get:function(){return this.Do}},links:{get:function(){return this.ko}},parts:{get:function(){return this.Ha}},diagram:{get:function(){return this.D}},addsToTemporaryLayer:{get:function(){return this.Bq},set:function(t){this.Bq=t}}}),$t.prototype.updateAllRelationshipsFromData=$t.prototype.zq,$t.prototype.findLinksByExample=$t.prototype.qs,$t.prototype.findNodesByExample=$t.prototype.rs,$t.prototype.findLinkForData=$t.prototype.zc,$t.prototype.findNodeForData=$t.prototype.Gi,$t.prototype.findPartForData=$t.prototype.Ac,$t.prototype.findNodeForKey=$t.prototype.Fb,$t.prototype.removeModeledPart=$t.prototype.qq,$t.prototype.removeModeledParts=$t.prototype.Ps,$t.prototype.rebuildParts=$t.prototype.Ld;var Yv=!1,nx=!1,ix=!1;function vn(t){$t.apply(this,arguments)}function oM(t,e){e.forEach(function(n){_y(t,n)}),rp(t.diagram,!1)}function _y(t,e){if(null!=e&&!t.diagram.undoManager.isUndoingRedoing&&!t.Ue.contains(e)){var n=t.getLinkCategoryForData(e),s=t.findLinkTemplateForCategory(n);if(null!==s){yo(s);var a=s.copy();if(null!==a){s=t.diagram.skipsModelSourceBindings,t.diagram.skipsModelSourceBindings=!0,a.Nf=n,a.jb=e;var u=Gl(n=t.diagram.model,e,!0);""!==u&&(a.fromPortId=u),void 0!==(u=ai(n,e,!0))&&(u=t.Fb(u))instanceof it&&(a.fromNode=u),""!==(u=Gl(n,e,!1))&&(a.toPortId=u),void 0!==(u=ai(n,e,!1))&&(u=t.Fb(u))instanceof it&&(a.toNode=u),n=n.Bf(e),Array.isArray(n)&&n.forEach(function(c){null!==(c=t.Fb(c))&&(c.labeledLink=a)}),t.Bq&&(a.Ug="Tool"),t.diagram.add(a),a.jb=null,a.data=e,t.diagram.skipsModelSourceBindings=s}}}}function rx(t,e){e.forEach(function(n){t.qq(n)})}function gr(){$t.apply(this,arguments),this.ih=null}function Qp(t,e,n){if(null!==e&&null!==n){var s=t.diagram.toolManager.findTool("Linking"),a=e,u=n;if(t.diagram.isTreePathToChildren){for(e=u.linksConnected;e.next();)if(e.value.toNode===u)return}else for(u=e,e=(a=n).linksConnected;e.next();)if(e.value.fromNode===a)return;if((null===s||!re(s,a,u,null,!0))&&(s=t.getLinkCategoryForData(n.data),null!==(e=t.findLinkTemplateForCategory(s))&&(yo(e),null!==(e=e.copy())))){var c=t.diagram.skipsModelSourceBindings;t.diagram.skipsModelSourceBindings=!0,e.Nf=s,e.jb=n.data,e.fromNode=a,e.toNode=u,t.diagram.add(e),e.jb=null,e.data=n.data,t.diagram.skipsModelSourceBindings=c}}}function ct(t,e){this.vl=new nt,this.tl=new nt,this.zw=',\n  "insertedNodeKeys": ',this.My=',\n  "modifiedNodeData": ',this.Bw=',\n  "removedNodeKeys": ',this.Mh=null,bn(this),this.ln=this.na="",this.Sg=!1,this.j={},this.Fc=[],this.bb=new xt,this.ni="key",this.Jk=this.nl=null,this.bn=this.cn=!1,this.en=!0,this.Om=null,this.Aj="category",this.Pf=new xt,this.Xt=new st,this.kh=!1,this.o=null,this.undoManager=new Re,void 0!==t&&(Dn(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}function Qr(t,e,n,s,a,u){function c(v,_){f?(void 0===v.__gohashid&&u.push(v),s.set(v,_)):(v=ml++,s.set(v,_),a.set(v,e))}if(!Kt(e))return e;u||(u=[]);var f=Object.isExtensible(e);if(s||(s=new xt),f){var p=s.get(e);if(p)return p}else for(a||(a=new xt),p=a.iterator;p.next();){var g=p.key;if(p.value===e&&(g=s.get(g)))return g}if(Array.isArray(e)){c(e,p=[]);for(var y=0;y<e.length;y++)p.push(Qr(t,e[y],!1,s,a,u))}else if(e instanceof A||e instanceof Dt||e instanceof z||e instanceof Ct||e instanceof pt)p=e.copy(),c(e,p);else{if(e instanceof jt||e instanceof rt||e instanceof Q)return e;if(e instanceof st)p=(new st).addAll(Qr(t,e.ya(),!1,s,a,u)),c(e,p);else if(e instanceof nt)p=(new nt).addAll(Qr(t,e.ya(),!1,s,a,u)),c(e,p);else if(e instanceof xt)p=(new xt).addAll(Qr(t,e.ya(),!1,s,a,u)),c(e,p);else if(e instanceof Date)p=new Date(e.getTime()),c(e,p);else if(e instanceof RegExp)p=new RegExp(e),c(e,p),p.lastIndex=e.lastIndex;else if("function"==typeof e.copy)p=e.copy(),c(e,p);else for(y in c(e,p={}),e)"__gohashid"!==y&&(p[y]=Qr(t,e[y],!1,s,a,u))}return n&&u.forEach(function(v){delete v.__gohashid}),p}function sM(t,e){Kt(e=e.modelData)&&(t.pm(e),t.modelData=e)}function aM(t,e){function n(a,u){if((u=u.part)&&a!==(u=u.data)){var c=s.get(a);null===c?((c=new nt).add(u),s.add(a,c)):c.add(u)}}var s=t.Mh;null===s&&(s=new xt,e.changes.each(function(a){if(null!==a.diagram){var u=a.change;u===De?(a=a.object.panel)&&(u=a.data)&&n(u,a):(u===Ve||u===dn)&&(u=(a=a.object).itemArray)&&n(u,a)}}),t.Mh=s)}function Wv(t,e){for(var n=new nt,s=0;s<t.nodeDataArray.length;s++){var a=t.nodeDataArray[s];tg(t,e,a,a,n)}return n}function tg(t,e,n,s,a){if(Array.isArray(n))for(var u=0;u<n.length;u++){var c=n[u];if(c===e)return a.add(s),!0;if(tg(t,e,c,s,a))return!0}else if(Kt(n)&&Object.getPrototypeOf(n)===Object.prototype)for(u in n){if((c=n[u])===e)return a.add(s),!0;if(tg(t,e,c,s,a))return!0}return!1}function Ka(t,e,n){void 0===n&&(n=!1);var s=e.length;if(0>=s)return"[]";var a=new k0;a.add("["),n&&1<s&&a.add("\n");for(var u=0;u<s;u++){var c=e[u];void 0!==c&&(0<u&&(a.add(","),n&&a.add("\n")),a.add(t.Gm(c)))}return n&&1<s&&a.add("\n"),a.add("]"),a.toString()}function ox(t,e){return void 0===e||"__gohashid"===t||"_"===t[0]||"function"==typeof e}function Ri(t){return isNaN(t)?"NaN":t===1/0?"9e9999":t===-1/0?"-9e9999":t}function xy(t,e){var n=e;if(n instanceof A)e={class:"go.Point",x:Ri(n.x),y:Ri(n.y)};else if(n instanceof Dt)e={class:"go.Size",width:Ri(n.width),height:Ri(n.height)};else if(n instanceof z)e={class:"go.Rect",x:Ri(n.x),y:Ri(n.y),width:Ri(n.width),height:Ri(n.height)};else if(n instanceof Ct)e={class:"go.Margin",top:Ri(n.top),right:Ri(n.right),bottom:Ri(n.bottom),left:Ri(n.left)};else if(n instanceof pt)e=n.hb()?{class:"go.Spot",x:Ri(n.x),y:Ri(n.y),offsetX:Ri(n.offsetX),offsetY:Ri(n.offsetY)}:{class:"go.Spot",enum:n.toString()};else if(n instanceof jt){if(e={class:"go.Brush",type:n.type.name},n.type===ga?e.color=n.color:(n.type===ma||n.type===dr)&&(e.start=n.start,e.end=n.end,n.type===dr&&(0!==n.startRadius&&(e.startRadius=Ri(n.startRadius)),isNaN(n.endRadius)||(e.endRadius=Ri(n.endRadius)))),null!==n.colorStops){var s={};for(n=n.colorStops.iterator;n.next();)s[n.key]=n.value;e.colorStops=s}}else n instanceof rt?(e={class:"go.Geometry",type:n.type.name},0!==n.startX&&(e.startX=Ri(n.startX)),0!==n.startY&&(e.startY=Ri(n.startY)),0!==n.endX&&(e.endX=Ri(n.endX)),0!==n.endY&&(e.endY=Ri(n.endY)),n.spot1.A(St)||(e.spot1=n.spot1),n.spot2.A(Ur)||(e.spot2=n.spot2),n.type===rt.o&&(e.path=rt.wa(n))):n instanceof Q&&(e={class:"go.EnumValue",classType:ng(t,n.classType),name:n.name});for(var a in s="{",n=!0,e){var u=Ue(e,a);if(!ox(a,u))if(n?n=!1:s+=",",s+=t.quote(a)+":","points"===a&&u instanceof st){var c="[";for(u=u.iterator;u.next();){var f=u.value;1<c.length&&(c+=","),c+=t.Gm(f.x),c+=",",c+=t.Gm(f.y)}s+=c+="]"}else s+=t.Gm(u)}return s+"}"}function ie(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function Ye(t,e,n,s,a,u,c,f,p){void 0===f&&(f=null),void 0===p&&(p=null);var g=new Ne;g.model=t,g.change=n,g.modelChange=e,g.propertyName=s,g.object=a,g.oldValue=u,g.oldParam=f,g.newValue=c,g.newParam=p,t.ks(g)}function Bl(t){return"number"==typeof t||"string"==typeof t}function sx(t,e,n){var s=t.pa(e);(void 0===s||t.bb.H(s)!==e)&&(t.rv(e),void 0===(s=t.pa(e))&&q("Model.makeNodeDataKeyUnique failed on "+e+".  Data not added to Model."),t.bb.add(s,e),s=null,n&&qc(t.Fc,s=t.Fc.length,e),Ye(t,"nodeDataArray",Ve,"nodeDataArray",t,null,e,null,s),t.rm(e),t.qm(e))}function ax(t,e,n){var s=t.pa(e);if(void 0!==s&&t.bb.remove(s),s=null,n){t:if(n=t.Fc,Array.isArray(n))s=n.indexOf(e);else{s=n.length;for(var a=0;a<s;a++)if(n[a]===e){s=a;break t}s=-1}if(0>s)return;gl(t.Fc,s)}Ye(t,"nodeDataArray",dn,"nodeDataArray",t,e,null,s,null),t.yq(e)}function Ro(t,e,n){if(void 0!==e){var s=t.Pf.H(e);null===s&&(s=new nt,t.Pf.add(e,s)),s.add(n)}}function Lo(t,e,n){if(void 0!==e){var s=t.Pf.H(e);s instanceof nt&&(null==n?t.Pf.remove(e):(s.remove(n),0===s.count&&t.Pf.remove(e)))}}function eg(t,e){return void 0===e?null:(t=t.Pf.H(e))instanceof nt?t:null}function qh(t,e,n){if(t.copiesArrays&&Array.isArray(e)){var s=[];for(n=0;n<e.length;n++){var a=qh(t,e[n],t.copiesArrayObjects);s.push(a)}return bn(s),s}if(n&&Kt(e)){for(s in n=(n=e.constructor)?new n:{},a=t.copiesKey||"string"!=typeof t.nodeKeyProperty?null:t.nodeKeyProperty,e)if("__gohashid"===s)n.__gohashid=void 0;else if(s===a)n[a]=void 0;else{var u=Ue(e,s),c=ng(t,u);"GraphObject"===c||"Diagram"===c||"Layer"===c||"RowColumnDefinition"===c||"AnimationManager"===c||"Tool"===c||"CommandHandler"===c||"Layout"===c||"InputEvent"===c||"DiagramEvent"===c||u instanceof ct||u instanceof Re||u instanceof _e||u instanceof Ne||(u=qh(t,u,!1)),oe(n,s,u)}return bn(n),n}return e instanceof A||e instanceof Dt||e instanceof z||e instanceof pt||e instanceof Ct?e.copy():e}function Lu(){return new ct}function ng(t,e){if("function"==typeof e){if(e.className)return e.className;if(e.name)return e.name}else if("object"==typeof e&&null!==e&&e.constructor)return ng(t,e.constructor);return typeof e}function Qh(t){return Zn[t]?Zn[t]:void 0!==gt.go&&gt.go[t]?gt.go[t]:null}function Ue(t,e){if(!t||!e)return null;try{if("function"==typeof e)var n=e(t);else"function"==typeof t.getAttribute?null===(n=t.getAttribute(e))&&(n=void 0):n=t[e]}catch(s){}return n}function oe(t,e,n){if(t&&e)try{"function"==typeof e?e(t,n):"function"==typeof t.setAttribute?t.setAttribute(e,n):t[e]=n}catch(s){}}$t.className="PartManager",Wt(vn,$t),vn.prototype.addAllModeledParts=function(){var t=this.diagram.model;this.addModeledParts(t.nodeDataArray),oM(this,t.linkDataArray)},vn.prototype.addModeledParts=function(t){for($t.prototype.addModeledParts.call(this,t,!1),t=this.links.iterator;t.next();)va(t.value);rp(this.diagram,!1)},vn.prototype.removeAllModeledParts=function(){var t=this.diagram.model;rx(this,t.linkDataArray),this.Ps(t.nodeDataArray)},vn.prototype.getLinkCategoryForData=function(t){return this.diagram.model.us(t)},vn.prototype.setLinkCategoryForData=function(t,e){return this.diagram.model.tq(t,e)},vn.prototype.setFromNodeForLink=function(t,e){var n=this.diagram.model;n.Ov(t.data,n.pa(null!==e?e.data:null))},vn.prototype.setToNodeForLink=function(t,e){var n=this.diagram.model;n.Sv(t.data,n.pa(null!==e?e.data:null))},vn.prototype.removeDataForLink=function(t){this.diagram.model.nm(t.data)},vn.prototype.findPartForKey=function(t){var e=$t.prototype.findPartForKey.call(this,t);return null===e&&null!==(t=this.diagram.model.Dh(t))?this.Ue.H(t):e},vn.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Dh(t))?this.Ue.H(t):null},vn.prototype.doModelChanged=function(t){var e=this;if($t.prototype.doModelChanged.call(this,t),this.diagram){var n=this.diagram;if(t.model===n.model){var s=t.change;if(n.Z){n.Z=!1;try{var a=t.modelChange;if(""!==a){if(s===De){if("linkFromKey"===a){var u=this.zc(t.object);if(null!==u){var c=this.Fb(t.newValue);u.fromNode=c}}else if("linkToKey"===a){var f=this.zc(t.object);if(null!==f){var p=this.Fb(t.newValue);f.toNode=p}}else if("linkFromPortId"===a){var g=this.zc(t.object);if(null!==g){var y=t.newValue;"string"==typeof y&&(g.fromPortId=y)}}else if("linkToPortId"===a){var v=this.zc(t.object);if(null!==v){var _=t.newValue;"string"==typeof _&&(v.toPortId=_)}}else if("nodeGroupKey"===a){var b=this.Ac(t.object);if(null!==b){var D=t.newValue;if(void 0!==D){var k=this.Fb(D);b.containingGroup=k instanceof _t?k:null}else b.containingGroup=null}}else if("linkLabelKeys"===a){var O=this.zc(t.object);if(null!==O){var E=t.oldValue,R=t.newValue;Array.isArray(E)&&E.forEach(function(Y){0<=R.indexOf(Y)||null!==(Y=e.Fb(Y))&&(Y.labeledLink=null)}),Array.isArray(R)&&R.forEach(function(Y){null!==(Y=e.Fb(Y))&&(Y.labeledLink=O)})}}else if("linkCategory"===a){var F=this.zc(t.object),j=t.newValue;null!==F&&"string"==typeof j&&(F.category=j)}else"linkDataArray"===a&&(rx(this,t.oldValue),oM(this,t.newValue));n.isModified=!0}else if(s===Ve){var L=t.newValue;if("linkDataArray"===a&&"object"==typeof L&&null!==L)_y(this,L);else if("linkLabelKeys"===a&&Bl(L)){var G=this.zc(t.object),ot=this.Fb(L);null!==G&&null!==ot&&(ot.labeledLink=G)}n.isModified=!0}else if(s===dn){var Z=t.oldValue;if("linkDataArray"===a&&"object"==typeof Z&&null!==Z)this.qq(Z);else if("linkLabelKeys"===a&&Bl(Z)){var ut=this.Fb(Z);null!==ut&&(ut.labeledLink=null)}n.isModified=!0}}else if(s===De){var et=t.propertyName;t.object!==n.model||"linkFromKeyProperty"!==et&&"linkToKeyProperty"!==et&&"linkFromPortIdProperty"!==et&&"linkToPortIdProperty"!==et&&"linkLabelKeysProperty"!==et&&"nodeIsGroupProperty"!==et&&"nodeGroupKeyProperty"!==et&&"linkCategoryProperty"!==et||n.undoManager.isUndoingRedoing||this.Ld(),n.isModified=!0}}finally{n.Z=!0}}}}},vn.prototype.refreshDataBoundLinks=function(){var t=this,e=this.diagram.model,n=new nt,s=e.linkDataArray;s.forEach(function(u){n.add(u)});var a=[];this.links.each(function(u){null===u.data||n.contains(u.data)||a.push(u.data)}),a.forEach(function(u){ic(e,u,!1)}),s.forEach(function(u){null===t.zc(u)&&nc(e,u,!1)})},vn.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var s=n.model;if(t instanceof K){var a=ai(s,e,!0);if(a=n.Fb(a),t.fromNode=a,a=ai(s,e,!1),a=n.Fb(a),t.toNode=a,0<(e=s.Bf(e)).length||0<t.labelNodes.count){if(1===e.length&&1===t.labelNodes.count){a=e[0];var u=t.labelNodes.first();if(s.pa(u.data)===a)return}a=(new nt).addAll(e);var c=new nt;t.labelNodes.each(function(f){null!==f.data&&void 0!==(f=s.pa(f.data))&&c.add(f)}),(e=c.copy()).pq(a),(a=a.copy()).pq(c),(0<e.count||0<a.count)&&(e.each(function(f){null!==(f=n.Fb(f))&&f.labeledLink===t&&(f.labeledLink=null)}),a.each(function(f){null!==(f=n.Fb(f))&&f.labeledLink!==t&&(f.labeledLink=t)}))}}else!(t instanceof Rt)&&(e=s.Eh(e),null===(e=n.findPartForKey(e))||e instanceof _t)&&(t.containingGroup=e)}}},vn.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.pa(t);if(void 0!==n){var s=eg(e,n),a=this.Ac(t);if(null!==s&&null!==a){s=s.iterator;for(var u={};s.next();){var c=s.value;e.cb(c)?a instanceof _t&&e.Eh(c)===n&&null!==(c=this.Ac(c))&&(c.containingGroup=a):(u.link=this.zc(c),null!==u.link&&a instanceof it&&(ai(e,c,!0)===n&&(u.link.fromNode=a),ai(e,c,!1)===n&&(u.link.toNode=a),c=e.Bf(c),Array.isArray(c)&&c.some(function(f){return function(p){return p===n&&(a.labeledLink=f.link,!0)}}(u)))),u={link:u.link}}Lo(e,n)}void 0!==(t=e.Eh(t))&&(t=this.Fb(t))instanceof _t&&(a.containingGroup=t)}},vn.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof it){var n=e.pa(t.data);if(void 0!==n){for(var s=t.linksConnected;s.next();)Ro(e,n,s.value.data);if(t.isLinkLabel&&null!==(s=t.labeledLink)&&Ro(e,n,s.data),t instanceof _t)for(t=t.memberParts;t.next();)e.cb(s=t.value.data)&&Ro(e,n,s)}}},vn.prototype.copyPartData=function(t,e){var n=$t.prototype.copyPartData.call(this,t,e);if(t instanceof K)if(null!==(t=t.data)&&null!==e){var s=e.model;"object"==typeof(t=s.Sp(t))&&null!==t&&(s.Bi(t),n=e.zc(t))}else null!==n&&(e=this.diagram,null!==t&&null!==e&&null!==e.commandHandler&&e.commandHandler.copiesClipboardData&&"object"==typeof(e=e.model.Sp(t))&&null!==e&&(n.data=e));return n},vn.prototype.insertLink=function(t,e,n,s){var a=this.diagram,u=a.model,c=a.toolManager.findTool("Linking"),f="";if(null!==t&&(null===e&&(e=t),null===(f=e.portId)&&(f="")),e="",null!==n&&(null===s&&(s=n),null===(e=s.portId)&&(e="")),(s=c.archetypeLinkData)instanceof K){if(yo(s),null!==(u=s.copy()))return u.fromNode=t,u.fromPortId=f,u.toNode=n,u.toPortId=e,a.add(u),(t=c.archetypeLabelNodeData)instanceof it&&(yo(t),null!==(t=t.copy())&&(t.labeledLink=u,a.add(t))),u}else if(null!==s&&"object"==typeof(s=u.Sp(s))&&null!==s)return null!==t&&xa(u,s,u.pa(t.data),!0),Da(u,s,f,!0),null!==n&&xa(u,s,u.pa(n.data),!1),Da(u,s,e,!1),u.Bi(s),null===(t=c.archetypeLabelNodeData)||t instanceof it||"object"==typeof(t=u.copyNodeData(t))&&null!==t&&(u.sf(t),void 0!==(t=u.pa(t))&&u.Bu(s,t)),a.zc(s);return null},vn.prototype.findLinkForKey=vn.prototype.findLinkForKey,vn.prototype.findPartForKey=vn.prototype.findPartForKey,vn.prototype.removeAllModeledParts=vn.prototype.removeAllModeledParts,vn.prototype.addModeledParts=vn.prototype.addModeledParts,vn.prototype.addAllModeledParts=vn.prototype.addAllModeledParts,vn.className="GraphLinksPartManager",Wt(gr,$t),gr.prototype.getLinkCategoryForData=function(t){return this.diagram.model.xs(t)},gr.prototype.setLinkCategoryForData=function(t,e){this.diagram.model.Us(t,e)},gr.prototype.setFromNodeForLink=function(t,e,n){var s=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren)s.he(t.data,s.pa(e));else{var a=this.ih;this.ih=t,null!==n&&s.he(n.data,void 0),s.he(e,s.pa(null!==t.toNode?t.toNode.data:null)),this.ih=a}},gr.prototype.setToNodeForLink=function(t,e,n){var s=this.diagram.model;if(void 0===n&&(n=null),e=null!==e?e.data:null,this.diagram.isTreePathToChildren){var a=this.ih;this.ih=t,null!==n&&s.he(n.data,void 0),s.he(e,s.pa(null!==t.fromNode?t.fromNode.data:null)),this.ih=a}else s.he(t.data,s.pa(e))},gr.prototype.removeDataForLink=function(t){this.diagram.model.he(t.data,void 0)},gr.prototype.findLinkForKey=function(t){return null==t?null:null!==(t=this.diagram.model.Yb(t))?this.Ue.H(t):null},gr.prototype.doModelChanged=function(t){if($t.prototype.doModelChanged.call(this,t),this.diagram){var e=this.diagram;if(t.model===e.model){var n=t.change;if(e.Z){e.Z=!1;try{var s=t.modelChange;if(""!==s){if(n===De){if("nodeParentKey"===s){var a=t.object,u=this.Fb(t.newValue),c=this.Gi(a);if(null!==this.ih)null!==u&&(this.ih.data=a,this.ih.category=this.getLinkCategoryForData(a));else if(null!==c){var f=c.Ii();null!==f?null===u?e.remove(f):e.isTreePathToChildren?f.fromNode=u:f.toNode=u:Qp(this,u,c)}}else if("parentLinkCategory"===s){var p=this.Gi(t.object),g=t.newValue;if(null!==p&&"string"==typeof g){var y=p.Ii();null!==y&&(y.category=g)}}e.isModified=!0}}else n===De&&(t.object===e.model&&"nodeParentKeyProperty"===t.propertyName&&(e.undoManager.isUndoingRedoing||this.Ld()),e.isModified=!0)}finally{e.Z=!0}}}}},gr.prototype.updateRelationshipsFromData=function(t){var e=t.data;if(null!==e){var n=t.diagram;if(null!==n){var s=n.model;t instanceof it&&(e=s.Fh(e),(e=n.Fb(e))!==(s=t.rg())&&(s=t.Ii(),null!==e?null!==s?n.isTreePathToChildren?s.fromNode=e:s.toNode=e:Qp(this,e,t):null!==s&&bh(n,s,!1)))}}},gr.prototype.updateDataBindings=function(t,e){$t.prototype.updateDataBindings.call(this,t,e),"string"==typeof e&&null!==this.Ac(t)&&null!==(t=this.zc(t))&&t.Fa(e)},gr.prototype.resolveReferencesForData=function(t){var e=this.diagram.model,n=e.pa(t);if(void 0!==n){var s=eg(e,n),a=this.Ac(t);if(null!==s&&null!==a){for(s=s.iterator;s.next();){var u=s.value;e.cb(u)&&a instanceof it&&e.Fh(u)===n&&Qp(this,a,this.Gi(u))}Lo(e,n)}void 0!==(t=e.Fh(t))&&a instanceof it&&Qp(this,t=this.Fb(t),a)}},gr.prototype.unresolveReferencesForPart=function(t){var e=this.diagram.model;if(t instanceof it){var n=e.pa(t.data),s=this.zc(t.data);if(null!==s){s.isSelected=!1,s.isHighlighted=!1;var a=s.layer;if(null!==a){var u=a.fc(-1,s,!1);0<=u&&this.diagram.Wa(dn,"parts",a,s,null,u,null),null!==(u=s.layerChanged)&&u(s,a,null)}}for(s=this.diagram.isTreePathToChildren,t=t.linksConnected;t.next();)a=t.value,e.cb(a=(s?a.toNode:a.fromNode).data)&&Ro(e,n,a)}},gr.prototype.insertLink=function(t,e,n){e=this.diagram.model;var s=t,a=n;return this.diagram.isTreePathToChildren||(s=n,a=t),null!==s&&null!==a?(e.he(a.data,e.pa(s.data)),a.Ii()):null},gr.prototype.findLinkForKey=gr.prototype.findLinkForKey,gr.className="TreePartManager",ct.prototype.cloneProtected=function(t){t.na=this.na,t.ln=this.ln,t.Sg=this.Sg,t.ni=this.ni,t.nl=this.nl,t.Jk=this.Jk,t.cn=this.cn,t.bn=this.bn,t.en=this.en,t.Om=this.Om,t.Aj=this.Aj},ct.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},ct.prototype.clear=function(){this.Fc=[],this.bb.clear(),this.Pf.clear(),this.undoManager.clear()},ct.prototype.toString=function(t){if(void 0===t&&(t=0),1<t)return this.vq();var e=(""!==this.name?this.name:"")+" Model";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,s=0;s<n;s++){var a=t[s];e+=" "+this.pa(a)+":"+xr(a)}}return e},ct.prototype.UA=function(t){t.change!==Jo&&q("Model.toIncrementalData argument is not a Transaction ChangedEvent:"+t.toString());var e=t.object;return t.isTransactionFinished&&e instanceof _e?(aM(this,e),t=this.iw(e,"FinishedUndo"===t.propertyName),this.Mh=null,t):null},ct.prototype.iw=function(t,e){var n=this,s=!1,a=new nt,u=new nt,c=new nt,f=this.Mh;t.changes.each(function(v){v.model===n&&("nodeDataArray"===v.modelChange?v.change===Ve?a.add(v.newValue):v.change===dn&&c.add(v.oldValue):n.cb(v.object)?u.add(v.object):v.change!==De||n.modelData!==v.object&&"modelData"!==v.propertyName?null!==v.object&&(f&&f.contains(v.object)?f.get(v.object).each(function(_){n.cb(_)&&u.add(_)}):v.object instanceof ct||n.Pi()&&n.yc(v.object)||Wv(n,v.object).each(function(_){u.add(_)})):s=!0)});var p=this.tl;p.clear(),a.each(function(v){p.add(n.pa(v)),e||u.add(v)});var g=this.vl;g.clear(),c.each(function(v){g.add(n.pa(v)),e&&u.add(v)}),t=n.cloneDeep(u.ya());var y=null;return s&&(null===y&&(y={}),y.modelData=this.cloneDeep(this.modelData)),0<p.count&&(null===y&&(y={}),e?y.removedNodeKeys=p.ya():y.insertedNodeKeys=p.ya()),0<t.length&&(null===y&&(y={}),y.modifiedNodeData=t),0<g.count&&(null===y&&(y={}),e?y.insertedNodeKeys=g.ya():y.removedNodeKeys=g.ya()),g.clear(),p.clear(),y},ct.prototype.cloneDeep=function(t){return Qr(this,t,!0)},(S=ct.prototype).quote=function(t){return JSON.stringify(t).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})},S.Fm=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.dataFormat&&(t+=',\n  "dataFormat": '+this.quote(this.dataFormat)),this.isReadOnly&&(t+=',\n  "isReadOnly": '+this.isReadOnly),"key"!==this.nodeKeyProperty&&"string"==typeof this.nodeKeyProperty&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.nodeKeyProperty)),this.copiesArrays&&(t+=',\n  "copiesArrays": true'),this.copiesArrayObjects&&(t+=',\n  "copiesArrayObjects": true'),this.copiesKey||(t+=',\n  "copiesKey": false'),"category"!==this.nodeCategoryProperty&&"string"==typeof this.nodeCategoryProperty&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.nodeCategoryProperty)),t},S.nq=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.dataFormat=t.dataFormat),t.isReadOnly&&(this.isReadOnly=!0),t.nodeKeyProperty&&(this.nodeKeyProperty=t.nodeKeyProperty),t.copiesArrays&&(this.copiesArrays=!0),t.copiesArrayObjects&&(this.copiesArrayObjects=!0),!1===t.copiesKey&&(this.copiesKey=!1),t.nodeCategoryProperty&&(this.nodeCategoryProperty=t.nodeCategoryProperty)},S.jw=function(){var n,t=this.modelData,e=!1;for(n in t)if(!ox(n,t[n])){e=!0;break}return t="",e&&(t=',\n  "modelData": '+xy(this,this.modelData)),t+',\n  "nodeDataArray": '+Ka(this,this.nodeDataArray,!0)},S.Ev=function(t){sM(this,t),Dn(t=t.nodeDataArray)&&(this.pm(t),this.nodeDataArray=t)},S.hw=function(t,e){var n=this,s=!1,a=new nt,u=new nt,c=new nt,f=this.Mh;t.changes.each(function(y){y.model===n&&("nodeDataArray"===y.modelChange?y.change===Ve?a.add(y.newValue):y.change===dn&&c.add(y.oldValue):n.cb(y.object)?u.add(y.object):y.change!==De||n.modelData!==y.object&&"modelData"!==y.propertyName?null!==y.object&&(f&&f.contains(y.object)?f.get(y.object).each(function(v){n.cb(v)&&u.add(v)}):y.object instanceof ct||n.Pi()&&n.yc(y.object)||Wv(n,y.object).each(function(v){u.add(v)})):s=!0)});var p=this.tl;p.clear(),a.each(function(y){p.add(n.pa(y)),e||u.add(y)});var g=this.vl;return g.clear(),c.each(function(y){g.add(n.pa(y)),e&&u.add(y)}),t="",s&&(t+=',\n  "modelData": '+xy(this,this.modelData)),0<p.count&&(t+=(e?this.Bw:this.zw)+Ka(this,p.ya(),!0)),0<u.count&&(t+=this.My+Ka(this,u.ya(),!0)),0<g.count&&(t+=(e?this.zw:this.Bw)+Ka(this,g.ya(),!0)),g.clear(),p.clear(),t},S.mq=function(t){(void 0!==t.name&&t.name!==this.name||void 0!==t.dataFormat&&t.dataFormat!==this.dataFormat||void 0!==t.isReadOnly&&t.isReadOnly!==this.isReadOnly||void 0!==t.nodeKeyProperty&&t.nodeKeyProperty!==this.nodeKeyProperty||void 0!==t.copiesArrays&&t.copiesArrays!==this.copiesArrays||void 0!==t.copiesArrayObjects&&t.copiesArrayObjects!==this.copiesArrayObjects||void 0!==t.copiesKey&&t.copiesKey!==this.copiesKey||void 0!==t.nodeCategoryProperty&&t.nodeCategoryProperty!==this.nodeCategoryProperty)&&q("applyIncrementalJson cannot change Model properties"),sM(this,t);var e=t.insertedNodeKeys,n=t.modifiedNodeData,s=new xt;if(Array.isArray(n))for(var a=0;a<n.length;a++){var u=n[a],c=this.pa(u);null!=c&&s.set(c,u)}if(Array.isArray(e))for(a=e.length,u=0;u<a;u++){var f=this.Yb(c=e[u]);null===f&&(f=(f=s.get(c))?f:this.copyNodeData({}),this.wm(f,c),this.sf(f))}if(Array.isArray(n))for(e=n.length,s=0;s<e;s++)if(u=this.pa(a=n[s]),null!==(u=this.Yb(u))){for(var p in a)"__gohashid"===p||p===this.nodeKeyProperty||this.dk()&&p===this.nodeIsGroupProperty||this.setDataProperty(u,p,a[p]);this.xm(a,u)}if(t=t.removedNodeKeys,Array.isArray(t))for(n=t.length,p=0;p<n;p++)null!==(e=this.Yb(t[p]))&&this.om(e)},S.Fy=function(t,e){t.change!==Jo&&q("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var n=t.object;return t.isTransactionFinished&&n instanceof _e?(void 0===e&&(e=ng(this,this)),aM(this,n),t=this.hw(n,"FinishedUndo"===t.propertyName),this.Mh=null,"2"===e?'{ "incremental": 2'+t+"}":'{ "class": '+this.quote(e)+', "incremental": 1'+this.Fm()+t+"}"):'{ "incremental": 0 }'},S.VA=function(t,e){return this.Fy(t,e)},S.vq=function(t){return void 0===t&&(t=ng(this,this)),'{ "class": '+this.quote(t)+this.Fm()+this.jw()+"}"},S.toJSON=function(t){return this.vq(t)},S.Ax=function(t){var e=null;if("string"==typeof t)try{e=gt.JSON.parse(t)}catch(s){}else"object"==typeof t?e=t:q("Unable to modify a Model from: "+t);var n=e.incremental;"number"!=typeof n&&q("Unable to apply non-incremental changes to Model: "+t),0!==n&&(this.xa("applyIncrementalJson"),this.mq(e),this.Xa("applyIncrementalJson"))},S.fz=function(t){return this.Ax(t)},ct.constructGraphLinksModel=function(){return new ct},(S=ct.prototype).pm=function(t){if(Dn(t))for(var e=t.length,n=0;n<e;n++){var s=t[n];if(Kt(s)){var a=n;s=this.pm(s),Array.isArray(t)?t[a]=s:q("Cannot replace an object in an HTMLCollection or NodeList at "+a)}}else if(Kt(t)){for(e in t)if(Kt(n=t[e])&&(n=this.pm(n),t[e]=n,"points"===e&&Array.isArray(n))){for(a=n.length%2==0,s=0;s<n.length;s++)if("number"!=typeof n[s]){a=!1;break}if(a){for(a=new st,s=0;s<n.length/2;s++)a.add(new A(n[2*s],n[2*s+1]));a.freeze(),t[e]=a}}return function lM(t){if("object"!=typeof t)return t;var e=t.class||"";if("NaN"===e)return NaN;if("Date"===e)return new Date(t.value);if(0!==e.indexOf("go."))return t;var n=t;if("Point"===(e=e.substr(3)))n=new A(ie(t.x),ie(t.y));else if("Size"===e)n=new Dt(ie(t.width),ie(t.height));else if("Rect"===e)n=new z(ie(t.x),ie(t.y),ie(t.width),ie(t.height));else if("Margin"===e)n=new Ct(ie(t.top),ie(t.right),ie(t.bottom),ie(t.left));else if("Spot"===e)n="string"==typeof t.enum?Es(t.enum):new pt(ie(t.x),ie(t.y),ie(t.offsetX),ie(t.offsetY));else if("Brush"===e){if((n=new jt).type=sa(jt,t.type),"string"==typeof t.color&&(n.color=t.color),t.start instanceof pt&&(n.start=t.start),t.end instanceof pt&&(n.end=t.end),"number"==typeof t.startRadius&&(n.startRadius=ie(t.startRadius)),"number"==typeof t.endRadius&&(n.endRadius=ie(t.endRadius)),Kt(t=t.colorStops))for(var s in t)n.addColorStop(parseFloat(s),t[s])}else"Geometry"===e?(n=null,(n="string"==typeof t.path?rt.parse(t.path):new rt).type=sa(rt,t.type),"number"==typeof t.startX&&(n.startX=ie(t.startX)),"number"==typeof t.startY&&(n.startY=ie(t.startY)),"number"==typeof t.endX&&(n.endX=ie(t.endX)),"number"==typeof t.endY&&(n.endY=ie(t.endY)),t.spot1 instanceof pt&&(n.spot1=t.spot1),t.spot2 instanceof pt&&(n.spot2=t.spot2)):"EnumValue"===e&&(0===(s=t.classType).indexOf("go.")&&(s=s.substr(3)),"function"==typeof(s=Qh(s))&&(n=sa(s,t.name)));return n}(t)}return t},S.Gm=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?t===1/0?"9e9999":t===-1/0?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.Gm(t.valueOf()):Dn(t)?Ka(this,t):Kt(t)?xy(this,t):"function"==typeof t?"null":t.toString()},S.yh=function(t){return this.Xt.add(t),this},S.rk=function(t){this.Xt.remove(t)},S.ks=function(t){this.skipsUndoManager||this.undoManager.fv(t);for(var e=this.Xt,n=e.length,s=0;s<n;s++)e.J(s)(t)},S.Wa=function(t,e,n,s,a,u,c){Ye(this,"",t,e,n,s,a,u,c)},S.g=function(t,e,n,s,a){Ye(this,"",De,t,this,e,n,s,a)},S.Os=function(t,e,n,s,a,u){Ye(this,"",De,e,t,n,s,a,u)},ct.prototype.changeState=function(t,e){if(null!==t&&t.model===this)if(t.change===De){var n=t.object,s=t.propertyName,a=t.H(e);s===this.nodeKeyProperty&&this.cb(n)&&(void 0!==(e=t.H(!e))&&this.bb.remove(e),void 0!==a&&this.bb.add(a,n)),oe(n,s,a)}else t.change===Ve?(n=t.newParam,"nodeDataArray"===t.modelChange?Kt(t=t.newValue)&&"number"==typeof n&&(s=this.pa(t),e?(this.Fc[n]===t&&gl(this.Fc,n),void 0!==s&&this.bb.remove(s)):(this.Fc[n]!==t&&qc(this.Fc,n,t),void 0!==s&&this.bb.add(s,t))):""===t.modelChange?((s=t.object)&&!Dn(s)&&t.propertyName&&(s=Ue(t.object,t.propertyName)),Dn(s)&&"number"==typeof n&&(t=t.newValue,e?gl(s,n):qc(s,n,t))):q("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.change===dn?(n=t.oldParam,"nodeDataArray"===t.modelChange?Kt(t=t.oldValue)&&"number"==typeof n&&(s=this.pa(t),e?(this.Fc[n]!==t&&qc(this.Fc,n,t),void 0!==s&&this.bb.add(s,t)):(this.Fc[n]===t&&gl(this.Fc,n),void 0!==s&&this.bb.remove(s))):""===t.modelChange?((s=t.object)&&!Dn(s)&&t.propertyName&&(s=Ue(t.object,t.propertyName)),Dn(s)&&"number"==typeof n&&(t=t.oldValue,e?qc(s,n,t):gl(s,n))):q("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.change!==Jo&&q("unknown ChangedEvent: "+t.toString())},ct.prototype.xa=function(t){return this.undoManager.xa(t)},ct.prototype.Xa=function(t){return this.undoManager.Xa(t)},ct.prototype.Hf=function(){return this.undoManager.Hf()},ct.prototype.commit=function(t,e){void 0===e&&(e="");var n=this.skipsUndoManager;null===e&&(this.skipsUndoManager=!0,e=""),this.undoManager.xa(e);var s=!1;try{t(this),s=!0}finally{s?this.undoManager.Xa(e):this.undoManager.Hf(),this.skipsUndoManager=n}},(S=ct.prototype).Fa=function(t,e){void 0===e&&(e=""),Ye(this,"SourceChanged",Jo,e,t,null,null)},S.pa=function(t){if(null!==t){var e=this.ni;if(""!==e&&void 0!==(e=Ue(t,e))){if(Bl(e))return e;q("Key value for node data "+t+" is not a number or a string: "+e)}}},S.wm=function(t,e){if(null!==t){var n=this.ni;if(""!==n)if(this.cb(t)){var s=Ue(t,n);s!==e&&null===this.Yb(e)&&(oe(t,n,e),void 0!==s&&this.bb.remove(s),this.bb.add(e,t),Ye(this,"nodeKey",De,n,t,s,e),"string"==typeof n&&this.Fa(t,n),this.rq(s,e))}else oe(t,n,e)}},S.cb=function(t){var e=this.pa(t);return void 0!==e&&this.bb.H(e)===t},S.Yb=function(t){return null===t&&q("Model.findNodeDataForKey:key must not be null"),void 0!==t&&Bl(t)?this.bb.H(t):null},S.rv=function(t){if(null!==t){var e=this.ni;if(""!==e){var n=this.pa(t);if(void 0===n||this.bb.contains(n)){var s=this.nl;if(null!==s&&null!=(n=s(this,t))&&!this.bb.contains(n))return void oe(t,e,n);if("string"==typeof n){for(s=2;this.bb.contains(n+s);)s++;oe(t,e,n+s)}else if(void 0===n||"number"==typeof n){for(n=-this.bb.count-1;this.bb.contains(n);)n--;oe(t,e,n)}}}}},S.sf=function(t){null!==t&&(ah(t),this.cb(t)||sx(this,t,!0))},S.bz=function(t){if(Dn(t))for(var e=t.length,n=0;n<e;n++)this.sf(t[n]);else for(t=t.iterator;t.next();)this.sf(t.value)},S.om=function(t){null!==t&&ax(this,t,!0)},S.JA=function(t){if(Dn(t))for(var e=t.length,n=0;n<e;n++)this.om(t[n]);else for(t=t.iterator;t.next();)this.om(t.value)},S.wA=function(t){if(t!==this.nodeDataArray&&Dn(t)){var e=this.vl;e.clear(),e.addAll(this.bb.iteratorKeys);var n=this.tl;n.clear();for(var s=t.length,a=0;a<s;a++){var u=t[a],c=this.pa(u);if(void 0!==c){n.add(c);var f=this.Yb(c);f!==u&&(null!==f?(this.Np(f,u),this.xm(u,f)):(u=this.cloneDeep(u),this.wm(u,c),this.sf(u)))}else c=this.cloneDeep(u),this.sf(c),n.add(this.pa(c))}for(t=e.iterator;t.next();)n.contains(s=t.value)||(s=this.Yb(s))&&this.om(s);e.clear(),n.clear()}},S.rq=function(t,e){void 0!==e&&(t=eg(this,t))instanceof nt&&this.Pf.add(e,t)},S.bw=function(){},S.rm=function(){},S.qm=function(){},S.yq=function(){},S.mz=function(t){void 0===t?this.Pf.clear():this.Pf.remove(t)},ct.prototype.copyNodeData=function(t){if(null===t)return null;var e=this.Jk;return Kt(t=null!==e?e(t,this):qh(this,t,!0))&&bn(t),t},ct.prototype.setDataProperty=function(t,e,n){if(this.cb(t)){if(e===this.nodeKeyProperty)return void this.wm(t,n);if(e===this.nodeCategoryProperty)return void this.vm(t,n)}else!Dy&&t instanceof dt&&(Dy=!0,Ci('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Ci("  Is that really your intent?"));var s=Ue(t,e);s!==n&&(oe(t,e,n),this.Os(t,e,s,n))},(S=ct.prototype).set=function(t,e,n){this.setDataProperty(t,e,n)},S.Np=function(t,e){if(e){var s,n=this.cb(t);for(s in e)"__gohashid"===s||n&&s===this.nodeKeyProperty||this.setDataProperty(t,s,e[s])}},S.Yy=function(t,e){this.ys(t,-1,e)},S.ys=function(t,e,n){0>e&&(e=t.length),qc(t,e,n),Ye(this,"",Ve,"",t,null,n,null,e)},S.Hv=function(t,e){void 0===e&&(e=-1),t===this.Fc&&q("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===e&&(e=t.length-1);var n=t[e];gl(t,e),Ye(this,"",dn,"",t,n,null,e,null)},S.Zp=function(t){if(null===t)return"";var e=this.Aj;return""===e||void 0===(e=Ue(t,e))?"":"string"==typeof e?e:void q("getCategoryForNodeData found a non-string category for "+t+": "+e)},S.vm=function(t,e){if(null!==t){var n=this.Aj;if(""!==n)if(this.cb(t)){var s=Ue(t,n);void 0===s&&(s=""),s!==e&&(oe(t,n,e),Ye(this,"nodeCategory",De,n,t,s,e))}else oe(t,n,e)}},S.xm=function(t,e){this.vm(e,this.Zp(t))},S.fm=function(){return!1},S.dk=function(){return!1},S.Pi=function(){return!1},S.Ds=function(){return!1},S.ek=function(){return!1},kt.Object.defineProperties(ct.prototype,{name:{get:function(){return this.na},set:function(t){var e=this.na;e!==t&&(this.na=t,this.g("name",e,t))}},dataFormat:{get:function(){return this.ln},set:function(t){var e=this.ln;e!==t&&(this.ln=t,this.g("dataFormat",e,t))}},isReadOnly:{get:function(){return this.Sg},set:function(t){var e=this.Sg;e!==t&&(this.Sg=t,this.g("isReadOnly",e,t))}},modelData:{get:function(){return this.j},set:function(t){var e=this.j;e!==t&&(this.j=t,this.g("modelData",e,t),this.Fa(t))}},undoManager:{get:function(){return this.o},set:function(t){var e=this.o;e!==t&&(null!==e&&e.uy(this),this.o=t,null!==t&&t.yx(this))}},skipsUndoManager:{get:function(){return this.kh},set:function(t){this.kh=t}},nodeKeyProperty:{get:function(){return this.ni},set:function(t){var e=this.ni;e!==t&&(""===t&&q("Model.nodeKeyProperty may not be the empty string"),0<this.bb.count&&q("Cannot set Model.nodeKeyProperty when there is existing node data"),this.ni=t,this.g("nodeKeyProperty",e,t))}},makeUniqueKeyFunction:{get:function(){return this.nl},set:function(t){var e=this.nl;e!==t&&(this.nl=t,this.g("makeUniqueKeyFunction",e,t))}},nodeDataArray:{get:function(){return this.Fc},set:function(t){var e=this.Fc;if(e!==t){this.bb.clear(),this.bw();for(var n=t.length,s=0;s<n;s++){var a=t[s];Kt(a)||q("Model.nodeDataArray must only contain Objects, not: "+a),ah(a)}for(this.Fc=t,s=new st,a=0;a<n;a++){var u=t[a],c=this.pa(u);void 0===c||null!==this.bb.H(c)?s.add(u):this.bb.add(c,u)}for(s=s.iterator;s.next();)this.rv(a=s.value),void 0!==(u=this.pa(a))&&this.bb.add(u,a);for(Ye(this,"nodeDataArray",De,"nodeDataArray",this,e,t),e=0;e<n;e++)this.rm(s=t[e]),this.qm(s);Array.isArray(t)||(this.isReadOnly=!0)}}},copyNodeDataFunction:{get:function(){return this.Jk},set:function(t){var e=this.Jk;e!==t&&(this.Jk=t,this.g("copyNodeDataFunction",e,t))}},copiesArrays:{get:function(){return this.cn},set:function(t){var e=this.cn;e!==t&&(this.cn=t,this.g("copiesArrays",e,t))}},copiesArrayObjects:{get:function(){return this.bn},set:function(t){var e=this.bn;e!==t&&(this.bn=t,this.g("copiesArrayObjects",e,t))}},copiesKey:{get:function(){return this.en},set:function(t){var e=this.en;e!==t&&(this.en=t,this.g("copiesKey",e,t))}},afterCopyFunction:{get:function(){return this.Om},set:function(t){var e=this.Om;e!==t&&(this.Om=t,this.g("afterCopyFunction",e,t))}},nodeCategoryProperty:{get:function(){return this.Aj},set:function(t){var e=this.Aj;e!==t&&(this.Aj=t,this.g("nodeCategoryProperty",e,t))}},type:{get:function(){return"Model"}}}),ct.prototype.setCategoryForNodeData=ct.prototype.vm,ct.prototype.getCategoryForNodeData=ct.prototype.Zp,ct.prototype.removeArrayItem=ct.prototype.Hv,ct.prototype.insertArrayItem=ct.prototype.ys,ct.prototype.addArrayItem=ct.prototype.Yy,ct.prototype.assignAllDataProperties=ct.prototype.Np,ct.prototype.set=ct.prototype.set,ct.prototype.clearUnresolvedReferences=ct.prototype.mz,ct.prototype.mergeNodeDataArray=ct.prototype.wA,ct.prototype.removeNodeDataCollection=ct.prototype.JA,ct.prototype.removeNodeData=ct.prototype.om,ct.prototype.addNodeDataCollection=ct.prototype.bz,ct.prototype.addNodeData=ct.prototype.sf,ct.prototype.makeNodeDataKeyUnique=ct.prototype.rv,ct.prototype.findNodeDataForKey=ct.prototype.Yb,ct.prototype.containsNodeData=ct.prototype.cb,ct.prototype.setKeyForNodeData=ct.prototype.wm,ct.prototype.getKeyForNodeData=ct.prototype.pa,ct.prototype.updateTargetBindings=ct.prototype.Fa,ct.prototype.commit=ct.prototype.commit,ct.prototype.rollbackTransaction=ct.prototype.Hf,ct.prototype.commitTransaction=ct.prototype.Xa,ct.prototype.startTransaction=ct.prototype.xa,ct.prototype.raiseDataChanged=ct.prototype.Os,ct.prototype.raiseChanged=ct.prototype.g,ct.prototype.raiseChangedEvent=ct.prototype.Wa,ct.prototype.removeChangedListener=ct.prototype.rk,ct.prototype.addChangedListener=ct.prototype.yh,ct.prototype.writeJsonValue=ct.prototype.Gm,ct.prototype.replaceJsonObjects=ct.prototype.pm,ct.prototype.applyIncrementalJSON=ct.prototype.fz,ct.prototype.applyIncrementalJson=ct.prototype.Ax,ct.prototype.toJSON=ct.prototype.toJSON,ct.prototype.toJson=ct.prototype.vq,ct.prototype.toIncrementalJSON=ct.prototype.VA,ct.prototype.toIncrementalJson=ct.prototype.Fy,ct.prototype.toIncrementalData=ct.prototype.UA,ct.prototype.clear=ct.prototype.clear;var Dy=!1,Zn={};function Ae(t,e,n,s){bn(this),this.v=!1,void 0===t&&(t=""),void 0===e&&(e=t),void 0===n&&(n=null),this.j=-1,this.od=null,this.Ql=t,this.Pl=this.yp=0,this.Ur=null,this.Yn=!1,this.Il=e,this.an=n,void 0===s?(this.ql=ig,this.Ck=null):(this.ql=to,this.Ck=s),this.Mt=new nt}function Er(t,e,n){return null===(t=t.sourceName)||""===t?e:"/"===t?n.part:"."===t?n:".."===t?n.panel:e.Ya(t)}ct.className="Model",ct.fromJSON=ct.fromJson=function(t,e){void 0===e&&(e=null);var n=null;if("string"==typeof t)try{n=gt.JSON.parse(t)}catch(u){}else"object"==typeof t?n=t:q("Unable to construct a Model from: "+t);if(null===e){t=null;var s=n.class;if("string"==typeof s)try{var a=null;0===s.indexOf("go.")?a=Qh(s=s.substr(3)):null===(a=Qh(s))&&(a=gt[s]),"function"==typeof a&&(t=new a)}catch(u){}null===t||t instanceof ct?e=t:q("Unable to construct a Model of declared class: "+n.class)}return null===e&&(e=ct.constructGraphLinksModel()),e.nq(n),e.Ev(n),e},ct.safePropertyValue=Ue,ct.safePropertySet=oe,Zn.Brush=jt,Zn.ChangedEvent=Ne,Zn.Geometry=rt,Zn.Margin=Ct,Zn.Panel=W,Zn.Point=A,Zn.Rect=z,Zn.Size=Dt,Zn.Spot=pt,Zn.Transaction=_e,Zn.UndoManager=Re,Ae.prototype.copy=function(){var t=new Ae;return t.Ql=this.Ql,t.yp=this.yp,t.Pl=this.Pl,t.Ur=this.Ur,t.Yn=this.Yn,t.Il=this.Il,t.an=this.an,t.ql=this.ql,t.Ck=this.Ck,t},(S=Ae.prototype).gb=function(t){t.classType===Ae&&(this.mode=t)},S.toString=function(){return"Binding("+this.targetProperty+":"+this.sourceProperty+(-1!==this.Xi?" "+this.Xi:"")+" "+this.mode.name+")"},S.freeze=function(){return this.v=!0,this},S.ea=function(){return this.v=!1,this},S.ly=function(t){return void 0===t&&(t=null),this.mode=to,this.backConverter=t,this},S.kq=function(t){return void 0===t&&(t=""),this.sourceName=t,this.isToModel=!1,this},S.zA=function(){return this.sourceName=null,this.isToModel=!0,this},S.cw=function(t,e,n){var s=this.Il;if(void 0===n||""===s||s===n){n=this.Ql;var a=this.an;if(null===a&&""===n)Ci("Binding error: target property is the empty string: "+this.toString());else{var u=e;if(""!==s&&(u=Ue(e,s)),void 0!==u)if(null===a)""!==n&&oe(t,n,u);else try{""!==n?oe(t,n,a(u,t)):a(u,t)}catch(f){}}}},S.Aq=function(t,e,n,s){if(this.ql===to){var a=this.Ql;if(void 0===n||a===n){n=this.Il;var u=this.Ck,c=t;if(""!==a&&(c=Ue(t,a)),void 0!==c&&!this.Mt.contains(t))try{this.Mt.add(t);var f=null!==s?s.diagram:null,p=null!==f?f.model:null;if(null===u){if(""!==n)null!==p?p.setDataProperty(e,n,c):oe(e,n,c);else if(null!==p&&null!==s&&0<=s.itemIndex&&null!==s.panel&&Array.isArray(s.panel.itemArray)){var g=s.itemIndex,y=s.panel.itemArray;p.Hv(y,g),p.ys(y,g,c)}}else try{if(""!==n){var v=u(c,e,p);null!==p?p.setDataProperty(e,n,v):oe(e,n,v)}else{var _=u(c,e,p);if(void 0!==_&&null!==p&&null!==s&&0<=s.itemIndex&&null!==s.panel&&Array.isArray(s.panel.itemArray)){var b=s.itemIndex,D=s.panel.itemArray;p.Hv(D,b),p.ys(D,b,_)}}}catch(k){}}finally{this.Mt.remove(t)}}}},kt.Object.defineProperties(Ae.prototype,{Xi:{get:function(){return this.j},set:function(t){this.v&&It(this),this.j=t}},targetProperty:{get:function(){return this.Ql},set:function(t){this.v&&It(this),this.Ql=t}},sourceName:{get:function(){return this.Ur},set:function(t){this.v&&It(this),this.Ur=t,null!==t&&(this.Yn=!1)}},isToModel:{get:function(){return this.Yn},set:function(t){this.v&&It(this),this.Yn=t}},sourceProperty:{get:function(){return this.Il},set:function(t){this.v&&It(this),this.Il=t}},converter:{get:function(){return this.an},set:function(t){this.v&&It(this),this.an=t}},backConverter:{get:function(){return this.Ck},set:function(t){this.v&&It(this),this.Ck=t}},mode:{get:function(){return this.ql},set:function(t){this.v&&It(this),this.ql=t}}}),Ae.prototype.updateSource=Ae.prototype.Aq,Ae.prototype.updateTarget=Ae.prototype.cw,Ae.prototype.ofModel=Ae.prototype.zA,Ae.prototype.ofObject=Ae.prototype.kq,Ae.prototype.makeTwoWay=Ae.prototype.ly;var tc="Binding",ig=new Q(Ae,"OneWay",1),to=new Q(Ae,"TwoWay",2);function vt(t,e,n){ct.call(this),this.yw=',\n  "insertedLinkKeys": ',this.Ly=',\n  "modifiedLinkData": ',this.Aw=',\n  "removedLinkKeys": ',this.Yc=[],this.Vf=new nt,this.kb=new xt,this.hi="",this.dj=this.Ik=this.ol=null,this.af="from",this.bf="to",this.wj=this.vj="",this.uj="category",this.ce="",this.ul="isGroup",this.Ae="group",this.dn=!1,void 0!==e&&(this.linkDataArray=e),void 0!==t&&(Dn(t)?this.nodeDataArray=t:Object.assign(this,t)),n&&Object.assign(this,n)}function ec(t,e){for(var n=new nt,s=0;s<t.linkDataArray.length;s++){var a=t.linkDataArray[s];tg(t,e,a,a,n)}return n}function ai(t,e,n){if(null!==e&&""!==(t=n?t.af:t.bf)&&void 0!==(t=Ue(e,t))){if(Bl(t))return t;q((n?"FromKey":"ToKey")+" value for link data "+e+" is not a number or a string: "+t)}}function xa(t,e,n,s){if(null===n&&(n=void 0),null!==e){var a=s?t.af:t.bf;if(""!==a)if(n=t.hm(n),t.yc(e)){var u=Ue(e,a);u!==n&&(Lo(t,u,e),oe(e,a,n),null===t.Yb(n)&&Ro(t,n,e),Ye(t,s?"linkFromKey":"linkToKey",De,a,e,u,n),"string"==typeof a&&t.Fa(e,a))}else oe(e,a,n)}}function Gl(t,e,n){return null===e||""===(t=n?t.vj:t.wj)||void 0===(e=Ue(e,t))?"":e}function Da(t,e,n,s){if(null!==e){var a=s?t.vj:t.wj;if(""!==a)if(t.yc(e)){var u=Ue(e,a);void 0===u&&(u=""),u!==n&&(oe(e,a,n),Ye(t,s?"linkFromPortId":"linkToPortId",De,a,e,u,n),"string"==typeof a&&t.Fa(e,a))}else oe(e,a,n)}}function nc(t,e,n){if(""!==t.linkKeyProperty){var s=t.qc(e);if(void 0!==s&&t.kb.H(s)===e)return;t.Is(e),void 0===(s=t.qc(e))&&q("GraphLinksModel.makeLinkDataKeyUnique failed on "+e+". Data not added to model."),t.kb.add(s,e)}t.Vf.add(e),s=null,n&&t.Yc.splice(s=t.Yc.length,0,e),Ye(t,"linkDataArray",Ve,"linkDataArray",t,null,e,null,s),ju(t,e)}function ic(t,e,n){t.Vf.remove(e);var s=t.qc(e);if(void 0!==s&&t.kb.remove(s),s=null,n){if(0>(s=t.Yc.indexOf(e)))return;t.Yc.splice(s,1)}if(Ye(t,"linkDataArray",dn,"linkDataArray",t,e,null,s,null),Lo(t,n=ai(t,e,!0),e),Lo(t,n=ai(t,e,!1),e),s=t.Bf(e),Array.isArray(s))for(var a=s.length,u=0;u<a;u++)Lo(t,n=s[u],e)}function ju(t,e){var n=ai(t,e,!0);n=t.hm(n),null===t.Yb(n)&&Ro(t,n,e),n=ai(t,e,!1),n=t.hm(n),null===t.Yb(n)&&Ro(t,n,e);var s=t.Bf(e);if(Array.isArray(s))for(var a=s.length,u=0;u<a;u++)null===t.Yb(n=s[u])&&Ro(t,n,e)}function rc(t,e,n){t.tq(n,t.us(e)),t.Ov(n,t.Xx(e)),t.Sv(n,t.$x(e)),t.Ts(n,t.Bf(e)),t.Pv(n,t.Yx(e)),t.Tv(n,t.ay(e))}Ae.className="Binding",Ae.parseEnum=function(t,e){return function(n){return null===(n=sa(t,n))?e:n}},Ae.toString=xr,Ae.OneWay=ig,Ae.TwoWay=to,Wt(vt,ct),vt.constructGraphLinksModel=ct.constructGraphLinksModel,vt.prototype.cloneProtected=function(t){ct.prototype.cloneProtected.call(this,t),t.hi=this.hi,t.ol=this.ol,t.Ik=this.Ik,t.af=this.af,t.bf=this.bf,t.vj=this.vj,t.wj=this.wj,t.uj=this.uj,t.ce=this.ce,t.ul=this.ul,t.Ae=this.Ae,t.dn=this.dn},(S=vt.prototype).clear=function(){ct.prototype.clear.call(this),this.Yc=[],this.kb.clear(),this.Vf.clear()},S.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.vq();var e=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){e+="\n node data:";var s,n=(t=this.nodeDataArray).length;for(s=0;s<n;s++){var a=t[s];e+=" "+this.pa(a)+":"+xr(a)}for(e+="\n link data:",n=(t=this.linkDataArray).length,s=0;s<n;s++)e+=" "+ai(this,a=t[s],!0)+"--\x3e"+ai(this,a,!1)}return e},S.iw=function(t,e){""===this.linkKeyProperty&&q("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalData() to succeed.");var n=ct.prototype.iw.call(this,t,e),s=this,a=new nt,u=new nt,c=new nt,f=this.Mh;t.changes.each(function(y){y.model===s&&("linkDataArray"===y.modelChange?y.change===Ve?a.add(y.newValue):y.change===dn&&c.add(y.oldValue):s.yc(y.object)?u.add(y.object):null!==y.object&&(null!==y.object&&f&&f.contains(y.object)?f.get(y.object).each(function(v){s.yc(v)&&u.add(v)}):y.object instanceof ct||s.cb(y.object)||ec(s,y.object).each(function(v){u.add(v)})))});var p=this.tl;p.clear(),a.each(function(y){p.add(s.qc(y)),e||u.add(y)});var g=this.vl;return g.clear(),c.each(function(y){g.add(s.qc(y)),e&&u.add(y)}),t=s.cloneDeep(u.ya()),0<p.count&&(null===n&&(n={}),e?n.removedLinkKeys=p.ya():n.insertedLinkKeys=p.ya()),0<t.length&&(null===n&&(n={}),n.modifiedLinkData=t),0<g.count&&(null===n&&(n={}),e?n.insertedLinkKeys=g.ya():n.removedLinkKeys=g.ya()),g.clear(),p.clear(),n},S.Fm=function(){var t=ct.prototype.Fm.call(this),e="";return"category"!==this.linkCategoryProperty&&"string"==typeof this.linkCategoryProperty&&(e+=',\n  "linkCategoryProperty": '+this.quote(this.linkCategoryProperty)),""!==this.linkKeyProperty&&"string"==typeof this.linkKeyProperty&&(e+=',\n  "linkKeyProperty": '+this.quote(this.linkKeyProperty)),"from"!==this.linkFromKeyProperty&&"string"==typeof this.linkFromKeyProperty&&(e+=',\n  "linkFromKeyProperty": '+this.quote(this.linkFromKeyProperty)),"to"!==this.linkToKeyProperty&&"string"==typeof this.linkToKeyProperty&&(e+=',\n  "linkToKeyProperty": '+this.quote(this.linkToKeyProperty)),""!==this.linkFromPortIdProperty&&"string"==typeof this.linkFromPortIdProperty&&(e+=',\n  "linkFromPortIdProperty": '+this.quote(this.linkFromPortIdProperty)),""!==this.linkToPortIdProperty&&"string"==typeof this.linkToPortIdProperty&&(e+=',\n  "linkToPortIdProperty": '+this.quote(this.linkToPortIdProperty)),""!==this.linkLabelKeysProperty&&"string"==typeof this.linkLabelKeysProperty&&(e+=',\n  "linkLabelKeysProperty": '+this.quote(this.linkLabelKeysProperty)),"isGroup"!==this.nodeIsGroupProperty&&"string"==typeof this.nodeIsGroupProperty&&(e+=',\n  "nodeIsGroupProperty": '+this.quote(this.nodeIsGroupProperty)),"group"!==this.nodeGroupKeyProperty&&"string"==typeof this.nodeGroupKeyProperty&&(e+=',\n  "nodeGroupKeyProperty": '+this.quote(this.nodeGroupKeyProperty)),t+e},S.nq=function(t){ct.prototype.nq.call(this,t),t.linkKeyProperty&&(this.linkKeyProperty=t.linkKeyProperty),t.linkFromKeyProperty&&(this.linkFromKeyProperty=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.linkToKeyProperty=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.linkFromPortIdProperty=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.linkToPortIdProperty=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.linkCategoryProperty=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.linkLabelKeysProperty=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.nodeIsGroupProperty=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.nodeGroupKeyProperty=t.nodeGroupKeyProperty)},S.jw=function(){return ct.prototype.jw.call(this)+',\n  "linkDataArray": '+Ka(this,this.linkDataArray,!0)},S.Ev=function(t){ct.prototype.Ev.call(this,t),t=t.linkDataArray,Array.isArray(t)&&(this.pm(t),this.linkDataArray=t)},S.hw=function(t,e){""===this.linkKeyProperty&&q("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var n=ct.prototype.hw.call(this,t,e),s=this,a=new nt,u=new nt,c=new nt,f=this.Mh;t.changes.each(function(y){y.model===s&&("linkDataArray"===y.modelChange?y.change===Ve?a.add(y.newValue):y.change===dn&&c.add(y.oldValue):s.yc(y.object)?u.add(y.object):null!==y.object&&(null!==y.object&&f&&f.contains(y.object)?f.get(y.object).each(function(v){s.yc(v)&&u.add(v)}):y.object instanceof ct||s.cb(y.object)||ec(s,y.object).each(function(v){u.add(v)})))});var p=this.tl;p.clear(),a.each(function(y){p.add(s.qc(y)),e||u.add(y)});var g=this.vl;return g.clear(),c.each(function(y){g.add(s.qc(y)),e&&u.add(y)}),t=n,0<p.count&&(t+=(e?this.Aw:this.yw)+Ka(this,p.ya(),!0)),0<u.count&&(t+=this.Ly+Ka(this,u.ya(),!0)),0<g.count&&(t+=(e?this.yw:this.Aw)+Ka(this,g.ya(),!0)),g.clear(),p.clear(),t},S.mq=function(t){(void 0!==t.linkCategoryProperty&&t.linkCategoryProperty!==this.linkCategoryProperty||void 0!==t.linkKeyProperty&&t.linkKeyProperty!==this.linkKeyProperty||void 0!==t.linkFromKeyProperty&&t.linkFromKeyProperty!==this.linkFromKeyProperty||void 0!==t.linkToKeyProperty&&t.linkToKeyProperty!==this.linkToKeyProperty||void 0!==t.linkFromPortIdProperty&&t.linkFromPortIdProperty!==this.linkFromPortIdProperty||void 0!==t.linkToPortIdProperty&&t.linkToPortIdProperty!==this.linkToPortIdProperty||void 0!==t.linkLabelKeysProperty&&t.linkLabelKeysProperty!==this.linkLabelKeysProperty||void 0!==t.nodeIsGroupProperty&&t.nodeIsGroupProperty!==this.nodeIsGroupProperty||void 0!==t.nodeGroupKeyProperty&&t.nodeGroupKeyProperty!==this.nodeGroupKeyProperty)&&q("applyIncrementalJson cannot change Model properties"),ct.prototype.mq.call(this,t);var e=t.insertedLinkKeys;if(Array.isArray(e))for(var n=e.length,s=0;s<n;s++){var a=e[s],u=this.Dh(a);null===u&&(u=this.Sp({}),this.Ss(u,a),this.Bi(u))}if(e=t.modifiedLinkData,Array.isArray(e))for(n=e.length,s=0;s<n;s++)if(u=this.qc(a=e[s]),null!==(u=this.Dh(u))){for(var c in a)"__gohashid"!==c&&c!==this.linkKeyProperty&&this.setDataProperty(u,c,a[c]);rc(this,a,u)}if(t=t.removedLinkKeys,Array.isArray(t))for(c=t.length,e=0;e<c;e++)null!==(n=this.Dh(t[e]))&&this.nm(n)},vt.prototype.changeState=function(t,e){if(null!==t&&t.model===this){if(t.change===De){var n=t.object,s=t.propertyName;if(s===this.linkKeyProperty&&this.yc(n)){var a=t.H(e);return void 0!==(e=t.H(!e))&&this.kb.remove(e),void 0!==a&&this.kb.add(a,n),void oe(n,s,a)}}else if(t.change===Ve){if(n=t.newParam,"linkDataArray"===t.modelChange)return void(Kt(t=t.newValue)&&"number"==typeof n&&(s=this.qc(t),e?(this.Vf.remove(t),this.Yc[n]===t&&this.Yc.splice(n,1),void 0!==s&&this.kb.remove(s)):(this.Vf.add(t),this.Yc[n]!==t&&this.Yc.splice(n,0,t),void 0!==s&&this.kb.add(s,t))));if("linkLabelKeys"===t.modelChange)return s=this.Bf(t.object),void(Array.isArray(s)&&"number"==typeof n&&(e?(n=s.indexOf(t.newValue),0<=n&&s.splice(n,1)):0>s.indexOf(t.newValue)&&s.splice(n,0,t.newValue)))}else if(t.change===dn){if(n=t.oldParam,"linkDataArray"===t.modelChange)return void(Kt(t=t.oldValue)&&"number"==typeof n&&(s=this.qc(t),e?(this.Vf.add(t),this.Yc[n]!==t&&this.Yc.splice(n,0,t),void 0!==s&&this.kb.add(s,t)):(this.Vf.remove(t),this.Yc[n]===t&&this.Yc.splice(n,1),void 0!==s&&this.kb.remove(s))));if("linkLabelKeys"===t.modelChange)return s=this.Bf(t.object),void(Array.isArray(s)&&"number"==typeof n&&(e?0>s.indexOf(t.newValue)&&s.splice(n,0,t.newValue):(n=s.indexOf(t.newValue),0<=n&&s.splice(n,1))))}ct.prototype.changeState.call(this,t,e)}},(S=vt.prototype).hm=function(t){if(void 0!==t){var e=this.dj;if(null!==e){var n=this.Yb(t);null===n&&(oe(n=this.copyNodeData(e),this.nodeKeyProperty,t),this.sf(n))}return t}},S.Xx=function(t){return ai(this,t,!0)},S.Ov=function(t,e){xa(this,t,e,!0)},S.$x=function(t){return ai(this,t,!1)},S.Sv=function(t,e){xa(this,t,e,!1)},S.Yx=function(t){return Gl(this,t,!0)},S.Pv=function(t,e){Da(this,t,e,!0)},S.ay=function(t){return Gl(this,t,!1)},S.Tv=function(t,e){Da(this,t,e,!1)},S.Bf=function(t){if(null===t)return rg;var e=this.ce;return""===e||void 0===(t=Ue(t,e))?rg:t},S.Ts=function(t,e){if(null!==t){var n=this.ce;if(""!==n)if(this.yc(t)){var s=Ue(t,n);if(void 0===s&&(s=rg),s!==e){if(Array.isArray(s))for(var a=s.length,u=0;u<a;u++)Lo(this,s[u],t);for(oe(t,n,e),a=e.length,u=0;u<a;u++){var c=e[u];null===this.Yb(c)&&Ro(this,c,t)}Ye(this,"linkLabelKeys",De,n,t,s,e),"string"==typeof n&&this.Fa(t,n)}}else oe(t,n,e)}},S.Bu=function(t,e){if(null!=e&&null!==t){var n=this.ce;if(""!==n){var s=Ue(t,n);if(void 0===s)(n=[]).push(e),this.Ts(t,n);else if(Array.isArray(s)){var a=s.indexOf(e);0<=a||(a=s.length,s.push(e),this.yc(t)&&(null===this.Yb(e)&&Ro(this,e,t),Ye(this,"linkLabelKeys",Ve,n,t,null,e,null,a)))}else q(n+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},S.ty=function(t,e){if(null!=e&&null!==t){var n=this.ce;if(""!==n){var s=Ue(t,n);if(Array.isArray(s)){var a=s.indexOf(e);0>a||(s.splice(a,1),this.yc(t)&&(Lo(this,e,t),Ye(this,"linkLabelKeys",dn,n,t,e,null,a,null)))}else void 0!==s&&q(n+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},S.qc=function(t){if(null!==t){var e=this.hi;if(""!==e&&void 0!==(e=Ue(t,e))){if(Bl(e))return e;q("Key value for link data "+t+" is not a number or a string: "+e)}}},S.Ss=function(t,e){if(null!==t){var n=this.hi;if(""!==n)if(this.yc(t)){var s=Ue(t,n);s!==e&&null===this.Dh(e)&&(oe(t,n,e),void 0!==s&&this.kb.remove(s),this.kb.add(e,t),Ye(this,"linkKey",De,n,t,s,e),"string"==typeof n&&this.Fa(t,n))}else oe(t,n,e)}},S.Dh=function(t){return null===t&&q("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&Bl(t)?this.kb.H(t):null},S.Is=function(t){if(null!==t){var e=this.hi;if(""!==e){var n=this.qc(t);if(void 0===n||this.kb.contains(n)){var s=this.ol;if(null!==s&&null!=(n=s(this,t))&&!this.kb.contains(n))return void oe(t,e,n);if("string"==typeof n){for(s=2;this.kb.contains(n+s);)s++;oe(t,e,n+s)}else if(void 0===n||"number"==typeof n){for(n=-this.kb.count-1;this.kb.contains(n);)n--;oe(t,e,n)}}}}},S.yc=function(t){return null!==t&&this.Vf.contains(t)},S.Bi=function(t){null!==t&&(ah(t),this.yc(t)||nc(this,t,!0))},S.az=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.Bi(t[n]);else for(t=t.iterator;t.next();)this.Bi(t.value)},S.nm=function(t){null!==t&&ic(this,t,!0)},S.HA=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;n++)this.nm(t[n]);else for(t=t.iterator;t.next();)this.nm(t.value)},S.vA=function(t){if(""===this.linkKeyProperty&&q("GraphLinksModel.linkKeyProperty must not be an empty string for .mergeLinkDataArray() to succeed."),t!==this.linkDataArray&&Dn(t)){var e=this.vl;e.clear(),e.addAll(this.kb.iteratorKeys);var n=this.tl;n.clear();for(var s=t.length,a=0;a<s;a++){var u=t[a],c=this.qc(u);if(void 0!==c){n.add(c);var f=this.Dh(c);f!==u&&(null!==f?(this.Np(f,u),rc(this,u,f)):(u=this.cloneDeep(u),this.Ss(u,c),this.Bi(u)))}else c=this.cloneDeep(u),this.Bi(c),n.add(this.qc(c))}for(t=e.iterator;t.next();)n.contains(s=t.value)||(s=this.Dh(s))&&this.nm(s);e.clear(),n.clear()}},S.Sp=function(t){if(null===t)return null;var e=this.Ik;return Kt(t=null!==e?e(t,this):qh(this,t,!0))&&(bn(t),""!==this.af&&oe(t,this.af,void 0),""!==this.bf&&oe(t,this.bf,void 0),""!==this.ce&&oe(t,this.ce,[])),t},S.lv=function(t){if(null===t)return!1;var e=this.ul;return""!==e&&!!Ue(t,e)},S.Eh=function(t){if(null!==t){var e=this.Ae;if(""!==e&&void 0!==(e=Ue(t,e))){if(Bl(e))return e;q("GroupKey value for node data "+t+" is not a number or a string: "+e)}}},S.uq=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.Ae;if(""!==n)if(this.cb(t)){var s=Ue(t,n);s!==e&&(Lo(this,s,t),oe(t,n,e),null===this.Yb(e)&&Ro(this,e,t),Ye(this,"nodeGroupKey",De,n,t,s,e),"string"==typeof n&&this.Fa(t,n))}else oe(t,n,e)}},vt.prototype.copyNodeData=function(t){return null===t?null:(t=ct.prototype.copyNodeData.call(this,t),this.Tj||""===this.Ae||void 0===Ue(t,this.Ae)||oe(t,this.Ae,void 0),t)},vt.prototype.setDataProperty=function(t,e,n){if(this.cb(t)){if(e===this.nodeKeyProperty)return void this.wm(t,n);if(e===this.nodeCategoryProperty)return void this.vm(t,n);if(e===this.nodeGroupKeyProperty)return void this.uq(t,n)}else if(this.yc(t)){if(e===this.linkFromKeyProperty)return void xa(this,t,n,!0);if(e===this.linkToKeyProperty)return void xa(this,t,n,!1);if(e===this.linkFromPortIdProperty)return void Da(this,t,n,!0);if(e===this.linkToPortIdProperty)return void Da(this,t,n,!1);if(e===this.linkKeyProperty)return void this.Ss(t,n);if(e===this.linkCategoryProperty)return void this.tq(t,n);if(e===this.linkLabelKeysProperty)return void this.Ts(t,n)}var s=Ue(t,e);s!==n&&(oe(t,e,n),this.Os(t,e,s,n))},(S=vt.prototype).Np=function(t,e){if(e){var a,n=this.cb(t),s=this.yc(t);for(a in e)"__gohashid"===a||n&&a===this.nodeKeyProperty||n&&a===this.nodeIsGroupProperty&&Ue(t,a)===e[a]||s&&a===this.linkKeyProperty||this.setDataProperty(t,a,e[a])}},S.rq=function(t,e){ct.prototype.rq.call(this,t,e);for(var n=this.bb.iterator;n.next();)this.Jv(n.value,t,e);for(n=this.Vf.iterator;n.next();){var s=n.value,a=t,u=e;if(ai(this,s,!0)===a){var c=this.af;oe(s,c,u),Ye(this,"linkFromKey",De,c,s,a,u),"string"==typeof c&&this.Fa(s,c)}if(ai(this,s,!1)===a&&(oe(s,c=this.bf,u),Ye(this,"linkToKey",De,c,s,a,u),"string"==typeof c&&this.Fa(s,c)),c=this.Bf(s),Array.isArray(c))for(var f=c.length,p=this.ce,g=0;g<f;g++)c[g]===a&&(c[g]=u,Ye(this,"linkLabelKeys",Ve,p,s,a,u,g,g))}},S.Jv=function(t,e,n){if(this.Eh(t)===e){var s=this.Ae;oe(t,s,n),Ye(this,"nodeGroupKey",De,s,t,e,n),"string"==typeof s&&this.Fa(t,s)}},S.bw=function(){ct.prototype.bw.call(this);for(var t=this.linkDataArray,e=t.length,n=0;n<e;n++)ju(this,t[n])},S.rm=function(t){ct.prototype.rm.call(this,t);var e=eg(this,t=this.pa(t));if(null!==e){var n=Lt();for(e=e.iterator;e.next();){var s=e.value;if(this.cb(s)){if(this.Eh(s)===t){var a=this.Ae;Ye(this,"nodeGroupKey",De,a,s,t,t),"string"==typeof a&&this.Fa(s,a),n.push(s)}}else if(ai(this,s,!0)===t&&(Ye(this,"linkFromKey",De,a=this.af,s,t,t),"string"==typeof a&&this.Fa(s,a),n.push(s)),ai(this,s,!1)===t&&(Ye(this,"linkToKey",De,a=this.bf,s,t,t),"string"==typeof a&&this.Fa(s,a),n.push(s)),a=this.Bf(s),Array.isArray(a))for(var u=a.length,c=this.ce,f=0;f<u;f++)a[f]===t&&(Ye(this,"linkLabelKeys",Ve,c,s,t,t,f,f),n.push(s))}for(e=0;e<n.length;e++)Lo(this,t,n[e]);ee(n)}},S.qm=function(t){ct.prototype.qm.call(this,t);var e=this.Eh(t);null===this.Yb(e)&&Ro(this,e,t)},S.yq=function(t){ct.prototype.yq.call(this,t),Lo(this,this.Eh(t),t)},S.us=function(t){if(null===t)return"";var e=this.uj;return""===e||void 0===(e=Ue(t,e))?"":"string"==typeof e?e:void q("getCategoryForLinkData found a non-string category for "+t+": "+e)},vt.prototype.getLinkCategoryForData=function(t){return this.us(t)},vt.prototype.tq=function(t,e){if(null!==t){var n=this.uj;if(""!==n)if(this.yc(t)){var s=Ue(t,n);void 0===s&&(s=""),s!==e&&(oe(t,n,e),Ye(this,"linkCategory",De,n,t,s,e),"string"==typeof n&&this.Fa(t,n))}else oe(t,n,e)}},vt.prototype.setLinkCategoryForData=function(t,e){this.tq(t,e)},(S=vt.prototype).xm=function(t,e){ct.prototype.xm.call(this,t,e),this.uq(e,this.Eh(t))},S.dk=function(){return!0},S.Pi=function(){return!0},S.Ds=function(){return!0},S.ek=function(){return!0},kt.Object.defineProperties(vt.prototype,{archetypeNodeData:{get:function(){return this.dj},set:function(t){var e=this.dj;e!==t&&(this.dj=t,this.g("archetypeNodeData",e,t))}},linkFromKeyProperty:{get:function(){return this.af},set:function(t){var e=this.af;e!==t&&(this.af=t,this.g("linkFromKeyProperty",e,t))}},linkToKeyProperty:{get:function(){return this.bf},set:function(t){var e=this.bf;e!==t&&(this.bf=t,this.g("linkToKeyProperty",e,t))}},linkFromPortIdProperty:{get:function(){return this.vj},set:function(t){var e=this.vj;e!==t&&(this.vj=t,this.g("linkFromPortIdProperty",e,t))}},linkToPortIdProperty:{get:function(){return this.wj},set:function(t){var e=this.wj;e!==t&&(this.wj=t,this.g("linkToPortIdProperty",e,t))}},linkLabelKeysProperty:{get:function(){return this.ce},set:function(t){var e=this.ce;e!==t&&(this.ce=t,this.g("linkLabelKeysProperty",e,t))}},linkDataArray:{get:function(){return this.Yc},set:function(t){var e=this.Yc;if(e!==t){this.kb.clear();for(var n=t.length,s=0;s<n;s++){var a=t[s];Kt(a)||q("GraphLinksModel.linkDataArray must only contain Objects, not: "+a),ah(a)}if(this.Yc=t,""!==this.linkKeyProperty){for(s=new st,a=0;a<n;a++){var u=t[a],c=this.qc(u);void 0===c||null!==this.kb.H(c)?s.add(u):this.kb.add(c,u)}for(s=s.iterator;s.next();)this.Is(a=s.value),void 0!==(u=this.qc(a))&&this.kb.add(u,a)}for(s=new nt,a=0;a<n;a++)s.add(t[a]);for(this.Vf=s,Ye(this,"linkDataArray",De,"linkDataArray",this,e,t),e=0;e<n;e++)ju(this,t[e])}}},linkKeyProperty:{get:function(){return this.hi},set:function(t){var e=this.hi;if(e!==t){this.hi=t,this.kb.clear();for(var n=this.linkDataArray.length,s=0;s<n;s++){var a=this.linkDataArray[s],u=this.qc(a);void 0===u&&(this.Is(a),u=this.qc(a)),void 0!==u&&this.kb.add(u,a)}this.g("linkKeyProperty",e,t)}}},makeUniqueLinkKeyFunction:{get:function(){return this.ol},set:function(t){var e=this.ol;e!==t&&(this.ol=t,this.g("makeUniqueLinkKeyFunction",e,t))}},copyLinkDataFunction:{get:function(){return this.Ik},set:function(t){var e=this.Ik;e!==t&&(this.Ik=t,this.g("copyLinkDataFunction",e,t))}},nodeIsGroupProperty:{get:function(){return this.ul},set:function(t){var e=this.ul;e!==t&&(this.ul=t,this.g("nodeIsGroupProperty",e,t))}},nodeGroupKeyProperty:{get:function(){return this.Ae},set:function(t){var e=this.Ae;e!==t&&(this.Ae=t,this.g("nodeGroupKeyProperty",e,t))}},Tj:{get:function(){return this.dn},set:function(t){this.dn!==t&&(this.dn=t)}},linkCategoryProperty:{get:function(){return this.uj},set:function(t){var e=this.uj;e!==t&&(this.uj=t,this.g("linkCategoryProperty",e,t))}},type:{get:function(){return"GraphLinksModel"}}}),vt.prototype.setCategoryForLinkData=vt.prototype.tq,vt.prototype.getCategoryForLinkData=vt.prototype.us,vt.prototype.assignAllDataProperties=vt.prototype.Np,vt.prototype.setGroupKeyForNodeData=vt.prototype.uq,vt.prototype.getGroupKeyForNodeData=vt.prototype.Eh,vt.prototype.isGroupForNodeData=vt.prototype.lv,vt.prototype.copyLinkData=vt.prototype.Sp,vt.prototype.mergeLinkDataArray=vt.prototype.vA,vt.prototype.removeLinkDataCollection=vt.prototype.HA,vt.prototype.removeLinkData=vt.prototype.nm,vt.prototype.addLinkDataCollection=vt.prototype.az,vt.prototype.addLinkData=vt.prototype.Bi,vt.prototype.containsLinkData=vt.prototype.yc,vt.prototype.makeLinkDataKeyUnique=vt.prototype.Is,vt.prototype.findLinkDataForKey=vt.prototype.Dh,vt.prototype.setKeyForLinkData=vt.prototype.Ss,vt.prototype.getKeyForLinkData=vt.prototype.qc,vt.prototype.removeLabelKeyForLinkData=vt.prototype.ty,vt.prototype.addLabelKeyForLinkData=vt.prototype.Bu,vt.prototype.setLabelKeysForLinkData=vt.prototype.Ts,vt.prototype.getLabelKeysForLinkData=vt.prototype.Bf,vt.prototype.setToPortIdForLinkData=vt.prototype.Tv,vt.prototype.getToPortIdForLinkData=vt.prototype.ay,vt.prototype.setFromPortIdForLinkData=vt.prototype.Pv,vt.prototype.getFromPortIdForLinkData=vt.prototype.Yx,vt.prototype.setToKeyForLinkData=vt.prototype.Sv,vt.prototype.getToKeyForLinkData=vt.prototype.$x,vt.prototype.setFromKeyForLinkData=vt.prototype.Ov,vt.prototype.getFromKeyForLinkData=vt.prototype.Xx,vt.prototype.clear=vt.prototype.clear;var rg=Object.freeze([]);function li(t,e){ct.call(this),this.Be="parent",this.fn=!1,this.Cj="parentLinkCategory",void 0!==t&&(Dn(t)?this.nodeDataArray=t:Object.assign(this,t)),e&&Object.assign(this,e)}function ge(t){Ht.call(this),this.Ow=this.tn=this.bc=0,this.Xq=360,this.Nw=_o,this.hj=0,this.Cw=new A,this.Oq=this.de=0,this.fs=new tf,this.zt=this.Bj=0,this.Ry=600,this.So=NaN,this.Tm=1,this.vp=0,this.Nl=360,this.Ib=_o,this.K=_i,this.$c=sg,this.Sc=my,this.jf=6,this.Co=Qv,t&&Object.assign(this,t)}function Kd(t,e,n,s,a){var u=t.Xq,c=t.bc;t=t.de,s=s*Math.PI/180,n=n*Math.PI/180;for(var f=e.length,p=0;p<f;p++){var g=s+(a===_i?p*n/(360<=u?f:f-1):-p*n/f),y=e.J(p),v=c*Math.tan(g)/t;v=Math.sqrt((c*c+t*t*v*v)/(1+v*v)),y.centerX=v*Math.cos(g),y.centerY=v*Math.sin(g),y.actualAngle=180*g/Math.PI}}function Xd(t,e,n,s){var a=t.bc,u=t.de,c=t.hj;n=n*Math.PI/180;for(var f=e.length,p=0;p<f;p++){var g=e.J(p),y=e.J(p===f-1?0:p+1),v=u*Math.sin(n);g.centerX=a*Math.cos(n),g.centerY=v,g.actualAngle=180*n/Math.PI,isNaN(g.diameter)&&jo(g,0),isNaN(y.diameter)&&jo(y,0),g=og(t,a,u,s===_i?n:-n,(g.diameter+y.diameter)/2+c),n+=s===_i?g:-g}}function Zd(t,e,n,s){var a=t.bc,u=t.de,c=t.Oq;n=n*Math.PI/180;for(var f=e.length,p=0;p<f;p++){var g=e.J(p);g.centerX=a*Math.cos(n),g.centerY=u*Math.sin(n),g.actualAngle=180*n/Math.PI,g=og(t,a,u,s===_i?n:-n,c),n+=s===_i?g:-g}}function Kv(t,e,n,s,a){var u=t.Xq;if(t.Bj=0,t.fs=new tf,360>n){for(u=s+(a===_i?u:-u);0>u;)u+=360;180<(u%=360)&&(u-=360),u*=Math.PI/180,t.zt=u,Zv(t,e,n,s,a)}else Xv(t,e,n,s,a);t.fs.commit(e)}function Xv(t,e,n,s,a){var u=t.bc,c=t.hj,f=t.tn,p=u*Math.cos(s*Math.PI/180),g=t.de*Math.sin(s*Math.PI/180),y=e.ya();if(3===y.length)y[0].centerX=u,y[0].centerY=0,y[1].centerX=y[0].centerX-y[0].width/2-y[1].width/2-c,y[1].y=y[0].y,y[2].centerX=(y[0].centerX+y[1].centerX)/2,y[2].y=y[0].y-y[2].height-c;else if(4===y.length)y[0].centerX=u,y[0].centerY=0,y[2].centerX=-y[0].centerX,y[2].centerY=y[0].centerY,y[1].centerX=0,y[1].y=Math.min(y[0].y,y[2].y)-y[1].height-c,y[3].centerX=0,y[3].y=Math.max(y[0].y+y[0].height+c,y[2].y+y[2].height+c);else{u=A.alloc();for(var v=0;v<y.length&&(y[v].centerX=p,y[v].centerY=g,!(v>=y.length-1));v++)lx(t,p,g,y,v,a,u)||Le(t,p,g,y,v,a,u),p=u.x,g=u.y;if(A.free(u),t.Bj++,!(23<t.Bj)){p=y[0].centerX,g=y[0].centerY,u=y[y.length-1].centerX,v=y[y.length-1].centerY;var _=Math.abs(p-u)-((y[0].width+y[y.length-1].width)/2+c),b=Math.abs(g-v)-((y[0].height+y[y.length-1].height)/2+c);c=0,1>Math.abs(b)?Math.abs(p-u)<(y[0].width+y[y.length-1].width)/2&&(c=0):c=0<b?b:1>Math.abs(_)?0:_,p=Math.abs(u)>Math.abs(v)?0<u!=g>v:0<v!=p<u,(p=a===_i?p:!p)&&(c=-Math.abs(c),c=Math.min(c,-y[y.length-1].width),c=Math.min(c,-y[y.length-1].height)),t.fs.compare(c,y),1<Math.abs(c)&&(t.bc=8>t.Bj?t.bc-c/(2*Math.PI):5>y.length&&10<c?t.bc/2:t.bc-(0<c?1.7:-2.3),t.de=t.bc*f,Xv(t,e,n,s,a))}}}function Zv(t,e,n,s,a){for(var u=t.bc,c=t.de,f=t.tn,p=u*Math.cos(s*Math.PI/180),g=c*Math.sin(s*Math.PI/180),y=A.alloc(),v=e.ya(),_=0;_<v.length&&(v[_].centerX=p,v[_].centerY=g,!(_>=v.length-1));_++)lx(t,p,g,v,_,a,y)||Le(t,p,g,v,_,a,y),p=y.x,g=y.y;if(A.free(y),t.Bj++,!(23<t.Bj)){if(p=Math.atan2(g,p),p=a===_i?t.zt-p:p-t.zt,u=(p=Math.abs(p)<Math.abs(p-2*Math.PI)?p:p-2*Math.PI)*(u+c)/2,c=t.fs,Math.abs(u)<Math.abs(c.bm))for(c.bm=u,c.sk=[],c.Hm=[],p=0;p<v.length;p++)c.sk[p]=v[p].bounds.x,c.Hm[p]=v[p].bounds.y;1<Math.abs(u)&&(t.bc=8>t.Bj?t.bc-u/(2*Math.PI):t.bc-(0<u?1.7:-2.3),t.de=t.bc*f,Zv(t,e,n,s,a))}}function lx(t,e,n,s,a,u,c){var f=t.bc,p=t.de,g=0;t=(s[a].width+s[a+1].width)/2+t.hj;var y=!1;if(0<=n!=(u===_i)){if((u=e+t)>f){if((u=e-t)<-f)return c.x=u,c.y=g,!1;y=!0}}else if((u=e-t)<-f){if((u=e+t)>f)return c.x=u,c.y=g,!1;y=!0}return g=Math.sqrt(1-Math.min(1,u*u/(f*f)))*p,0>n!==y&&(g=-g),Math.abs(n-g)>(s[a].height+s[a+1].height)/2?(c.x=u,c.y=g,!1):(c.x=u,c.y=g,!0)}function Le(t,e,n,s,a,u,c){var f=t.bc,p=t.de,g=0;if(t=(s[a].height+s[a+1].height)/2+t.hj,s=!1,0<=e!=(u===_i)){if((u=n-t)<-p){if((u=n+t)>p)return c.x=g,void(c.y=u);s=!0}}else if((u=n+t)>p){if((u=n-t)<-p)return c.x=g,void(c.y=u);s=!0}g=Math.sqrt(1-Math.min(1,u*u/(p*p)))*f,0>e!==s&&(g=-g),c.x=g,c.y=u}function Jv(t,e,n,s,a){var u=t.Ry;if(.001>Math.abs(t.tn-1))return void 0!==s&&void 0!==a?a*e:2*Math.PI*e;t=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n;for(var c=0,f=void 0!==s&&void 0!==a?a/(u+1):Math.PI/(2*(u+1)),p=0,g=0;g<=u;g++){p=void 0!==s&&void 0!==a?s+g*a/u:g*Math.PI/(2*u);var y=Math.sin(p);c+=Math.sqrt(1-t*t*y*y)*f}return void 0!==s&&void 0!==a?(e>n?e:n)*c:4*(e>n?e:n)*c}function zs(t,e,n,s,a){return e/(void 0!==s&&void 0!==a?Jv(t,1,n,s,a):Jv(t,1,n))}function og(t,e,n,s,a){if(.001>Math.abs(t.tn-1))return a/e;var u=e>n?Math.sqrt(e*e-n*n)/e:Math.sqrt(n*n-e*e)/n,c=0;t=2*Math.PI/(700*t.network.vertexes.count),e>n&&(s+=Math.PI/2);for(var f=0;;f++){var p=Math.sin(s+f*t);if((c+=(e>n?e:n)*Math.sqrt(1-u*u*p*p)*t)>=a)return f*t}}vt.className="GraphLinksModel",Zn.GraphLinksModel=vt,ct.constructGraphLinksModel=ct.constructGraphLinksModel=function(){return new vt},ct.initDiagramModel=Lu=function(){return new vt},Wt(li,ct),li.constructGraphLinksModel=ct.constructGraphLinksModel,li.prototype.cloneProtected=function(t){ct.prototype.cloneProtected.call(this,t),t.Be=this.Be,t.fn=this.fn,t.Cj=this.Cj},(S=li.prototype).toString=function(t){if(void 0===t&&(t=0),2<=t)return this.vq();var e=(""!==this.name?this.name:"")+" TreeModel";if(0<t){e+="\n node data:";for(var n=(t=this.nodeDataArray).length,s=0;s<n;s++){var a=t[s];e+=" "+this.pa(a)+":"+xr(a)}}return e},S.Fm=function(){var t=ct.prototype.Fm.call(this),e="";return"parent"!==this.nodeParentKeyProperty&&"string"==typeof this.nodeParentKeyProperty&&(e+=',\n  "nodeParentKeyProperty": '+this.quote(this.nodeParentKeyProperty)),t+e},S.nq=function(t){ct.prototype.nq.call(this,t),t.nodeParentKeyProperty&&(this.nodeParentKeyProperty=t.nodeParentKeyProperty)},S.mq=function(t){void 0!==t.nodeParentKeyProperty&&t.nodeParentKeyProperty!==this.nodeParentKeyProperty&&q("applyIncrementalJson cannot change Model properties"),ct.prototype.mq.call(this,t)},S.hm=function(t){return t},S.Fh=function(t){if(null!==t){var e=this.Be;if(""!==e&&void 0!==(e=Ue(t,e))){if(Bl(e))return e;q("ParentKey value for node data "+t+" is not a number or a string: "+e)}}},S.he=function(t,e){if(null===e&&(e=void 0),null!==t){var n=this.Be;if(""!==n)if(e=this.hm(e),this.cb(t)){var s=Ue(t,n);s!==e&&(Lo(this,s,t),oe(t,n,e),null===this.Yb(e)&&Ro(this,e,t),Ye(this,"nodeParentKey",De,n,t,s,e),"string"==typeof n&&this.Fa(t,n))}else oe(t,n,e)}},S.xs=function(t){if(null===t)return"";var e=this.Cj;return""===e||void 0===(e=Ue(t,e))?"":"string"==typeof e?e:(q("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+e),"")},li.prototype.getLinkCategoryForData=function(t){return this.xs(t)},li.prototype.Us=function(t,e){if(null!==t){var n=this.Cj;if(""!==n)if(this.cb(t)){var s=Ue(t,n);void 0===s&&(s=""),s!==e&&(oe(t,n,e),Ye(this,"parentLinkCategory",De,n,t,s,e),"string"==typeof n&&this.Fa(t,n))}else oe(t,n,e)}},li.prototype.setLinkCategoryForData=function(t,e){this.Us(t,e)},li.prototype.copyNodeData=function(t){return null===t?null:(t=ct.prototype.copyNodeData.call(this,t),this.Uj||""===this.Be||void 0===Ue(t,this.Be)||oe(t,this.Be,void 0),t)},li.prototype.setDataProperty=function(t,e,n){if(this.cb(t)){if(e===this.nodeKeyProperty)return void this.wm(t,n);if(e===this.nodeCategoryProperty)return void this.vm(t,n);if(e===this.nodeParentKeyProperty)return void this.he(t,n)}var s=Ue(t,e);s!==n&&(oe(t,e,n),this.Os(t,e,s,n))},(S=li.prototype).rq=function(t,e){ct.prototype.rq.call(this,t,e);for(var n=this.bb.iterator;n.next();)this.Jv(n.value,t,e)},S.Jv=function(t,e,n){if(this.Fh(t)===e){var s=this.Be;oe(t,s,n),Ye(this,"nodeParentKey",De,s,t,e,n),"string"==typeof s&&this.Fa(t,s)}},S.rm=function(t){ct.prototype.rm.call(this,t);var e=eg(this,t=this.pa(t));if(null!==e){var n=Lt();for(e=e.iterator;e.next();){var s=e.value;if(this.cb(s)&&this.Fh(s)===t){var a=this.Be;Ye(this,"nodeParentKey",De,a,s,t,t),"string"==typeof a&&this.Fa(s,a),n.push(s)}}for(e=0;e<n.length;e++)Lo(this,t,n[e]);ee(n)}},S.qm=function(t){ct.prototype.qm.call(this,t);var e=this.Fh(t);e=this.hm(e),null===this.Yb(e)&&Ro(this,e,t)},S.yq=function(t){ct.prototype.yq.call(this,t),Lo(this,this.Fh(t),t)},S.xm=function(t,e){ct.prototype.xm.call(this,t,e),this.Us(e,this.xs(t)),this.he(e,this.Fh(t))},S.fm=function(){return!0},S.Ds=function(){return!0},kt.Object.defineProperties(li.prototype,{nodeParentKeyProperty:{get:function(){return this.Be},set:function(t){var e=this.Be;e!==t&&(this.Be=t,this.g("nodeParentKeyProperty",e,t))}},Uj:{get:function(){return this.fn},set:function(t){this.fn!==t&&(this.fn=t)}},parentLinkCategoryProperty:{get:function(){return this.Cj},set:function(t){var e=this.Cj;e!==t&&(this.Cj=t,this.g("parentLinkCategoryProperty",e,t))}},linkCategoryProperty:{get:function(){return this.parentLinkCategoryProperty},set:function(t){this.parentLinkCategoryProperty=t}},type:{get:function(){return"TreeModel"}}}),li.prototype.setParentLinkCategoryForNodeData=li.prototype.Us,li.prototype.getParentLinkCategoryForNodeData=li.prototype.xs,li.prototype.setParentKeyForNodeData=li.prototype.he,li.prototype.getParentKeyForNodeData=li.prototype.Fh,li.className="TreeModel",Zn.TreeModel=li,Wt(ge,Ht),ge.prototype.cloneProtected=function(t){Ht.prototype.cloneProtected.call(this,t),t.So=this.So,t.Tm=this.Tm,t.vp=this.vp,t.Nl=this.Nl,t.Ib=this.Ib,t.K=this.K,t.$c=this.$c,t.Sc=this.Sc,t.jf=this.jf,t.Co=this.Co},ge.prototype.gb=function(t){t.classType===ge?t===by||t===qv||t===qd||t===Qd||t===sg?this.sorting=t:t===oc||t===Jd||t===_i||t===Ul?this.direction=t:t===Za||t===Xa||t===_o||t===eo?this.arrangement=t:(t===sc||t===Qv)&&(this.nodeDiameterFormula=t):Ht.prototype.gb.call(this,t)},ge.prototype.createNetwork=function(){return new ag(this)},ge.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),1>=(t=this.network.vertexes).count)1===t.count&&((t=t.first()).centerX=0,t.centerY=0);else{var e=new st;e.addAll(t.iterator),t=new st;var a,u,n=new st,s=this.sort(e),c=this.Oq,f=this.arrangement,p=this.nodeDiameterFormula,g=this.radius;(!isFinite(g)||0>=g)&&(g=NaN);var y=this.aspectRatio;(!isFinite(y)||0>=y)&&(y=1);var v=this.startAngle;isFinite(v)||(v=0);var _=this.sweepAngle;if((!isFinite(_)||360<_||1>_)&&(_=360),e=this.spacing,isFinite(e)||(e=NaN),f===eo&&p===sc?f=_o:f===eo&&p!==sc&&(f=this.arrangement),(this.direction===oc||this.direction===Jd)&&this.sorting!==sg){for(p=0;!(p>=s.length||(t.add(s.J(p)),p+1>=s.length));p+=2)n.add(s.J(p+1));this.direction===oc?(this.arrangement===eo&&t.reverse(),(s=new st).addAll(t),s.addAll(n)):(this.arrangement===eo&&n.reverse(),(s=new st).addAll(n),s.addAll(t))}p=s.length;for(var b=u=a=0;b<s.length;b++){var D=v+_*u*(this.direction===_i?1:-1)/p,k=s.J(b).diameter;isNaN(k)&&(k=jo(s.J(b),D)),360>_&&(0===b||b===s.length-1)&&(k/=2),a+=k,u++}if(isNaN(g)||f===eo){if(isNaN(e)&&(e=6),f!==_o&&f!==eo){for(u=-1/0,c=0;c<p;c++)b=s.J(c),a=s.J(c===p-1?0:c+1),isNaN(b.diameter)&&jo(b,0),isNaN(a.diameter)&&jo(a,0),u=Math.max(u,(b.diameter+a.diameter)/2);c=u+e,g=f===Za?(u+e)/(2*Math.PI/p):zs(this,c*(360<=_?p:p-1),y,v*Math.PI/180,_*Math.PI/180)}else g=zs(this,a+(360<=_?p:p-1)*(f!==eo?e:1.6*e),y,v*Math.PI/180,_*Math.PI/180);u=g*y}else if(b=Jv(this,g,u=g*y,v*Math.PI/180,_*Math.PI/180),isNaN(e))(f===_o||f===eo)&&(e=(b-a)/(360<=_?p:p-1));else if(f===_o||f===eo)(b=(b-a)/(360<=_?p:p-1))<e?u=(g=zs(this,a+e*(360<=_?p:p-1),y,v*Math.PI/180,_*Math.PI/180))*y:e=b;else{for(c=-1/0,a=0;a<p;a++)D=s.J(a),k=s.J(a===p-1?0:a+1),isNaN(D.diameter)&&jo(D,0),isNaN(k.diameter)&&jo(k,0),c=Math.max(c,(D.diameter+k.diameter)/2);(a=zs(this,(c+=e)*(360<=_?p:p-1),y,v*Math.PI/180,_*Math.PI/180))>g?u=(g=a)*y:c=b/(360<=_?p:p-1)}if(this.Nw=f,this.bc=g,this.tn=y,this.Ow=v,this.Xq=_,this.hj=e,this.de=u,this.Oq=c,e=s,s=this.Nw,f=this.bc,g=this.Ow,y=this.Xq,v=this.hj,_=this.de,p=this.Oq,this.direction!==oc&&this.direction!==Jd||s!==eo)if(this.direction===oc||this.direction===Jd){switch(c=0,s){case Xa:c=180*og(this,f,_,g,p)/Math.PI;break;case _o:p=e=0,null!==(c=t.first())&&(e=jo(c,Math.PI/2)),null!==(c=n.first())&&(p=jo(c,Math.PI/2)),c=180*og(this,f,_,g,v+(e+p)/2)/Math.PI;break;case Za:c=y/e.length}if(this.direction===oc){switch(s){case Xa:Zd(this,t,g,Ul);break;case _o:Xd(this,t,g,Ul);break;case Za:Kd(this,t,y/2,g,Ul)}switch(s){case Xa:Zd(this,n,g+c,_i);break;case _o:Xd(this,n,g+c,_i);break;case Za:Kd(this,n,y/2,g+c,_i)}}else{switch(s){case Xa:Zd(this,n,g,Ul);break;case _o:Xd(this,n,g,Ul);break;case Za:Kd(this,n,y/2,g,Ul)}switch(s){case Xa:Zd(this,t,g+c,_i);break;case _o:Xd(this,t,g+c,_i);break;case Za:Kd(this,t,y/2,g+c,_i)}}}else switch(s){case Xa:Zd(this,e,g,this.direction);break;case _o:Xd(this,e,g,this.direction);break;case Za:Kd(this,e,y,g,this.direction);break;case eo:Kv(this,e,y,g,this.direction)}else Kv(this,e,y,g-y/2,_i)}this.updateParts(),this.network=null,this.isValidLayout=!0},ge.prototype.commitLayout=function(){this.commitNodes(),this.isRouting&&this.commitLinks()},ge.prototype.commitNodes=function(){var t=null!==this.group&&null!==this.group.placeholder&&this.group.isSubGraphExpanded,e=t?this.group.location.copy():null,n=this.actualCenter;t?n=new A(0,0):(n.x=this.arrangementOrigin.x+this.bc,n.y=this.arrangementOrigin.y+this.de);for(var s=this.network.vertexes.iterator;s.next();){var a=s.value;a.x+=n.x,a.y+=n.y,a.commit()}t&&(this.group.Ta(),t=this.group.position.copy(),n=this.group.location.copy(),e=e.ie(n.ie(t)),this.group.move(e),this.Cw=e.ie(t))},ge.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},ge.prototype.sort=function(t){switch(this.sorting){case qd:break;case Qd:t.reverse();break;case by:t.sort(this.comparer);break;case qv:t.sort(this.comparer),t.reverse();break;case sg:return this.Ns(function uM(t){for(var e=[],n=0;n<t.length;n++)e.push(0);n=new st;for(var s=0;s<t.length;s++){var a=-1,u=-1;if(0===s)for(var c=0;c<t.length;c++){var f=t.J(c).edgesCount;f>a&&(a=f,u=c)}else for(c=0;c<t.length;c++)(f=e[c])>a&&(a=f,u=c);for(n.add(t.J(u)),e[u]=-1,c=(u=t.J(u)).sourceEdges;c.next();)0>(a=t.indexOf(c.value.fromVertex))||0<=e[a]&&e[a]++;for(u=u.destinationEdges;u.next();)0>(a=t.indexOf(u.value.toVertex))||0<=e[a]&&e[a]++}return n}(t));default:q("Invalid sorting type.")}return t},ge.prototype.Ns=function(t){for(var e=[],n=0;n<t.length;n++){var s=t.J(n);e[n]=[];for(var a,u=s.destinationEdges;u.next();)(a=t.indexOf(u.value.toVertex))!==n&&0>e[n].indexOf(a)&&e[n].push(a);for(s=s.sourceEdges;s.next();)(a=t.indexOf(s.value.fromVertex))!==n&&0>e[n].indexOf(a)&&e[n].push(a)}for(u=[],n=0;n<e.length;n++)u[n]=0;n=[];var c=[],f=[];s=[],a=new st;for(var p=0,g=0;g<e.length;g++){var y=e[g].length;if(1===y)s.push(g);else if(0===y)a.add(t.J(g));else{if(0===p)n.push(g);else{for(var v=y=1/0,_=-1,b=[],D=0;D<n.length;D++)0>e[n[D]].indexOf(n[D===n.length-1?0:D+1])&&b.push(D===n.length-1?0:D+1);if(0===b.length)for(D=0;D<n.length;D++)b.push(D);for(D=0;D<b.length;D++){for(var k=b[D],O=e[g],E=0,R=0;R<c.length;R++){var F=u[c[R]],j=u[f[R]];if(F<j){var L=F;F=j}else L=j;if(L<k&&k<=F)for(j=0;j<O.length;j++){var G=O[j];0>n.indexOf(G)||L<u[G]&&u[G]<F||L===u[G]||F===u[G]||E++}else for(j=0;j<O.length;j++)0>n.indexOf(G=O[j])||L<u[G]&&u[G]<F&&L!==u[G]&&F!==u[G]&&E++}for(O=E,R=E=0;R<e[g].length;R++)0<=(L=n.indexOf(e[g][R]))&&(E+=(L=Math.abs(k-(L>=k?L+1:L)))<n.length+1-L?L:n.length+1-L);for(R=0;R<c.length;R++)(L=u[c[R]])>=k&&L++,(F=u[f[R]])>=k&&F++,L>F&&(j=F,F=L,L=j),F-L<(n.length+2)/2==(L<k&&k<=F)&&E++;(O<y||O===y&&E<v)&&(y=O,v=E,_=k)}for(n.splice(_,0,g),y=0;y<n.length;y++)u[n[y]]=y;for(y=0;y<e[g].length;y++)0<=n.indexOf(v=e[g][y])&&(c.push(g),f.push(v))}p++}}for(c=n.length;;){for(u=!0,f=0;f<s.length;f++)if(0<=(y=n.indexOf(g=e[p=s[f]][0]))){for(_=v=0;_<e[g].length;_++)0>(b=n.indexOf(e[g][_]))||b===y||(v+=b<y!=(D=b>y?b-y:y-b)>c-D?1:-1);n.splice(0>v?y:y+1,0,p),s.splice(f,1),f--}else u=!1;if(u)break;n.push(s[0]),s.splice(0,1)}for(e=0;e<n.length;e++)a.add(t.J(n[e]));return a},kt.Object.defineProperties(ge.prototype,{radius:{get:function(){return this.So},set:function(t){this.So!==t&&(0<t||isNaN(t))&&(this.So=t,this.B())}},aspectRatio:{get:function(){return this.Tm},set:function(t){this.Tm!==t&&0<t&&(this.Tm=t,this.B())}},startAngle:{get:function(){return this.vp},set:function(t){this.vp!==t&&(this.vp=t,this.B())}},sweepAngle:{get:function(){return this.Nl},set:function(t){this.Nl!==t&&(this.Nl=0<t&&360>=t?t:360,this.B())}},arrangement:{get:function(){return this.Ib},set:function(t){this.Ib===t||t!==eo&&t!==_o&&t!==Xa&&t!==Za||(this.Ib=t,this.B())}},direction:{get:function(){return this.K},set:function(t){this.K===t||t!==_i&&t!==Ul&&t!==oc&&t!==Jd||(this.K=t,this.B())}},sorting:{get:function(){return this.$c},set:function(t){this.$c===t||t!==qd&&t!==Qd&&t!==by&&!qv&&t!==sg||(this.$c=t,this.B())}},comparer:{get:function(){return this.Sc},set:function(t){this.Sc!==t&&(this.Sc=t,this.B())}},spacing:{get:function(){return this.jf},set:function(t){this.jf!==t&&(this.jf=t,this.B())}},nodeDiameterFormula:{get:function(){return this.Co},set:function(t){this.Co===t||t!==Qv&&t!==sc||(this.Co=t,this.B())}},actualXRadius:{get:function(){return this.bc}},actualYRadius:{get:function(){return this.de}},actualSpacing:{get:function(){return this.hj}},actualCenter:{get:function(){return this.Cw}}});var _o=new Q(ge,"ConstantSpacing",0),Xa=new Q(ge,"ConstantDistance",1),Za=new Q(ge,"ConstantAngle",2),eo=new Q(ge,"Packed",3),_i=new Q(ge,"Clockwise",4),Ul=new Q(ge,"Counterclockwise",5),oc=new Q(ge,"BidirectionalLeft",6),Jd=new Q(ge,"BidirectionalRight",7),qd=new Q(ge,"Forwards",8),Qd=new Q(ge,"Reverse",9),by=new Q(ge,"Ascending",10),qv=new Q(ge,"Descending",11),sg=new Q(ge,"Optimized",12),Qv=new Q(ge,"Pythagorean",13),sc=new Q(ge,"Circular",14);function tf(){this.bm=-1/0,this.Hm=this.sk=null}function ag(t){qt.call(this,t)}function lg(t){Pe.call(this,t),this.C=this.gj=NaN}function jo(t,e){var n=t.network;if(null===n)return NaN;if(null===(n=n.layout))return NaN;if(n.arrangement===eo)if(n.nodeDiameterFormula===sc)t.gj=Math.max(t.width,t.height);else{if(n=Math.abs(Math.sin(e)),e=Math.abs(Math.cos(e)),0===n)return t.width;if(0===e)return t.height;t.gj=Math.min(t.height/n,t.width/e)}else t.gj=n.nodeDiameterFormula===sc?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.gj}function My(t){zn.call(this,t)}function fn(t){Ht.call(this),this.wh=null,this.bo=0,this.Rd=new Dt(100,100).freeze(),this.Sm=!1,this.hf=!0,this.jd=!1,this.pl=100,this.wn=1,this.Tf=1e3,this.xo=10,this.To=Math,this.Pk=.05,this.Ok=50,this.Mk=150,this.Nk=0,this.on=10,this.nn=5,t&&Object.assign(this,t)}function ux(t,e,n){if(function hx(t,e){if(10<e||3>t.network.vertexes.count)return!1;for(t.wh=t.network.vertexes.ya(),(t=t.wh).sort(function(n,s){return null===n||null===s||n===s?0:s.Kd-n.Kd}),e=t.length-1;0<=e&&1>=t[e].Kd;)e--;return 1<t.length-e}(t,e)){var s=t.Tf;t.Tf*=1+1/(e+1);var a=function Cy(t,e){for(var n=t.network,s=new Hu(t),a=0;a<t.wh.length;a++){var u=t.wh[a];if(!(1<u.Kd))break;s.og(u);var c=new gx;c.nt=u.Kd,c.rt=u.width,c.ht=u.height,c.mw=u.focus.x,c.nw=u.focus.y,null===u.Me&&(u.Me=new st),u.Me.add(c),u.Mv=u.Me.count-1}for(u=n.edges.iterator;u.next();){var f=u.value;c=f.toVertex,(a=f.fromVertex).network===s&&c.network===s?s.Tl(f):a.network===s?(null===(f=a.Sj)&&(f=new st,a.Sj=f),f.add(c),a.Kd--,a.Kh+=c.Kh):c.network===s&&(null===(f=c.Sj)&&(f=new st,c.Sj=f),f.add(a),c.Kd--,c.Kh+=a.Kh)}for(a=s.edges.iterator;a.next();)(u=a.value).length*=Math.max(1,V.sqrt((u.fromVertex.Kh+u.toVertex.Kh)/(4*e+1)));for(e=s.vertexes.iterator;e.next();){var p=(a=e.value).Sj;if(null!==p&&0<p.count&&!(0>=(c=a.Me.J(a.Me.count-1).nt-a.Kd))){for(var g=f=0,y=p.count-c;y<p.count;y++){var v=p.J(y),_=null;for(u=v.edges.iterator;u.next();){var b=u.value;if(b.Zx(v)===a){_=b;break}}null!==_&&(g+=_.length,f+=v.width*v.height)}u=a.centerX,p=a.centerY,_=a.focus,1>(b=(y=a.width)*(v=a.height))&&(b=1),f=V.sqrt((f+b+g*g*4/(c*c))/b),a.bounds=new z(u-_.x-(c=(f-1)*y/2),p-_.y-(f=(f-1)*v/2),y+2*c,v+2*f),a.focus=new A(_.x+c,_.y+f)}}return t.network=s,n}(t,e),u=Math.max(0,Math.max(Math.min(t.network.vertexes.count,n*(e+1)/11),10));for(t.maxIterations+=u,ux(t,e+1,n),px(t,u),function hM(t,e){for(var n=t.network.vertexes.iterator;n.next();){var s=n.value;if(s.network=e,null!==s.Me){var a=s.Me.J(s.Mv);s.Kd=a.nt;var u=a.mw,c=a.nw;s.bounds=new z(s.centerX-u,s.centerY-c,a.rt,a.ht),s.focus=new A(u,c),s.Mv--}}for(n=t.network.edges.iterator;n.next();)n.value.network=e;t.network=e}(t,a),(e=a.vertexes.ya()).sort(function(c,f){return null===c||null===f||c===f?0:f.Kd-c.Kd}),n=0;n<e.length;n++)cx(t,e[n]);t.Tf=s}}function cx(t,e){var n=e.Sj;if(null!==n&&0!==n.count){var s=e.centerX,a=e.centerY,u=e.width,c=e.height;null!==e.Me&&0<e.Me.count&&(u=(c=e.Me.J(0)).rt,c=c.ht),u=V.sqrt(u*u+c*c)/2;for(var f=!1,p=c=0,g=0,y=e.vertexes.iterator;y.next();){var v=y.value;1>=v.Kd?p++:(f=!0,g++,c+=Math.atan2(e.centerY-v.centerY,e.centerX-v.centerX))}if(0!==p)for(0<g&&(c/=g),g=e=0,e=f?2*Math.PI/(p+1):2*Math.PI/p,p%2==0&&(g=e/2),1<n.count&&n.sort(function(b,D){return null===b||null===D||b===D?0:D.width*D.height-b.width*b.height}),f=p%2==0?0:1,n=n.iterator;n.next();)if(!(1<(p=n.value).Kd||t.isFixed(p))){for(y=null,v=p.edges.iterator;v.next();){y=v.value;break}var _=p.height;v=V.sqrt((v=p.width)*v+_*_)/2,y=u+y.length+v,v=c+(e*(f/2>>1)+g)*(f%2==0?1:-1),p.centerX=s+y*Math.cos(v),p.centerY=a+y*Math.sin(v),f++}}}function dx(t,e,n,s,a,u,c){var f=9e19,p=-1,g=0;t:for(;g<e;g++){var y=t[g],v=y.x-n,_=y.y-s;if((v=v*v+_*_)<f){for(_=g-1;0<=_;_--)if(t[_].y>y.y&&t[_].x-y.x<a+c.width)continue t;for(_=g+1;_<e;_++)if(t[_].x>y.x&&t[_].y-y.y<u+c.height)continue t;p=g,f=v}}return p}function fx(t,e){var n=t.bounds,s=n.x;t=n.y;var a=n.width;n=n.height;var u=e.bounds,c=u.x;e=u.y;var f=u.width;return u=u.height,s+a<c?t>e+u?V.sqrt((n=s+a-c)*n+(t=t-e-u)*t):t+n<e?V.sqrt((s=s+a-c)*s+(t=t+n-e)*t):c-(s+a):s>c+f?t>e+u?V.sqrt((n=s-c-f)*n+(t=t-e-u)*t):t+n<e?V.sqrt((s=s-c-f)*s+(t=t+n-e)*t):s-(c+f):t>e+u?t-(e+u):t+n<e?e-(t+n):.1}function px(t,e){for(t.wh=null,e=t.bo+e;t.bo<e&&(t.bo++,cM(t)););t.wh=null}function cM(t){null===t.wh&&(t.wh=t.network.vertexes.ya());var e=t.wh;if(0>=e.length)return!1;var n=e[0];n.forceX=0,n.forceY=0;for(var s=n.centerX,a=s,u=n=n.centerY,c=1;c<e.length;c++){var f=e[c];f.forceX=0,f.forceY=0;var p=f.centerX;f=f.centerY,s=Math.min(s,p),a=Math.max(a,p),n=Math.min(n,f),u=Math.max(u,f)}(a=a-s>u-n)?e.sort(function(k,O){return null===k||null===O||k===O?0:k.centerX-O.centerX}):e.sort(function(k,O){return null===k||null===O||k===O?0:k.centerY-O.centerY}),n=t.Tf;var g=s=f=0;for(u=0;u<e.length;u++){var y=(s=(c=e[u]).bounds).y+(f=c.focus).y;s=c.charge*t.electricalFieldX(p=s.x+f.x,y),g=c.charge*t.electricalFieldY(p,y),s+=c.mass*t.gravitationalFieldX(p,y),g+=c.mass*t.gravitationalFieldY(p,y),c.forceX+=s,c.forceY+=g;for(var v=u+1;v<e.length;v++){var _=e[v];if(_!==c){var b=(s=_.bounds).y+(f=_.focus).y;if(p-(g=s.x+f.x)>n||g-p>n){if(a)break}else if(y-b>n||b-y>n){if(!a)break}else{var D=fx(c,_);1>D?(null===(s=t.randomNumberGenerator)&&(t.randomNumberGenerator=s=new ug),D=s.random(),f=s.random(),s=p>g?(1+(s=Math.abs(_.bounds.right-c.bounds.x)))*D:p<g?-(1+(s=Math.abs(_.bounds.x-c.bounds.right)))*D:(1+(s=Math.max(_.width,c.width)))*D-s/2,g=y>b?(1+(g=Math.abs(_.bounds.bottom-c.bounds.y)))*f:p<g?-(1+(g=Math.abs(_.bounds.y-c.bounds.bottom)))*f:(1+(g=Math.max(_.height,c.height)))*f-g/2):(s=(g-p)/D*(f=-c.charge*_.charge/(D*D)),g=(b-y)/D*f),c.forceX+=s,c.forceY+=g,_.forceX-=s,_.forceY-=g}}}}for(a=t.network.edges.iterator;a.next();)s=(c=(n=(f=a.value).fromVertex).bounds).x+(p=n.focus).x,c=c.y+p.y,p=(y=(u=f.toVertex).bounds).x+(v=u.focus).x,y=y.y+v.y,1>(v=fx(n,u))?(null===(v=t.randomNumberGenerator)&&(t.randomNumberGenerator=v=new ug),f=v.random(),v=v.random(),s=(s>p?1:-1)*(1+(u.width>n.width?u.width:n.width))*f,g=(c>y?1:-1)*(1+(u.height>n.height?u.height:n.height))*v):(s=(p-s)/v*(f=f.stiffness*(v-f.length)),g=(y-c)/v*f),n.forceX+=s,n.forceY+=g,u.forceX-=s,u.forceY-=g;for(a=s=0;a<e.length;a++)t.isFixed(n=e[a])?t.moveFixedVertex(n):s=Math.max(s,t.moveVertex(n)||0);return s>t.epsilonDistance*t.epsilonDistance}function gx(){this.nw=this.mw=this.ht=this.rt=this.nt=0}function Hu(t){qt.call(this,t)}function ac(t){Pe.call(this,t),this.Ba=!1,this.Ma=this.C=NaN,this.Kh=this.Kd=this.wa=this.L=0,this.Me=this.Sj=null,this.Mv=0}function Vu(t){zn.call(this,t),this.j=this.o=NaN}function ug(){var t=0;void 0===t&&(t=42),this.seed=t,this.Gy=48271,this.Iy=2147483647,this.Q=44488.07041494893,this.Jy=3399,this.Hy=1/2147483647,this.random()}function Yt(t){Ht.call(this),this.ac=this.be=25,this.K=0,this.Lk=hc,this.kl=dg,this.$k=fg,this.sj=4,this.wk=Ay,this.ag=15,this.hf=!0,this.jo=4,this.Ea=this.ji=this.ra=-1,this.vc=this.Wg=0,this.Ka=this.wd=this.xd=this.ae=this.Bb=null,this.dh=0,this.yo=this.zj=null,this.Ec=0,this.zo=null,this.Rc=new A,this.ye=[],this.ye.length=100,t&&Object.assign(this,t)}function mx(t){var e=t.fromVertex.node||t.fromVertex.data;return t=t.toVertex.node||t.toVertex.data,null===e&&null===t?8:null===e||null===t?4:1}function ui(t){null===t.zj&&(t.zj=[]);for(var e=0,n=t.network.vertexes.iterator;n.next();){var s=n.value;t.zj[e]=s.layer,e++,t.zj[e]=s.column,e++,t.zj[e]=s.index,e++}return t.zj}function Pr(t,e){var n=0;for(t=t.network.vertexes.iterator;t.next();){var s=t.value;s.layer=e[n],n++,s.column=e[n],n++,s.index=e[n],n++}}function dM(t,e,n){var s=qa(t,e),a=t.Bb[e];(null===t.yo||t.yo.length<a*a)&&(t.yo=[]);for(var u=t.yo,c=0;c<a;c++){var _,f=0,p=s[c],g=p.near;if(null!==g&&g.layer===p.layer)if((p=g.index)>c)for(var y=c+1;y<p;y++){var v=s[y];v.near===g&&v.uf===g.uf||f++}else for(y=c-1;y>p;y--)(v=s[y]).near===g&&v.uf===g.uf||f++;if(0<=n)for(p=s[c].sourceEdgesArrayAccess,g=0;g<p.length;g++){var b=p[g];if(b.valid&&b.fromVertex.layer!==e)for(v=b.fromVertex.index,y=b.portToPos,b=b.portFromPos,_=g+1;_<p.length;_++){var D=p[_];if(D.valid&&D.fromVertex.layer!==e){var k=D.fromVertex.index,O=D.portToPos;D=D.portFromPos,y<O&&(v>k||v===k&&b>D)&&f++,O<y&&(k>v||k===v&&D>b)&&f++}}}if(0>=n)for(p=s[c].destinationEdgesArrayAccess,g=0;g<p.length;g++)if((b=p[g]).valid&&b.toVertex.layer!==e)for(v=b.toVertex.index,y=b.portToPos,b=b.portFromPos,_=g+1;_<p.length;_++)(D=p[_]).valid&&D.toVertex.layer!==e&&(k=D.toVertex.index,O=D.portToPos,b<(D=D.portFromPos)&&(v>k||v===k&&y>O)&&f++,D<b&&(k>v||k===v&&O>y)&&f++);for(u[c*a+c]=f,p=c+1;p<a;p++){var E=0,R=0;if(0<=n){f=s[c].sourceEdgesArrayAccess;var F=s[p].sourceEdgesArrayAccess;for(g=0;g<f.length;g++)if((b=f[g]).valid&&b.fromVertex.layer!==e)for(v=b.fromVertex.index,b=b.portFromPos,_=0;_<F.length;_++)(D=F[_]).valid&&D.fromVertex.layer!==e&&(k=D.fromVertex.index,D=D.portFromPos,(v<k||v===k&&b<D)&&R++,(k<v||k===v&&D<b)&&E++)}if(0>=n)for(f=s[c].destinationEdgesArrayAccess,F=s[p].destinationEdgesArrayAccess,g=0;g<f.length;g++)if((b=f[g]).valid&&b.toVertex.layer!==e)for(v=b.toVertex.index,y=b.portToPos,_=0;_<F.length;_++)(D=F[_]).valid&&D.toVertex.layer!==e&&(O=D.portToPos,(v<(k=D.toVertex.index)||v===k&&y<O)&&R++,(k<v||k===v&&O<y)&&E++);u[c*a+p]=E,u[p*a+c]=R}}return ba(t,e,s),u}function at(t){for(var e=0,n=0;n<=t.ra;n++){for(var s=t,a=n,u=qa(s,a),c=s.Bb[a],f=0,p=0;p<c;p++){var g=u[p].destinationEdgesArrayAccess;if(null!==g)for(var y=0;y<g.length;y++){var v=g[y];v.valid&&v.toVertex.layer!==a&&(f+=(Math.abs(v.fromVertex.column+v.portFromColOffset-(v.toVertex.column+v.portToColOffset))+1)*mx(v))}}ba(s,a,u),e+=f}return e}function hg(t,e,n){for(var s=qa(t,e),a=t.Bb[e],u=[],c=0;c<a;c++){var f=s[c],p=null;0>=n&&(p=f.sourceEdgesArrayAccess);var g=null;0<=n&&(g=f.destinationEdgesArrayAccess);var y=0,v=0,_=f.near;if(null!==_&&_.layer===f.layer&&(y+=_.column-1,v++),null!==p)for(_=0;_<p.length;_++){var b=(f=p[_]).fromVertex;f.valid&&!f.rev&&b.layer!==e&&(y+=b.column,v++)}if(null!==g)for(p=0;p<g.length;p++)_=(f=g[p]).toVertex,f.valid&&!f.rev&&_.layer!==e&&(y+=_.column,v++);u[c]=0===v?-1:y/v}return ba(t,e,s),u}function je(t,e,n){for(var s=qa(t,e),a=t.Bb[e],u=[],c=0;c<a;c++){var f=s[c],p=null;0>=n&&(p=f.sourceEdgesArrayAccess);var g=null;0<=n&&(g=f.destinationEdgesArrayAccess);var y=0,v=[],_=f.near;if(null!==_&&_.layer===f.layer&&(v[y]=_.column-1,y++),f=void 0,null!==p)for(_=0;_<p.length;_++){var b=(f=p[_]).fromVertex;f.valid&&!f.rev&&b.layer!==e&&(v[y]=b.column+f.portFromColOffset,y++)}if(null!==g)for(p=0;p<g.length;p++)_=(f=g[p]).toVertex,f.valid&&!f.rev&&_.layer!==e&&(v[y]=_.column+f.portToColOffset,y++);0===y?u[c]=-1:(v.sort(function(D,k){return D-k}),g=y>>1,u[c]=0!=(1&y)?v[g]:v[g-1]+v[g]>>1)}return ba(t,e,s),u}function lc(t,e,n,s,a,u){if(e.component===s){if(e.component=n,a)for(var c=e.destinationEdges;c.next();){var f=c.value,p=f.toVertex,g=e.layer-p.layer;g===(f=t.linkMinLength(f))&&lc(t,p,n,s,a,u)}if(u)for(c=e.sourceEdges;c.next();)(g=(p=(f=c.value).fromVertex).layer-e.layer)===(f=t.linkMinLength(f))&&lc(t,p,n,s,a,u)}}function t1(t,e,n,s,a,u){if(e.component===s){if(e.component=n,a)for(var c=e.destinationEdges;c.next();)t1(t,c.value.toVertex,n,s,a,u);if(u)for(e=e.sourceEdges;e.next();)t1(t,e.value.fromVertex,n,s,a,u)}}function T(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid)return e}return null}function C(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,s=e.destinationEdges;s.next();)if(s.value.toVertex.valid){n=!1;break}if(n)return e}}return null}function J(t){for(t=t.vertexes.iterator;t.next();){var e=t.value;if(e.valid){for(var n=!0,s=e.sourceEdges;s.next();)if(s.value.fromVertex.valid){n=!1;break}if(n)return e}}return null}function yx(t,e){e.pg=t.dh,t.dh++;for(var n=e.destinationEdges;n.next();){var s=n.value,a=s.toVertex;-1===a.pg&&(s.forest=!0,yx(t,a))}e.finish=t.dh,t.dh++}function vx(t){for(var e=t.network.vertexes.iterator;e.next();){var n=e1(t,e.value);t.ra=Math.max(n,t.ra)}}function e1(t,e){var n=0;if(-1===e.layer){for(var s=e.destinationEdges;s.next();){var a=s.value,u=a.toVertex;a=t.linkMinLength(a),n=Math.max(n,e1(t,u)+a)}e.layer=n}else n=e.layer;return n}function n1(t,e){var n=0;if(-1===e.layer){for(var s=e.sourceEdges;s.next();){var a=s.value,u=a.fromVertex;a=t.linkMinLength(a),n=Math.max(n,n1(t,u)+a)}e.layer=n}else n=e.layer;return n}function wx(t,e){if(!e.valid){e.valid=!0;for(var n=e.destinationEdges;n.next();)wx(t,n.value.toVertex);for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(var s=e.sourceEdgesArrayAccess,a=s.length,u=0;u<a;u++){var c=s[u],f=c.fromVertex,p=c.toVertex;c=t.linkMinLength(c),f.layer-p.layer>c&&lc(t,f,0,-1,!0,!1)}for(lc(t,e,1,-1,!0,!0);0!==e.component;){for(u=0,s=1/0,f=0,p=null,c=t.network.vertexes.iterator;c.next();){var g=c.value;if(1===g.component){var y=0,v=!1,_=g.sourceEdgesArrayAccess;a=_.length;for(var b=0;b<a;b++){var D=_[b],k=D.fromVertex;y+=1,1!==k.component&&(u+=1,k=k.layer-g.layer,D=t.linkMinLength(D),s=Math.min(s,k-D))}for(a=(_=g.destinationEdgesArrayAccess).length,b=0;b<a;b++)--y,1!==(D=_[b].toVertex).component?--u:v=!0;(null===p||y<f)&&!v&&(p=g,f=y)}}if(0<u){for(n.reset();n.next();)1===(a=n.value).component&&(a.layer+=s);e.component=0}else p.component=0}for(n=t.network.vertexes.iterator;n.next();)n.value.component=-1;for(lc(t,e,1,-1,!0,!1);0!==e.component;){for(s=0,a=1/0,u=0,f=null,p=t.network.vertexes.iterator;p.next();)if(1===(c=p.value).component){for(g=0,y=!1,v=(_=c.sourceEdgesArrayAccess).length,b=0;b<v;b++)g+=1,1!==(D=_[b].fromVertex).component?s+=1:y=!0;for(v=(_=c.destinationEdgesArrayAccess).length,b=0;b<v;b++)--g,1!==(k=(D=_[b]).toVertex).component&&(--s,k=c.layer-k.layer,D=t.linkMinLength(D),a=Math.min(a,k-D));(null===f||g>u)&&!y&&(f=c,u=g)}if(0>s){for(n.reset();n.next();)1===(s=n.value).component&&(s.layer-=a);e.component=0}else f.component=0}}}function Ja(t,e,n){return 90===t.K?n&&!e.rev||!n&&e.rev?270:90:180===t.K?n&&!e.rev||!n&&e.rev?0:180:270===t.K?n&&!e.rev||!n&&e.rev?90:270:n&&!e.rev||!n&&e.rev?180:0}function ef(t,e){var n=e.layer;for(e.index=t.Bb[n],t.Bb[n]++,e=e.destinationEdgesArrayAccess,n=!0;n;){n=!1;for(var s=0;s<e.length-1;s++){var a=e[s],u=e[s+1];a.portFromColOffset>u.portFromColOffset&&(n=!0,e[s]=u,e[s+1]=a)}}for(n=0;n<e.length;n++)(s=e[n]).valid&&-1===(s=s.toVertex).index&&ef(t,s)}function i1(t,e){var n=e.layer;e.index=t.Bb[n],t.Bb[n]++,e=e.sourceEdgesArrayAccess;for(var s=!0;s;)for(s=!1,n=0;n<e.length-1;n++){var a=e[n],u=e[n+1];a.portToColOffset>u.portToColOffset&&(s=!0,e[n]=u,e[n+1]=a)}for(n=0;n<e.length;n++)(s=e[n]).valid&&-1===(s=s.fromVertex).index&&i1(t,s)}function nf(t,e,n){var s=qa(t,e),a=t.Bb[e],u=je(t,e,n),c=hg(t,e,n);for(n=0;n<a;n++)-1===c[n]&&(c[n]=s[n].column),-1===u[n]&&(u[n]=s[n].column);for(var p,f=!0;f;)for(f=!1,n=0;n<a-1;n++)(u[n+1]<u[n]||u[n+1]===u[n]&&c[n+1]<c[n])&&(f=!0,p=u[n],u[n]=u[n+1],u[n+1]=p,p=c[n],c[n]=c[n+1],c[n+1]=p,p=s[n],s[n]=s[n+1],s[n+1]=p);for(n=u=0;n<a;n++)(p=s[n]).index=n,u+=t.nodeMinColumnSpace(p,!0),p.column=u,u+=1,u+=t.nodeMinColumnSpace(p,!1);ba(t,e,s)}function me(t,e,n){var s=qa(t,e),a=t.Bb[e];n=dM(t,e,n);var u,c=[];for(u=0;u<a;u++)c[u]=-1;var f=[];for(u=0;u<a;u++)f[u]=-1;for(var p=!1,g=!0;g;)for(g=!1,u=0;u<a-1;u++){var y=n[s[u].index*a+s[u+1].index],v=n[s[u+1].index*a+s[u].index],_=0,b=0,D=s[u].column,k=s[u+1].column,O=t.nodeMinColumnSpace(s[u],!0),E=t.nodeMinColumnSpace(s[u],!1),R=t.nodeMinColumnSpace(s[u+1],!0),F=t.nodeMinColumnSpace(s[u+1],!1);O=D-O+R,E=k-E+F;var j=s[u].sourceEdges.iterator;for(j.reset();j.next();)if(F=(R=j.value).fromVertex,R.valid&&F.layer===e){for(R=0;s[R]!==F;)R++;R<u&&(_+=2*(u-R),b+=2*(u+1-R)),R===u+1&&(_+=1),R>u+1&&(_+=4*(R-u),b+=4*(R-(u+1)))}for((j=s[u].destinationEdges.iterator).reset();j.next();)if(F=(R=j.value).toVertex,R.valid&&F.layer===e){for(R=0;s[R]!==F;)R++;R===u+1&&(b+=1)}for((j=s[u+1].sourceEdges.iterator).reset();j.next();)if(F=(R=j.value).fromVertex,R.valid&&F.layer===e){for(R=0;s[R]!==F;)R++;R<u&&(_+=2*(u+1-R),b+=2*(u-R)),R===u&&(b+=1),R>u+1&&(_+=4*(R-(u+1)),b+=4*(R-u))}for((j=s[u+1].destinationEdges.iterator).reset();j.next();)if(F=(R=j.value).toVertex,R.valid&&F.layer===e){for(R=0;s[R]!==F;)R++;R===u&&(_+=1)}R=F=0;var L=f[s[u].index],G=c[s[u+1].index],ot=f[s[u+1].index];-1!==(j=c[s[u].index])&&(F+=Math.abs(j-D),R+=Math.abs(j-E)),-1!==L&&(F+=Math.abs(L-D),R+=Math.abs(L-E)),-1!==G&&(F+=Math.abs(G-k),R+=Math.abs(G-O)),-1!==ot&&(F+=Math.abs(ot-k),R+=Math.abs(ot-O)),(b<_-.5||b===_&&v<y-.5||b===_&&v===y&&R<F-.5)&&(g=p=!0,s[u].column=E,s[u+1].column=O,y=s[u],s[u]=s[u+1],s[u+1]=y)}for(u=0;u<a;u++)s[u].index=u;return ba(t,e,s),p}function uc(t,e,n){for(var s=!1;fM(t,e,n);)s=!0;return s}function fM(t,e,n){var s,a=qa(t,e),u=t.Bb[e],c=hg(t,e,-1);if(0<n)for(s=0;s<u;s++)c[s]=-1;var f=hg(t,e,1);if(0>n)for(s=0;s<u;s++)f[s]=-1;for(var p=!1,g=!0;g;)for(g=!1,s=0;s<u;s++){var b,y=a[s].column,v=t.nodeMinColumnSpace(a[s],!0),_=t.nodeMinColumnSpace(a[s],!1);b=0>s-1||y-a[s-1].column-1>v+t.nodeMinColumnSpace(a[s-1],!1)?y-1:y,v=s+1>=u||a[s+1].column-y-1>_+t.nodeMinColumnSpace(a[s+1],!0)?y+1:y;var D=_=0,k=0;if(0>=n)for(var O=a[s].sourceEdges.iterator;O.next();){var E=O.value,R=E.fromVertex;if(E.valid&&R.layer!==e){var F=mx(E),j=E.portFromColOffset;E=E.portToColOffset,R=R.column,_+=(Math.abs(y+E-(R+j))+1)*F,D+=(Math.abs(b+E-(R+j))+1)*F,k+=(Math.abs(v+E-(R+j))+1)*F}}if(0<=n)for(O=a[s].destinationEdges.iterator;O.next();)R=(E=O.value).toVertex,E.valid&&R.layer!==e&&(F=mx(E),j=E.portFromColOffset,E=E.portToColOffset,R=R.column,_+=(Math.abs(y+j-(R+E))+1)*F,D+=(Math.abs(b+j-(R+E))+1)*F,k+=(Math.abs(v+j-(R+E))+1)*F);E=j=F=0,R=f[a[s].index],-1!==(O=c[a[s].index])&&(F+=Math.abs(O-y),j+=Math.abs(O-b),E+=Math.abs(O-v)),-1!==R&&(F+=Math.abs(R-y),j+=Math.abs(R-b),E+=Math.abs(R-v)),D<_||D===_&&j<F?(g=p=!0,a[s].column=b):(k<_||k===_&&E<F)&&(g=p=!0,a[s].column=v)}return ba(t,e,a),t.normalize(),p}function Ty(t,e,n){var s=qa(t,e),a=t.Bb[e],u=je(t,e,n),c=[];for(n=0;n<a;n++)c[n]=u[n];for(u=!0;u;)for(u=!1,n=0;n<a;n++){var f=s[n].column,p=t.nodeMinColumnSpace(s[n],!0),g=t.nodeMinColumnSpace(s[n],!1),y=0;if(-1===c[n])if(0===n&&n===a-1)y=f;else if(0===n){var v=s[n+1].column;y=v-f===g+t.nodeMinColumnSpace(s[n+1],!0)?f-1:f}else y=n===a-1?f-(v=s[n-1].column)===p+t.nodeMinColumnSpace(s[n-1],!1)?f+1:f:((p=(v=s[n-1].column)+t.nodeMinColumnSpace(s[n-1],!1)+p+1)+(g=(v=s[n+1].column)-t.nodeMinColumnSpace(s[n+1],!0)-g-1))/2|0;else 0===n&&n===a-1?y=c[n]:0===n?(g=(v=s[n+1].column)-t.nodeMinColumnSpace(s[n+1],!0)-g-1,y=Math.min(c[n],g)):n===a-1?(p=(v=s[n-1].column)+t.nodeMinColumnSpace(s[n-1],!1)+p+1,y=Math.max(c[n],p)):(p=(v=s[n-1].column)+t.nodeMinColumnSpace(s[n-1],!1)+p+1,g=(v=s[n+1].column)-t.nodeMinColumnSpace(s[n+1],!0)-g-1,p<c[n]&&c[n]<g?y=c[n]:p>=c[n]?y=p:g<=c[n]&&(y=g));y!==f&&(u=!0,s[n].column=y)}ba(t,e,s),t.normalize()}function _x(t,e){for(var n=!0,s=t.network.vertexes.iterator;s.next();){var a=s.value,u=t.nodeMinColumnSpace(a,!0),c=t.nodeMinColumnSpace(a,!1);if(a.column-u<=e&&a.column+c>=e){n=!1;break}}if(t=!1,n)for(s.reset();s.next();)(n=s.value).column>e&&(--n.column,t=!0);return t}function r1(t,e){var s,n=e+1,a=[],u=[];for(s=0;s<=t.ra;s++)a[s]=!1,u[s]=!1;for(var c=t.network.vertexes.iterator;c.next();){var f=(s=c.value).column-t.nodeMinColumnSpace(s,!0),p=s.column+t.nodeMinColumnSpace(s,!1);f<=e&&p>=e&&(a[s.layer]=!0),f<=n&&p>=n&&(u[s.layer]=!0)}for(f=!0,n=!1,s=0;s<=t.ra;s++)f=f&&!(a[s]&&u[s]);if(f)for(c.reset();c.next();)(t=c.value).column>e&&(--t.column,n=!0);return n}function Sn(t,e){for(var n=0;n<=t.Ea;n++)for(;_x(t,n););for(t.normalize(),n=0;n<t.Ea;n++)for(;r1(t,n););var s;if(t.normalize(),0<e)for(n=0;n<=t.Ea;n++){var a=ui(t),u=at(t);for(s=u+1;u<s;){s=u,xx(t,n,1);var c=at(t);c>u?Pr(t,a):c<u&&(u=c,a=ui(t))}}if(0>e)for(n=t.Ea;0<=n;n--)for(a=ui(t),s=(u=at(t))+1;u<s;)s=u,xx(t,n,-1),(c=at(t))>u?Pr(t,a):c<u&&(u=c,a=ui(t));t.normalize()}function xx(t,e,n){t.Ec=0;for(var s=t.network.vertexes.iterator;s.next();)s.value.component=-1;if(0<n)for(s.reset();s.next();){var a=s.value;a.column-t.nodeMinColumnSpace(a,!0)<=e&&(a.component=t.Ec)}if(0>n)for(s.reset();s.next();)(a=s.value).column+t.nodeMinColumnSpace(a,!1)>=e&&(a.component=t.Ec);for(t.Ec++,s.reset();s.next();)-1===(e=s.value).component&&(t1(t,e,t.Ec,-1,!0,!0),t.Ec++);var u;for(e=[],u=0;u<t.Ec*t.Ec;u++)e[u]=!1;for(a=[],u=0;u<(t.ra+1)*(t.Ea+1);u++)a[u]=-1;for(s.reset();s.next();)for(var c=(u=s.value).layer,f=Math.max(0,u.column-t.nodeMinColumnSpace(u,!0)),p=Math.min(t.Ea,u.column+t.nodeMinColumnSpace(u,!1));f<=p;f++)a[c*(t.Ea+1)+f]=u.component;for(u=0;u<=t.ra;u++){if(0<n)for(c=0;c<t.Ea;c++)-1!==a[u*(t.Ea+1)+c]&&-1!==a[u*(t.Ea+1)+c+1]&&a[u*(t.Ea+1)+c]!==a[u*(t.Ea+1)+c+1]&&(e[a[u*(t.Ea+1)+c]*t.Ec+a[u*(t.Ea+1)+c+1]]=!0);if(0>n)for(c=t.Ea;0<c;c--)-1!==a[u*(t.Ea+1)+c]&&-1!==a[u*(t.Ea+1)+c-1]&&a[u*(t.Ea+1)+c]!==a[u*(t.Ea+1)+c-1]&&(e[a[u*(t.Ea+1)+c]*t.Ec+a[u*(t.Ea+1)+c-1]]=!0)}for(a=[],u=0;u<t.Ec;u++)a[u]=!0;for((c=[]).push(0);0!==c.length;)if(p=c[c.length-1],c.pop(),a[p])for(a[p]=!1,u=0;u<t.Ec;u++)e[p*t.Ec+u]&&c.splice(0,0,u);if(0<n)for(s.reset();s.next();)a[(t=s.value).component]&&--t.column;if(0>n)for(s.reset();s.next();)a[(n=s.value).component]&&(n.column+=1)}function cg(t,e){return 270===t.K?e?yn:In:90===t.K?e?In:yn:180===t.K?e?Bi:Wn:e?Wn:Bi}function qa(t,e){var n=t.Bb[e];if(n>=t.ye.length){for(var s=[],a=0;a<t.ye.length;a++)s[a]=t.ye[a];t.ye=s}for(null==t.ye[n]?s=[]:(s=t.ye[n],t.ye[n]=null),t=t.zo[e],e=0;e<t.length;e++)s[(n=t[e]).index]=n;return s}function ba(t,e,n){t.ye[t.Bb[e]]=n}ge.className="CircularLayout",ge.ConstantSpacing=_o,ge.ConstantDistance=Xa,ge.ConstantAngle=Za,ge.Packed=eo,ge.Clockwise=_i,ge.Counterclockwise=Ul,ge.BidirectionalLeft=oc,ge.BidirectionalRight=Jd,ge.Forwards=qd,ge.Reverse=Qd,ge.Ascending=by,ge.Descending=qv,ge.Optimized=sg,ge.Pythagorean=Qv,ge.Circular=sc,tf.prototype.compare=function(t,e){if(0<t&&0>this.bm||Math.abs(t)<Math.abs(this.bm)&&!(0>t&&0<this.bm))for(this.bm=t,this.sk=[],this.Hm=[],t=0;t<e.length;t++)this.sk[t]=e[t].bounds.x,this.Hm[t]=e[t].bounds.y},tf.prototype.commit=function(t){if(null!==this.sk&&null!==this.Hm)for(var e=0;e<this.sk.length;e++){var n=t.J(e);n.x=this.sk[e],n.y=this.Hm[e]}},tf.className="VertexArrangement",Wt(ag,qt),ag.prototype.createVertex=function(){return new lg(this)},ag.prototype.createEdge=function(){return new My(this)},ag.className="CircularNetwork",Wt(lg,Pe),kt.Object.defineProperties(lg.prototype,{diameter:{get:function(){return this.gj},set:function(t){this.gj!==t&&(this.gj=t)}},actualAngle:{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t)}}}),lg.className="CircularVertex",Wt(My,zn),My.className="CircularEdge",Wt(fn,Ht),fn.prototype.cloneProtected=function(t){Ht.prototype.cloneProtected.call(this,t),t.Rd.assign(this.Rd),t.Sm=this.Sm,t.hf=this.hf,t.jd=this.jd,t.pl=this.pl,t.wn=this.wn,t.Tf=this.Tf,t.xo=this.xo,t.To=this.To,t.Pk=this.Pk,t.Ok=this.Ok,t.Mk=this.Mk,t.Nk=this.Nk,t.on=this.on,t.nn=this.nn},fn.prototype.serializeLayoutProperties=function(t,e){Ht.prototype.serializeLayoutProperties.call(this,t,e),t.arrangementSpacing={width:this.arrangementSpacing.width,height:this.arrangementSpacing.height},t.arrangesToOrigin=this.arrangesToOrigin,t.setsPortSpots=this.setsPortSpots,t.comments=this.comments,t.maxIterations=this.maxIterations,t.epsilonDistance=this.epsilonDistance,t.infinityDistance=this.infinityDistance,t.moveLimit=this.moveLimit,t.defaultSpringStiffness=this.defaultSpringStiffness,t.defaultSpringLength=this.defaultSpringLength,t.defaultElectricalCharge=this.defaultElectricalCharge,t.defaultGravitationalMass=this.defaultGravitationalMass,t.defaultCommentSpringLength=this.defaultCommentSpringLength,t.defaultCommentElectricalCharge=this.defaultCommentElectricalCharge},fn.prototype.deserializeLayoutProperties=function(t,e,n,s,a){Ht.prototype.deserializeLayoutProperties.call(this,t,e,n,s,a),this.arrangementSpacing=new Dt(t.arrangementSpacing.width,t.arrangementSpacing.height),this.arrangesToOrigin=t.arrangesToOrigin,this.setsPortSpots=t.setsPortSpots,this.comments=t.comments,this.maxIterations=t.maxIterations,this.epsilonDistance=t.epsilonDistance,this.infinityDistance=t.infinityDistance,this.moveLimit=t.moveLimit,this.defaultSpringStiffness=t.defaultSpringStiffness,this.defaultSpringLength=t.defaultSpringLength,this.defaultElectricalCharge=t.defaultElectricalCharge,this.defaultGravitationalMass=t.defaultGravitationalMass,this.defaultCommentSpringLength=t.defaultCommentSpringLength,this.defaultCommentElectricalCharge=t.defaultCommentElectricalCharge},fn.prototype.createNetwork=function(){return new Hu(this)},fn.prototype.doLayout=function(t){if(null===this.network&&(this.network=this.makeNetwork(t)),!this.dw()){if(t=this.maxIterations,0<this.network.vertexes.count){this.network.Tp();for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;n.charge=this.electricalCharge(n),n.mass=this.gravitationalMass(n)}for(e=this.network.edges.iterator;e.next();)(n=e.value).stiffness=this.springStiffness(n),n.length=this.springLength(n);if(this.Du(),this.bo=0,this.needsClusterLayout()){for(var s=(n=(e=this.network).Ey()).iterator;s.next();){this.network=s.value;for(var a=this.network.vertexes.iterator;a.next();){var u=a.value;u.Kd=u.vertexes.count,u.Kh=1,u.Sj=null,u.Me=null}ux(this,0,t)}this.network=e;var c=s=n.iterator;s=this.arrangementSpacing;var f=c.count,p=!0;u=a=0;for(var g=Lt(),y=0;y<f+e.vertexes.count+2;y++)g[y]=null;f=0,c.reset();for(var v=z.alloc();c.next();)if(this.computeBounds(y=c.value,v),p)p=!1,a=v.x+v.width/2,u=v.y+v.height/2,g[0]=new A(v.x+v.width+s.width,v.y),g[1]=new A(v.x,v.y+v.height+s.height),f=2;else{var _=dx(g,f,a,u,v.width,v.height,s),b=g[_],D=new A(b.x+v.width+s.width,b.y),k=new A(b.x,b.y+v.height+s.height);for(_+1<f&&g.splice(_+1,0,null),g[_]=D,g[_+1]=k,f++,_=b.x-v.x,b=b.y-v.y,y=y.vertexes.iterator;y.next();)(D=y.value).centerX+=_,D.centerY+=b}for(z.free(v),y=e.vertexes.iterator;y.next();)_=(c=y.value).bounds,2>f?(a=_.x+_.width/2,u=_.y+_.height/2,g[0]=new A(_.x+_.width+s.width,_.y),g[1]=new A(_.x,_.y+_.height+s.height),f=2):(b=new A((v=g[p=dx(g,f,a,u,_.width,_.height,s)]).x+_.width+s.width,v.y),_=new A(v.x,v.y+_.height+s.height),p+1<f&&g.splice(p+1,0,null),g[p]=b,g[p+1]=_,f++,c.centerX=v.x+c.width/2,c.centerY=v.y+c.height/2);for(ee(g),s=n.iterator;s.next();){for(a=(n=s.value).vertexes.iterator;a.next();)e.og(a.value);for(n=n.edges.iterator;n.next();)e.Tl(n.value)}}px(this,t),this.updateParts()}this.pl=t,this.network=null,this.isValidLayout=!0}},fn.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,e=0,n=this.network.vertexes.first().bounds,s=this.network.vertexes.iterator;s.next();){if(s.value.bounds.Lc(n)&&2<++t)return!0;if(10<e)break;e++}return!1},fn.prototype.computeBounds=function(t,e){var n=!0;for(t=t.vertexes.iterator;t.next();){var s=t.value;n?(n=!1,e.set(s.bounds)):e.Qc(s.bounds)}return e},fn.prototype.Du=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},fn.prototype.addComments=function(t){var e=t.node;if(null!==e)for(e=e.Vu();e.next();){var n=e.value;if("Comment"===n.category&&n.isVisible()){var s=this.network.Ji(n);null===s&&(s=this.network.Pj(n)),s.charge=this.defaultCommentElectricalCharge,n=null;for(var a=s.destinationEdges;a.next();){var u=a.value;if(u.toVertex===t){n=u;break}}if(null===n)for(a=s.sourceEdges;a.next();)if((u=a.value).fromVertex===t){n=u;break}null===n&&(n=this.network.gk(t,s,null)),n.length=this.defaultCommentSpringLength}}},fn.prototype.moveVertex=function(t){var e=t.forceX,n=t.forceY,s=this.moveLimit;return e<-s?e=-s:e>s&&(e=s),n<-s?n=-s:n>s&&(n=s),t.centerX+=e,t.centerY+=n,e*e+n*n},fn.prototype.moveFixedVertex=function(){},fn.prototype.commitLayout=function(){this.Qv(),this.commitNodes(),this.isRouting&&this.commitLinks()},fn.prototype.Qv=function(){if(this.setsPortSpots)for(var t=this.network.edges.iterator;t.next();){var e=t.value.link;null!==e&&(e.fromSpot=Xt,e.toSpot=Xt)}},fn.prototype.commitNodes=function(){var t=0,e=0;if(this.arrangesToOrigin){var n=z.alloc();this.computeBounds(this.network,n),t=(e=this.arrangementOrigin).x-n.x,e=e.y-n.y,z.free(n)}n=z.alloc();for(var s=this.network.vertexes.iterator;s.next();){var a=s.value;(0!==t||0!==e)&&(n.assign(a.bounds),n.x+=t,n.y+=e,a.bounds=n),a.commit()}z.free(n)},fn.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},fn.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Pk:t},fn.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.Ok:t},fn.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.Mk:t},fn.prototype.electricalFieldX=function(){return 0},fn.prototype.electricalFieldY=function(){return 0},fn.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.Nk:t},fn.prototype.gravitationalFieldX=function(){return 0},fn.prototype.gravitationalFieldY=function(){return 0},fn.prototype.isFixed=function(t){return t.isFixed},kt.Object.defineProperties(fn.prototype,{currentIteration:{get:function(){return this.bo}},arrangementSpacing:{get:function(){return this.Rd},set:function(t){this.Rd.A(t)||(this.Rd.assign(t),this.B())}},arrangesToOrigin:{get:function(){return this.Sm},set:function(t){this.Sm!==t&&(this.Sm=t,this.B())}},setsPortSpots:{get:function(){return this.hf},set:function(t){this.hf!==t&&(this.hf=t,this.B())}},comments:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t,this.B())}},maxIterations:{get:function(){return this.pl},set:function(t){this.pl!==t&&0<=t&&(this.pl=t,this.B())}},epsilonDistance:{get:function(){return this.wn},set:function(t){this.wn!==t&&0<t&&(this.wn=t,this.B())}},infinityDistance:{get:function(){return this.Tf},set:function(t){this.Tf!==t&&1<t&&(this.Tf=t,this.B())}},moveLimit:{get:function(){return this.xo},set:function(t){this.xo!==t&&1<t&&(this.xo=t,this.B())}},randomNumberGenerator:{get:function(){return this.To},set:function(t){this.To!==t&&(null!==t&&"function"!=typeof t.random&&q('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.To=t)}},defaultSpringStiffness:{get:function(){return this.Pk},set:function(t){this.Pk!==t&&(this.Pk=t,this.B())}},defaultSpringLength:{get:function(){return this.Ok},set:function(t){this.Ok!==t&&(this.Ok=t,this.B())}},defaultElectricalCharge:{get:function(){return this.Mk},set:function(t){this.Mk!==t&&(this.Mk=t,this.B())}},defaultGravitationalMass:{get:function(){return this.Nk},set:function(t){this.Nk!==t&&(this.Nk=t,this.B())}},defaultCommentSpringLength:{get:function(){return this.on},set:function(t){this.on!==t&&(this.on=t,this.B())}},defaultCommentElectricalCharge:{get:function(){return this.nn},set:function(t){this.nn!==t&&(this.nn=t,this.B())}}}),fn.className="ForceDirectedLayout",gx.className="ForceDirectedSubnet",Wt(Hu,qt),Hu.prototype.createVertex=function(){return new ac(this)},Hu.prototype.createEdge=function(){return new Vu(this)},Hu.className="ForceDirectedNetwork",Wt(ac,Pe),ac.prototype.serializeVertexProperties=function(t,e){Pe.prototype.serializeVertexProperties.call(this,t,e),t.isFixed=this.isFixed,t.charge=this.charge,t.mass=this.mass},ac.prototype.deserializeVertexProperties=function(t,e,n,s){Pe.prototype.deserializeVertexProperties.call(this,t,e,n,s),this.isFixed=t.isFixed,this.charge=t.charge,this.mass=t.mass},kt.Object.defineProperties(ac.prototype,{isFixed:{get:function(){return this.Ba},set:function(t){this.Ba!==t&&(this.Ba=t)}},charge:{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t)}},mass:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},forceX:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}},forceY:{get:function(){return this.wa},set:function(t){this.wa!==t&&(this.wa=t)}}}),ac.className="ForceDirectedVertex",Wt(Vu,zn),Vu.prototype.serializeEdgeProperties=function(t,e){zn.prototype.serializeEdgeProperties.call(this,t,e),t.stiffness=this.stiffness,t.length=this.length},Vu.prototype.deserializeEdgeProperties=function(t,e,n,s){zn.prototype.deserializeEdgeProperties.call(this,t,e,n,s),this.stiffness=t.stiffness,this.length=t.length},kt.Object.defineProperties(Vu.prototype,{stiffness:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},length:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}}}),Vu.className="ForceDirectedEdge",ug.prototype.random=function(){var t=this.seed%this.Q*this.Gy-this.seed/this.Q*this.Jy;return this.seed=0<t?t:t+this.Iy,this.seed*this.Hy},ug.className="RandomNumberGenerator",Wt(Yt,Ht),Yt.prototype.cloneProtected=function(t){Ht.prototype.cloneProtected.call(this,t),t.be=this.be,t.ac=this.ac,t.K=this.K,t.Lk=this.Lk,t.kl=this.kl,t.$k=this.$k,t.sj=this.sj,t.wk=this.wk,t.ag=this.ag,t.hf=this.hf,t.jo=this.jo},Yt.prototype.serializeLayoutProperties=function(t,e){Ht.prototype.serializeLayoutProperties.call(this,t,e),t.layerSpacing=this.layerSpacing,t.columnSpacing=this.columnSpacing,t.direction=this.direction,t.cycleRemoveOption=this.cycleRemoveOption.name,t.layeringOption=this.layeringOption.name,t.initializeOption=this.initializeOption.name,t.iterations=this.iterations,t.aggressiveOption=this.aggressiveOption.name,t.packOption=this.packOption,t.setsPortSpots=this.setsPortSpots,t.linkSpacing=this.linkSpacing,t.ra=this.ra,t.ji=this.ji,t.Ea=this.Ea,t.Wg=this.Wg,t.vc=this.vc,t.Bb=this.Bb,t.dh=this.dh,t.Ec=this.Ec,t.Rc={x:this.Rc.x,y:this.Rc.y}},Yt.prototype.deserializeLayoutProperties=function(t,e,n,s,a){Ht.prototype.deserializeLayoutProperties.call(this,t,e,n,s,a),this.layerSpacing=t.layerSpacing,this.columnSpacing=t.columnSpacing,this.direction=t.direction,this.cycleRemoveOption=sa(Yt,t.cycleRemoveOption),this.layeringOption=sa(Yt,t.layeringOption),this.initializeOption=sa(Yt,t.initializeOption),this.iterations=t.iterations,this.aggressiveOption=sa(Yt,t.aggressiveOption),this.packOption=t.packOption,this.setsPortSpots=t.setsPortSpots,this.linkSpacing=t.linkSpacing,this.ra=t.ra,this.ji=t.ji,this.Ea=t.Ea,this.Wg=t.Wg,this.vc=t.vc,this.Bb=t.Bb,this.dh=t.dh,this.Ec=t.Ec,this.Rc=new A(this.Rc.x,this.Rc.y),a&&!s&&a.edges.each(function(u){if(!u.link&&u.fromVertex&&u.toVertex&&(null===u.fromVertex.node||null===u.toVertex.node)){for(var c=u.fromVertex;null!==c&&null===c.node&&0<c.sd.count;){var f=c.sd.J(0);if(f.link){u.link=f.link;break}c=f.fromVertex}if(!u.link){for(f=u.toVertex;null!==f&&null===f.node&&0<f.Fd.count;){var p=f.Fd.J(0);if(p.link){u.link=p.link;break}f=p.toVertex}if(!u.link)for(f=f.sd.iterator;f.next();)if((p=f.value).link&&p.fromVertex===c){u.link=p.link;break}}}})},Yt.prototype.gb=function(t){t.classType===Yt?0===t.name.indexOf("Aggressive")?this.aggressiveOption=t:0===t.name.indexOf("Cycle")?this.cycleRemoveOption=t:0===t.name.indexOf("Init")?this.initializeOption=t:0===t.name.indexOf("Layer")?this.layeringOption=t:q("Unknown enum value: "+t):Ht.prototype.gb.call(this,t)},Yt.prototype.createNetwork=function(){return new Jn(this)},Yt.prototype.doLayout=function(t){for(null===this.network&&(this.network=this.makeNetwork(t)),this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin),this.ji=-1,this.vc=this.Wg=0,this.zo=this.yo=this.zj=null,t=0;t<this.ye.length;t++)this.ye[t]=null;if(0<this.network.vertexes.count){if(this.network.Tp(),this.dw())return;for(this.cycleRemoveOption!==rf&&this.removeCycles(),t=this.network.vertexes.iterator;t.next();)t.value.layer=-1;for(this.ra=-1,this.assignLayers(),t.reset();t.next();)this.ra=Math.max(this.ra,t.value.layer);this.cycleRemoveOption===rf&&this.removeCycles();for(var e=[],n=(t=this.network).edges.iterator;n.next();){var s=n.value;s.valid=!1,e.push(s)}for(n=0;n<e.length;n++){var a=(s=e[n]).fromVertex,u=s.toVertex;if(!(s.valid||(null===a.node&&null===a.data||null===u.node&&null===u.data)&&a.layer===u.layer)){var c=0,f=0,p=0,g=0;if(null!==s.link){if(null===(f=s.link))continue;var y=a.node;if(c=u.node,null===y||null===c)continue;var v=f.fromNode;p=f.toNode;var _=f.fromPort;if(f=f.toPort,s.rev){g=v;var b=_;v=p,_=f,p=g,f=b}var D=a.focus;g=u.focus;var k=s.rev?u.bounds:a.bounds;b=A.alloc(),y!==v?k.u()&&v.isVisible()?v.actualBounds.u()?(Gs(v,_,Ut,b),b.x+=v.actualBounds.x-k.x,b.y+=v.actualBounds.y-k.y):(Gs(v,_,Ut,b),b.u()||b.assign(D)):b.assign(D):k.u()?(Gs(v,_,Ut,b),b.u()||b.assign(D)):b.assign(D),v=s.rev?a.bounds:u.bounds,y=A.alloc(),c!==p?v.u()&&p.isVisible()?p.actualBounds.u()?(Gs(p,f,Ut,y),y.x+=p.actualBounds.x-v.x,y.y+=p.actualBounds.y-v.y):(Gs(p,f,Ut,y),y.u()||y.assign(g)):y.assign(g):v.u()?(Gs(p,f,Ut,y),y.u()||y.assign(g)):y.assign(g),90===this.K||270===this.K?(c=Math.round((b.x-D.x)/this.ac),p=b.x,f=Math.round((y.x-g.x)/this.ac),g=y.x):(c=Math.round((b.y-D.y)/this.ac),p=b.y,f=Math.round((y.y-g.y)/this.ac),g=y.y),A.free(b),A.free(y),s.portFromColOffset=c,s.portFromPos=p,s.portToColOffset=f,s.portToPos=g}else s.portFromColOffset=0,s.portFromPos=0,s.portToColOffset=0,s.portToPos=0;if(b=a.layer,y=u.layer,v=0,null!==(k=s.link)){var O=k.fromPort,E=k.toPort;if(null!==O&&null!==E){var R=k.fromNode;if(_=k.toNode,null!==R&&null!==_){var F=cg(this,!0),j=cg(this,!1),L=this.setsPortSpots?F:k.computeSpot(!0,O);D=this.setsPortSpots?j:k.computeSpot(!1,E);var G=k.isOrthogonal;L.Nc()&&L.Df(j)&&D.Nc()&&D.Df(F)?v=0:(F=k.getLinkPoint(R,O,L,!0,G,_,E,A.alloc()),j=k.getLinkDirection(R,O,F,L,!0,G,_,E),A.free(F),L.Es()||j!==Ja(this,s,!0)?this.setsPortSpots&&null!==R&&1===R.ports.count&&s.rev&&(v+=1):v+=1,L=k.getLinkPoint(_,E,D,!1,G,R,O,A.alloc()),k=k.getLinkDirection(_,E,L,D,!1,G,R,O),A.free(L),D.Es()||k!==Ja(this,s,!1)?this.setsPortSpots&&null!==_&&1===_.ports.count&&s.rev&&(v+=2):v+=2)}}}if(v=1===(_=v)||3===_,(_=2===_||3===_)&&((D=t.createVertex()).node=null,D.uf=1,D.layer=b,D.near=a,t.og(D),(a=t.gk(a,D,s.link)).valid=!1,a.rev=s.rev,a.portFromColOffset=c,a.portToColOffset=0,a.portFromPos=p,a.portToPos=0,a=D),k=1,v&&k--,b-y>k&&0<b){for(s.valid=!1,(D=t.createVertex()).node=null,D.uf=2,D.layer=b-1,t.og(D),(a=t.gk(a,D,s.link)).valid=!0,a.rev=s.rev,a.portFromColOffset=_?0:c,a.portToColOffset=0,a.portFromPos=_?0:p,a.portToPos=0,a=D,b--;b-y>k&&0<b;)(D=t.createVertex()).node=null,D.uf=3,D.layer=b-1,t.og(D),(a=t.gk(a,D,s.link)).valid=!0,a.rev=s.rev,a.portFromColOffset=0,a.portToColOffset=0,a.portFromPos=0,a.portToPos=0,a=D,b--;(a=t.gk(D,u,s.link)).valid=!v,v&&(D.near=u),a.rev=s.rev,a.portFromColOffset=0,a.portToColOffset=f,a.portFromPos=0,a.portToPos=g}else s.valid=!0}}for(t=this.Bb=[],e=0;e<=this.ra;e++)t[e]=0;for(e=this.network.vertexes.iterator;e.next();)e.value.index=-1;for(this.initializeIndices(),this.ji=-1,n=this.vc=this.Wg=0;n<=this.ra;n++)t[n]>t[this.vc]&&(this.ji=t[n]-1,this.vc=n),t[n]<t[this.Wg]&&(this.Wg=n);for(this.zo=[],n=0;n<t.length;n++)this.zo[n]=[];for(e.reset();e.next();)this.zo[(t=e.value).layer][t.index]=t;for(this.Ea=-1,t=0;t<=this.ra;t++){for(e=qa(this,t),n=0,s=this.Bb[t],u=0;u<s;u++)n+=this.nodeMinColumnSpace(a=e[u],!0),a.column=n,n+=1,n+=this.nodeMinColumnSpace(a,!1);this.Ea=Math.max(this.Ea,n-1),ba(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.isValidLayout=!0},Yt.prototype.linkMinLength=function(){return 1},Yt.prototype.nodeMinLayerSpace=function(t,e){return null===t.node&&null===t.data?0:90===this.K||270===this.K?e?t.focus.y+10:t.bounds.height-t.focus.y+10:e?t.focus.x+10:t.bounds.width-t.focus.x+10},Yt.prototype.nodeMinColumnSpace=function(t,e){if(null===t.node&&null===t.data)return 0;var n=e?t.kk:t.jk;return null!==n?n:90===(n=this.K)||270===n?e?t.kk=t.focus.x/this.ac+1|0:t.jk=(t.bounds.width-t.focus.x)/this.ac+1|0:e?t.kk=t.focus.y/this.ac+1|0:t.jk=(t.bounds.height-t.focus.y)/this.ac+1|0},Yt.prototype.countCrossings=function(){for(var t=0,e=0;e<=this.ra;e++)for(var n=dM(this,e,1),s=this.Bb[e],a=0;a<s;a++)for(var u=a;u<s;u++)t+=n[a*s+u];return t},Yt.prototype.normalize=function(){var t=1/0;this.Ea=-1;for(var e=this.network.vertexes.iterator;e.next();){var n=e.value;t=Math.min(t,n.column-this.nodeMinColumnSpace(n,!0)),this.Ea=Math.max(this.Ea,n.column+this.nodeMinColumnSpace(n,!1))}for(e.reset();e.next();)e.value.column-=t;this.Ea-=t},Yt.prototype.removeCycles=function(){for(var t=this.network.edges.iterator;t.next();)t.value.rev=!1;switch(this.Lk){default:case Sy:var e=0,n=(t=this.network).vertexes.count-1,s=[];s.length=n+1;for(var a=t.vertexes.iterator;a.next();)a.value.valid=!0;for(;null!==T(t);){for(a=C(t);null!==a;)s[n]=a,n--,a.valid=!1,a=C(t);for(a=J(t);null!==a;)s[e]=a,e++,a.valid=!1,a=J(t);a=null;for(var u=0,c=this.network.vertexes.iterator;c.next();){var f=c.value;if(f.valid){for(var p=0,g=f.destinationEdges;g.next();)g.value.toVertex.valid&&p++;g=0;for(var y=f.sourceEdges;y.next();)y.value.fromVertex.valid&&g++;(null===a||u<p-g)&&(a=f,u=p-g)}}null!==a&&(s[e]=a,e++,a.valid=!1)}for(e=0;e<t.vertexes.count;e++)s[e].index=e;for(s=t.edges.iterator;s.next();)(e=s.value).fromVertex.index>e.toVertex.index&&(t.sm(e),e.rev=!0);break;case hc:for(s=this.network.vertexes.iterator;s.next();)(t=s.value).pg=-1,t.finish=-1;for(t=this.network.edges.iterator;t.next();)t.value.forest=!1;for(this.dh=0,s.reset();s.next();)0===(e=s.value).sourceEdges.count&&yx(this,e);for(s.reset();s.next();)-1===(e=s.value).pg&&yx(this,e);for(t.reset();t.next();)(s=t.value).forest||(n=(e=s.fromVertex).finish,u=(a=s.toVertex).finish,a.pg<e.pg&&n<u&&(this.network.sm(s),s.rev=!0));break;case rf:for(e=(t=this.network).vertexes.iterator,s=1/0;e.next();)s=Math.min(s,e.value.layer);if(1/0>s){if(0>s)for(e.reset();e.next();)e.value.layer-=s;for(s=[],e.reset();e.next();)void 0===(a=s[(n=e.value).layer])?s[n.layer]=[n]:a.push(n);for(n=e=0;n<s.length;n++)if((a=s[n])&&0!==a.length){if(0<n)for(u=0;u<a.length;u++)a[u].layer-=e}else e++;for(s=t.edges.iterator;s.next();)(e=s.value).fromVertex.layer<e.toVertex.layer&&(t.sm(e),e.rev=!0)}}},Yt.prototype.assignLayers=function(){switch(this.kl){case Ny:vx(this);break;case ky:for(var t,e=this.network.vertexes.iterator;e.next();)t=n1(this,e.value),this.ra=Math.max(t,this.ra);for(e.reset();e.next();)(t=e.value).layer=this.ra-t.layer;break;default:for(vx(this),e=this.network.vertexes.iterator;e.next();)e.value.valid=!1;for(e.reset();e.next();)0===(t=e.value).sourceEdges.count&&wx(this,t);for(t=1/0,e.reset();e.next();)t=Math.min(t,e.value.layer);for(this.ra=-1,e.reset();e.next();){var n=e.value;n.layer-=t,this.ra=Math.max(this.ra,n.layer)}}},Yt.prototype.initializeIndices=function(){switch(this.$k){default:case Py:for(var t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;e.index=this.Bb[n],this.Bb[n]++}break;case fg:for(t=this.network.vertexes.iterator,e=this.ra;0<=e;e--)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&ef(this,n);break;case Ey:for(t=this.network.vertexes.iterator,e=0;e<=this.ra;e++)for(t.reset();t.next();)(n=t.value).layer===e&&-1===n.index&&i1(this,n)}},Yt.prototype.reduceCrossings=function(){var n,s,u,c,f,t=this.countCrossings(),e=ui(this);for(n=0;n<this.sj;n++){for(s=0;s<=this.ra;s++)nf(this,s,1),me(this,s,1);var a=this.countCrossings();for(a<t&&(t=a,e=ui(this)),s=this.ra;0<=s;s--)nf(this,s,-1),me(this,s,-1);(a=this.countCrossings())<t&&(t=a,e=ui(this))}for(Pr(this,e),n=0;n<this.sj;n++){for(s=0;s<=this.ra;s++)nf(this,s,0),me(this,s,0);for((a=this.countCrossings())<t&&(t=a,e=ui(this)),s=this.ra;0<=s;s--)nf(this,s,0),me(this,s,0);(a=this.countCrossings())<t&&(t=a,e=ui(this))}switch(Pr(this,e),this.wk){case Dx:break;case o1:for(f=t+1;(s=this.countCrossings())<f;)for(f=s,n=this.ra;0<=n;n--)for(c=0;c<=n;c++){for(u=!0;u;)for(u=!1,s=n;s>=c;s--)u=me(this,s,-1)||u;for((a=this.countCrossings())>=t?Pr(this,e):(t=a,e=ui(this)),u=!0;u;)for(u=!1,s=n;s>=c;s--)u=me(this,s,1)||u;for((a=this.countCrossings())>=t?Pr(this,e):(t=a,e=ui(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=me(this,s,1)||u;for(a>=t?Pr(this,e):(t=a,e=ui(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=me(this,s,-1)||u;for(a>=t?Pr(this,e):(t=a,e=ui(this)),u=!0;u;)for(u=!1,s=n;s>=c;s--)u=me(this,s,0)||u;for(a>=t?Pr(this,e):(t=a,e=ui(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=me(this,s,0)||u;a>=t?Pr(this,e):(t=a,e=ui(this))}break;default:for(n=this.ra,c=0,f=t+1;(s=this.countCrossings())<f;){for(f=s,u=!0;u;)for(u=!1,s=n;s>=c;s--)u=me(this,s,-1)||u;for((a=this.countCrossings())>=t?Pr(this,e):(t=a,e=ui(this)),u=!0;u;)for(u=!1,s=n;s>=c;s--)u=me(this,s,1)||u;for((a=this.countCrossings())>=t?Pr(this,e):(t=a,e=ui(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=me(this,s,1)||u;for(a>=t?Pr(this,e):(t=a,e=ui(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=me(this,s,-1)||u;for(a>=t?Pr(this,e):(t=a,e=ui(this)),u=!0;u;)for(u=!1,s=n;s>=c;s--)u=me(this,s,0)||u;for(a>=t?Pr(this,e):(t=a,e=ui(this)),u=!0;u;)for(u=!1,s=c;s<=n;s++)u=me(this,s,0)||u;a>=t?Pr(this,e):(t=a,e=ui(this))}}Pr(this,e)},Yt.prototype.straightenAndPack=function(){var t=0!=(1&this.ag),e=0!=(this.ag&bx);if(1e3<this.network.edges.count&&e&&(t=!1),t){var n=[];for(e=0;e<=this.ra;e++)n[e]=0;for(var s,a=this.network.vertexes.iterator;a.next();){var u=a.value;e=u.layer,s=u.column,u=this.nodeMinColumnSpace(u,!1),n[e]=Math.max(n[e],s+u)}for(a.reset();a.next();)(u=a.value).column=(8*(this.Ea-n[e=u.layer])>>1)+8*(s=u.column);this.Ea*=8}if(0!=(2&this.ag))for(n=!0;n;){for(n=!1,e=this.vc+1;e<=this.ra;e++)n=uc(this,e,1)||n;for(e=this.vc-1;0<=e;e--)n=uc(this,e,-1)||n;n=uc(this,this.vc,0)||n}if(0!=(4&this.ag)){for(e=this.vc+1;e<=this.ra;e++)Ty(this,e,1);for(e=this.vc-1;0<=e;e--)Ty(this,e,-1);Ty(this,this.vc,0)}if(t&&(Sn(this,-1),Sn(this,1)),0!=(2&this.ag))for(n=!0;n;){for(n=!1,n=uc(this,this.vc,0)||n,e=this.vc+1;e<=this.ra;e++)n=uc(this,e,0)||n;for(e=this.vc-1;0<=e;e--)n=uc(this,e,0)||n}},Yt.prototype.commitLayout=function(){if(this.setsPortSpots)for(var t=cg(this,!0),e=cg(this,!1),n=this.network.edges.iterator;n.next();){var s=n.value.link;null!==s&&(s.fromSpot=t,s.toSpot=e)}this.commitNodes(),this.Ju(),this.isRouting&&this.commitLinks()},Yt.prototype.commitNodes=function(){this.ae=[],this.xd=[],this.wd=[],this.Ka=[];for(var t=0;t<=this.ra;t++)this.ae[t]=0,this.xd[t]=0,this.wd[t]=0,this.Ka[t]=0;for(t=this.network.vertexes.iterator;t.next();){var e=t.value,n=e.layer;this.ae[n]=Math.max(this.ae[n],this.nodeMinLayerSpace(e,!0)),this.xd[n]=Math.max(this.xd[n],this.nodeMinLayerSpace(e,!1))}e=0,n=this.be;for(var s=0;s<=this.ra;s++){var a=n;0>=this.ae[s]+this.xd[s]&&(a=0),0<s&&(e+=a/2),90===this.K||0===this.K?(this.wd[s]=e+=this.xd[s],e+=this.ae[s]):(this.wd[s]=e+=this.ae[s],e+=this.xd[s]),s<this.ra&&(e+=a/2),this.Ka[s]=e}for(n=e,e=this.arrangementOrigin,s=0;s<=this.ra;s++)270===this.K?this.wd[s]=e.y+this.wd[s]:90===this.K?(this.wd[s]=e.y+n-this.wd[s],this.Ka[s]=n-this.Ka[s]):180===this.K?this.wd[s]=e.x+this.wd[s]:(this.wd[s]=e.x+n-this.wd[s],this.Ka[s]=n-this.Ka[s]);for(t.reset(),n=s=1/0;t.next();){var u=(a=t.value).layer,c=0|a.column;if(270===this.K||90===this.K){var f=e.x+this.ac*c;u=this.wd[u]}else f=this.wd[u],u=e.y+this.ac*c;a.centerX=f,a.centerY=u,s=Math.min(a.x,s),n=Math.min(a.y,n)}for(this.Rc=new A(s=e.x-s,e=e.y-n),t.reset();t.next();)(n=t.value).x+=s,n.y+=e,n.commit()},Yt.prototype.Ju=function(){for(var t=0,e=this.be,n=0;n<=this.ra;n++)t+=this.ae[n],t+=this.xd[n];t+=this.ra*e,e=[],n=this.ac*this.Ea;for(var s=this.maxLayer;0<=s;s--)e.push(270===this.K?0===s?new z(0,0,n,Math.abs(this.Ka[0])):new z(0,this.Ka[s-1],n,Math.abs(this.Ka[s-1]-this.Ka[s])):90===this.K?0===s?new z(0,this.Ka[0],n,Math.abs(this.Ka[0]-t)):new z(0,this.Ka[s],n,Math.abs(this.Ka[s-1]-this.Ka[s])):180===this.K?0===s?new z(0,0,Math.abs(this.Ka[0]),n):new z(this.Ka[s-1],0,Math.abs(this.Ka[s-1]-this.Ka[s]),n):0===s?new z(this.Ka[0],0,Math.abs(this.Ka[0]-t),n):new z(this.Ka[s],0,Math.abs(this.Ka[s-1]-this.Ka[s]),n));this.commitLayers(e,this.Rc)},Yt.prototype.commitLayers=function(){},Yt.prototype.commitLinks=function(){for(var e,t=this.network.edges.iterator;t.next();)null!==(e=t.value.link)&&(e.Lh(),e.Rj(),e.vf());for(t.reset();t.next();)null!==(e=t.value.link)&&e.vg();for(t.reset();t.next();){var n=t.value;if(null!==(e=n.link)){e.Lh();var s=e,a=s.fromNode,u=s.toNode,c=s.fromPort,f=s.toPort;if(null!==a){var p=a.findVisibleNode();null!==p&&p!==a&&(a=p,c=p.port)}null!==u&&null!==(p=u.findVisibleNode())&&p!==u&&(u=p,f=p.port);var g=e.computeSpot(!0,c);p=e.computeSpot(!1,f);var y=n.fromVertex,v=n.toVertex;if(n.valid){if(e.curve===pr&&4===e.pointsCount)if(y.column===v.column)n=e.getLinkPoint(a,c,g,!0,!1,u,f),c=e.getLinkPoint(u,f,p,!1,!1,a,c),n.u()||n.set(a.actualBounds.center),c.u()||c.set(u.actualBounds.center),e.Rj(),e.tf(n.x,n.y),e.tf((2*n.x+c.x)/3,(2*n.y+c.y)/3),e.tf((n.x+2*c.x)/3,(n.y+2*c.y)/3),e.tf(c.x,c.y);else{var _=!1,b=!1;if(null!==c&&g===Vn&&(_=!0),null!==f&&p===Vn&&(b=!0),_||b){var D=e.i(0).x;if(n=e.i(0).y,y=e.i(3).x,s=e.i(3).y,_){if(90===this.K||270===this.K){_=D;var k=(n+s)/2}else _=(D+y)/2,k=n;e.M(1,_,k),(g=e.getLinkPoint(a,c,g,!0,!1,u,f)).u()||g.set(a.actualBounds.center),e.M(0,g.x,g.y)}b&&(90===this.K||270===this.K?(g=y,n=(n+s)/2):(g=(D+y)/2,n=s),e.M(2,g,n),(a=e.getLinkPoint(u,f,p,!1,!1,a,c)).u()||a.set(u.actualBounds.center),e.M(3,a.x,a.y))}}e.vf()}else if(y.layer===v.layer)e.vf();else{if(_=b=!1,k=this.be,D=e.firstPickIndex+1,e.isOrthogonal){_=!0;var O=e.pointsCount;4<O&&e.points.removeRange(2,O-3)}else if(e.curve===pr)b=!0,4<(O=e.pointsCount)&&e.points.removeRange(2,O-3),4===O&&(D=2);else{var E=g===Vn,R=p===Vn;2<(O=e.pointsCount)&&E&&R?e.points.removeRange(1,O-2):3<O&&E&&!R?e.points.removeRange(1,O-3):3<O&&!E&&R?e.points.removeRange(2,O-2):4<O&&!E&&!R&&e.points.removeRange(2,O-3)}if(n.rev){for(;null!==v&&y!==v;){var F=O=null;for(E=v.sourceEdges.iterator;E.next()&&((R=E.value).link!==n.link||(F=R.toVertex,null!==(O=R.fromVertex).node)););if(null===O)break;if(O!==y){E=e.i(D-1).x,R=e.i(D-1).y;var j=O.centerX,L=O.centerY;if(_)180===this.K||0===this.K?D===e.firstPickIndex+1?(e.l(D++,E,R),e.l(D++,E,L)):(null!==F?F.centerY:R)!==L&&(e.l(D++,F=this.Ka[O.layer-1]+this.Rc.x,R),e.l(D++,F,L)):D===e.firstPickIndex+1?(e.l(D++,E,R),e.l(D++,j,R)):(null!==F?F.centerX:E)!==j&&(e.l(D++,E,F=this.Ka[O.layer-1]+this.Rc.y),e.l(D++,j,F));else if(D===e.firstPickIndex+1){F=Math.max(10,this.ae[v.layer]);var G=Math.max(10,this.xd[v.layer]);if(b)180===this.K?j<=v.bounds.x?(e.l(D++,(v=v.bounds.x)-F,L),e.l(D++,v,L),e.l(D++,v+G,L)):(e.l(D++,j-F,L),e.l(D++,j,L),e.l(D++,j+G,L)):90===this.K?L>=v.bounds.bottom?(e.l(D++,j,(v=v.bounds.y+v.bounds.height)+G),e.l(D++,j,v),e.l(D++,j,v-F)):(e.l(D++,j,L+G),e.l(D++,j,L),e.l(D++,j,L-F)):270===this.K?L<=v.bounds.y?(e.l(D++,j,(v=v.bounds.y)-F),e.l(D++,j,v),e.l(D++,j,v+G)):(e.l(D++,j,L-F),e.l(D++,j,L),e.l(D++,j,L+G)):0===this.K&&(j>=v.bounds.right?(e.l(D++,(v=v.bounds.x+v.bounds.width)+G,L),e.l(D++,v,L),e.l(D++,v-F,L)):(e.l(D++,j+G,L),e.l(D++,j,L),e.l(D++,j-F,L)));else{e.l(D++,E,R);var ot=0;180===this.K||0===this.K?((180===this.K?j>=v.bounds.right:j<=v.bounds.x)&&(ot=(0===this.K?-F:G)/2),e.l(D++,E+ot,L)):((270===this.K?L>=v.bounds.bottom:L<=v.bounds.y)&&(ot=(90===this.K?-F:G)/2),e.l(D++,j,R+ot)),e.l(D++,j,L)}}else F=Math.max(10,this.ae[O.layer]),G=Math.max(10,this.xd[O.layer]),b?180===this.K?(e.l(D++,j-F-k,L),e.l(D++,Math.min(j-F+k/2,j),L),e.l(D++,j,L),e.l(D++,j,L),e.l(D++,Math.max(j+G-k/2,j),L),e.l(D++,j+G+k,L)):90===this.K?(e.l(D++,j,L+G+k),e.l(D++,j,Math.max(L+G-k/2,L)),e.l(D++,j,L),e.l(D++,j,L),e.l(D++,j,Math.min(L-F+k/2,L)),e.l(D++,j,L-F-k)):270===this.K?(e.l(D++,j,L-F-k),e.l(D++,j,Math.min(L-F+k/2,L)),e.l(D++,j,L),e.l(D++,j,L),e.l(D++,j,Math.max(L+G-k/2,L)),e.l(D++,j,L+G+k)):(e.l(D++,j+G+k,L),e.l(D++,Math.max(j+G-k/2,j),L),e.l(D++,j,L),e.l(D++,j,L),e.l(D++,Math.min(j-F+k/2,j),L),e.l(D++,j-F-k,L)):e.l(D++,j,L)}v=O}(null===f||g!==Vn||_)&&(E=e.i(D-1).x,R=e.i(D-1).y,j=e.i(D).x,L=e.i(D).y,_?(k=this.xd[y.layer],180===this.K||0===this.K?((_=R)>=y.bounds.y&&_<=y.bounds.bottom&&(180===this.K?j>=y.bounds.x:j<=y.bounds.right)&&(_=_<y.bounds.y+y.bounds.height/2?y.bounds.y-this.ac/2:y.bounds.bottom+this.ac/2,e.l(D++,v=y.centerX+(180===this.K?-k:k),R),e.l(D++,v,_)),e.l(D++,j,_)):((_=E)>=y.bounds.x&&_<=y.bounds.right&&(270===this.K?L>=y.bounds.y:L<=y.bounds.bottom)&&(_=_<y.bounds.x+y.bounds.width/2?y.bounds.x-this.ac/2:y.bounds.right+this.ac/2,e.l(D++,E,v=y.centerY+(270===this.K?-k:k)),e.l(D++,_,v)),e.l(D++,_,L)),e.l(D++,j,L)):b?(F=Math.max(10,this.ae[y.layer]),G=Math.max(10,this.xd[y.layer]),180===this.K&&j>=y.bounds.x?(e.M(D-2,v=y.bounds.x+y.bounds.width,R),e.M(D-1,v+G,R)):90===this.K&&L<=y.bounds.bottom?(e.M(D-2,E,v=y.bounds.y),e.M(D-1,E,v-F)):270===this.K&&L>=y.bounds.y?(e.M(D-2,E,v=y.bounds.y+y.bounds.height),e.M(D-1,E,v+G)):0===this.K&&j<=y.bounds.right&&(e.M(D-2,v=y.bounds.x,R),e.M(D-1,v-F,R))):(F=Math.max(10,this.ae[y.layer]),G=Math.max(10,this.xd[y.layer]),_=0,180===this.K||0===this.K?((180===this.K?j<=y.bounds.x:j>=y.bounds.right)&&(_=(0===this.K?G:-F)/2),e.l(D++,j+_,R)):((270===this.K?L<=y.bounds.y:L>=y.bounds.bottom)&&(_=(90===this.K?G:-F)/2),e.l(D++,E,L+_)),e.l(D++,j,L)))}else{for(;null!==y&&y!==v;){for(F=O=null,y=y.destinationEdges.iterator;y.next()&&((E=y.value).link!==n.link||(null!==(F=E.fromVertex).node&&(F=null),null!==(O=E.toVertex).node)););if(null===O)break;O!==v&&(E=e.i(D-1).x,R=e.i(D-1).y,j=O.centerX,L=O.centerY,_?180===this.K||0===this.K?(null!==F?F.centerY:R)!==L&&(F=this.Ka[O.layer]+this.Rc.x,D===e.firstPickIndex+1&&(F=0===this.K?Math.max(F,E):Math.min(F,E)),e.l(D++,F,R),e.l(D++,F,L)):(null!==F?F.centerX:E)!==j&&(F=this.Ka[O.layer]+this.Rc.y,D===e.firstPickIndex+1&&(F=90===this.K?Math.max(F,R):Math.min(F,R)),e.l(D++,E,F),e.l(D++,j,F)):(F=Math.max(10,this.ae[O.layer]),G=Math.max(10,this.xd[O.layer]),b?180===this.K?(e.l(D++,j+G+k,L),e.l(D++,Math.max(j+G-k/2,j),L),e.l(D++,j,L),e.l(D++,j,L),e.l(D++,Math.min(j-F+k/2,j),L),e.l(D++,j-F-k,L)):90===this.K?(e.l(D++,j,L-F-k),e.l(D++,j,Math.min(L-F+k/2,L)),e.l(D++,j,L),e.l(D++,j,L),e.l(D++,j,Math.max(L+G-k/2,L)),e.l(D++,j,L+G+k)):270===this.K?(e.l(D++,j,L+G+k),e.l(D++,j,Math.max(L+G-k/2,L)),e.l(D++,j,L),e.l(D++,j,L),e.l(D++,j,Math.min(L-F+k/2,L)),e.l(D++,j,L-F-k)):(e.l(D++,j-F-k,L),e.l(D++,Math.min(j-F+k/2,j),L),e.l(D++,j,L),e.l(D++,j,L),e.l(D++,Math.max(j+G-k/2,j),L),e.l(D++,j+G+k,L)):180===this.K?(e.l(D++,j+G,L),e.l(D++,j-F,L)):90===this.K?(e.l(D++,j,L-F),e.l(D++,j,L+G)):270===this.K?(e.l(D++,j,L+G),e.l(D++,j,L-F)):(e.l(D++,j-F,L),e.l(D++,j+G,L)))),y=O}_&&(E=e.i(D-1).x,R=e.i(D-1).y,j=e.i(D).x,L=e.i(D).y,180===this.K||0===this.K?R!==L&&(F=0===this.K?Math.min(Math.max((j+E)/2,this.Ka[v.layer]+this.Rc.x),j):Math.max(Math.min((j+E)/2,this.Ka[v.layer]+this.Rc.x),j),e.l(D++,F,R),e.l(D++,F,L)):E!==j&&(F=90===this.K?Math.min(Math.max((L+R)/2,this.Ka[v.layer]+this.Rc.y),L):Math.max(Math.min((L+R)/2,this.Ka[v.layer]+this.Rc.y),L),e.l(D++,E,F),e.l(D++,j,F)))}null!==s&&b&&(null!==c&&(g===Vn&&(g=e.i(0),s=e.i(2),g.A(s)||e.M(1,(g.x+s.x)/2,(g.y+s.y)/2)),(g=e.getLinkPoint(a,c,Vn,!0,!1,u,f)).u()||g.set(a.actualBounds.center),e.M(0,g.x,g.y)),null!==f&&(p===Vn&&(p=e.i(e.pointsCount-1),g=e.i(e.pointsCount-3),p.A(g)||e.M(e.pointsCount-2,(p.x+g.x)/2,(p.y+g.y)/2)),(a=e.getLinkPoint(u,f,Vn,!1,!1,a,c)).u()||a.set(u.actualBounds.center),e.M(e.pointsCount-1,a.x,a.y))),e.vf(),n.commit()}}}this.avoidOrthogonalOverlaps()},Yt.prototype.avoidOrthogonalOverlaps=function(){if(!(0>=this.linkSpacing)){for(var t=new st,e=this.network.edges.iterator;e.next();){var n=e.value.link;null!==n&&n.isOrthogonal&&!t.contains(n)&&t.add(n)}if(0<t.count)if(90===this.K||270===this.K){for(e=0,n=[],t=t.iterator;t.next();){var s=t.value;if(null!==s&&s.isOrthogonal)for(var a=2;a<s.pointsCount-3;a++){var u=s.i(a),c=s.i(a+1);if(this.w(u.y,c.y)&&!this.w(u.x,c.x)){var f=new zl;f.layer=Math.floor(u.y/2);var p=s.i(0),g=s.i(s.pointsCount-1);if(f.first=p.x*p.x+p.y,f.$b=g.x*g.x+g.y,f.ed=Math.min(u.x,c.x),f.xc=Math.max(u.x,c.x),f.index=a,f.link=s,a+2<s.pointsCount){p=s.i(a-1),g=s.i(a+2);var y=0;p.y<u.y?y=g.y<u.y?3:u.x<c.x?2:1:p.y>u.y&&(y=g.y>u.y?0:c.x<u.x?2:1),f.j=y}n.push(f)}}}if(1<n.length)for(n.sort(this.yy),t=0;t<n.length;){for(u=n[t].layer,s=t+1;s<n.length&&n[s].layer===u;)s++;if(1<s-t)for(u=t;u<s;){for(c=n[u].xc,a=t+1;a<s&&n[a].ed<c;)c=Math.max(c,n[a].xc),a++;if(1<(c=a-u)){for(this.Vi(n,this.Rs,u,u+c),y=1,f=n[u].$b,p=u;p<a;p++)(g=n[p]).$b!==f&&(y++,f=g.$b);this.Vi(n,this.xy,u,u+c);var v=1;for(f=n[u].first,p=u;p<a;p++)(g=n[p]).first!==f&&(v++,f=g.first);for(p=!0,g=v,y<v?(p=!1,g=y,f=n[u].$b,this.Vi(n,this.Rs,u,u+c)):f=n[u].first,y=0,v=u;v<a;v++){var _=n[v];(p?_.first:_.$b)!==f&&(y++,f=p?_.first:_.$b);var b=_.link;u=b.i(_.index),c=b.i(_.index+1);var D=this.linkSpacing*(y-(g-1)/2);e++,b.Lh(),b.M(_.index,u.x,u.y+D),b.M(_.index+1,c.x,c.y+D),b.vf()}}u=a}t=s}}else{for(e=0,n=[],t=t.iterator;t.next();)if(null!==(s=t.value)&&s.isOrthogonal)for(a=2;a<s.pointsCount-3;a++)u=s.i(a),c=s.i(a+1),this.w(u.x,c.x)&&!this.w(u.y,c.y)&&((f=new zl).layer=Math.floor(u.x/2),p=s.i(0),g=s.i(s.pointsCount-1),f.first=p.x+p.y*p.y,f.$b=g.x+g.y*g.y,f.ed=Math.min(u.y,c.y),f.xc=Math.max(u.y,c.y),f.index=a,f.link=s,a+2<s.pointsCount&&(p=s.i(a-1),g=s.i(a+2),y=0,p.x<u.x?y=g.x<u.x?3:u.y<c.y?2:1:p.x>u.x&&(y=g.x>u.x?0:c.y<u.y?2:1),f.j=y),n.push(f));if(1<n.length)for(n.sort(this.yy),t=0;t<n.length;){for(u=n[t].layer,s=t+1;s<n.length&&n[s].layer===u;)s++;if(1<s-t)for(u=t;u<s;){for(c=n[u].xc,a=t+1;a<s&&n[a].ed<c;)c=Math.max(c,n[a].xc),a++;if(1<(c=a-u)){for(this.Vi(n,this.Rs,u,u+c),y=1,f=n[u].$b,p=u;p<a;p++)(g=n[p]).$b!==f&&(y++,f=g.$b);for(this.Vi(n,this.xy,u,u+c),v=1,f=n[u].first,p=u;p<a;p++)(g=n[p]).first!==f&&(v++,f=g.first);for(p=!0,g=v,y<v?(p=!1,g=y,f=n[u].$b,this.Vi(n,this.Rs,u,u+c)):f=n[u].first,y=0,v=u;v<a;v++)_=n[v],(p?_.first:_.$b)!==f&&(y++,f=p?_.first:_.$b),u=(b=_.link).i(_.index),c=b.i(_.index+1),D=this.linkSpacing*(y-(g-1)/2),e++,b.Lh(),b.M(_.index,u.x+D,u.y),b.M(_.index+1,c.x+D,c.y),b.vf()}u=a}t=s}}}},(S=Yt.prototype).yy=function(t,e){return t instanceof zl&&e instanceof zl&&t!==e?t.layer<e.layer?-1:t.layer>e.layer?1:t.ed<e.ed?-1:t.ed>e.ed?1:t.xc<e.xc?-1:t.xc>e.xc?1:0:0},S.xy=function(t,e){return t instanceof zl&&e instanceof zl&&t!==e?t.first<e.first?-1:t.first>e.first||t.j<e.j?1:t.j>e.j||t.ed<e.ed?-1:t.ed>e.ed?1:t.xc<e.xc?-1:t.xc>e.xc?1:0:0},S.Rs=function(t,e){return t instanceof zl&&e instanceof zl&&t!==e?t.$b<e.$b?-1:t.$b>e.$b||t.j<e.j?1:t.j>e.j||t.ed<e.ed?-1:t.ed>e.ed?1:t.xc<e.xc?-1:t.xc>e.xc?1:0:0},S.w=function(t,e){return-1<(t-=e)&&1>t},S.Vi=function(t,e,n,s){var a=t.length,u=s-n;if(!(1>=u))if((0>n||n>=a-1)&&q("not in range 0 <= from < length: "+n),2===u)0<e(s=t[n],a=t[n+1])&&(t[n]=a,t[n+1]=s);else if(0===n)if(s>=a)t.sort(e);else for((n=t.slice(0,s)).sort(e),e=0;e<s;e++)t[e]=n[e];else if(s>=a)for((s=t.slice(n)).sort(e),e=n;e<a;e++)t[e]=s[e-n];else for((a=t.slice(n,s)).sort(e),e=n;e<s;e++)t[e]=a[e-n]},kt.Object.defineProperties(Yt.prototype,{layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&0<=t&&(this.be=t,this.B())}},columnSpacing:{get:function(){return this.ac},set:function(t){this.ac!==t&&0<t&&(this.ac=t,this.B())}},direction:{get:function(){return this.K},set:function(t){this.K!==t&&(0===t||90===t||180===t||270===t?(this.K=t,this.B()):q("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}},cycleRemoveOption:{get:function(){return this.Lk},set:function(t){this.Lk===t||t!==Sy&&t!==hc&&t!==rf||(this.Lk=t,this.B())}},layeringOption:{get:function(){return this.kl},set:function(t){this.kl===t||t!==dg&&t!==Ny&&t!==ky||(this.kl=t,this.B())}},initializeOption:{get:function(){return this.$k},set:function(t){this.$k===t||t!==fg&&t!==Ey&&t!==Py||(this.$k=t,this.B())}},iterations:{get:function(){return this.sj},set:function(t){this.sj!==t&&0<=t&&(this.sj=t,this.B())}},aggressiveOption:{get:function(){return this.wk},set:function(t){this.wk===t||t!==Dx&&t!==Ay&&t!==o1||(this.wk=t,this.B())}},packOption:{get:function(){return this.ag},set:function(t){this.ag!==t&&0<=t&&8>t&&(this.ag=t,this.B())}},setsPortSpots:{get:function(){return this.hf},set:function(t){this.hf!==t&&(this.hf=t,this.B())}},linkSpacing:{get:function(){return this.jo},set:function(t){this.jo!==t&&0<=t&&(this.jo=t,this.B())}},maxLayer:{get:function(){return this.ra}},maxIndex:{get:function(){return this.ji}},maxColumn:{get:function(){return this.Ea}},minIndexLayer:{get:function(){return this.Wg}},maxIndexLayer:{get:function(){return this.vc}}});var hc=new Q(Yt,"CycleDepthFirst",0),Sy=new Q(Yt,"CycleGreedy",1),rf=new Q(Yt,"CycleFromLayers",2),dg=new Q(Yt,"LayerOptimalLinkLength",0),Ny=new Q(Yt,"LayerLongestPathSink",1),ky=new Q(Yt,"LayerLongestPathSource",2),fg=new Q(Yt,"InitDepthFirstOut",0),Ey=new Q(Yt,"InitDepthFirstIn",1),Py=new Q(Yt,"InitNaive",2),Dx=new Q(Yt,"AggressiveNone",0),Ay=new Q(Yt,"AggressiveLess",1),o1=new Q(Yt,"AggressiveMore",2),bx=8;function zl(){this.index=this.xc=this.ed=this.$b=this.first=this.layer=0,this.link=null,this.j=0}function Jn(t){qt.call(this,t)}function Bu(t){Pe.call(this,t),this.Ra=this.Cg=this.fi=-1,this.C=NaN,this.L=null,this.valid=!1,this.finish=this.pg=NaN,this.uf=0,this.jk=this.kk=null}function cc(t){zn.call(this,t),this.j=this.Ba=this.Ma=!1,this.wa=this.C=NaN,this.L=this.o=0}function Ot(t){Ht.call(this),this.Lb=new nt,this.Mo=pg,this.ld=xo,this.Fp=jy,this.ur=d1,this.Dw=[],this.jd=!0,this.Ib=Hy,this.Rd=new Dt(10,10).freeze();var e=new yc(this);this.V=new ro(e),this.W=new ro(e),this.su=[],t&&Object.assign(this,t)}function Mx(t){var e=new nt;for(t=t.iterator;t.next();){var n=t.value;n.initialized||e.add(n)}return e}function Cx(t,e){var n=999999,s=null;for(e=e.iterator;e.next();){var a=e.value;switch(t.ld){case xo:a.sourceEdges.count<n&&(n=a.sourceEdges.count,s=a);break;case pc:a.destinationEdges.count<n&&(n=a.destinationEdges.count,s=a);break;default:q("Unhandled path value "+t.ld.toString())}}return s}function Oy(t,e){if(null!==e){switch(t.ld){case xo:if(0<e.destinationEdges.count){for(var n=new st,s=e.destinationVertexes;s.next();){var a=s.value;s1(t,e,a)&&n.add(a)}0<n.count&&(e.children=n.ya())}break;case pc:if(0<e.sourceEdges.count){for(n=new st,s=e.sourceVertexes;s.next();)s1(t,e,a=s.value)&&n.add(a);0<n.count&&(e.children=n.ya())}break;default:q("Unhandled path value"+t.ld.toString())}for(s=(n=e.children).length,a=0;a<s;a++){var u=n[a];u.initialized=!0,u.level=e.level+1,u.parent=e,t.Lb.remove(u)}for(e=0;e<s;e++)Oy(t,n[e])}}function s1(t,e,n){if(n.initialized){if(null===e)var s=!1;else{for(s=e.parent;null!==s&&s!==n;)s=s.parent;s=s===n}if(s||n.level>e.level)return!1;t.removeChild(n.parent,n)}return!0}function dc(t,e){if(null!==e){t.initializeTreeVertexValues(e),e.alignment===ps&&t.sortTreeVertexChildren(e);for(var n=0,s=e.childrenCount,a=0,u=e.children,c=u.length,f=0;f<c;f++){var p=u[f];dc(t,p),n+=p.descendantCount+1,s=Math.max(s,p.maxChildrenCount),a=Math.max(a,p.maxGenerationCount)}e.descendantCount=n,e.maxChildrenCount=s,e.maxGenerationCount=0<s?a+1:0}}function Tx(t,e){if(null!==e){t.assignTreeVertexValues(e);for(var n=(e=e.children).length,s=0;s<n;s++)Tx(t,e[s])}}function a1(t,e){if(null!==e){e.alignment!==ps&&t.sortTreeVertexChildren(e);for(var n=(e=e.children).length,s=0;s<n;s++)a1(t,e[s])}}function $l(t){return t===Ta||t===ps||t===Sa||t===Ys}function sf(t){return t===Ta||t===ps}function Sx(t){var e=t.parent;if(null!==e){var n=e.alignment;if($l(n)){if(sf(n)){for(e=e.children,n=0;n<e.length&&t!==e[n];)n++;return n%2==0}if(n===Sa)return!0}}return!1}function Iy(t,e){if(0===e.childrenCount){var n=!1,s=0;null!==e.parent&&(s=e.parent.angle,n=$l(n=e.parent.alignment));var a=Sx(e);e.U.h(0,0),e.va.h(e.width,e.height),null===e.parent||null===e.comments||(180!==s&&270!==s||n)&&!a?e.fa.h(0,0):180===s&&!n||(90===s||270===s)&&a?e.fa.h(e.width-2*e.focus.x,0):e.fa.h(0,e.height-2*e.focus.y)}else{n=90===(s=io(e))||270===s;for(var u=0,c=(a=e.children).length,f=0;f<c;f++){var p=a[f];u=Math.max(u,n?p.va.width:p.va.height)}var g=e.alignment,y=g===ds,v=g===fs;f=$l(g);var _=Math.max(0,e.breadthLimit);p=af(e);var b=e.nodeSpacing,D=Ca(e),k=y||v?0:D/2,O=e.rowSpacing,E=0;(y||v||e.tm||e.um&&1===e.maxGenerationCount)&&(E=Math.max(0,e.rowIndent)),y=e.width;var R=e.height,F=0,j=0,L=0,G=0,ot=0,Z=0,ut=0,et=0,Y=0;if(f&&!sf(g)&&135<s&&a.reverse(),sf(g))if(1<c)for(var At=0;At<c;At++){var Mt=a[At],Pt=Mt.va;At%2==0&&At!==c-1&&(Y=Math.max(Y,(n?Pt.width:Pt.height)+Yl(Mt)-b))}else 1===c&&(Y=n?a[0].va.width:a[0].va.height);if(f)switch(g){case Ta:case ps:Y=(j=135>s?qn(e,a,Y,F,j):Ma(e,a,Y,F,j)).x,F=j.width,j=j.height;break;case Sa:for(t=0;t<c;t++)k=(_=a[t]).va,L=0===ut?0:O,n?(_.U.h(u-k.width,ot+L),F=Math.max(F,k.width),j=Math.max(j,ot+L+k.height),ot+=L+k.height):(_.U.h(G+L,u-k.height),F=Math.max(F,G+L+k.width),j=Math.max(j,k.height),G+=L+k.width),ut++;break;case Ys:for(u=0;u<c;u++)_=(t=a[u]).va,k=0===ut?0:O,n?(t.U.h(b/2+e.focus.x,ot+k),F=Math.max(F,_.width),j=Math.max(j,ot+k+_.height),ot+=k+_.height):(t.U.h(G+k,b/2+e.focus.y),F=Math.max(F,G+k+_.width),j=Math.max(j,_.height),G+=k+_.width),ut++}else for(At=0;At<c;At++){if(Pt=(Mt=a[At]).va,n){0<_&&0<ut&&G+b+Pt.width>_&&(G<u&&Wl(e,g,u-G,0,et,At-1),Z++,ut=0,et=At,L=j,G=0,ot=135<s?-j-O:j+O);var ke=0===ut?k:b;Fy(t,Mt,0,ot),Mt.U.h(G+ke,ot),F=Math.max(F,G+ke+Pt.width),j=Math.max(j,L+(0===Z?0:O)+Pt.height),G+=ke+Pt.width}else 0<_&&0<ut&&ot+b+Pt.height>_&&(ot<u&&Wl(e,g,0,u-ot,et,At-1),Z++,ut=0,et=At,L=F,ot=0,G=135<s?-F-O:F+O),ke=0===ut?k:b,Fy(t,Mt,G,0),Mt.U.h(G,ot+ke),j=Math.max(j,ot+ke+Pt.height),F=Math.max(F,L+(0===Z?0:O)+Pt.width),ot+=ke+Pt.height;ut++}switch(0<Z&&(n?(j+=Math.max(0,p),G<F&&Wl(e,g,F-G,0,et,c-1),0<E&&(v||Gu(e,E,0,0,c-1),F+=E)):(F+=Math.max(0,p),ot<j&&Wl(e,g,0,j-ot,et,c-1),0<E&&(v||Gu(e,0,E,0,c-1),j+=E))),E=v=0,g){case mc:n?v+=F/2-e.focus.x-D/2:E+=j/2-e.focus.y-D/2;break;case Uu:0<Z?n?v+=F/2-e.focus.x-D/2:E+=j/2-e.focus.y-D/2:n?v+=(g=a[0].U.x+a[0].fa.x)+(a[c-1].U.x+a[c-1].fa.x+2*a[c-1].focus.x-g)/2-e.focus.x-D/2:E+=(g=a[0].U.y+a[0].fa.y)+(a[c-1].U.y+a[c-1].fa.y+2*a[c-1].focus.y-g)/2-e.focus.y-D/2;break;case ds:n?(v-=D,F+=D):(E-=D,j+=D);break;case fs:n?(v+=F-e.width+D,F+=D):(E+=j-e.height+D,j+=D);break;case Ta:case ps:n?v+=1<c?Y+b/2-e.focus.x:a[0].focus.x-e.focus.x+a[0].fa.x:E+=1<c?Y+b/2-e.focus.y:a[0].focus.y-e.focus.y+a[0].fa.y;break;case Sa:n?v+=F+b/2-e.focus.x:E+=j+b/2-e.focus.y;break;case Ys:break;default:q("Unhandled alignment value "+g.toString())}for(D=0;D<c;D++)g=a[D],n?g.U.h(g.U.x+g.fa.x-v,g.U.y+(135<s?(f?-j:-g.va.height)+g.fa.y-p:R+p+g.fa.y)):g.U.h(g.U.x+(135<s?(f?-F:-g.va.width)+g.fa.x-p:y+p+g.fa.x),g.U.y+g.fa.y-E);n?(F=$s(e,F,v),0>v&&(v=0),135<s&&(E+=j+p),j=Math.max(Math.max(j,R),j+R+p)):(135<s&&(v+=F+p),F=Math.max(Math.max(F,y),F+y+p),j=hs(e,j,E),0>E&&(E=0)),e.fa.h(v,E),e.va.h(F,j)}}function qn(t,e,n,s,a){var u=e.length;if(0===u)return new z(n,0,s,a);if(1===u)return new z(n,0,s=(t=e[0]).va.width,a=t.va.height);for(var c=t.nodeSpacing,f=t.rowSpacing,p=90===io(t),g=0,y=0,v=0,_=0;_<u;_++)if(!(_%2!=0||1<u&&_===u-1)){var b=e[_],D=b.va,k=0===g?0:f;if(p){var O=Yl(b)-c;b.U.h(n-(D.width+O),v+k),s=Math.max(s,D.width+O),a=Math.max(a,v+k+D.height),v+=k+D.height}else O=Yl(b)-c,b.U.h(y+k,n-(D.height+O)),a=Math.max(a,D.height+O),s=Math.max(s,y+k+D.width),y+=k+D.width;g++}for(g=0,b=y,_=v,p?(y=n+c,v=0):(y=0,v=n+c),D=0;D<u;D++)if(D%2!=0){O=(k=e[D]).va;var E=0===g?0:f;if(p){var R=Yl(k)-c;k.U.h(y+R,v+E),s=Math.max(s,y+O.width+R),a=Math.max(a,v+E+O.height),v+=E+O.height}else R=Yl(k)-c,k.U.h(y+E,v+R),s=Math.max(s,y+E+O.width),a=Math.max(a,v+O.height+R),y+=E+O.width;g++}return 1<u&&u%2==1&&(u=(e=e[u-1]).va,f=null===e.parent?0:e.parent.rowSpacing,p?(e.U.h(n+c/2-e.focus.x-e.fa.x,a+f),p=n+c/2-e.focus.x-e.fa.x,s=Math.max(s,p+u.width),0>p&&(s-=p),a=Math.max(a,Math.max(_,v)+f+u.height),0>e.U.x&&(n=Qa(t,e.U.x,!1,n,c))):(e.U.h(s+f,n+c/2-e.focus.y-e.fa.y),s=Math.max(s,Math.max(b,y)+f+u.width),v=n+c/2-e.focus.y-e.fa.y,a=Math.max(a,v+u.height),0>v&&(a-=v),0>e.U.y&&(n=Qa(t,e.U.y,!0,n,c)))),new z(n,0,s,a)}function Ma(t,e,n,s,a){var u=e.length;if(0===u)return new z(n,0,s,a);if(1===u)return new z(n,0,s=(e=e[0]).va.width,a=e.va.height);for(var c=t.nodeSpacing,f=t.rowSpacing,p=270===io(t),g=0,y=0,v=0,_=0;_<u;_++)if(!(_%2!=0||1<u&&_===u-1)){var b=e[_],D=b.va,k=0===g?0:f;if(p){var O=Yl(b)-c;b.U.h(n-(D.width+O),v-=k+D.height),s=Math.max(s,D.width+O),a=Math.max(a,Math.abs(v))}else O=Yl(b)-c,b.U.h(y-=k+D.width,n-(D.height+O)),a=Math.max(a,D.height+O),s=Math.max(s,Math.abs(y));g++}for(g=0,b=y,_=v,p?(y=n+c,v=0):(y=0,v=n+c),D=0;D<u;D++)if(D%2!=0){O=(k=e[D]).va;var E=0===g?0:f;if(p){var R=Yl(k)-c;k.U.h(y+R,v-=E+O.height),s=Math.max(s,y+O.width+R),a=Math.max(a,Math.abs(v))}else R=Yl(k)-c,k.U.h(y-=E+O.width,v+R),a=Math.max(a,v+O.height+R),s=Math.max(s,Math.abs(y));g++}for(1<u&&u%2==1&&(g=(f=e[u-1]).va,D=null===f.parent?0:f.parent.rowSpacing,p?(f.U.h(n+c/2-f.focus.x-f.fa.x,-a-g.height-D),y=n+c/2-f.focus.x-f.fa.x,s=Math.max(s,y+g.width),0>y&&(s-=y),a=Math.max(a,Math.abs(Math.min(_,v))+D+g.height),0>f.U.x&&(n=Qa(t,f.U.x,!1,n,c))):(f.U.h(-s-g.width-D,n+c/2-f.focus.y-f.fa.y),s=Math.max(s,Math.abs(Math.min(b,y))+D+g.width),v=n+c/2-f.focus.y-f.fa.y,a=Math.max(a,v+g.height),0>v&&(a-=v),0>f.U.y&&(n=Qa(t,f.U.y,!0,n,c)))),t=0;t<u;t++)c=e[t],p?c.U.h(c.U.x,c.U.y+a):c.U.h(c.U.x+s,c.U.y);return new z(n,0,s,a)}function Yl(t){return null===t.parent?0:t.parent.nodeSpacing}function Qa(t,e,n,s,a){for(var u=(t=t.children).length,c=0;c<u;c++)n?t[c].U.h(t[c].U.x,t[c].U.y-e):t[c].U.h(t[c].U.x-e,t[c].U.y);return e=t[u-1],Math.max(s,n?e.fa.y+e.focus.y-a/2:e.fa.x+e.focus.x-a/2)}function $s(t,e,n){switch(t.alignment){case Uu:case mc:return n+t.width>e&&(e=n+t.width),0>n&&(e-=n),e;case ds:return t.width>e?t.width:e;case fs:return 2*t.focus.x>e?t.width:e+t.width-2*t.focus.x;case Ta:case ps:return Math.max(t.width,Math.max(e,n+t.width)-Math.min(0,n));case Sa:return t.width-t.focus.x+t.nodeSpacing/2+e;case Ys:return Math.max(t.width,t.focus.x+t.nodeSpacing/2+e);default:return e}}function hs(t,e,n){switch(t.alignment){case Uu:case mc:return n+t.height>e&&(e=n+t.height),0>n&&(e-=n),e;case ds:return t.height>e?t.height:e;case fs:return 2*t.focus.y>e?t.height:e+t.height-2*t.focus.y;case Ta:case ps:return Math.max(t.height,Math.max(e,n+t.height)-Math.min(0,n));case Sa:return t.height-t.focus.y+t.nodeSpacing/2+e;case Ys:return Math.max(t.height,t.focus.y+t.nodeSpacing/2+e);default:return e}}function cs(t,e,n){switch(t){case mc:case Uu:e/=2,n/=2;break;case ds:n=e=0;break;case fs:break;default:q("Unhandled alignment value "+t.toString())}return new A(e,n)}function Wl(t,e,n,s,a,u){Gu(t,(e=cs(e,n,s)).x,e.y,a,u)}function Gu(t,e,n,s,a){if(0!==e||0!==n)for(t=t.children;s<=a;s++){var u=t[s].U;u.x+=e,u.y+=n}}function Fy(t,e,n,s){var a=e.parent;switch(t.ld){case xo:for(t=e.sourceEdges;t.next();)(e=t.value).fromVertex===a&&e.relativePoint.h(n,s);break;case pc:for(t=e.destinationEdges;t.next();)(e=t.value).toVertex===a&&e.relativePoint.h(n,s);break;default:q("Unhandled path value "+t.ld.toString())}}function Ry(t,e,n){for(var s=0;s<t.length;s++){var a=t[s];a.x+=e,a.y+=n}}function Nx(t,e,n,s,a,u,c,f){var p=io(e),g=90===p||270===p,y=e.nodeSpacing;e=s;var v=a;s=u;var _=c,b=n.gq,D=n.sq;c=n.va;var k=g?Math.max(_,c.height):Math.max(s,c.width);if((null===b||p!==io(n))&&(b=$i(t,2),D=$i(t,2),g?(b[0].h(0,0),b[1].h(0,c.height),D[0].h(c.width,0),D[1].h(D[0].x,b[1].y)):(b[0].h(0,0),b[1].h(c.width,0),D[0].h(0,c.height),D[1].h(b[1].x,D[0].y))),g){if(_=9999999,!(null===v||2>v.length||null===b||2>b.length))for(a=n=0;n<v.length&&a<b.length;){var O=b[a];p=O.x,g=O.y,p+=s;var E=u=v[n];n+1<v.length&&(E=v[n+1]);var R=O;O=R.x,R=R.y,a+1<b.length&&(O=(R=b[a+1]).x,R=R.y,O+=s);var F=_;u.y===g?F=p-u.x:u.y>g&&u.y<R?F=p+(u.y-g)/(R-g)*(O-p)-u.x:g>u.y&&g<E.y&&(F=p-(u.x+(g-u.y)/(E.y-u.y)*(E.x-u.x))),F<_&&(_=F),E.y<=u.y?n++:R<=g?a++:(E.y<=R&&n++,R<=E.y&&a++)}if(_=s-_,n=b,a=_+=y,null===e||2>e.length||null===n||2>n.length)s=null;else{for(y=$i(t,e.length+n.length),s=u=p=0;u<n.length&&n[u].y<e[0].y;)g=n[u++],y[s++].h(g.x+a,g.y);for(;p<e.length;)g=e[p++],y[s++].h(g.x,g.y);for(p=e[e.length-1].y;u<n.length&&n[u].y<=p;)u++;for(;u<n.length&&n[u].y>p;)g=n[u++],y[s++].h(g.x+a,g.y);for(n=$i(t,s),p=0;p<s;p++)n[p].assign(y[p]);no(t,y),s=n}if(u=D,p=_,null===v||2>v.length||null===u||2>u.length)a=null;else{for(y=$i(t,v.length+u.length),a=g=n=0;n<v.length&&v[n].y<u[0].y;)E=v[n++],y[a++].h(E.x,E.y);for(;g<u.length;)E=u[g++],y[a++].h(E.x+p,E.y);for(u=u[u.length-1].y;n<v.length&&v[n].y<=u;)n++;for(;n<v.length&&v[n].y>u;)p=v[n++],y[a++].h(p.x,p.y);for(u=$i(t,a),n=0;n<a;n++)u[n].assign(y[n]);no(t,y),a=u}return u=Math.max(0,_)+c.width,c=k,no(t,e),no(t,b),no(t,v),no(t,D),f[0]=s,f[1]=a,new z(_,0,u,c)}if(s=9999999,!(null===v||2>v.length||null===b||2>b.length))for(a=n=0;n<v.length&&a<b.length;)p=(O=b[a]).x,g=O.y,g+=_,E=u=v[n],n+1<v.length&&(E=v[n+1]),O=(R=O).x,R=R.y,a+1<b.length&&(O=(R=b[a+1]).x,R=R.y,R+=_),F=s,u.x===p?F=g-u.y:u.x>p&&u.x<O?F=g+(u.x-p)/(O-p)*(R-g)-u.y:p>u.x&&p<E.x&&(F=g-(u.y+(p-u.x)/(E.x-u.x)*(E.y-u.y))),F<s&&(s=F),E.x<=u.x?n++:O<=p?a++:(E.x<=O&&n++,O<=E.x&&a++);if(_-=s,n=b,a=_+=y,null===e||2>e.length||null===n||2>n.length)s=null;else{for(y=$i(t,e.length+n.length),s=u=p=0;u<n.length&&n[u].x<e[0].x;)g=n[u++],y[s++].h(g.x,g.y+a);for(;p<e.length;)g=e[p++],y[s++].h(g.x,g.y);for(p=e[e.length-1].x;u<n.length&&n[u].x<=p;)u++;for(;u<n.length&&n[u].x>p;)g=n[u++],y[s++].h(g.x,g.y+a);for(n=$i(t,s),p=0;p<s;p++)n[p].assign(y[p]);no(t,y),s=n}if(u=D,p=_,null===v||2>v.length||null===u||2>u.length)a=null;else{for(y=$i(t,v.length+u.length),a=g=n=0;n<v.length&&v[n].x<u[0].x;)E=v[n++],y[a++].h(E.x,E.y);for(;g<u.length;)E=u[g++],y[a++].h(E.x,E.y+p);for(u=u[u.length-1].x;n<v.length&&v[n].x<=u;)n++;for(;n<v.length&&v[n].x>u;)p=v[n++],y[a++].h(p.x,p.y);for(u=$i(t,a),n=0;n<a;n++)u[n].assign(y[n]);no(t,y),a=u}return u=k,c=Math.max(0,_)+c.height,no(t,e),no(t,b),no(t,v),no(t,D),f[0]=s,f[1]=a,new z(_,0,u,c)}function $i(t,e){if(void 0!==(t=t.su[e])&&void 0!==(t=t.pop()))return t;t=[];for(var n=0;n<e;n++)t[n]=new A;return t}function no(t,e){var n=e.length,s=t.su[n];void 0===s&&(t.su[n]=s=[]),s.push(e)}function fc(t,e,n,s){if(null!==e){e.x=n,e.y=s;for(var a=(e=e.children).length,u=0;u<a;u++){var c=e[u];fc(t,c,n+c.U.x,s+c.U.y)}}}function kx(t,e){if(null!==e){t.setPortSpots(e);for(var n=(e=e.children).length,s=0;s<n;s++)kx(t,e[s])}}function io(t){return 45>=(t=t.angle)?0:135>=t?90:225>=t?180:315>=t?270:0}function af(t){var e=io(t);e=90===e||270===e;var n=t.layerSpacing;if(0<t.layerSpacingParentOverlap){var s=Math.min(1,t.layerSpacingParentOverlap);n-=e?t.height*s:t.width*s}return n<(e?-t.height:-t.width)&&(n=e?-t.height:-t.width),n}function Ca(t){var e=io(t),n=t.nodeIndent;if(0<t.nodeIndentPastParent){var s=Math.min(1,t.nodeIndentPastParent);n+=90===e||270===e?t.width*s:t.height*s}return Math.max(0,n)}Yt.className="LayeredDigraphLayout",Yt.CycleDepthFirst=hc,Yt.CycleGreedy=Sy,Yt.CycleFromLayers=rf,Yt.LayerOptimalLinkLength=dg,Yt.LayerLongestPathSink=Ny,Yt.LayerLongestPathSource=ky,Yt.InitDepthFirstOut=fg,Yt.InitDepthFirstIn=Ey,Yt.InitNaive=Py,Yt.AggressiveNone=Dx,Yt.AggressiveLess=Ay,Yt.AggressiveMore=o1,Yt.PackNone=0,Yt.PackExpand=1,Yt.PackStraighten=2,Yt.PackMedian=4,Yt.PackAll=15,zl.className="SegInfo",Wt(Jn,qt),Jn.prototype.createVertex=function(){return new Bu(this)},Jn.prototype.createEdge=function(){return new cc(this)},Jn.className="LayeredDigraphNetwork",Wt(Bu,Pe),Bu.prototype.serializeVertexProperties=function(t,e){Pe.prototype.serializeVertexProperties.call(this,t,e),t.layer=this.layer,t.column=this.column,t.index=this.index,t.component=this.component,t.near=this.near?pn(this.near):null,t.valid=this.valid,t.pg=this.pg,t.finish=this.finish,t.uf=this.uf,t.kk=this.kk,t.jk=this.jk},Bu.prototype.deserializeVertexProperties=function(t,e,n,s){Pe.prototype.deserializeVertexProperties.call(this,t,e,n,s),this.layer=t.layer,this.column=t.column,this.index=t.index,this.component=t.component,(e=e.get(t.near))&&(this.near=e),this.valid=t.valid,this.pg=t.pg,this.finish=t.finish,this.uf=t.uf,this.kk=t.kk,this.jk=t.jk},kt.Object.defineProperties(Bu.prototype,{layer:{get:function(){return this.fi},set:function(t){this.fi!==t&&(this.fi=t)}},column:{get:function(){return this.Cg},set:function(t){this.Cg!==t&&(this.Cg=t)}},index:{get:function(){return this.Ra},set:function(t){this.Ra!==t&&(this.Ra=t)}},component:{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t)}},near:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}}}),Bu.className="LayeredDigraphVertex",Wt(cc,zn),cc.prototype.serializeEdgeProperties=function(t,e){zn.prototype.serializeEdgeProperties.call(this,t,e),t.valid=this.valid,t.rev=this.rev,t.forest=this.forest,t.portFromPos=this.portFromPos,t.portToPos=this.portToPos,t.portFromColOffset=this.portFromColOffset,t.portToColOffset=this.portToColOffset},cc.prototype.deserializeEdgeProperties=function(t,e,n,s){zn.prototype.deserializeEdgeProperties.call(this,t,e,n,s),this.valid=t.valid,this.rev=t.rev,this.forest=t.forest,this.portFromPos=t.portFromPos,this.portToPos=t.portToPos,this.portFromColOffset=t.portFromColOffset,this.portToColOffset=t.portToColOffset},kt.Object.defineProperties(cc.prototype,{fromVertex:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},toVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}},valid:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},rev:{get:function(){return this.Ba},set:function(t){this.Ba!==t&&(this.Ba=t)}},forest:{get:function(){return this.j},set:function(t){this.j!==t&&(this.j=t)}},portFromPos:{get:function(){return this.C},set:function(t){this.C!==t&&(this.C=t)}},portToPos:{get:function(){return this.wa},set:function(t){this.wa!==t&&(this.wa=t)}},portFromColOffset:{get:function(){return this.o},set:function(t){this.o!==t&&(this.o=t)}},portToColOffset:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}}}),cc.className="LayeredDigraphEdge",Wt(Ot,Ht),Ot.prototype.cloneProtected=function(t){Ht.prototype.cloneProtected.call(this,t),t.Mo=this.Mo,t.Fp=this.Fp,t.ur=this.ur,t.jd=this.jd,t.Ib=this.Ib,t.Rd.assign(this.Rd),t.V.copyInheritedPropertiesFrom(this.V),t.W.copyInheritedPropertiesFrom(this.W)},Ot.prototype.gb=function(t){t.classType===Ot?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.arrangement=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.treeStyle=t:q("Unknown enum value: "+t):Ht.prototype.gb.call(this,t)},Ot.prototype.createNetwork=function(){return new yc(this)},Ot.prototype.makeNetwork=function(t){function e(s){if(s instanceof it)return!s.isLinkLabel&&"Comment"!==s.category;if(s instanceof K){var a=s.fromNode;return null!==a&&!a.isLinkLabel&&"Comment"!==a.category&&!(null===(s=s.toNode)||s.isLinkLabel||"Comment"===s.category)}return!1}var n=this.createNetwork();return t instanceof U?(n.ng(t.nodes,!0,e),n.ng(t.links,!0,e)):n.ng(t instanceof _t?t.memberParts:t.iterator,!1,e),n},Ot.prototype.doLayout=function(t){null===this.network&&(this.network=this.makeNetwork(t)),this.arrangement!==Vy&&(this.arrangementOrigin=this.initialOrigin(this.arrangementOrigin));var e=this.diagram;if(null===e&&t instanceof U&&(e=t),this.ld=this.path===pg&&null!==e?e.isTreePathToChildren?xo:pc:this.path===pg?xo:this.path,0<this.network.vertexes.count){for(this.network.Tp(),t=this.network.vertexes.iterator;t.next();)(e=t.value).initialized=!1,e.level=0,e.parent=null,e.children=[];if(0<this.Lb.count){for(t=new nt,e=this.Lb.iterator;e.next();){var n=e.value;n instanceof it?null!==(n=this.network.Ji(n))&&t.add(n):n instanceof ro&&t.add(n)}this.Lb=t}for(0===this.Lb.count&&this.findRoots(),t=this.Lb.copy().iterator;t.next();)(e=t.value).initialized||(e.initialized=!0,Oy(this,e));for(e=this.network.vertexes,t=null;0<(t=Mx(e)).count;)null!==(e=Cx(this,t))&&this.Lb.add(e),e.initialized=!0,Oy(this,e),e=t;for(t=this.Lb.iterator;t.next();)(e=t.value)instanceof ro&&dc(this,e);for(t=this.Lb.iterator;t.next();)(e=t.value)instanceof ro&&Tx(this,e);for(t=this.Lb.iterator;t.next();)(e=t.value)instanceof ro&&a1(this,e);if(this.Du(),this.layerStyle===By){for(t=[],e=this.network.vertexes.iterator;e.next();){var s=(n=e.value).parent;null===s&&(s=n),s=0===s.angle||180===s.angle;var a=t[n.level];void 0===a&&(a=0),t[n.level]=Math.max(a,s?n.width:n.height)}for(e=0;e<t.length;e++)void 0===t[e]&&(t[e]=0);for(this.Dw=t,e=this.network.vertexes.iterator;e.next();)null===(s=(n=e.value).parent)&&(s=n),0===s.angle||180===s.angle?(180===s.angle&&(n.focusX+=t[n.level]-n.width),n.width=t[n.level]):(270===s.angle&&(n.focusY+=t[n.level]-n.height),n.height=t[n.level])}else if(this.layerStyle===f1)for(t=this.network.vertexes.iterator;t.next();){for(n=0===(e=t.value).angle||180===e.angle,s=-1,a=0;a<e.children.length;a++){var u=e.children[a];s=Math.max(s,n?u.width:u.height)}if(0<=s)for(a=0;a<e.children.length;a++)u=e.children[a],n?(180===e.angle&&(u.focusX+=s-u.width),u.width=s):(270===e.angle&&(u.focusY+=s-u.height),u.height=s)}for(t=this.Lb.iterator;t.next();)(e=t.value)instanceof ro&&this.layoutTree(e);this.arrangeTrees(),this.updateParts()}this.network=null,this.Lb=new nt,this.isValidLayout=!0},Ot.prototype.findRoots=function(){for(var t=this.network.vertexes,e=t.iterator;e.next();){var n=e.value;switch(this.ld){case xo:0===n.sourceEdges.count&&this.Lb.add(n);break;case pc:0===n.destinationEdges.count&&this.Lb.add(n);break;default:q("Unhandled path value "+this.ld.toString())}}0===this.Lb.count&&null!==(t=Cx(this,t))&&this.Lb.add(t)},Ot.prototype.removeChild=function(t,e){if(null!==t&&null!==e){for(var n=t.children,s=0,a=0;a<n.length;a++)n[a]===e&&s++;if(0<s){s=Array(n.length-s);for(var u=a=0;u<n.length;u++)n[u]!==e&&(s[a++]=n[u]);t.children=s}}},Ot.prototype.initializeTreeVertexValues=function(t){if(t.copyInheritedPropertiesFrom(function pM(t,e){switch(t.Fp){default:case jy:return null!==e.parent?e.parent:t.V;case h1:return null===e.parent?t.V:null===e.parent.parent?t.W:e.parent;case u1:return null!==e.parent?null!==e.parent.parent?e.parent.parent:t.W:t.V;case l1:var n=!0;if(0===e.childrenCount)n=!1;else for(var s=e.children,a=s.length,u=0;u<a;u++)if(0<s[u].childrenCount){n=!1;break}return n&&null!==e.parent?t.W:null!==e.parent?e.parent:t.V}}(this,t)),null!==t.parent&&t.parent.alignment===ps){for(var e=t.angle,n=t.parent.children,s=0;s<n.length&&t!==n[s];)s++;s%2==0?s!==n.length-1&&(e=90===e?180:180===e?270:270===e?180:270):e=90===e?0:180===e?90:270===e?0:90,t.angle=e}t.initialized=!0},Ot.prototype.assignTreeVertexValues=function(){},Ot.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case gc:break;case P:t.children.reverse();break;case lf:t.children.sort(t.comparer);break;case Kl:t.children.sort(t.comparer),t.children.reverse();break;default:q("Unhandled sorting value "+t.sorting.toString())}},Ot.prototype.Du=function(){if(this.comments)for(var t=this.network.vertexes.iterator;t.next();)this.addComments(t.value)},Ot.prototype.addComments=function(t){var e=t.angle,n=t.parent,s=0,a=!1;null!==n&&(s=n.angle,a=$l(a=n.alignment)),e=90===e||270===e,s=90===s||270===s,n=0===t.childrenCount;var u=0,c=0,f=0,p=t.commentSpacing;if(null!==t.node)for(var g=t.node.Vu();g.next();){var y=g.value;"Comment"===y.category&&y.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(y),y.Ta(),y=y.measuredBounds,e&&!n||!a&&!s&&n||a&&s&&n?(u=Math.max(u,y.width),c+=y.height+Math.abs(f)):(u+=y.width+Math.abs(f),c=Math.max(c,y.height)),f=p)}null!==t.comments&&(e&&!n||!a&&!s&&n||a&&s&&n?(u+=Math.abs(t.commentMargin),c=Math.max(0,c-t.height)):(c+=Math.abs(t.commentMargin),u=Math.max(0,u-t.width)),a=z.allocAt(0,0,t.bounds.width+u,t.bounds.height+c),t.bounds=a,z.free(a))},Ot.prototype.layoutComments=function(t){if(null!==t.comments){var e=t.node.measuredBounds,n=t.parent,s=t.angle,a=0,u=!1;null!==n&&(a=n.angle,u=$l(u=n.alignment)),s=90===s||270===s,n=90===a||270===a;for(var c=0===t.childrenCount,f=Sx(t),p=0,g=t.comments,y=g.length,v=A.alloc(),_=0;_<y;_++){var b=g[_],D=b.measuredBounds;if(s&&!c||!u&&!n&&c||u&&n&&c){if(135<a&&!u||n&&f)if(0<=t.commentMargin)for(v.h(t.bounds.x-t.commentMargin-D.width,t.bounds.y+p),b.move(v),b=b.Gd();b.next();){var k=b.value;k.fromSpot=Bi,k.toSpot=Wn}else for(v.h(t.bounds.x+2*t.focus.x-t.commentMargin,t.bounds.y+p),b.move(v),b=b.Gd();b.next();)(k=b.value).fromSpot=Wn,k.toSpot=Bi;else if(0<=t.commentMargin)for(v.h(t.bounds.x+2*t.focus.x+t.commentMargin,t.bounds.y+p),b.move(v),b=b.Gd();b.next();)(k=b.value).fromSpot=Wn,k.toSpot=Bi;else for(v.h(t.bounds.x+t.commentMargin-D.width,t.bounds.y+p),b.move(v),b=b.Gd();b.next();)(k=b.value).fromSpot=Bi,k.toSpot=Wn;p=0<=t.commentSpacing?p+(D.height+t.commentSpacing):p+(t.commentSpacing-D.height)}else{if(135<a&&!u||!n&&f)if(0<=t.commentMargin)for(v.h(t.bounds.x+p,t.bounds.y-t.commentMargin-D.height),b.move(v),b=b.Gd();b.next();)(k=b.value).fromSpot=yn,k.toSpot=In;else for(v.h(t.bounds.x+p,t.bounds.y+2*t.focus.y-t.commentMargin),b.move(v),b=b.Gd();b.next();)(k=b.value).fromSpot=In,k.toSpot=yn;else if(0<=t.commentMargin)for(v.h(t.bounds.x+p,t.bounds.y+2*t.focus.y+t.commentMargin),b.move(v),b=b.Gd();b.next();)(k=b.value).fromSpot=In,k.toSpot=yn;else for(v.h(t.bounds.x+p,t.bounds.y+t.commentMargin-D.height),b.move(v),b=b.Gd();b.next();)(k=b.value).fromSpot=yn,k.toSpot=In;p=0<=t.commentSpacing?p+(D.width+t.commentSpacing):p+(t.commentSpacing-D.width)}}if(A.free(v),e=p-t.commentSpacing-(s?e.height:e.width),this.ld===xo)for(t=t.destinationEdges;t.next();)null===(a=t.value.link)||a.isAvoiding||(a.fromEndSegmentLength=0<e?e:NaN);else for(t=t.sourceEdges;t.next();)null===(a=t.value.link)||a.isAvoiding||(a.toEndSegmentLength=0<e?e:NaN)}},Ot.prototype.layoutTree=function(t){if(null!==t){for(var e=t.children,n=e.length,s=0;s<n;s++)this.layoutTree(e[s]);switch(t.compaction){case Ly:Iy(this,t);break;case gg:if(t.alignment===ps)Iy(this,t);else if(0===t.childrenCount)n=!1,e=0,null!==(s=t.parent)&&(e=s.angle,n=$l(n=s.alignment)),s=Sx(t),t.U.h(0,0),t.va.h(t.width,t.height),null===t.parent||null===t.comments||(180!==e&&270!==e||n)&&!s?t.fa.h(0,0):180===e&&!n||(90===e||270===e)&&s?t.fa.h(t.width-2*t.focus.x,0):t.fa.h(0,t.height-2*t.focus.y),t.gq=null,t.sq=null;else{var a=io(t);e=90===a||270===a;var u=0,c=t.children,f=c.length;for(n=0;n<f;n++)s=c[n],u=Math.max(u,e?s.va.width:s.va.height);var p=t.alignment,g=p===fs,y=$l(p),v=Math.max(0,t.breadthLimit);n=af(t);var _=t.nodeSpacing,b=Ca(t),D=t.rowSpacing,k=0;(p===ds||g||t.tm||t.um&&1===t.maxGenerationCount)&&(k=Math.max(0,t.rowIndent)),s=t.width;var O=t.height,E=0,R=0,F=0,j=null,L=null,G=0,ot=0,Z=0,ut=0,et=0,Y=0,At=0,Mt=0;if(y&&!sf(p)&&135<a&&c.reverse(),sf(p))if(1<f)for(var Pt=0;Pt<f;Pt++)Pt%2==0&&Pt!==f-1&&(Mt=Math.max(Mt,e?c[Pt].va.width:c[Pt].va.height));else 1===f&&(Mt=e?c[0].va.width:c[0].va.height);if(y){switch(p){case Ta:Mt=(R=135>a?qn(t,c,Mt,E,R):Ma(t,c,Mt,E,R)).x,E=R.width,R=R.height;break;case Sa:for(j=0;j<f;j++)v=(L=c[j]).va,F=0===Y?0:D,e?(L.U.h(u-v.width,ut+F),E=Math.max(E,v.width),R=Math.max(R,ut+F+v.height),ut+=F+v.height):(L.U.h(Z+F,u-v.height),E=Math.max(E,Z+F+v.width),R=Math.max(R,v.height),Z+=F+v.width),Y++;break;case Ys:for(j=0;j<f;j++)u=(L=c[j]).va,v=0===Y?0:D,e?(L.U.h(_/2+t.focus.x,ut+v),E=Math.max(E,u.width),R=Math.max(R,ut+v+u.height),ut+=v+u.height):(L.U.h(Z+v,_/2+t.focus.y),E=Math.max(E,Z+v+u.width),R=Math.max(R,u.height),Z+=v+u.width),Y++}j=$i(this,2),L=$i(this,2),e?(j[0].h(0,0),j[1].h(0,R),L[0].h(E,0)):(j[0].h(0,0),j[1].h(E,0),L[0].h(0,R)),L[1].h(E,R)}else for(Pt=0;Pt<f;Pt++){var ke=c[Pt],un=ke.va;if(e){0<v&&0<Y&&Z+_+un.width>v&&(Z<u&&Wl(t,p,u-Z,0,At,Pt-1),et++,Y=0,At=Pt,F=R,Z=0,ut=135<a?-R-D:R+D),Fy(this,ke,0,ut);var ye=0;if(0===Y)L=ke.sq,G=un.width,ot=un.height,(null===(j=ke.gq)||null===L||a!==io(ke))&&(j=$i(this,2),L=$i(this,2),j[0].h(0,0),j[1].h(0,ot),L[0].h(G,0),L[1].h(G,ot));else{var ve=Lt();ye=(ot=Nx(this,t,ke,j,L,G,ot,ve)).x,j=ve[0],L=ve[1],G=ot.width,ot=ot.height,ee(ve),Z<un.width&&0>ye&&(Gu(t,-ye,0,At,Pt-1),Ry(j,-ye,0),Ry(L,-ye,0),ye=0)}ke.U.h(ye,ut),E=Math.max(E,G),R=Math.max(R,F+(0===et?0:D)+un.height),Z=G}else 0<v&&0<Y&&ut+_+un.height>v&&(ut<u&&Wl(t,p,0,u-ut,At,Pt-1),et++,Y=0,At=Pt,F=E,ut=0,Z=135<a?-E-D:E+D),Fy(this,ke,Z,0),ye=0,0===Y?(L=ke.sq,G=un.width,ot=un.height,(null===(j=ke.gq)||null===L||a!==io(ke))&&(j=$i(this,2),L=$i(this,2),j[0].h(0,0),j[1].h(G,0),L[0].h(0,ot),L[1].h(G,ot))):(ye=(ot=Nx(this,t,ke,j,L,G,ot,ve=Lt())).x,j=ve[0],L=ve[1],G=ot.width,ot=ot.height,ee(ve),ut<un.height&&0>ye&&(Gu(t,0,-ye,At,Pt-1),Ry(j,0,-ye),Ry(L,0,-ye),ye=0)),ke.U.h(Z,ye),R=Math.max(R,ot),E=Math.max(E,F+(0===et?0:D)+un.width),ut=ot;Y++}switch(0<et&&(e?(R+=Math.max(0,n),Z<E&&Wl(t,p,E-Z,0,At,f-1),0<k&&(g||Gu(t,k,0,0,f-1),E+=k)):(E+=Math.max(0,n),ut<R&&Wl(t,p,0,R-ut,At,f-1),0<k&&(g||Gu(t,0,k,0,f-1),R+=k))),k=g=0,p){case mc:e?g+=E/2-t.focus.x-b/2:k+=R/2-t.focus.y-b/2;break;case Uu:0<et?e?g+=E/2-t.focus.x-b/2:k+=R/2-t.focus.y-b/2:e?g+=(Mt=c[0].U.x+c[0].fa.x)+(c[f-1].U.x+c[f-1].fa.x+2*c[f-1].focus.x-Mt)/2-t.focus.x-b/2:k+=(Mt=c[0].U.y+c[0].fa.y)+(c[f-1].U.y+c[f-1].fa.y+2*c[f-1].focus.y-Mt)/2-t.focus.y-b/2;break;case ds:e?(g-=b,E+=b):(k-=b,R+=b);break;case fs:e?(g+=E-t.width+b,E+=b):(k+=R-t.height+b,R+=b);break;case Ta:e?g+=1<f?Mt+_/2-t.focus.x:c[0].focus.x-t.focus.x+c[0].fa.x:k+=1<f?Mt+_/2-t.focus.y:c[0].focus.y-t.focus.y+c[0].fa.y;break;case Sa:e?g+=E+_/2-t.focus.x:k+=R+_/2-t.focus.y;break;case Ys:break;default:q("Unhandled alignment value "+p.toString())}for(b=0;b<f;b++)Mt=c[b],e?Mt.U.h(Mt.U.x+Mt.fa.x-g,Mt.U.y+(135<a?(y?-R:-Mt.va.height)+Mt.fa.y-n:O+n+Mt.fa.y)):Mt.U.h(Mt.U.x+(135<a?(y?-E:-Mt.va.width)+Mt.fa.x-n:s+n+Mt.fa.x),Mt.U.y+Mt.fa.y-k);if(f=c=0,y?e?(E=$s(t,E,g),0>g&&(g=0),135<a&&(k+=R+n),R+=O+n,p===Ys&&(c+=_/2+t.focus.x),f+=O+n):(135<a&&(g+=E+n),E+=s+n,R=hs(t,R,k),0>k&&(k=0),p===Ys&&(f+=_/2+t.focus.y),c+=s+n):e?(null===t.comments?s>E&&(c=(E=cs(p,s-E,0)).x,f=E.y,E=s,g=0):E=$s(t,E,g),0>g&&(c-=g,g=0),135<a&&(k+=R+n),R=Math.max(Math.max(R,O),R+O+n),f+=O+n):(135<a&&(g+=E+n),E=Math.max(Math.max(E,s),E+s+n),null===t.comments?O>R&&(c=(R=cs(p,0,O-R)).x,f=R.y,R=O,k=0):R=hs(t,R,k),0>k&&(f-=k,k=0),c+=s+n),0<et)a=$i(this,4),et=$i(this,4),e?(a[2].h(0,O+n),a[3].h(a[2].x,R),et[2].h(E,a[2].y),et[3].h(et[2].x,a[3].y)):(a[2].h(s+n,0),a[3].h(E,a[2].y),et[2].h(a[2].x,R),et[3].h(a[3].x,et[2].y));else{for(a=$i(this,j.length+2),et=$i(this,L.length+2),p=0;p<j.length;p++)a[p+2].h((y=j[p]).x+c,y.y+f);for(p=0;p<L.length;p++)et[p+2].h((y=L[p]).x+c,y.y+f)}e?(a[0].h(g,0),a[1].h(a[0].x,O),a[2].y<a[1].y&&(a[2].x>a[0].x?a[2].assign(a[1]):a[1].assign(a[2])),a[3].y<a[2].y&&(a[3].x>a[0].x?a[3].assign(a[2]):a[2].assign(a[3])),et[0].h(g+s,0),et[1].h(et[0].x,O),et[2].y<et[1].y&&(et[2].x<et[0].x?et[2].assign(et[1]):et[1].assign(et[2])),et[3].y<et[2].y&&(et[3].x<et[0].x?et[3].assign(et[2]):et[2].assign(et[3])),a[2].y-=n/2,et[2].y-=n/2):(a[0].h(0,k),a[1].h(s,a[0].y),a[2].x<a[1].x&&(a[2].y>a[0].y?a[2].assign(a[1]):a[1].assign(a[2])),a[3].x<a[2].x&&(a[3].y>a[0].y?a[3].assign(a[2]):a[2].assign(a[3])),et[0].h(0,k+O),et[1].h(s,et[0].y),et[2].x<et[1].x&&(et[2].y<et[0].y?et[2].assign(et[1]):et[1].assign(et[2])),et[3].x<et[2].x&&(et[3].y<et[0].y?et[3].assign(et[2]):et[2].assign(et[3])),a[2].x-=n/2,et[2].x-=n/2),no(this,j),no(this,L),t.gq=a,t.sq=et,t.fa.h(g,k),t.va.h(E,R)}break;default:q("Unhandled compaction value "+t.compaction.toString())}}},Ot.prototype.arrangeTrees=function(){if(this.Ib===Vy)for(var t=this.Lb.iterator;t.next();){var e=t.value;if(e instanceof ro){var n=e.node;if(null!==n){var s=n.position;n=s.x,s=s.y,isFinite(n)||(n=0),isFinite(s)||(s=0),fc(this,e,n,s)}}}else{for(t=[],e=this.Lb.iterator;e.next();)(n=e.value)instanceof ro&&t.push(n);switch(this.sorting){case gc:break;case P:t.reverse();break;case lf:t.sort(this.comparer);break;case Kl:t.sort(this.comparer),t.reverse();break;default:q("Unhandled sorting value "+this.sorting.toString())}for(e=(n=this.arrangementOrigin).x,n=n.y,s=0;s<t.length;s++){var a=t[s];switch(fc(this,a,e+a.fa.x,n+a.fa.y),this.Ib){case Hy:n+=a.va.height+this.Rd.height;break;case c1:e+=a.va.width+this.Rd.width;break;default:q("Unhandled arrangement value "+this.Ib.toString())}}}},Ot.prototype.commitLayout=function(){this.Qv(),this.commitNodes(),this.Ju(),this.isRouting&&this.commitLinks()},Ot.prototype.commitNodes=function(){for(var t=this.network.vertexes.iterator;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},Ot.prototype.Ju=function(){if(this.layerStyle===By){for(var t=this.Dw,e=[],n=null,s=this.network.vertexes.iterator;s.next();){var a=s.value;null===n?n=a.bounds.copy():n.Qc(a.bounds);var u=e[a.level];u=void 0===u?af(a):Math.max(u,af(a)),e[a.level]=u}for(s=0;s<e.length;s++)void 0===e[s]&&(e[s]=0);if(90===this.angle||270===this.angle?(n.Jc(this.nodeSpacing/2,this.layerSpacing),s=new A(-this.nodeSpacing/2,-this.layerSpacing/2)):(n.Jc(this.layerSpacing,this.nodeSpacing/2),s=new A(-this.layerSpacing/2,-this.nodeSpacing/2)),a=[],n=90===this.angle||270===this.angle?n.width:n.height,u=0,180===this.angle||270===this.angle)for(var c=0;c<t.length;c++)u+=t[c]+e[c];for(c=0;c<t.length;c++){var f=t[c]+e[c];270===this.angle?a.push(new z(0,u-=f,n,f)):90===this.angle?(a.push(new z(0,u,n,f)),u+=f):180===this.angle?a.push(new z(u-=f,0,f,n)):(a.push(new z(u,0,f,n)),u+=f)}this.commitLayers(a,s)}},Ot.prototype.commitLayers=function(){},Ot.prototype.commitLinks=function(){for(var t=this.network.edges.iterator;t.next();)t.value.commit()},Ot.prototype.Qv=function(){for(var t=this.Lb.iterator;t.next();){var e=t.value;e instanceof ro&&kx(this,e)}},Ot.prototype.setPortSpots=function(t){var e=t.alignment;if($l(e)){var n=this.ld===xo,s=io(t);switch(s){case 0:var a=Wn;break;case 90:a=In;break;case 180:a=Bi;break;default:a=yn}var u=t.children,c=u.length;switch(e){case Ta:case ps:for(e=0;e<c;e++){var f=u[e];if(null!==(f=(n?f.sourceEdges:f.destinationEdges).first())&&null!==(f=f.link)){var p=90===s||270===s?Bi:yn;if(1===c||e===c-1&&c%2==1)switch(s){case 0:p=Bi;break;case 90:p=yn;break;case 180:p=Wn;break;default:p=In}else e%2==0&&(p=90===s||270===s?Wn:In);n?(t.setsPortSpot&&(f.fromSpot=a),t.setsChildPortSpot&&(f.toSpot=p)):(t.setsPortSpot&&(f.fromSpot=p),t.setsChildPortSpot&&(f.toSpot=a))}}break;case Sa:for(s=90===s||270===s?Wn:In,u=n?t.destinationEdges:t.sourceEdges;u.next();)null!==(c=u.value.link)&&(n?(t.setsPortSpot&&(c.fromSpot=a),t.setsChildPortSpot&&(c.toSpot=s)):(t.setsPortSpot&&(c.fromSpot=s),t.setsChildPortSpot&&(c.toSpot=a)));break;case Ys:for(s=90===s||270===s?Bi:yn,u=n?t.destinationEdges:t.sourceEdges;u.next();)null!==(c=u.value.link)&&(n?(t.setsPortSpot&&(c.fromSpot=a),t.setsChildPortSpot&&(c.toSpot=s)):(t.setsPortSpot&&(c.fromSpot=s),t.setsChildPortSpot&&(c.toSpot=a)))}}else if(n=io(t),this.ld===xo){for(a=t.destinationEdges;a.next();)if(null!==(s=a.value.link)){if(t.setsPortSpot)if(t.portSpot.Nb())switch(n){case 0:s.fromSpot=Wn;break;case 90:s.fromSpot=In;break;case 180:s.fromSpot=Bi;break;default:s.fromSpot=yn}else s.fromSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Nb())switch(n){case 0:s.toSpot=Bi;break;case 90:s.toSpot=yn;break;case 180:s.toSpot=Wn;break;default:s.toSpot=In}else s.toSpot=t.childPortSpot}}else for(a=t.sourceEdges;a.next();)if(null!==(s=a.value.link)){if(t.setsPortSpot)if(t.portSpot.Nb())switch(n){case 0:s.toSpot=Wn;break;case 90:s.toSpot=In;break;case 180:s.toSpot=Bi;break;default:s.toSpot=yn}else s.toSpot=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Nb())switch(n){case 0:s.fromSpot=Bi;break;case 90:s.fromSpot=yn;break;case 180:s.fromSpot=Wn;break;default:s.fromSpot=In}else s.fromSpot=t.childPortSpot}},kt.Object.defineProperties(Ot.prototype,{roots:{get:function(){return this.Lb},set:function(t){this.Lb!==t&&(this.Lb=t,this.B())}},path:{get:function(){return this.Mo},set:function(t){this.Mo!==t&&(this.Mo=t,this.B())}},treeStyle:{get:function(){return this.Fp},set:function(t){this.Ib===t||t!==jy&&t!==u1&&t!==l1&&t!==h1||(this.Fp=t,this.B())}},layerStyle:{get:function(){return this.ur},set:function(t){this.Ib===t||t!==d1&&t!==f1&&t!==By||(this.ur=t,this.B())}},comments:{get:function(){return this.jd},set:function(t){this.jd!==t&&(this.jd=t,this.B())}},arrangement:{get:function(){return this.Ib},set:function(t){this.Ib===t||t!==Hy&&t!==c1&&t!==Vy||(this.Ib=t,this.B())}},arrangementSpacing:{get:function(){return this.Rd},set:function(t){this.Rd.A(t)||(this.Rd.assign(t),this.B())}},rootDefaults:{get:function(){return this.V},set:function(t){this.V!==t&&(this.V=t,this.B())}},alternateDefaults:{get:function(){return this.W},set:function(t){this.W!==t&&(this.W=t,this.B())}},sorting:{get:function(){return this.V.sorting},set:function(t){this.V.sorting===t||t!==gc&&t!==P&&t!==lf&&!Kl||(this.V.sorting=t,this.B())}},comparer:{get:function(){return this.V.comparer},set:function(t){this.V.comparer!==t&&(this.V.comparer=t,this.B())}},angle:{get:function(){return this.V.angle},set:function(t){this.V.angle!==t&&(0===t||90===t||180===t||270===t?(this.V.angle=t,this.B()):q("TreeLayout.angle must be 0, 90, 180, or 270"))}},alignment:{get:function(){return this.V.alignment},set:function(t){this.V.alignment!==t&&(this.V.alignment=t,this.B())}},nodeIndent:{get:function(){return this.V.nodeIndent},set:function(t){this.V.nodeIndent!==t&&0<=t&&(this.V.nodeIndent=t,this.B())}},nodeIndentPastParent:{get:function(){return this.V.nodeIndentPastParent},set:function(t){this.V.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.V.nodeIndentPastParent=t,this.B())}},nodeSpacing:{get:function(){return this.V.nodeSpacing},set:function(t){this.V.nodeSpacing!==t&&(this.V.nodeSpacing=t,this.B())}},layerSpacing:{get:function(){return this.V.layerSpacing},set:function(t){this.V.layerSpacing!==t&&(this.V.layerSpacing=t,this.B())}},layerSpacingParentOverlap:{get:function(){return this.V.layerSpacingParentOverlap},set:function(t){this.V.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.V.layerSpacingParentOverlap=t,this.B())}},compaction:{get:function(){return this.V.compaction},set:function(t){this.V.compaction===t||t!==Ly&&t!==gg||(this.V.compaction=t,this.B())}},breadthLimit:{get:function(){return this.V.breadthLimit},set:function(t){this.V.breadthLimit!==t&&0<=t&&(this.V.breadthLimit=t,this.B())}},rowSpacing:{get:function(){return this.V.rowSpacing},set:function(t){this.V.rowSpacing!==t&&(this.V.rowSpacing=t,this.B())}},rowIndent:{get:function(){return this.V.rowIndent},set:function(t){this.V.rowIndent!==t&&0<=t&&(this.V.rowIndent=t,this.B())}},commentSpacing:{get:function(){return this.V.commentSpacing},set:function(t){this.V.commentSpacing!==t&&(this.V.commentSpacing=t,this.B())}},commentMargin:{get:function(){return this.V.commentMargin},set:function(t){this.V.commentMargin!==t&&(this.V.commentMargin=t,this.B())}},setsPortSpot:{get:function(){return this.V.setsPortSpot},set:function(t){this.V.setsPortSpot!==t&&(this.V.setsPortSpot=t,this.B())}},portSpot:{get:function(){return this.V.portSpot},set:function(t){this.V.portSpot.A(t)||(this.V.portSpot=t,this.B())}},setsChildPortSpot:{get:function(){return this.V.setsChildPortSpot},set:function(t){this.V.setsChildPortSpot!==t&&(this.V.setsChildPortSpot=t,this.B())}},childPortSpot:{get:function(){return this.V.childPortSpot},set:function(t){this.V.childPortSpot.A(t)||(this.V.childPortSpot=t,this.B())}},alternateSorting:{get:function(){return this.W.sorting},set:function(t){this.W.sorting===t||t!==gc&&t!==P&&t!==lf&&!Kl||(this.W.sorting=t,this.B())}},alternateComparer:{get:function(){return this.W.comparer},set:function(t){this.W.comparer!==t&&(this.W.comparer=t,this.B())}},alternateAngle:{get:function(){return this.W.angle},set:function(t){this.W.angle===t||0!==t&&90!==t&&180!==t&&270!==t||(this.W.angle=t,this.B())}},alternateAlignment:{get:function(){return this.W.alignment},set:function(t){this.W.alignment!==t&&(this.W.alignment=t,this.B())}},alternateNodeIndent:{get:function(){return this.W.nodeIndent},set:function(t){this.W.nodeIndent!==t&&0<=t&&(this.W.nodeIndent=t,this.B())}},alternateNodeIndentPastParent:{get:function(){return this.W.nodeIndentPastParent},set:function(t){this.W.nodeIndentPastParent!==t&&0<=t&&1>=t&&(this.W.nodeIndentPastParent=t,this.B())}},alternateNodeSpacing:{get:function(){return this.W.nodeSpacing},set:function(t){this.W.nodeSpacing!==t&&(this.W.nodeSpacing=t,this.B())}},alternateLayerSpacing:{get:function(){return this.W.layerSpacing},set:function(t){this.W.layerSpacing!==t&&(this.W.layerSpacing=t,this.B())}},alternateLayerSpacingParentOverlap:{get:function(){return this.W.layerSpacingParentOverlap},set:function(t){this.W.layerSpacingParentOverlap!==t&&0<=t&&1>=t&&(this.W.layerSpacingParentOverlap=t,this.B())}},alternateCompaction:{get:function(){return this.W.compaction},set:function(t){this.W.compaction===t||t!==Ly&&t!==gg||(this.W.compaction=t,this.B())}},alternateBreadthLimit:{get:function(){return this.W.breadthLimit},set:function(t){this.W.breadthLimit!==t&&0<=t&&(this.W.breadthLimit=t,this.B())}},alternateRowSpacing:{get:function(){return this.W.rowSpacing},set:function(t){this.W.rowSpacing!==t&&(this.W.rowSpacing=t,this.B())}},alternateRowIndent:{get:function(){return this.W.rowIndent},set:function(t){this.W.rowIndent!==t&&0<=t&&(this.W.rowIndent=t,this.B())}},alternateCommentSpacing:{get:function(){return this.W.commentSpacing},set:function(t){this.W.commentSpacing!==t&&(this.W.commentSpacing=t,this.B())}},alternateCommentMargin:{get:function(){return this.W.commentMargin},set:function(t){this.W.commentMargin!==t&&(this.W.commentMargin=t,this.B())}},alternateSetsPortSpot:{get:function(){return this.W.setsPortSpot},set:function(t){this.W.setsPortSpot!==t&&(this.W.setsPortSpot=t,this.B())}},alternatePortSpot:{get:function(){return this.W.portSpot},set:function(t){this.W.portSpot.A(t)||(this.W.portSpot=t,this.B())}},alternateSetsChildPortSpot:{get:function(){return this.W.setsChildPortSpot},set:function(t){this.W.setsChildPortSpot!==t&&(this.W.setsChildPortSpot=t,this.B())}},alternateChildPortSpot:{get:function(){return this.W.childPortSpot},set:function(t){this.W.childPortSpot.A(t)||(this.W.childPortSpot=t,this.B())}}});var pg=new Q(Ot,"PathDefault",-1),xo=new Q(Ot,"PathDestination",0),pc=new Q(Ot,"PathSource",1),gc=new Q(Ot,"SortingForwards",10),P=new Q(Ot,"SortingReverse",11),lf=new Q(Ot,"SortingAscending",12),Kl=new Q(Ot,"SortingDescending",13),mc=new Q(Ot,"AlignmentCenterSubtrees",20),Uu=new Q(Ot,"AlignmentCenterChildren",21),ds=new Q(Ot,"AlignmentStart",22),fs=new Q(Ot,"AlignmentEnd",23),Ta=new Q(Ot,"AlignmentBus",24),ps=new Q(Ot,"AlignmentBusBranching",25),Sa=new Q(Ot,"AlignmentTopLeftBus",26),Ys=new Q(Ot,"AlignmentBottomRightBus",27),Ly=new Q(Ot,"CompactionNone",30),gg=new Q(Ot,"CompactionBlock",31),jy=new Q(Ot,"StyleLayered",40),l1=new Q(Ot,"StyleLastParents",41),u1=new Q(Ot,"StyleAlternating",42),h1=new Q(Ot,"StyleRootOnly",43),Hy=new Q(Ot,"ArrangementVertical",50),c1=new Q(Ot,"ArrangementHorizontal",51),Vy=new Q(Ot,"ArrangementFixedRoots",52),d1=new Q(Ot,"LayerIndividual",60),f1=new Q(Ot,"LayerSiblings",61),By=new Q(Ot,"LayerUniform",62);function yc(t){qt.call(this,t)}function ro(t){Pe.call(this,t),this.wa=!1,this.Hb=null,this.C=[],this.Rb=this.Ma=this.L=this.Ba=0,this.jd=null,this.U=new A(0,0),this.va=new Dt(0,0),this.fa=new A(0,0),this.um=this.tm=this.MA=!1,this.sq=this.gq=null,this.$c=gc,this.Sc=my,this.zb=0,this.yb=Uu,this.Cr=this.Br=0,this.Dr=20,this.be=50,this.tr=0,this.Mq=gg,this.Fq=0,this.Mr=25,this.Lq=this.Lr=10,this.Kq=20,this.Rr=!0,this.Ir=Xt,this.Qr=!0,this.Iq=Xt}function uf(t){zn.call(this,t),this.gu=new A(0,0)}Ot.className="TreeLayout",Ot.PathDefault=pg,Ot.PathDestination=xo,Ot.PathSource=pc,Ot.SortingForwards=gc,Ot.SortingReverse=P,Ot.SortingAscending=lf,Ot.SortingDescending=Kl,Ot.AlignmentCenterSubtrees=mc,Ot.AlignmentCenterChildren=Uu,Ot.AlignmentStart=ds,Ot.AlignmentEnd=fs,Ot.AlignmentBus=Ta,Ot.AlignmentBusBranching=ps,Ot.AlignmentTopLeftBus=Sa,Ot.AlignmentBottomRightBus=Ys,Ot.CompactionNone=Ly,Ot.CompactionBlock=gg,Ot.StyleLayered=jy,Ot.StyleLastParents=l1,Ot.StyleAlternating=u1,Ot.StyleRootOnly=h1,Ot.ArrangementVertical=Hy,Ot.ArrangementHorizontal=c1,Ot.ArrangementFixedRoots=Vy,Ot.LayerIndividual=d1,Ot.LayerSiblings=f1,Ot.LayerUniform=By,Wt(yc,qt),yc.prototype.createVertex=function(){return new ro(this)},yc.prototype.createEdge=function(){return new uf(this)},yc.className="TreeNetwork",Wt(ro,Pe),ro.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.$c=t.sorting,this.Sc=t.comparer,this.zb=t.angle,this.yb=t.alignment,this.Br=t.nodeIndent,this.Cr=t.nodeIndentPastParent,this.Dr=t.nodeSpacing,this.be=t.layerSpacing,this.tr=t.layerSpacingParentOverlap,this.Mq=t.compaction,this.Fq=t.breadthLimit,this.Mr=t.rowSpacing,this.Lr=t.rowIndent,this.Lq=t.commentSpacing,this.Kq=t.commentMargin,this.Rr=t.setsPortSpot,this.Ir=t.portSpot,this.Qr=t.setsChildPortSpot,this.Iq=t.childPortSpot)},kt.Object.defineProperties(ro.prototype,{initialized:{get:function(){return this.wa},set:function(t){this.wa!==t&&(this.wa=t)}},parent:{get:function(){return this.Hb},set:function(t){this.Hb!==t&&(this.Hb=t)}},children:{get:function(){return this.C},set:function(t){if(this.C!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.C=t}}},level:{get:function(){return this.Ba},set:function(t){this.Ba!==t&&(this.Ba=t)}},descendantCount:{get:function(){return this.L},set:function(t){this.L!==t&&(this.L=t)}},maxChildrenCount:{get:function(){return this.Ma},set:function(t){this.Ma!==t&&(this.Ma=t)}},maxGenerationCount:{get:function(){return this.Rb},set:function(t){this.Rb!==t&&(this.Rb=t)}},comments:{get:function(){return this.jd},set:function(t){if(this.jd!==t){if(null!==t)for(var e=t.length,n=0;n<e;n++);this.jd=t}}},sorting:{get:function(){return this.$c},set:function(t){this.$c!==t&&(this.$c=t)}},comparer:{get:function(){return this.Sc},set:function(t){this.Sc!==t&&(this.Sc=t)}},angle:{get:function(){return this.zb},set:function(t){this.zb!==t&&(this.zb=t)}},alignment:{get:function(){return this.yb},set:function(t){this.yb!==t&&(this.yb=t)}},nodeIndent:{get:function(){return this.Br},set:function(t){this.Br!==t&&(this.Br=t)}},nodeIndentPastParent:{get:function(){return this.Cr},set:function(t){this.Cr!==t&&(this.Cr=t)}},nodeSpacing:{get:function(){return this.Dr},set:function(t){this.Dr!==t&&(this.Dr=t)}},layerSpacing:{get:function(){return this.be},set:function(t){this.be!==t&&(this.be=t)}},layerSpacingParentOverlap:{get:function(){return this.tr},set:function(t){this.tr!==t&&(this.tr=t)}},compaction:{get:function(){return this.Mq},set:function(t){this.Mq!==t&&(this.Mq=t)}},breadthLimit:{get:function(){return this.Fq},set:function(t){this.Fq!==t&&(this.Fq=t)}},rowSpacing:{get:function(){return this.Mr},set:function(t){this.Mr!==t&&(this.Mr=t)}},rowIndent:{get:function(){return this.Lr},set:function(t){this.Lr!==t&&(this.Lr=t)}},commentSpacing:{get:function(){return this.Lq},set:function(t){this.Lq!==t&&(this.Lq=t)}},commentMargin:{get:function(){return this.Kq},set:function(t){this.Kq!==t&&(this.Kq=t)}},setsPortSpot:{get:function(){return this.Rr},set:function(t){this.Rr!==t&&(this.Rr=t)}},portSpot:{get:function(){return this.Ir},set:function(t){this.Ir.A(t)||(this.Ir=t)}},setsChildPortSpot:{get:function(){return this.Qr},set:function(t){this.Qr!==t&&(this.Qr=t)}},childPortSpot:{get:function(){return this.Iq},set:function(t){this.Iq.A(t)||(this.Iq=t)}},childrenCount:{get:function(){return this.children.length}},relativePosition:{get:function(){return this.U},set:function(t){this.U.set(t)}},subtreeSize:{get:function(){return this.va},set:function(t){this.va.set(t)}},subtreeOffset:{get:function(){return this.fa},set:function(t){this.fa.set(t)}}}),ro.className="TreeVertex",Wt(uf,zn),uf.prototype.commit=function(){var t=this.link;if(null!==t&&!t.isAvoiding){var e=this.network.layout,n=null,s=null;switch(e.ld){case xo:n=this.fromVertex,s=this.toVertex;break;case pc:n=this.toVertex,s=this.fromVertex;break;default:q("Unhandled path value "+e.ld.toString())}if(null!==n&&null!==s)if(0!==(e=this.gu).x||0!==e.y||n.MA){s=n.bounds;var a=io(n),u=af(n),c=n.rowSpacing;t.vg();var g,f=t.curve===pr,p=t.isOrthogonal;if(t.Lh(),p||f){for(g=2;4<t.pointsCount;)t.Iv(2);var y=t.i(1),v=t.i(2)}else{for(g=1;3<t.pointsCount;)t.Iv(1);y=t.i(0),v=t.i(t.pointsCount-1)}var _=t.i(t.pointsCount-1);0===a?(n.alignment===fs?(a=s.bottom+e.y,0===e.y&&y.y>_.y+n.rowIndent&&(a=Math.min(a,Math.max(y.y,a-Ca(n))))):n.alignment===ds?(a=s.top+e.y,0===e.y&&y.y<_.y-n.rowIndent&&(a=Math.max(a,Math.min(y.y,a+Ca(n))))):a=n.tm||n.um&&1===n.maxGenerationCount?s.top-n.fa.y+e.y:s.y+s.height/2+e.y,f?(t.l(g,y.x,a),g++,t.l(g,s.right+u,a),g++,t.l(g,s.right+u+(e.x-c)/3,a),g++,t.l(g,s.right+u+2*(e.x-c)/3,a),g++,t.l(g,s.right+u+(e.x-c),a),g++,t.l(g,v.x,a)):(p&&(t.l(g,s.right+u/2,y.y),g++),t.l(g,s.right+u/2,a),g++,t.l(g,s.right+u+e.x-(p?c/2:c),a),g++,p&&t.l(g,t.i(g-1).x,v.y))):90===a?(n.alignment===fs?(a=s.right+e.x,0===e.x&&y.x>_.x+n.rowIndent&&(a=Math.min(a,Math.max(y.x,a-Ca(n))))):n.alignment===ds?(a=s.left+e.x,0===e.x&&y.x<_.x-n.rowIndent&&(a=Math.max(a,Math.min(y.x,a+Ca(n))))):a=n.tm||n.um&&1===n.maxGenerationCount?s.left-n.fa.x+e.x:s.x+s.width/2+e.x,f?(t.l(g,a,y.y),g++,t.l(g,a,s.bottom+u),g++,t.l(g,a,s.bottom+u+(e.y-c)/3),g++,t.l(g,a,s.bottom+u+2*(e.y-c)/3),g++,t.l(g,a,s.bottom+u+(e.y-c)),g++,t.l(g,a,v.y)):(p&&(t.l(g,y.x,s.bottom+u/2),g++),t.l(g,a,s.bottom+u/2),g++,t.l(g,a,s.bottom+u+e.y-(p?c/2:c)),g++,p&&t.l(g,v.x,t.i(g-1).y))):180===a?(n.alignment===fs?(a=s.bottom+e.y,0===e.y&&y.y>_.y+n.rowIndent&&(a=Math.min(a,Math.max(y.y,a-Ca(n))))):n.alignment===ds?(a=s.top+e.y,0===e.y&&y.y<_.y-n.rowIndent&&(a=Math.max(a,Math.min(y.y,a+Ca(n))))):a=n.tm||n.um&&1===n.maxGenerationCount?s.top-n.fa.y+e.y:s.y+s.height/2+e.y,f?(t.l(g,y.x,a),g++,t.l(g,s.left-u,a),g++,t.l(g,s.left-u+(e.x+c)/3,a),g++,t.l(g,s.left-u+2*(e.x+c)/3,a),g++,t.l(g,s.left-u+(e.x+c),a),g++,t.l(g,v.x,a)):(p&&(t.l(g,s.left-u/2,y.y),g++),t.l(g,s.left-u/2,a),g++,t.l(g,s.left-u+e.x+(p?c/2:c),a),g++,p&&t.l(g,t.i(g-1).x,v.y))):270===a?(n.alignment===fs?(a=s.right+e.x,0===e.x&&y.x>_.x+n.rowIndent&&(a=Math.min(a,Math.max(y.x,a-Ca(n))))):n.alignment===ds?(a=s.left+e.x,0===e.x&&y.x<_.x-n.rowIndent&&(a=Math.max(a,Math.min(y.x,a+Ca(n))))):a=n.tm||n.um&&1===n.maxGenerationCount?s.left-n.fa.x+e.x:s.x+s.width/2+e.x,f?(t.l(g,a,y.y),g++,t.l(g,a,s.top-u),g++,t.l(g,a,s.top-u+(e.y+c)/3),g++,t.l(g,a,s.top-u+2*(e.y+c)/3),g++,t.l(g,a,s.top-u+(e.y+c)),g++,t.l(g,a,v.y)):(p&&(t.l(g,y.x,s.top-u/2),g++),t.l(g,a,s.top-u/2),g++,t.l(g,a,s.top-u+e.y+(p?c/2:c)),g++,p&&t.l(g,v.x,t.i(g-1).y))):q("Invalid angle "+a),t.vf()}else t=this.link,(u=io(n))!==io(s)&&(c=af(n),f=n.bounds,n=s.bounds,0===u&&n.left-f.right<c+1||90===u&&n.top-f.bottom<c+1||180===u&&f.left-n.right<c+1||270===u&&f.top-n.bottom<c+1||(t.vg(),n=t.curve===pr,e=t.isOrthogonal,s=$l(this.fromVertex.alignment),t.Lh(),0===u?(u=f.right+c/2,n?4===t.pointsCount&&(n=t.i(3).y,t.M(1,u-20,t.i(1).y),t.l(2,u-20,n),t.l(3,u,n),t.l(4,u+20,n),t.M(5,t.i(5).x,n)):e?s?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,u,t.i(2).y),t.M(3,u,t.i(3).y)):4===t.pointsCount?t.l(2,u,t.i(2).y):3===t.pointsCount?t.M(1,u,t.i(2).y):2===t.pointsCount&&t.l(1,u,t.i(1).y)):90===u?(u=f.bottom+c/2,n?4===t.pointsCount&&(n=t.i(3).x,t.M(1,t.i(1).x,u-20),t.l(2,n,u-20),t.l(3,n,u),t.l(4,n,u+20),t.M(5,n,t.i(5).y)):e?s?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,t.i(2).x,u),t.M(3,t.i(3).x,u)):4===t.pointsCount?t.l(2,t.i(2).x,u):3===t.pointsCount?t.M(1,t.i(2).x,u):2===t.pointsCount&&t.l(1,t.i(1).x,u)):180===u?(u=f.left-c/2,n?4===t.pointsCount&&(n=t.i(3).y,t.M(1,u+20,t.i(1).y),t.l(2,u+20,n),t.l(3,u,n),t.l(4,u-20,n),t.M(5,t.i(5).x,n)):e?s?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,u,t.i(2).y),t.M(3,u,t.i(3).y)):4===t.pointsCount?t.l(2,u,t.i(2).y):3===t.pointsCount?t.M(1,u,t.i(2).y):2===t.pointsCount&&t.l(1,u,t.i(1).y)):270===u&&(u=f.top-c/2,n?4===t.pointsCount&&(n=t.i(3).x,t.M(1,t.i(1).x,u+20),t.l(2,n,u+20),t.l(3,n,u),t.l(4,n,u-20),t.M(5,n,t.i(5).y)):e?s?t.M(3,t.i(2).x,t.i(4).y):6===t.pointsCount&&(t.M(2,t.i(2).x,u),t.M(3,t.i(3).x,u)):4===t.pointsCount?t.l(2,t.i(2).x,u):3===t.pointsCount?t.M(1,t.i(2).x,u):2===t.pointsCount&&t.l(1,t.i(1).x,u)),t.vf()))}},kt.Object.defineProperties(uf.prototype,{fromVertex:{get:function(){return this.Uc},set:function(t){this.Uc!==t&&(this.Uc=t)}},toVertex:{get:function(){return this.cd},set:function(t){this.cd!==t&&(this.cd=t)}},relativePoint:{get:function(){return this.gu},set:function(t){this.gu.set(t)}}}),uf.className="TreeEdge",be.prototype.initializeStandardTools=function(){this.Za("Action",new Va,this.mouseDownTools),this.Za("Relinking",new $r,this.mouseDownTools),this.Za("LinkReshaping",new Gt,this.mouseDownTools),this.Za("Rotating",new Xi,this.mouseDownTools),this.Za("Resizing",new oi,this.mouseDownTools),this.Za("Linking",new Gi,this.mouseMoveTools),this.Za("Dragging",new Me,this.mouseMoveTools),this.Za("DragSelecting",new co,this.mouseMoveTools),this.Za("Panning",new Rn,this.mouseMoveTools),this.Za("ContextMenu",new si,this.mouseUpTools),this.Za("TextEditing",new le,this.mouseUpTools),this.Za("ClickCreating",new ua,this.mouseUpTools),this.Za("ClickSelecting",new Gf,this.mouseUpTools)},ss("Horizontal",new Dm),ss("Spot",new bm),ss("Table",new Cm),ss("Viewbox",new Sm),ss("TableRow",new Tm),ss("TableColumn",new xp),ss("Graduated",new Mp),ss("Grid",new Dp),ap.add("GraphLinksModel",vn),ap.add("TreeModel",gr),jv(fn,null),jv(Yt,null);var Gy=gt.go,Uy={get licenseKey(){return U.licenseKey},set licenseKey(t){U.licenseKey=t},get version(){return U.version},Group:_t,EnumValue:Q,List:st,Set:nt,Map:xt,Point:A,Size:Dt,Rect:z,Margin:Ct,Spot:pt,Geometry:rt,PathFigure:ii,PathSegment:Zt,InputEvent:or,DiagramEvent:bl,ChangedEvent:Ne,Model:ct,GraphLinksModel:vt,TreeModel:li,Binding:Ae,Transaction:_e,UndoManager:Re,CommandHandler:Qt,Tool:zt,DraggingTool:Me,DraggingInfo:El,DraggingOptions:_d,LinkingBaseTool:Bn,LinkingTool:Gi,RelinkingTool:$r,LinkReshapingTool:Gt,ResizingTool:oi,RotatingTool:Xi,ClickSelectingTool:Gf,ActionTool:Va,ClickCreatingTool:ua,HTMLInfo:sr,ContextMenuTool:si,DragSelectingTool:co,PanningTool:Rn,TextEditingTool:le,ToolManager:be,Animation:yi,AnimationManager:Mr,AnimationTrigger:Cr,Layer:Kn,Diagram:U,Palette:ym,Overview:ts,Brush:jt,GraphObject:dt,Panel:W,RowColumnDefinition:en,Shape:bt,TextBlock:Jt,Picture:zi,Part:ft,Adornment:Rt,Node:it,Link:K,Placeholder:Pn,Layout:Ht,LayoutNetwork:qt,LayoutVertex:Pe,LayoutEdge:zn,GridLayout:Tn,PanelLayout:Ke,CircularLayout:ge,CircularNetwork:ag,CircularVertex:lg,CircularEdge:My,ForceDirectedLayout:fn,ForceDirectedNetwork:Hu,ForceDirectedVertex:ac,ForceDirectedEdge:Vu,LayeredDigraphLayout:Yt,LayeredDigraphNetwork:Jn,LayeredDigraphVertex:Bu,LayeredDigraphEdge:cc,TreeLayout:Ot,TreeNetwork:yc,TreeVertex:ro,TreeEdge:uf};"object"==typeof Gy&&Gy.version&&q("WARNING: a `go` object on the root object is already defined.  "+("Debug"in Gy?"debug ":"")+"version: "+Gy.version+", replaced with version: "+Uy.version),U.prototype.go=Uy,gt.go=Uy,(void 0===gt||void 0===gt.module||"object"!=typeof gt.module.exports)&&gt.define&&"function"==typeof gt.define&&gt.define.amd&&gt.define(Uy),"object"==typeof Xc.exports&&(Xc.exports="undefined"!=typeof global?global.go:self.go)}();const mt="undefined"!=typeof global?global.go:self.go,gw=mt.Map,mw=mt.Point,yw=mt.Size,Gg=mt.Margin,vw=mt.Spot,ob=mt.GraphLinksModel,M0=mt.TreeModel,sb=mt.Binding,ub=mt.ClickCreatingTool,Mw=mt.Diagram,JT=mt.Palette,qT=mt.Overview,QT=mt.GraphObject,db=mt.Panel,tS=mt.RowColumnDefinition,Cw=mt.Shape,eS=mt.TextBlock,pb=mt.Picture,nS=mt.Part,iS=mt.Node,rh=mt.Link,Vr=mt.TreeLayout}},Xc=>{Xc(Xc.s=18)}]);